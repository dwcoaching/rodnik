const Tm="modulepreload",uh={},Lm="/build/",Mm=function(e,t){return!t||t.length===0?e():Promise.all(t.map(i=>{if(i=`${Lm}${i}`,i in uh)return;uh[i]=!0;const r=i.endsWith(".css"),s=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${s}`))return;const o=document.createElement("link");if(o.rel=r?"stylesheet":Tm,r||(o.as="script",o.crossOrigin=""),o.href=i,document.head.appendChild(o),r)return new Promise((a,l)=>{o.addEventListener("load",a),o.addEventListener("error",()=>l(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e())};var Om=Object.create,Vd=Object.defineProperty,Pm=Object.getOwnPropertyDescriptor,Zd=Object.getOwnPropertyNames,Fm=Object.getPrototypeOf,Dm=Object.prototype.hasOwnProperty,_n=(n,e)=>function(){return e||(0,n[Zd(n)[0]])((e={exports:{}}).exports,e),e.exports},km=(n,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of Zd(e))!Dm.call(n,r)&&r!==t&&Vd(n,r,{get:()=>e[r],enumerable:!(i=Pm(e,r))||i.enumerable});return n},vt=(n,e,t)=>(t=n!=null?Om(Fm(n)):{},km(e||!n||!n.__esModule?Vd(t,"default",{value:n,enumerable:!0}):t,n)),Gt=_n({"../alpine/packages/alpinejs/dist/module.cjs.js"(n,e){var t=Object.create,i=Object.defineProperty,r=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,o=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty,l=(h,g)=>function(){return g||(0,h[s(h)[0]])((g={exports:{}}).exports,g),g.exports},c=(h,g)=>{for(var A in g)i(h,A,{get:g[A],enumerable:!0})},u=(h,g,A,I)=>{if(g&&typeof g=="object"||typeof g=="function")for(let M of s(g))!a.call(h,M)&&M!==A&&i(h,M,{get:()=>g[M],enumerable:!(I=r(g,M))||I.enumerable});return h},d=(h,g,A)=>(A=h!=null?t(o(h)):{},u(g||!h||!h.__esModule?i(A,"default",{value:h,enumerable:!0}):A,h)),f=h=>u(i({},"__esModule",{value:!0}),h),_=l({"node_modules/@vue/shared/dist/shared.cjs.js"(h){Object.defineProperty(h,"__esModule",{value:!0});function g(z,ge){const we=Object.create(null),Me=z.split(",");for(let at=0;at<Me.length;at++)we[Me[at]]=!0;return ge?at=>!!we[at.toLowerCase()]:at=>!!we[at]}var A={[1]:"TEXT",[2]:"CLASS",[4]:"STYLE",[8]:"PROPS",[16]:"FULL_PROPS",[32]:"HYDRATE_EVENTS",[64]:"STABLE_FRAGMENT",[128]:"KEYED_FRAGMENT",[256]:"UNKEYED_FRAGMENT",[512]:"NEED_PATCH",[1024]:"DYNAMIC_SLOTS",[2048]:"DEV_ROOT_FRAGMENT",[-1]:"HOISTED",[-2]:"BAIL"},I={[1]:"STABLE",[2]:"DYNAMIC",[3]:"FORWARDED"},M="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt",T=g(M),k=2;function W(z,ge=0,we=z.length){let Me=z.split(/(\r?\n)/);const at=Me.filter((qt,Ot)=>Ot%2===1);Me=Me.filter((qt,Ot)=>Ot%2===0);let xt=0;const $t=[];for(let qt=0;qt<Me.length;qt++)if(xt+=Me[qt].length+(at[qt]&&at[qt].length||0),xt>=ge){for(let Ot=qt-k;Ot<=qt+k||we>xt;Ot++){if(Ot<0||Ot>=Me.length)continue;const ws=Ot+1;$t.push(`${ws}${" ".repeat(Math.max(3-String(ws).length,0))}|  ${Me[Ot]}`);const Tr=Me[Ot].length,Ro=at[Ot]&&at[Ot].length||0;if(Ot===qt){const Lr=ge-(xt-(Tr+Ro)),yl=Math.max(1,we>xt?Tr-Lr:we-ge);$t.push("   |  "+" ".repeat(Lr)+"^".repeat(yl))}else if(Ot>qt){if(we>xt){const Lr=Math.max(Math.min(we-xt,Tr),1);$t.push("   |  "+"^".repeat(Lr))}xt+=Tr+Ro}}break}return $t.join(`
`)}var ae="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ve=g(ae),qe=g(ae+",async,autofocus,autoplay,controls,default,defer,disabled,hidden,loop,open,required,reversed,scoped,seamless,checked,muted,multiple,selected"),wt=/[>/="'\u0009\u000a\u000c\u0020]/,Je={};function yt(z){if(Je.hasOwnProperty(z))return Je[z];const ge=wt.test(z);return ge&&console.error(`unsafe attribute name: ${z}`),Je[z]=!ge}var fi={acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},Xi=g("animation-iteration-count,border-image-outset,border-image-slice,border-image-width,box-flex,box-flex-group,box-ordinal-group,column-count,columns,flex,flex-grow,flex-positive,flex-shrink,flex-negative,flex-order,grid-row,grid-row-end,grid-row-span,grid-row-start,grid-column,grid-column-end,grid-column-span,grid-column-start,font-weight,line-clamp,line-height,opacity,order,orphans,tab-size,widows,z-index,zoom,fill-opacity,flood-opacity,stop-opacity,stroke-dasharray,stroke-dashoffset,stroke-miterlimit,stroke-opacity,stroke-width"),ke=g("accept,accept-charset,accesskey,action,align,allow,alt,async,autocapitalize,autocomplete,autofocus,autoplay,background,bgcolor,border,buffered,capture,challenge,charset,checked,cite,class,code,codebase,color,cols,colspan,content,contenteditable,contextmenu,controls,coords,crossorigin,csp,data,datetime,decoding,default,defer,dir,dirname,disabled,download,draggable,dropzone,enctype,enterkeyhint,for,form,formaction,formenctype,formmethod,formnovalidate,formtarget,headers,height,hidden,high,href,hreflang,http-equiv,icon,id,importance,integrity,ismap,itemprop,keytype,kind,label,lang,language,loading,list,loop,low,manifest,max,maxlength,minlength,media,min,multiple,muted,name,novalidate,open,optimum,pattern,ping,placeholder,poster,preload,radiogroup,readonly,referrerpolicy,rel,required,reversed,rows,rowspan,sandbox,scope,scoped,selected,shape,size,sizes,slot,span,spellcheck,src,srcdoc,srclang,srcset,start,step,style,summary,tabindex,target,title,translate,type,usemap,value,width,wrap");function ot(z){if(Ri(z)){const ge={};for(let we=0;we<z.length;we++){const Me=z[we],at=ot(Xn(Me)?Zt(Me):Me);if(at)for(const xt in at)ge[xt]=at[xt]}return ge}else if(Qi(z))return z}var $e=/;(?![^(]*\))/g,ut=/:(.+)/;function Zt(z){const ge={};return z.split($e).forEach(we=>{if(we){const Me=we.split(ut);Me.length>1&&(ge[Me[0].trim()]=Me[1].trim())}}),ge}function Si(z){let ge="";if(!z)return ge;for(const we in z){const Me=z[we],at=we.startsWith("--")?we:Io(we);(Xn(Me)||typeof Me=="number"&&Xi(at))&&(ge+=`${at}:${Me};`)}return ge}function Hi(z){let ge="";if(Xn(z))ge=z;else if(Ri(z))for(let we=0;we<z.length;we++){const Me=Hi(z[we]);Me&&(ge+=Me+" ")}else if(Qi(z))for(const we in z)z[we]&&(ge+=we+" ");return ge.trim()}var _r="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",ds="svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistanceLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view",fs="area,base,br,col,embed,hr,img,input,link,meta,param,source,track,wbr",yr=g(_r),ol=g(ds),vr=g(fs),al=/["'&<>]/;function ll(z){const ge=""+z,we=al.exec(ge);if(!we)return ge;let Me="",at,xt,$t=0;for(xt=we.index;xt<ge.length;xt++){switch(ge.charCodeAt(xt)){case 34:at="&quot;";break;case 38:at="&amp;";break;case 39:at="&#39;";break;case 60:at="&lt;";break;case 62:at="&gt;";break;default:continue}$t!==xt&&(Me+=ge.substring($t,xt)),$t=xt+1,Me+=at}return $t!==xt?Me+ge.substring($t,xt):Me}var fo=/^-?>|<!--|-->|--!>|<!-$/g;function cl(z){return z.replace(fo,"")}function ul(z,ge){if(z.length!==ge.length)return!1;let we=!0;for(let Me=0;we&&Me<z.length;Me++)we=wr(z[Me],ge[Me]);return we}function wr(z,ge){if(z===ge)return!0;let we=_s(z),Me=_s(ge);if(we||Me)return we&&Me?z.getTime()===ge.getTime():!1;if(we=Ri(z),Me=Ri(ge),we||Me)return we&&Me?ul(z,ge):!1;if(we=Qi(z),Me=Qi(ge),we||Me){if(!we||!Me)return!1;const at=Object.keys(z).length,xt=Object.keys(ge).length;if(at!==xt)return!1;for(const $t in z){const qt=z.hasOwnProperty($t),Ot=ge.hasOwnProperty($t);if(qt&&!Ot||!qt&&Ot||!wr(z[$t],ge[$t]))return!1}}return String(z)===String(ge)}function go(z,ge){return z.findIndex(we=>wr(we,ge))}var po=z=>z==null?"":Qi(z)?JSON.stringify(z,hl,2):String(z),hl=(z,ge)=>Yn(ge)?{[`Map(${ge.size})`]:[...ge.entries()].reduce((we,[Me,at])=>(we[`${Me} =>`]=at,we),{})}:Ti(ge)?{[`Set(${ge.size})`]:[...ge.values()]}:Qi(ge)&&!Ri(ge)&&!Ao(ge)?String(ge):ge,dl=["bigInt","optionalChaining","nullishCoalescingOperator"],gs=Object.freeze({}),ps=Object.freeze([]),ms=()=>{},Ar=()=>!1,xr=/^on[^a-z]/,Er=z=>xr.test(z),br=z=>z.startsWith("onUpdate:"),mo=Object.assign,_o=(z,ge)=>{const we=z.indexOf(ge);we>-1&&z.splice(we,1)},yo=Object.prototype.hasOwnProperty,vo=(z,ge)=>yo.call(z,ge),Ri=Array.isArray,Yn=z=>Hn(z)==="[object Map]",Ti=z=>Hn(z)==="[object Set]",_s=z=>z instanceof Date,ys=z=>typeof z=="function",Xn=z=>typeof z=="string",fl=z=>typeof z=="symbol",Qi=z=>z!==null&&typeof z=="object",Cr=z=>Qi(z)&&ys(z.then)&&ys(z.catch),wo=Object.prototype.toString,Hn=z=>wo.call(z),gl=z=>Hn(z).slice(8,-1),Ao=z=>Hn(z)==="[object Object]",xo=z=>Xn(z)&&z!=="NaN"&&z[0]!=="-"&&""+parseInt(z,10)===z,Eo=g(",key,ref,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Qn=z=>{const ge=Object.create(null);return we=>ge[we]||(ge[we]=z(we))},bo=/-(\w)/g,Co=Qn(z=>z.replace(bo,(ge,we)=>we?we.toUpperCase():"")),pl=/\B([A-Z])/g,Io=Qn(z=>z.replace(pl,"-$1").toLowerCase()),Kn=Qn(z=>z.charAt(0).toUpperCase()+z.slice(1)),ml=Qn(z=>z?`on${Kn(z)}`:""),vs=(z,ge)=>z!==ge&&(z===z||ge===ge),_l=(z,ge)=>{for(let we=0;we<z.length;we++)z[we](ge)},Ir=(z,ge,we)=>{Object.defineProperty(z,ge,{configurable:!0,enumerable:!1,value:we})},Sr=z=>{const ge=parseFloat(z);return isNaN(ge)?z:ge},Rr,So=()=>Rr||(Rr=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});h.EMPTY_ARR=ps,h.EMPTY_OBJ=gs,h.NO=Ar,h.NOOP=ms,h.PatchFlagNames=A,h.babelParserDefaultPlugins=dl,h.camelize=Co,h.capitalize=Kn,h.def=Ir,h.escapeHtml=ll,h.escapeHtmlComment=cl,h.extend=mo,h.generateCodeFrame=W,h.getGlobalThis=So,h.hasChanged=vs,h.hasOwn=vo,h.hyphenate=Io,h.invokeArrayFns=_l,h.isArray=Ri,h.isBooleanAttr=qe,h.isDate=_s,h.isFunction=ys,h.isGloballyWhitelisted=T,h.isHTMLTag=yr,h.isIntegerKey=xo,h.isKnownAttr=ke,h.isMap=Yn,h.isModelListener=br,h.isNoUnitNumericStyleProp=Xi,h.isObject=Qi,h.isOn=Er,h.isPlainObject=Ao,h.isPromise=Cr,h.isReservedProp=Eo,h.isSSRSafeAttrName=yt,h.isSVGTag=ol,h.isSet=Ti,h.isSpecialBooleanAttr=ve,h.isString=Xn,h.isSymbol=fl,h.isVoidTag=vr,h.looseEqual=wr,h.looseIndexOf=go,h.makeMap=g,h.normalizeClass=Hi,h.normalizeStyle=ot,h.objectToString=wo,h.parseStringStyle=Zt,h.propsToAttrMap=fi,h.remove=_o,h.slotFlagsText=I,h.stringifyStyle=Si,h.toDisplayString=po,h.toHandlerKey=ml,h.toNumber=Sr,h.toRawType=gl,h.toTypeString=Hn}}),p=l({"node_modules/@vue/shared/index.js"(h,g){g.exports=_()}}),m=l({"node_modules/@vue/reactivity/dist/reactivity.cjs.js"(h){Object.defineProperty(h,"__esModule",{value:!0});var g=p(),A=new WeakMap,I=[],M,T=Symbol("iterate"),k=Symbol("Map key iterate");function W(b){return b&&b._isEffect===!0}function ae(b,Z=g.EMPTY_OBJ){W(b)&&(b=b.raw);const te=wt(b,Z);return Z.lazy||te(),te}function ve(b){b.active&&(Je(b),b.options.onStop&&b.options.onStop(),b.active=!1)}var qe=0;function wt(b,Z){const te=function(){if(!te.active)return b();if(!I.includes(te)){Je(te);try{return ke(),I.push(te),M=te,b()}finally{I.pop(),ot(),M=I[I.length-1]}}};return te.id=qe++,te.allowRecurse=!!Z.allowRecurse,te._isEffect=!0,te.active=!0,te.raw=b,te.deps=[],te.options=Z,te}function Je(b){const{deps:Z}=b;if(Z.length){for(let te=0;te<Z.length;te++)Z[te].delete(b);Z.length=0}}var yt=!0,fi=[];function Xi(){fi.push(yt),yt=!1}function ke(){fi.push(yt),yt=!0}function ot(){const b=fi.pop();yt=b===void 0?!0:b}function $e(b,Z,te){if(!yt||M===void 0)return;let Ce=A.get(b);Ce||A.set(b,Ce=new Map);let me=Ce.get(te);me||Ce.set(te,me=new Set),me.has(M)||(me.add(M),M.deps.push(me),M.options.onTrack&&M.options.onTrack({effect:M,target:b,type:Z,key:te}))}function ut(b,Z,te,Ce,me,Oe){const Ke=A.get(b);if(!Ke)return;const Ct=new Set,Jt=jt=>{jt&&jt.forEach(Li=>{(Li!==M||Li.allowRecurse)&&Ct.add(Li)})};if(Z==="clear")Ke.forEach(Jt);else if(te==="length"&&g.isArray(b))Ke.forEach((jt,Li)=>{(Li==="length"||Li>=Ce)&&Jt(jt)});else switch(te!==void 0&&Jt(Ke.get(te)),Z){case"add":g.isArray(b)?g.isIntegerKey(te)&&Jt(Ke.get("length")):(Jt(Ke.get(T)),g.isMap(b)&&Jt(Ke.get(k)));break;case"delete":g.isArray(b)||(Jt(Ke.get(T)),g.isMap(b)&&Jt(Ke.get(k)));break;case"set":g.isMap(b)&&Jt(Ke.get(T));break}const As=jt=>{jt.options.onTrigger&&jt.options.onTrigger({effect:jt,target:b,key:te,type:Z,newValue:Ce,oldValue:me,oldTarget:Oe}),jt.options.scheduler?jt.options.scheduler(jt):jt()};Ct.forEach(As)}var Zt=g.makeMap("__proto__,__v_isRef,__isVue"),Si=new Set(Object.getOwnPropertyNames(Symbol).map(b=>Symbol[b]).filter(g.isSymbol)),Hi=vr(),_r=vr(!1,!0),ds=vr(!0),fs=vr(!0,!0),yr=ol();function ol(){const b={};return["includes","indexOf","lastIndexOf"].forEach(Z=>{b[Z]=function(...te){const Ce=z(this);for(let Oe=0,Ke=this.length;Oe<Ke;Oe++)$e(Ce,"get",Oe+"");const me=Ce[Z](...te);return me===-1||me===!1?Ce[Z](...te.map(z)):me}}),["push","pop","shift","unshift","splice"].forEach(Z=>{b[Z]=function(...te){Xi();const Ce=z(this)[Z].apply(this,te);return ot(),Ce}}),b}function vr(b=!1,Z=!1){return function(Ce,me,Oe){if(me==="__v_isReactive")return!b;if(me==="__v_isReadonly")return b;if(me==="__v_raw"&&Oe===(b?Z?Co:bo:Z?Qn:Eo).get(Ce))return Ce;const Ke=g.isArray(Ce);if(!b&&Ke&&g.hasOwn(yr,me))return Reflect.get(yr,me,Oe);const Ct=Reflect.get(Ce,me,Oe);return(g.isSymbol(me)?Si.has(me):Zt(me))||(b||$e(Ce,"get",me),Z)?Ct:Me(Ct)?!Ke||!g.isIntegerKey(me)?Ct.value:Ct:g.isObject(Ct)?b?vs(Ct):Kn(Ct):Ct}}var al=fo(),ll=fo(!0);function fo(b=!1){return function(te,Ce,me,Oe){let Ke=te[Ce];if(!b&&(me=z(me),Ke=z(Ke),!g.isArray(te)&&Me(Ke)&&!Me(me)))return Ke.value=me,!0;const Ct=g.isArray(te)&&g.isIntegerKey(Ce)?Number(Ce)<te.length:g.hasOwn(te,Ce),Jt=Reflect.set(te,Ce,me,Oe);return te===z(Oe)&&(Ct?g.hasChanged(me,Ke)&&ut(te,"set",Ce,me,Ke):ut(te,"add",Ce,me)),Jt}}function cl(b,Z){const te=g.hasOwn(b,Z),Ce=b[Z],me=Reflect.deleteProperty(b,Z);return me&&te&&ut(b,"delete",Z,void 0,Ce),me}function ul(b,Z){const te=Reflect.has(b,Z);return(!g.isSymbol(Z)||!Si.has(Z))&&$e(b,"has",Z),te}function wr(b){return $e(b,"iterate",g.isArray(b)?"length":T),Reflect.ownKeys(b)}var go={get:Hi,set:al,deleteProperty:cl,has:ul,ownKeys:wr},po={get:ds,set(b,Z){return console.warn(`Set operation on key "${String(Z)}" failed: target is readonly.`,b),!0},deleteProperty(b,Z){return console.warn(`Delete operation on key "${String(Z)}" failed: target is readonly.`,b),!0}},hl=g.extend({},go,{get:_r,set:ll}),dl=g.extend({},po,{get:fs}),gs=b=>g.isObject(b)?Kn(b):b,ps=b=>g.isObject(b)?vs(b):b,ms=b=>b,Ar=b=>Reflect.getPrototypeOf(b);function xr(b,Z,te=!1,Ce=!1){b=b.__v_raw;const me=z(b),Oe=z(Z);Z!==Oe&&!te&&$e(me,"get",Z),!te&&$e(me,"get",Oe);const{has:Ke}=Ar(me),Ct=Ce?ms:te?ps:gs;if(Ke.call(me,Z))return Ct(b.get(Z));if(Ke.call(me,Oe))return Ct(b.get(Oe));b!==me&&b.get(Z)}function Er(b,Z=!1){const te=this.__v_raw,Ce=z(te),me=z(b);return b!==me&&!Z&&$e(Ce,"has",b),!Z&&$e(Ce,"has",me),b===me?te.has(b):te.has(b)||te.has(me)}function br(b,Z=!1){return b=b.__v_raw,!Z&&$e(z(b),"iterate",T),Reflect.get(b,"size",b)}function mo(b){b=z(b);const Z=z(this);return Ar(Z).has.call(Z,b)||(Z.add(b),ut(Z,"add",b,b)),this}function _o(b,Z){Z=z(Z);const te=z(this),{has:Ce,get:me}=Ar(te);let Oe=Ce.call(te,b);Oe?xo(te,Ce,b):(b=z(b),Oe=Ce.call(te,b));const Ke=me.call(te,b);return te.set(b,Z),Oe?g.hasChanged(Z,Ke)&&ut(te,"set",b,Z,Ke):ut(te,"add",b,Z),this}function yo(b){const Z=z(this),{has:te,get:Ce}=Ar(Z);let me=te.call(Z,b);me?xo(Z,te,b):(b=z(b),me=te.call(Z,b));const Oe=Ce?Ce.call(Z,b):void 0,Ke=Z.delete(b);return me&&ut(Z,"delete",b,void 0,Oe),Ke}function vo(){const b=z(this),Z=b.size!==0,te=g.isMap(b)?new Map(b):new Set(b),Ce=b.clear();return Z&&ut(b,"clear",void 0,void 0,te),Ce}function Ri(b,Z){return function(Ce,me){const Oe=this,Ke=Oe.__v_raw,Ct=z(Ke),Jt=Z?ms:b?ps:gs;return!b&&$e(Ct,"iterate",T),Ke.forEach((As,jt)=>Ce.call(me,Jt(As),Jt(jt),Oe))}}function Yn(b,Z,te){return function(...Ce){const me=this.__v_raw,Oe=z(me),Ke=g.isMap(Oe),Ct=b==="entries"||b===Symbol.iterator&&Ke,Jt=b==="keys"&&Ke,As=me[b](...Ce),jt=te?ms:Z?ps:gs;return!Z&&$e(Oe,"iterate",Jt?k:T),{next(){const{value:Li,done:vl}=As.next();return vl?{value:Li,done:vl}:{value:Ct?[jt(Li[0]),jt(Li[1])]:jt(Li),done:vl}},[Symbol.iterator](){return this}}}}function Ti(b){return function(...Z){{const te=Z[0]?`on key "${Z[0]}" `:"";console.warn(`${g.capitalize(b)} operation ${te}failed: target is readonly.`,z(this))}return b==="delete"?!1:this}}function _s(){const b={get(Oe){return xr(this,Oe)},get size(){return br(this)},has:Er,add:mo,set:_o,delete:yo,clear:vo,forEach:Ri(!1,!1)},Z={get(Oe){return xr(this,Oe,!1,!0)},get size(){return br(this)},has:Er,add:mo,set:_o,delete:yo,clear:vo,forEach:Ri(!1,!0)},te={get(Oe){return xr(this,Oe,!0)},get size(){return br(this,!0)},has(Oe){return Er.call(this,Oe,!0)},add:Ti("add"),set:Ti("set"),delete:Ti("delete"),clear:Ti("clear"),forEach:Ri(!0,!1)},Ce={get(Oe){return xr(this,Oe,!0,!0)},get size(){return br(this,!0)},has(Oe){return Er.call(this,Oe,!0)},add:Ti("add"),set:Ti("set"),delete:Ti("delete"),clear:Ti("clear"),forEach:Ri(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(Oe=>{b[Oe]=Yn(Oe,!1,!1),te[Oe]=Yn(Oe,!0,!1),Z[Oe]=Yn(Oe,!1,!0),Ce[Oe]=Yn(Oe,!0,!0)}),[b,te,Z,Ce]}var[ys,Xn,fl,Qi]=_s();function Cr(b,Z){const te=Z?b?Qi:fl:b?Xn:ys;return(Ce,me,Oe)=>me==="__v_isReactive"?!b:me==="__v_isReadonly"?b:me==="__v_raw"?Ce:Reflect.get(g.hasOwn(te,me)&&me in Ce?te:Ce,me,Oe)}var wo={get:Cr(!1,!1)},Hn={get:Cr(!1,!0)},gl={get:Cr(!0,!1)},Ao={get:Cr(!0,!0)};function xo(b,Z,te){const Ce=z(te);if(Ce!==te&&Z.call(b,Ce)){const me=g.toRawType(b);console.warn(`Reactive ${me} contains both the raw and reactive versions of the same object${me==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}var Eo=new WeakMap,Qn=new WeakMap,bo=new WeakMap,Co=new WeakMap;function pl(b){switch(b){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Io(b){return b.__v_skip||!Object.isExtensible(b)?0:pl(g.toRawType(b))}function Kn(b){return b&&b.__v_isReadonly?b:Ir(b,!1,go,wo,Eo)}function ml(b){return Ir(b,!1,hl,Hn,Qn)}function vs(b){return Ir(b,!0,po,gl,bo)}function _l(b){return Ir(b,!0,dl,Ao,Co)}function Ir(b,Z,te,Ce,me){if(!g.isObject(b))return console.warn(`value cannot be made reactive: ${String(b)}`),b;if(b.__v_raw&&!(Z&&b.__v_isReactive))return b;const Oe=me.get(b);if(Oe)return Oe;const Ke=Io(b);if(Ke===0)return b;const Ct=new Proxy(b,Ke===2?Ce:te);return me.set(b,Ct),Ct}function Sr(b){return Rr(b)?Sr(b.__v_raw):!!(b&&b.__v_isReactive)}function Rr(b){return!!(b&&b.__v_isReadonly)}function So(b){return Sr(b)||Rr(b)}function z(b){return b&&z(b.__v_raw)||b}function ge(b){return g.def(b,"__v_skip",!0),b}var we=b=>g.isObject(b)?Kn(b):b;function Me(b){return Boolean(b&&b.__v_isRef===!0)}function at(b){return qt(b)}function xt(b){return qt(b,!0)}var $t=class{constructor(b,Z=!1){this._shallow=Z,this.__v_isRef=!0,this._rawValue=Z?b:z(b),this._value=Z?b:we(b)}get value(){return $e(z(this),"get","value"),this._value}set value(b){b=this._shallow?b:z(b),g.hasChanged(b,this._rawValue)&&(this._rawValue=b,this._value=this._shallow?b:we(b),ut(z(this),"set","value",b))}};function qt(b,Z=!1){return Me(b)?b:new $t(b,Z)}function Ot(b){ut(z(b),"set","value",b.value)}function ws(b){return Me(b)?b.value:b}var Tr={get:(b,Z,te)=>ws(Reflect.get(b,Z,te)),set:(b,Z,te,Ce)=>{const me=b[Z];return Me(me)&&!Me(te)?(me.value=te,!0):Reflect.set(b,Z,te,Ce)}};function Ro(b){return Sr(b)?b:new Proxy(b,Tr)}var Lr=class{constructor(b){this.__v_isRef=!0;const{get:Z,set:te}=b(()=>$e(this,"get","value"),()=>ut(this,"set","value"));this._get=Z,this._set=te}get value(){return this._get()}set value(b){this._set(b)}};function yl(b){return new Lr(b)}function Cm(b){So(b)||console.warn("toRefs() expects a reactive object but received a plain one.");const Z=g.isArray(b)?new Array(b.length):{};for(const te in b)Z[te]=ch(b,te);return Z}var Im=class{constructor(b,Z){this._object=b,this._key=Z,this.__v_isRef=!0}get value(){return this._object[this._key]}set value(b){this._object[this._key]=b}};function ch(b,Z){return Me(b[Z])?b[Z]:new Im(b,Z)}var Sm=class{constructor(b,Z,te){this._setter=Z,this._dirty=!0,this.__v_isRef=!0,this.effect=ae(b,{lazy:!0,scheduler:()=>{this._dirty||(this._dirty=!0,ut(z(this),"set","value"))}}),this.__v_isReadonly=te}get value(){const b=z(this);return b._dirty&&(b._value=this.effect(),b._dirty=!1),$e(b,"get","value"),b._value}set value(b){this._setter(b)}};function Rm(b){let Z,te;return g.isFunction(b)?(Z=b,te=()=>{console.warn("Write operation failed: computed value is readonly")}):(Z=b.get,te=b.set),new Sm(Z,te,g.isFunction(b)||!b.set)}h.ITERATE_KEY=T,h.computed=Rm,h.customRef=yl,h.effect=ae,h.enableTracking=ke,h.isProxy=So,h.isReactive=Sr,h.isReadonly=Rr,h.isRef=Me,h.markRaw=ge,h.pauseTracking=Xi,h.proxyRefs=Ro,h.reactive=Kn,h.readonly=vs,h.ref=at,h.resetTracking=ot,h.shallowReactive=ml,h.shallowReadonly=_l,h.shallowRef=xt,h.stop=ve,h.toRaw=z,h.toRef=ch,h.toRefs=Cm,h.track=$e,h.trigger=ut,h.triggerRef=Ot,h.unref=ws}}),y=l({"node_modules/@vue/reactivity/index.js"(h,g){g.exports=m()}}),v={};c(v,{default:()=>bm}),e.exports=f(v);var w=!1,x=!1,E=[],O=-1;function L(h){R(h)}function R(h){E.includes(h)||E.push(h),B()}function S(h){let g=E.indexOf(h);g!==-1&&g>O&&E.splice(g,1)}function B(){!x&&!w&&(w=!0,queueMicrotask(U))}function U(){w=!1,x=!0;for(let h=0;h<E.length;h++)E[h](),O=h;E.length=0,O=-1,x=!1}var j,X,K,Ae,ee=!0;function F(h){ee=!1,h(),ee=!0}function N(h){j=h.reactive,K=h.release,X=g=>h.effect(g,{scheduler:A=>{ee?L(A):A()}}),Ae=h.raw}function G(h){X=h}function V(h){let g=()=>{};return[I=>{let M=X(I);return h._x_effects||(h._x_effects=new Set,h._x_runEffects=()=>{h._x_effects.forEach(T=>T())}),h._x_effects.add(M),g=()=>{M!==void 0&&(h._x_effects.delete(M),K(M))},M},()=>{g()}]}function H(h,g,A={}){h.dispatchEvent(new CustomEvent(g,{detail:A,bubbles:!0,composed:!0,cancelable:!0}))}function q(h,g){if(typeof ShadowRoot=="function"&&h instanceof ShadowRoot){Array.from(h.children).forEach(M=>q(M,g));return}let A=!1;if(g(h,()=>A=!0),A)return;let I=h.firstElementChild;for(;I;)q(I,g),I=I.nextElementSibling}function D(h,...g){console.warn(`Alpine Warning: ${h}`,...g)}var ce=!1;function J(){ce&&D("Alpine has already been initialized on this page. Calling Alpine.start() more than once can cause problems."),ce=!0,document.body||D("Unable to initialize. Trying to load Alpine before `<body>` is available. Did you forget to add `defer` in Alpine's `<script>` tag?"),H(document,"alpine:init"),H(document,"alpine:initializing"),ct(),rt(g=>xe(g,q)),ye(g=>$(g)),se((g,A)=>{ni(g,A).forEach(I=>I())});let h=g=>!We(g.parentElement,!0);Array.from(document.querySelectorAll(le())).filter(h).forEach(g=>{xe(g)}),H(document,"alpine:initialized")}var ne=[],fe=[];function Ne(){return ne.map(h=>h())}function le(){return ne.concat(fe).map(h=>h())}function pe(h){ne.push(h)}function Le(h){fe.push(h)}function We(h,g=!1){return Ie(h,A=>{if((g?le():Ne()).some(M=>A.matches(M)))return!0})}function Ie(h,g){if(!!h){if(g(h))return h;if(h._x_teleportBack&&(h=h._x_teleportBack),!!h.parentElement)return Ie(h.parentElement,g)}}function be(h){return Ne().some(g=>h.matches(g))}var _t=[];function lt(h){_t.push(h)}function xe(h,g=q,A=()=>{}){ro(()=>{g(h,(I,M)=>{A(I,M),_t.forEach(T=>T(I,M)),ni(I,I.attributes).forEach(T=>T()),I._x_ignore&&M()})})}function $(h){q(h,g=>{Ee(g),Ye(g)})}var re=[],Se=[],de=[];function rt(h){de.push(h)}function ye(h,g){typeof g=="function"?(h._x_cleanups||(h._x_cleanups=[]),h._x_cleanups.push(g)):(g=h,Se.push(g))}function se(h){re.push(h)}function ue(h,g,A){h._x_attributeCleanups||(h._x_attributeCleanups={}),h._x_attributeCleanups[g]||(h._x_attributeCleanups[g]=[]),h._x_attributeCleanups[g].push(A)}function Ee(h,g){!h._x_attributeCleanups||Object.entries(h._x_attributeCleanups).forEach(([A,I])=>{(g===void 0||g.includes(A))&&(I.forEach(M=>M()),delete h._x_attributeCleanups[A])})}function Ye(h){if(h._x_cleanups)for(;h._x_cleanups.length;)h._x_cleanups.pop()()}var Pe=new MutationObserver(Ci),st=!1;function ct(){Pe.observe(document,{subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0}),st=!0}function zt(){zn(),Pe.disconnect(),st=!1}var dt=[],yi=!1;function zn(){dt=dt.concat(Pe.takeRecords()),dt.length&&!yi&&(yi=!0,queueMicrotask(()=>{nn(),yi=!1}))}function nn(){Ci(dt),dt.length=0}function pt(h){if(!st)return h();zt();let g=h();return ct(),g}var rn=!1,bi=[];function mr(){rn=!0}function jn(){rn=!1,Ci(bi),bi=[]}function Ci(h){if(rn){bi=bi.concat(h);return}let g=[],A=[],I=new Map,M=new Map;for(let T=0;T<h.length;T++)if(!h[T].target._x_ignoreMutationObserver&&(h[T].type==="childList"&&(h[T].addedNodes.forEach(k=>k.nodeType===1&&g.push(k)),h[T].removedNodes.forEach(k=>k.nodeType===1&&A.push(k))),h[T].type==="attributes")){let k=h[T].target,W=h[T].attributeName,ae=h[T].oldValue,ve=()=>{I.has(k)||I.set(k,[]),I.get(k).push({name:W,value:k.getAttribute(W)})},qe=()=>{M.has(k)||M.set(k,[]),M.get(k).push(W)};k.hasAttribute(W)&&ae===null?ve():k.hasAttribute(W)?(qe(),ve()):qe()}M.forEach((T,k)=>{Ee(k,T)}),I.forEach((T,k)=>{re.forEach(W=>W(k,T))});for(let T of A)g.includes(T)||(Se.forEach(k=>k(T)),$(T));g.forEach(T=>{T._x_ignoreSelf=!0,T._x_ignore=!0});for(let T of g)A.includes(T)||!T.isConnected||(delete T._x_ignoreSelf,delete T._x_ignore,de.forEach(k=>k(T)),T._x_ignore=!0,T._x_ignoreSelf=!0);g.forEach(T=>{delete T._x_ignoreSelf,delete T._x_ignore}),g=null,A=null,I=null,M=null}function Bi(h){return Gi(vi(h))}function hi(h,g,A){return h._x_dataStack=[g,...vi(A||h)],()=>{h._x_dataStack=h._x_dataStack.filter(I=>I!==g)}}function vi(h){return h._x_dataStack?h._x_dataStack:typeof ShadowRoot=="function"&&h instanceof ShadowRoot?vi(h.host):h.parentNode?vi(h.parentNode):[]}function Gi(h){return new Proxy({objects:h},Qt)}var Qt={ownKeys({objects:h}){return Array.from(new Set(h.flatMap(g=>Object.keys(g))))},has({objects:h},g){return g==Symbol.unscopables?!1:h.some(A=>Object.prototype.hasOwnProperty.call(A,g))},get({objects:h},g,A){return g=="toJSON"?zi:Reflect.get(h.find(I=>Object.prototype.hasOwnProperty.call(I,g))||{},g,A)},set({objects:h},g,A,I){const M=h.find(k=>Object.prototype.hasOwnProperty.call(k,g))||h[h.length-1],T=Object.getOwnPropertyDescriptor(M,g);return(T==null?void 0:T.set)&&(T==null?void 0:T.get)?Reflect.set(M,g,A,I):Reflect.set(M,g,A)}};function zi(){return Reflect.ownKeys(this).reduce((g,A)=>(g[A]=Reflect.get(this,A),g),{})}function Kt(h){let g=I=>typeof I=="object"&&!Array.isArray(I)&&I!==null,A=(I,M="")=>{Object.entries(Object.getOwnPropertyDescriptors(I)).forEach(([T,{value:k,enumerable:W}])=>{if(W===!1||k===void 0)return;let ae=M===""?T:`${M}.${T}`;typeof k=="object"&&k!==null&&k._x_interceptor?I[T]=k.initialize(h,ae,T):g(k)&&k!==I&&!(k instanceof Element)&&A(k,ae)})};return A(h)}function di(h,g=()=>{}){let A={initialValue:void 0,_x_interceptor:!0,initialize(I,M,T){return h(this.initialValue,()=>Vt(I,M),k=>ji(I,M,k),M,T)}};return g(A),I=>{if(typeof I=="object"&&I!==null&&I._x_interceptor){let M=A.initialize.bind(A);A.initialize=(T,k,W)=>{let ae=I.initialize(T,k,W);return A.initialValue=ae,M(T,k,W)}}else A.initialValue=I;return A}}function Vt(h,g){return g.split(".").reduce((A,I)=>A[I],h)}function ji(h,g,A){if(typeof g=="string"&&(g=g.split(".")),g.length===1)h[g[0]]=A;else{if(g.length===0)throw error;return h[g[0]]||(h[g[0]]={}),ji(h[g[0]],g.slice(1),A)}}var sn={};function mt(h,g){sn[h]=g}function C(h,g){return Object.entries(sn).forEach(([A,I])=>{let M=null;function T(){if(M)return M;{let[k,W]=ls(g);return M={interceptor:di,...k},ye(g,W),M}}Object.defineProperty(h,`$${A}`,{get(){return I(g,T())},enumerable:!1})}),h}function P(h,g,A,...I){try{return A(...I)}catch(M){Y(M,h,g)}}function Y(h,g,A=void 0){Object.assign(h,{el:g,expression:A}),console.warn(`Alpine Expression Error: ${h.message}

${A?'Expression: "'+A+`"

`:""}`,g),setTimeout(()=>{throw h},0)}var Q=!0;function ie(h){let g=Q;Q=!1;let A=h();return Q=g,A}function he(h,g,A={}){let I;return oe(h,g)(M=>I=M,A),I}function oe(...h){return _e(...h)}var _e=Te;function Re(h){_e=h}function Te(h,g){let A={};C(A,h);let I=[A,...vi(h)],M=typeof g=="function"?He(I,g):Fe(I,g,h);return P.bind(null,h,g,M)}function He(h,g){return(A=()=>{},{scope:I={},params:M=[]}={})=>{let T=g.apply(Gi([I,...h]),M);ze(A,T)}}var je={};function it(h,g){if(je[h])return je[h];let A=Object.getPrototypeOf(async function(){}).constructor,I=/^[\n\s]*if.*\(.*\)/.test(h.trim())||/^(let|const)\s/.test(h.trim())?`(async()=>{ ${h} })()`:h,T=(()=>{try{let k=new A(["__self","scope"],`with (scope) { __self.result = ${I} }; __self.finished = true; return __self.result;`);return Object.defineProperty(k,"name",{value:`[Alpine] ${h}`}),k}catch(k){return Y(k,g,h),Promise.resolve()}})();return je[h]=T,T}function Fe(h,g,A){let I=it(g,A);return(M=()=>{},{scope:T={},params:k=[]}={})=>{I.result=void 0,I.finished=!1;let W=Gi([T,...h]);if(typeof I=="function"){let ae=I(I,W).catch(ve=>Y(ve,A,g));I.finished?(ze(M,I.result,W,k,A),I.result=void 0):ae.then(ve=>{ze(M,ve,W,k,A)}).catch(ve=>Y(ve,A,g)).finally(()=>I.result=void 0)}}}function ze(h,g,A,I,M){if(Q&&typeof g=="function"){let T=g.apply(A,I);T instanceof Promise?T.then(k=>ze(h,k,A,I)).catch(k=>Y(k,M,g)):h(T)}else typeof g=="object"&&g instanceof Promise?g.then(T=>h(T)):h(g)}var Ze="x-";function ft(h=""){return Ze+h}function tt(h){Ze=h}var At={};function Qe(h,g){return At[h]=g,{before(A){if(!At[A]){console.warn("Cannot find directive `${directive}`. `${name}` will use the default order of execution");return}const I=Un.indexOf(A);Un.splice(I>=0?I:Un.indexOf("DEFAULT"),0,h)}}}function ni(h,g,A){if(g=Array.from(g),h._x_virtualDirectives){let T=Object.entries(h._x_virtualDirectives).map(([W,ae])=>({name:W,value:ae})),k=Mt(T);T=T.map(W=>k.find(ae=>ae.name===W.name)?{name:`x-bind:${W.name}`,value:`"${W.value}"`}:W),g=g.concat(T)}let I={};return g.map(vn((T,k)=>I[T]=k)).filter(wn).map(Sp(I,A)).sort(Rp).map(T=>so(h,T))}function Mt(h){return Array.from(h).map(vn()).filter(g=>!wn(g))}var Ii=!1,Ui=new Map,yn=Symbol();function ro(h){Ii=!0;let g=Symbol();yn=g,Ui.set(g,[]);let A=()=>{for(;Ui.get(g).length;)Ui.get(g).shift()();Ui.delete(g)},I=()=>{Ii=!1,A()};h(A),I()}function ls(h){let g=[],A=W=>g.push(W),[I,M]=V(h);return g.push(M),[{Alpine:hs,effect:I,cleanup:A,evaluateLater:oe.bind(oe,h),evaluate:he.bind(he,h)},()=>g.forEach(W=>W())]}function so(h,g){let A=()=>{},I=At[g.type]||A,[M,T]=ls(h);ue(h,g.original,T);let k=()=>{h._x_ignore||h._x_ignoreSelf||(I.inline&&I.inline(h,g,M),I=I.bind(I,h,g,M),Ii?Ui.get(yn).push(I):I())};return k.runCleanups=T,k}var Wi=(h,g)=>({name:A,value:I})=>(A.startsWith(h)&&(A=A.replace(h,g)),{name:A,value:I}),cs=h=>h;function vn(h=()=>{}){return({name:g,value:A})=>{let{name:I,value:M}=on.reduce((T,k)=>k(T),{name:g,value:A});return I!==g&&h(I,g),{name:I,value:M}}}var on=[];function Yi(h){on.push(h)}function wn({name:h}){return oo().test(h)}var oo=()=>new RegExp(`^${Ze}([^:^.]+)\\b`);function Sp(h,g){return({name:A,value:I})=>{let M=A.match(oo()),T=A.match(/:([a-zA-Z0-9\-_:]+)/),k=A.match(/\.[^.\]]+(?=[^\]]*$)/g)||[],W=g||h[A]||A;return{type:M?M[1]:null,value:T?T[1]:null,modifiers:k.map(ae=>ae.replace(".","")),expression:I,original:W}}}var Qa="DEFAULT",Un=["ignore","ref","data","id","anchor","bind","init","for","model","modelable","transition","show","if",Qa,"teleport"];function Rp(h,g){let A=Un.indexOf(h.type)===-1?Qa:h.type,I=Un.indexOf(g.type)===-1?Qa:g.type;return Un.indexOf(A)-Un.indexOf(I)}var Ka=[],Va=!1;function Za(h=()=>{}){return queueMicrotask(()=>{Va||setTimeout(()=>{$a()})}),new Promise(g=>{Ka.push(()=>{h(),g()})})}function $a(){for(Va=!1;Ka.length;)Ka.shift()()}function Tp(){Va=!0}function qa(h,g){return Array.isArray(g)?Bu(h,g.join(" ")):typeof g=="object"&&g!==null?Lp(h,g):typeof g=="function"?qa(h,g()):Bu(h,g)}function Bu(h,g){let A=M=>M.split(" ").filter(T=>!h.classList.contains(T)).filter(Boolean),I=M=>(h.classList.add(...M),()=>{h.classList.remove(...M)});return g=g===!0?g="":g||"",I(A(g))}function Lp(h,g){let A=W=>W.split(" ").filter(Boolean),I=Object.entries(g).flatMap(([W,ae])=>ae?A(W):!1).filter(Boolean),M=Object.entries(g).flatMap(([W,ae])=>ae?!1:A(W)).filter(Boolean),T=[],k=[];return M.forEach(W=>{h.classList.contains(W)&&(h.classList.remove(W),k.push(W))}),I.forEach(W=>{h.classList.contains(W)||(h.classList.add(W),T.push(W))}),()=>{k.forEach(W=>h.classList.add(W)),T.forEach(W=>h.classList.remove(W))}}function ao(h,g){return typeof g=="object"&&g!==null?Mp(h,g):Op(h,g)}function Mp(h,g){let A={};return Object.entries(g).forEach(([I,M])=>{A[I]=h.style[I],I.startsWith("--")||(I=Pp(I)),h.style.setProperty(I,M)}),setTimeout(()=>{h.style.length===0&&h.removeAttribute("style")}),()=>{ao(h,A)}}function Op(h,g){let A=h.getAttribute("style",g);return h.setAttribute("style",g),()=>{h.setAttribute("style",A||"")}}function Pp(h){return h.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Ja(h,g=()=>{}){let A=!1;return function(){A?g.apply(this,arguments):(A=!0,h.apply(this,arguments))}}Qe("transition",(h,{value:g,modifiers:A,expression:I},{evaluate:M})=>{typeof I=="function"&&(I=M(I)),I!==!1&&(!I||typeof I=="boolean"?Dp(h,A,g):Fp(h,I,g))});function Fp(h,g,A){Gu(h,qa,""),{enter:M=>{h._x_transition.enter.during=M},"enter-start":M=>{h._x_transition.enter.start=M},"enter-end":M=>{h._x_transition.enter.end=M},leave:M=>{h._x_transition.leave.during=M},"leave-start":M=>{h._x_transition.leave.start=M},"leave-end":M=>{h._x_transition.leave.end=M}}[A](g)}function Dp(h,g,A){Gu(h,ao);let I=!g.includes("in")&&!g.includes("out")&&!A,M=I||g.includes("in")||["enter"].includes(A),T=I||g.includes("out")||["leave"].includes(A);g.includes("in")&&!I&&(g=g.filter((ot,$e)=>$e<g.indexOf("out"))),g.includes("out")&&!I&&(g=g.filter((ot,$e)=>$e>g.indexOf("out")));let k=!g.includes("opacity")&&!g.includes("scale"),W=k||g.includes("opacity"),ae=k||g.includes("scale"),ve=W?0:1,qe=ae?us(g,"scale",95)/100:1,wt=us(g,"delay",0)/1e3,Je=us(g,"origin","center"),yt="opacity, transform",fi=us(g,"duration",150)/1e3,Xi=us(g,"duration",75)/1e3,ke="cubic-bezier(0.4, 0.0, 0.2, 1)";M&&(h._x_transition.enter.during={transformOrigin:Je,transitionDelay:`${wt}s`,transitionProperty:yt,transitionDuration:`${fi}s`,transitionTimingFunction:ke},h._x_transition.enter.start={opacity:ve,transform:`scale(${qe})`},h._x_transition.enter.end={opacity:1,transform:"scale(1)"}),T&&(h._x_transition.leave.during={transformOrigin:Je,transitionDelay:`${wt}s`,transitionProperty:yt,transitionDuration:`${Xi}s`,transitionTimingFunction:ke},h._x_transition.leave.start={opacity:1,transform:"scale(1)"},h._x_transition.leave.end={opacity:ve,transform:`scale(${qe})`})}function Gu(h,g,A={}){h._x_transition||(h._x_transition={enter:{during:A,start:A,end:A},leave:{during:A,start:A,end:A},in(I=()=>{},M=()=>{}){el(h,g,{during:this.enter.during,start:this.enter.start,end:this.enter.end},I,M)},out(I=()=>{},M=()=>{}){el(h,g,{during:this.leave.during,start:this.leave.start,end:this.leave.end},I,M)}})}window.Element.prototype._x_toggleAndCascadeWithTransitions=function(h,g,A,I){const M=document.visibilityState==="visible"?requestAnimationFrame:setTimeout;let T=()=>M(A);if(g){h._x_transition&&(h._x_transition.enter||h._x_transition.leave)?h._x_transition.enter&&(Object.entries(h._x_transition.enter.during).length||Object.entries(h._x_transition.enter.start).length||Object.entries(h._x_transition.enter.end).length)?h._x_transition.in(A):T():h._x_transition?h._x_transition.in(A):T();return}h._x_hidePromise=h._x_transition?new Promise((k,W)=>{h._x_transition.out(()=>{},()=>k(I)),h._x_transitioning&&h._x_transitioning.beforeCancel(()=>W({isFromCancelledTransition:!0}))}):Promise.resolve(I),queueMicrotask(()=>{let k=zu(h);k?(k._x_hideChildren||(k._x_hideChildren=[]),k._x_hideChildren.push(h)):M(()=>{let W=ae=>{let ve=Promise.all([ae._x_hidePromise,...(ae._x_hideChildren||[]).map(W)]).then(([qe])=>qe());return delete ae._x_hidePromise,delete ae._x_hideChildren,ve};W(h).catch(ae=>{if(!ae.isFromCancelledTransition)throw ae})})})};function zu(h){let g=h.parentNode;if(!!g)return g._x_hidePromise?g:zu(g)}function el(h,g,{during:A,start:I,end:M}={},T=()=>{},k=()=>{}){if(h._x_transitioning&&h._x_transitioning.cancel(),Object.keys(A).length===0&&Object.keys(I).length===0&&Object.keys(M).length===0){T(),k();return}let W,ae,ve;kp(h,{start(){W=g(h,I)},during(){ae=g(h,A)},before:T,end(){W(),ve=g(h,M)},after:k,cleanup(){ae(),ve()}})}function kp(h,g){let A,I,M,T=Ja(()=>{pt(()=>{A=!0,I||g.before(),M||(g.end(),$a()),g.after(),h.isConnected&&g.cleanup(),delete h._x_transitioning})});h._x_transitioning={beforeCancels:[],beforeCancel(k){this.beforeCancels.push(k)},cancel:Ja(function(){for(;this.beforeCancels.length;)this.beforeCancels.shift()();T()}),finish:T},pt(()=>{g.start(),g.during()}),Tp(),requestAnimationFrame(()=>{if(A)return;let k=Number(getComputedStyle(h).transitionDuration.replace(/,.*/,"").replace("s",""))*1e3,W=Number(getComputedStyle(h).transitionDelay.replace(/,.*/,"").replace("s",""))*1e3;k===0&&(k=Number(getComputedStyle(h).animationDuration.replace("s",""))*1e3),pt(()=>{g.before()}),I=!0,requestAnimationFrame(()=>{A||(pt(()=>{g.end()}),$a(),setTimeout(h._x_transitioning.finish,k+W),M=!0)})})}function us(h,g,A){if(h.indexOf(g)===-1)return A;const I=h[h.indexOf(g)+1];if(!I||g==="scale"&&isNaN(I))return A;if(g==="duration"||g==="delay"){let M=I.match(/([0-9]+)ms/);if(M)return M[1]}return g==="origin"&&["top","right","left","center","bottom"].includes(h[h.indexOf(g)+2])?[I,h[h.indexOf(g)+2]].join(" "):I}var An=!1;function lo(h,g=()=>{}){return(...A)=>An?g(...A):h(...A)}function Np(h){return(...g)=>An&&h(...g)}function Bp(h,g){h._x_dataStack&&(g._x_dataStack=h._x_dataStack,g.setAttribute("data-has-alpine-state",!0)),An=!0,ju(()=>{xe(g,(A,I)=>{I(A,()=>{})})}),An=!1}var tl=!1;function Gp(h,g){g._x_dataStack||(g._x_dataStack=h._x_dataStack),An=!0,tl=!0,ju(()=>{zp(g)}),An=!1,tl=!1}function zp(h){let g=!1;xe(h,(I,M)=>{q(I,(T,k)=>{if(g&&be(T))return k();g=!0,M(T,k)})})}function ju(h){let g=X;G((A,I)=>{let M=g(A);return K(M),()=>{}}),h(),G(g)}function jp(h){return An?tl?!0:h.hasAttribute("data-has-alpine-state"):!1}function Uu(h,g,A,I=[]){switch(h._x_bindings||(h._x_bindings=j({})),h._x_bindings[g]=A,g=I.includes("camel")?Vp(g):g,g){case"value":Up(h,A);break;case"style":Yp(h,A);break;case"class":Wp(h,A);break;case"selected":case"checked":Xp(h,g,A);break;default:Wu(h,g,A);break}}function Up(h,g){if(h.type==="radio")h.attributes.value===void 0&&(h.value=g),window.fromModel&&(h.checked=Yu(h.value,g));else if(h.type==="checkbox")Number.isInteger(g)?h.value=g:!Array.isArray(g)&&typeof g!="boolean"&&![null,void 0].includes(g)?h.value=String(g):Array.isArray(g)?h.checked=g.some(A=>Yu(A,h.value)):h.checked=!!g;else if(h.tagName==="SELECT")Kp(h,g);else{if(h.value===g)return;h.value=g===void 0?"":g}}function Wp(h,g){h._x_undoAddedClasses&&h._x_undoAddedClasses(),h._x_undoAddedClasses=qa(h,g)}function Yp(h,g){h._x_undoAddedStyles&&h._x_undoAddedStyles(),h._x_undoAddedStyles=ao(h,g)}function Xp(h,g,A){Wu(h,g,A),Qp(h,g,A)}function Wu(h,g,A){[null,void 0,!1].includes(A)&&Zp(g)?h.removeAttribute(g):(Xu(g)&&(A=g),Hp(h,g,A))}function Hp(h,g,A){h.getAttribute(g)!=A&&h.setAttribute(g,A)}function Qp(h,g,A){h[g]!==A&&(h[g]=A)}function Kp(h,g){const A=[].concat(g).map(I=>I+"");Array.from(h.options).forEach(I=>{I.selected=A.includes(I.value)})}function Vp(h){return h.toLowerCase().replace(/-(\w)/g,(g,A)=>A.toUpperCase())}function Yu(h,g){return h==g}function Xu(h){return["disabled","checked","required","readonly","hidden","open","selected","autofocus","itemscope","multiple","novalidate","allowfullscreen","allowpaymentrequest","formnovalidate","autoplay","controls","loop","muted","playsinline","default","ismap","reversed","async","defer","nomodule"].includes(h)}function Zp(h){return!["aria-pressed","aria-checked","aria-expanded","aria-selected"].includes(h)}function $p(h,g,A){return h._x_bindings&&h._x_bindings[g]!==void 0?h._x_bindings[g]:Hu(h,g,A)}function qp(h,g,A,I=!0){if(h._x_bindings&&h._x_bindings[g]!==void 0)return h._x_bindings[g];if(h._x_inlineBindings&&h._x_inlineBindings[g]!==void 0){let M=h._x_inlineBindings[g];return M.extract=I,ie(()=>he(h,M.expression))}return Hu(h,g,A)}function Hu(h,g,A){let I=h.getAttribute(g);return I===null?typeof A=="function"?A():A:I===""?!0:Xu(g)?!![g,"true"].includes(I):I}function Qu(h,g){var A;return function(){var I=this,M=arguments,T=function(){A=null,h.apply(I,M)};clearTimeout(A),A=setTimeout(T,g)}}function Ku(h,g){let A;return function(){let I=this,M=arguments;A||(h.apply(I,M),A=!0,setTimeout(()=>A=!1,g))}}function Vu({get:h,set:g},{get:A,set:I}){let M=!0,T,k=X(()=>{const W=h(),ae=A();if(M)I(il(W)),M=!1,T=JSON.stringify(W);else{const ve=JSON.stringify(W);ve!==T?(I(il(W)),T=ve):(g(il(ae)),T=JSON.stringify(ae))}JSON.stringify(A()),JSON.stringify(h())});return()=>{K(k)}}function il(h){return typeof h=="object"?JSON.parse(JSON.stringify(h)):h}function Jp(h){(Array.isArray(h)?h:[h]).forEach(A=>A(hs))}var Wn={},Zu=!1;function em(h,g){if(Zu||(Wn=j(Wn),Zu=!0),g===void 0)return Wn[h];Wn[h]=g,typeof g=="object"&&g!==null&&g.hasOwnProperty("init")&&typeof g.init=="function"&&Wn[h].init(),Kt(Wn[h])}function tm(){return Wn}var $u={};function im(h,g){let A=typeof g!="function"?()=>g:g;return h instanceof Element?qu(h,A()):($u[h]=A,()=>{})}function nm(h){return Object.entries($u).forEach(([g,A])=>{Object.defineProperty(h,g,{get(){return(...I)=>A(...I)}})}),h}function qu(h,g,A){let I=[];for(;I.length;)I.pop()();let M=Object.entries(g).map(([k,W])=>({name:k,value:W})),T=Mt(M);return M=M.map(k=>T.find(W=>W.name===k.name)?{name:`x-bind:${k.name}`,value:`"${k.value}"`}:k),ni(h,M,A).map(k=>{I.push(k.runCleanups),k()}),()=>{for(;I.length;)I.pop()()}}var Ju={};function rm(h,g){Ju[h]=g}function sm(h,g){return Object.entries(Ju).forEach(([A,I])=>{Object.defineProperty(h,A,{get(){return(...M)=>I.bind(g)(...M)},enumerable:!1})}),h}var om={get reactive(){return j},get release(){return K},get effect(){return X},get raw(){return Ae},version:"3.13.2",flushAndStopDeferringMutations:jn,dontAutoEvaluateFunctions:ie,disableEffectScheduling:F,startObservingMutations:ct,stopObservingMutations:zt,setReactivityEngine:N,onAttributeRemoved:ue,onAttributesAdded:se,closestDataStack:vi,skipDuringClone:lo,onlyDuringClone:Np,addRootSelector:pe,addInitSelector:Le,addScopeToNode:hi,deferMutations:mr,mapAttributes:Yi,evaluateLater:oe,interceptInit:lt,setEvaluator:Re,mergeProxies:Gi,extractProp:qp,findClosest:Ie,onElRemoved:ye,closestRoot:We,destroyTree:$,interceptor:di,transition:el,setStyles:ao,mutateDom:pt,directive:Qe,entangle:Vu,throttle:Ku,debounce:Qu,evaluate:he,initTree:xe,nextTick:Za,prefixed:ft,prefix:tt,plugin:Jp,magic:mt,store:em,start:J,clone:Gp,cloneNode:Bp,bound:$p,$data:Bi,walk:q,data:rm,bind:im},hs=om,co=d(y());mt("nextTick",()=>Za),mt("dispatch",h=>H.bind(H,h)),mt("watch",(h,{evaluateLater:g,effect:A})=>(I,M)=>{let T=g(I),k=!0,W,ae=A(()=>T(ve=>{JSON.stringify(ve),k?W=ve:queueMicrotask(()=>{M(ve,W),W=ve}),k=!1}));h._x_effects.delete(ae)}),mt("store",tm),mt("data",h=>Bi(h)),mt("root",h=>We(h)),mt("refs",h=>(h._x_refs_proxy||(h._x_refs_proxy=Gi(am(h))),h._x_refs_proxy));function am(h){let g=[],A=h;for(;A;)A._x_refs&&g.push(A._x_refs),A=A.parentNode;return g}var nl={};function eh(h){return nl[h]||(nl[h]=0),++nl[h]}function lm(h,g){return Ie(h,A=>{if(A._x_ids&&A._x_ids[g])return!0})}function cm(h,g){h._x_ids||(h._x_ids={}),h._x_ids[g]||(h._x_ids[g]=eh(g))}mt("id",h=>(g,A=null)=>{let I=lm(h,g),M=I?I._x_ids[g]:eh(g);return A?`${g}-${M}-${A}`:`${g}-${M}`}),mt("el",h=>h),th("Focus","focus","focus"),th("Persist","persist","persist");function th(h,g,A){mt(g,I=>D(`You can't use [$${g}] without first installing the "${h}" plugin here: https://alpinejs.dev/plugins/${A}`,I))}Qe("modelable",(h,{expression:g},{effect:A,evaluateLater:I,cleanup:M})=>{let T=I(g),k=()=>{let qe;return T(wt=>qe=wt),qe},W=I(`${g} = __placeholder`),ae=qe=>W(()=>{},{scope:{__placeholder:qe}}),ve=k();ae(ve),queueMicrotask(()=>{if(!h._x_model)return;h._x_removeModelListeners.default();let qe=h._x_model.get,wt=h._x_model.set,Je=Vu({get(){return qe()},set(yt){wt(yt)}},{get(){return k()},set(yt){ae(yt)}});M(Je)})}),Qe("teleport",(h,{modifiers:g,expression:A},{cleanup:I})=>{h.tagName.toLowerCase()!=="template"&&D("x-teleport can only be used on a <template> tag",h);let M=ih(A),T=h.content.cloneNode(!0).firstElementChild;h._x_teleport=T,T._x_teleportBack=h,h.setAttribute("data-teleport-template",!0),T.setAttribute("data-teleport-target",!0),h._x_forwardEvents&&h._x_forwardEvents.forEach(W=>{T.addEventListener(W,ae=>{ae.stopPropagation(),h.dispatchEvent(new ae.constructor(ae.type,ae))})}),hi(T,{},h);let k=(W,ae,ve)=>{ve.includes("prepend")?ae.parentNode.insertBefore(W,ae):ve.includes("append")?ae.parentNode.insertBefore(W,ae.nextSibling):ae.appendChild(W)};pt(()=>{k(T,M,g),xe(T),T._x_ignore=!0}),h._x_teleportPutBack=()=>{let W=ih(A);pt(()=>{k(h._x_teleport,W,g)})},I(()=>T.remove())});var um=document.createElement("div");function ih(h){let g=lo(()=>document.querySelector(h),()=>um)();return g||D(`Cannot find x-teleport element for selector: "${h}"`),g}var nh=()=>{};nh.inline=(h,{modifiers:g},{cleanup:A})=>{g.includes("self")?h._x_ignoreSelf=!0:h._x_ignore=!0,A(()=>{g.includes("self")?delete h._x_ignoreSelf:delete h._x_ignore})},Qe("ignore",nh),Qe("effect",(h,{expression:g},{effect:A})=>A(oe(h,g)));function rl(h,g,A,I){let M=h,T=ae=>I(ae),k={},W=(ae,ve)=>qe=>ve(ae,qe);if(A.includes("dot")&&(g=hm(g)),A.includes("camel")&&(g=dm(g)),A.includes("passive")&&(k.passive=!0),A.includes("capture")&&(k.capture=!0),A.includes("window")&&(M=window),A.includes("document")&&(M=document),A.includes("debounce")){let ae=A[A.indexOf("debounce")+1]||"invalid-wait",ve=uo(ae.split("ms")[0])?Number(ae.split("ms")[0]):250;T=Qu(T,ve)}if(A.includes("throttle")){let ae=A[A.indexOf("throttle")+1]||"invalid-wait",ve=uo(ae.split("ms")[0])?Number(ae.split("ms")[0]):250;T=Ku(T,ve)}return A.includes("prevent")&&(T=W(T,(ae,ve)=>{ve.preventDefault(),ae(ve)})),A.includes("stop")&&(T=W(T,(ae,ve)=>{ve.stopPropagation(),ae(ve)})),A.includes("self")&&(T=W(T,(ae,ve)=>{ve.target===h&&ae(ve)})),(A.includes("away")||A.includes("outside"))&&(M=document,T=W(T,(ae,ve)=>{h.contains(ve.target)||ve.target.isConnected!==!1&&(h.offsetWidth<1&&h.offsetHeight<1||h._x_isShown!==!1&&ae(ve))})),A.includes("once")&&(T=W(T,(ae,ve)=>{ae(ve),M.removeEventListener(g,T,k)})),T=W(T,(ae,ve)=>{gm(g)&&pm(ve,A)||ae(ve)}),M.addEventListener(g,T,k),()=>{M.removeEventListener(g,T,k)}}function hm(h){return h.replace(/-/g,".")}function dm(h){return h.toLowerCase().replace(/-(\w)/g,(g,A)=>A.toUpperCase())}function uo(h){return!Array.isArray(h)&&!isNaN(h)}function fm(h){return[" ","_"].includes(h)?h:h.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[_\s]/,"-").toLowerCase()}function gm(h){return["keydown","keyup"].includes(h)}function pm(h,g){let A=g.filter(T=>!["window","document","prevent","stop","once","capture"].includes(T));if(A.includes("debounce")){let T=A.indexOf("debounce");A.splice(T,uo((A[T+1]||"invalid-wait").split("ms")[0])?2:1)}if(A.includes("throttle")){let T=A.indexOf("throttle");A.splice(T,uo((A[T+1]||"invalid-wait").split("ms")[0])?2:1)}if(A.length===0||A.length===1&&rh(h.key).includes(A[0]))return!1;const M=["ctrl","shift","alt","meta","cmd","super"].filter(T=>A.includes(T));return A=A.filter(T=>!M.includes(T)),!(M.length>0&&M.filter(k=>((k==="cmd"||k==="super")&&(k="meta"),h[`${k}Key`])).length===M.length&&rh(h.key).includes(A[0]))}function rh(h){if(!h)return[];h=fm(h);let g={ctrl:"control",slash:"/",space:" ",spacebar:" ",cmd:"meta",esc:"escape",up:"arrow-up",down:"arrow-down",left:"arrow-left",right:"arrow-right",period:".",equal:"=",minus:"-",underscore:"_"};return g[h]=h,Object.keys(g).map(A=>{if(g[A]===h)return A}).filter(A=>A)}Qe("model",(h,{modifiers:g,expression:A},{effect:I,cleanup:M})=>{let T=h;g.includes("parent")&&(T=h.parentNode);let k=oe(T,A),W;typeof A=="string"?W=oe(T,`${A} = __placeholder`):typeof A=="function"&&typeof A()=="string"?W=oe(T,`${A()} = __placeholder`):W=()=>{};let ae=()=>{let Je;return k(yt=>Je=yt),sh(Je)?Je.get():Je},ve=Je=>{let yt;k(fi=>yt=fi),sh(yt)?yt.set(Je):W(()=>{},{scope:{__placeholder:Je}})};typeof A=="string"&&h.type==="radio"&&pt(()=>{h.hasAttribute("name")||h.setAttribute("name",A)});var qe=h.tagName.toLowerCase()==="select"||["checkbox","radio"].includes(h.type)||g.includes("lazy")?"change":"input";let wt=An?()=>{}:rl(h,qe,g,Je=>{ve(mm(h,g,Je,ae()))});if(g.includes("fill")&&([null,""].includes(ae())||h.type==="checkbox"&&Array.isArray(ae()))&&h.dispatchEvent(new Event(qe,{})),h._x_removeModelListeners||(h._x_removeModelListeners={}),h._x_removeModelListeners.default=wt,M(()=>h._x_removeModelListeners.default()),h.form){let Je=rl(h.form,"reset",[],yt=>{Za(()=>h._x_model&&h._x_model.set(h.value))});M(()=>Je())}h._x_model={get(){return ae()},set(Je){ve(Je)}},h._x_forceModelUpdate=Je=>{Je===void 0&&typeof A=="string"&&A.match(/\./)&&(Je=""),window.fromModel=!0,pt(()=>Uu(h,"value",Je)),delete window.fromModel},I(()=>{let Je=ae();g.includes("unintrusive")&&document.activeElement.isSameNode(h)||h._x_forceModelUpdate(Je)})});function mm(h,g,A,I){return pt(()=>{if(A instanceof CustomEvent&&A.detail!==void 0)return A.detail!==null&&A.detail!==void 0?A.detail:A.target.value;if(h.type==="checkbox")if(Array.isArray(I)){let M=g.includes("number")?sl(A.target.value):A.target.value;return A.target.checked?I.concat([M]):I.filter(T=>!_m(T,M))}else return A.target.checked;else{if(h.tagName.toLowerCase()==="select"&&h.multiple)return g.includes("number")?Array.from(A.target.selectedOptions).map(M=>{let T=M.value||M.text;return sl(T)}):Array.from(A.target.selectedOptions).map(M=>M.value||M.text);{let M=A.target.value;return g.includes("number")?sl(M):g.includes("trim")?M.trim():M}}})}function sl(h){let g=h?parseFloat(h):null;return ym(g)?g:h}function _m(h,g){return h==g}function ym(h){return!Array.isArray(h)&&!isNaN(h)}function sh(h){return h!==null&&typeof h=="object"&&typeof h.get=="function"&&typeof h.set=="function"}Qe("cloak",h=>queueMicrotask(()=>pt(()=>h.removeAttribute(ft("cloak"))))),Le(()=>`[${ft("init")}]`),Qe("init",lo((h,{expression:g},{evaluate:A})=>typeof g=="string"?!!g.trim()&&A(g,{},!1):A(g,{},!1))),Qe("text",(h,{expression:g},{effect:A,evaluateLater:I})=>{let M=I(g);A(()=>{M(T=>{pt(()=>{h.textContent=T})})})}),Qe("html",(h,{expression:g},{effect:A,evaluateLater:I})=>{let M=I(g);A(()=>{M(T=>{pt(()=>{h.innerHTML=T,h._x_ignoreSelf=!0,xe(h),delete h._x_ignoreSelf})})})}),Yi(Wi(":",cs(ft("bind:"))));var oh=(h,{value:g,modifiers:A,expression:I,original:M},{effect:T})=>{if(!g){let W={};nm(W),oe(h,I)(ve=>{qu(h,ve,M)},{scope:W});return}if(g==="key")return vm(h,I);if(h._x_inlineBindings&&h._x_inlineBindings[g]&&h._x_inlineBindings[g].extract)return;let k=oe(h,I);T(()=>k(W=>{W===void 0&&typeof I=="string"&&I.match(/\./)&&(W=""),pt(()=>Uu(h,g,W,A))}))};oh.inline=(h,{value:g,modifiers:A,expression:I})=>{!g||(h._x_inlineBindings||(h._x_inlineBindings={}),h._x_inlineBindings[g]={expression:I,extract:!1})},Qe("bind",oh);function vm(h,g){h._x_keyExpression=g}pe(()=>`[${ft("data")}]`),Qe("data",(h,{expression:g},{cleanup:A})=>{if(jp(h))return;g=g===""?"{}":g;let I={};C(I,h);let M={};sm(M,I);let T=he(h,g,{scope:M});(T===void 0||T===!0)&&(T={}),C(T,h);let k=j(T);Kt(k);let W=hi(h,k);k.init&&he(h,k.init),A(()=>{k.destroy&&he(h,k.destroy),W()})}),Qe("show",(h,{modifiers:g,expression:A},{effect:I})=>{let M=oe(h,A);h._x_doHide||(h._x_doHide=()=>{pt(()=>{h.style.setProperty("display","none",g.includes("important")?"important":void 0)})}),h._x_doShow||(h._x_doShow=()=>{pt(()=>{h.style.length===1&&h.style.display==="none"?h.removeAttribute("style"):h.style.removeProperty("display")})});let T=()=>{h._x_doHide(),h._x_isShown=!1},k=()=>{h._x_doShow(),h._x_isShown=!0},W=()=>setTimeout(k),ae=Ja(wt=>wt?k():T(),wt=>{typeof h._x_toggleAndCascadeWithTransitions=="function"?h._x_toggleAndCascadeWithTransitions(h,wt,k,T):wt?W():T()}),ve,qe=!0;I(()=>M(wt=>{!qe&&wt===ve||(g.includes("immediate")&&(wt?W():T()),ae(wt),ve=wt,qe=!1)}))}),Qe("for",(h,{expression:g},{effect:A,cleanup:I})=>{let M=Am(g),T=oe(h,M.items),k=oe(h,h._x_keyExpression||"index");h._x_prevKeys=[],h._x_lookup={},A(()=>wm(h,M,T,k)),I(()=>{Object.values(h._x_lookup).forEach(W=>W.remove()),delete h._x_prevKeys,delete h._x_lookup})});function wm(h,g,A,I){let M=k=>typeof k=="object"&&!Array.isArray(k),T=h;A(k=>{xm(k)&&k>=0&&(k=Array.from(Array(k).keys(),ke=>ke+1)),k===void 0&&(k=[]);let W=h._x_lookup,ae=h._x_prevKeys,ve=[],qe=[];if(M(k))k=Object.entries(k).map(([ke,ot])=>{let $e=ah(g,ot,ke,k);I(ut=>qe.push(ut),{scope:{index:ke,...$e}}),ve.push($e)});else for(let ke=0;ke<k.length;ke++){let ot=ah(g,k[ke],ke,k);I($e=>qe.push($e),{scope:{index:ke,...ot}}),ve.push(ot)}let wt=[],Je=[],yt=[],fi=[];for(let ke=0;ke<ae.length;ke++){let ot=ae[ke];qe.indexOf(ot)===-1&&yt.push(ot)}ae=ae.filter(ke=>!yt.includes(ke));let Xi="template";for(let ke=0;ke<qe.length;ke++){let ot=qe[ke],$e=ae.indexOf(ot);if($e===-1)ae.splice(ke,0,ot),wt.push([Xi,ke]);else if($e!==ke){let ut=ae.splice(ke,1)[0],Zt=ae.splice($e-1,1)[0];ae.splice(ke,0,Zt),ae.splice($e,0,ut),Je.push([ut,Zt])}else fi.push(ot);Xi=ot}for(let ke=0;ke<yt.length;ke++){let ot=yt[ke];W[ot]._x_effects&&W[ot]._x_effects.forEach(S),W[ot].remove(),W[ot]=null,delete W[ot]}for(let ke=0;ke<Je.length;ke++){let[ot,$e]=Je[ke],ut=W[ot],Zt=W[$e],Si=document.createElement("div");pt(()=>{Zt||D('x-for ":key" is undefined or invalid',T),Zt.after(Si),ut.after(Zt),Zt._x_currentIfEl&&Zt.after(Zt._x_currentIfEl),Si.before(ut),ut._x_currentIfEl&&ut.after(ut._x_currentIfEl),Si.remove()}),Zt._x_refreshXForScope(ve[qe.indexOf($e)])}for(let ke=0;ke<wt.length;ke++){let[ot,$e]=wt[ke],ut=ot==="template"?T:W[ot];ut._x_currentIfEl&&(ut=ut._x_currentIfEl);let Zt=ve[$e],Si=qe[$e],Hi=document.importNode(T.content,!0).firstElementChild,_r=j(Zt);hi(Hi,_r,T),Hi._x_refreshXForScope=ds=>{Object.entries(ds).forEach(([fs,yr])=>{_r[fs]=yr})},pt(()=>{ut.after(Hi),xe(Hi)}),typeof Si=="object"&&D("x-for key cannot be an object, it must be a string or an integer",T),W[Si]=Hi}for(let ke=0;ke<fi.length;ke++)W[fi[ke]]._x_refreshXForScope(ve[qe.indexOf(fi[ke])]);T._x_prevKeys=qe})}function Am(h){let g=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,A=/^\s*\(|\)\s*$/g,I=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,M=h.match(I);if(!M)return;let T={};T.items=M[2].trim();let k=M[1].replace(A,"").trim(),W=k.match(g);return W?(T.item=k.replace(g,"").trim(),T.index=W[1].trim(),W[2]&&(T.collection=W[2].trim())):T.item=k,T}function ah(h,g,A,I){let M={};return/^\[.*\]$/.test(h.item)&&Array.isArray(g)?h.item.replace("[","").replace("]","").split(",").map(k=>k.trim()).forEach((k,W)=>{M[k]=g[W]}):/^\{.*\}$/.test(h.item)&&!Array.isArray(g)&&typeof g=="object"?h.item.replace("{","").replace("}","").split(",").map(k=>k.trim()).forEach(k=>{M[k]=g[k]}):M[h.item]=g,h.index&&(M[h.index]=A),h.collection&&(M[h.collection]=I),M}function xm(h){return!Array.isArray(h)&&!isNaN(h)}function lh(){}lh.inline=(h,{expression:g},{cleanup:A})=>{let I=We(h);I._x_refs||(I._x_refs={}),I._x_refs[g]=h,A(()=>delete I._x_refs[g])},Qe("ref",lh),Qe("if",(h,{expression:g},{effect:A,cleanup:I})=>{h.tagName.toLowerCase()!=="template"&&D("x-if can only be used on a <template> tag",h);let M=oe(h,g),T=()=>{if(h._x_currentIfEl)return h._x_currentIfEl;let W=h.content.cloneNode(!0).firstElementChild;return hi(W,{},h),pt(()=>{h.after(W),xe(W)}),h._x_currentIfEl=W,h._x_undoIf=()=>{q(W,ae=>{ae._x_effects&&ae._x_effects.forEach(S)}),W.remove(),delete h._x_currentIfEl},W},k=()=>{!h._x_undoIf||(h._x_undoIf(),delete h._x_undoIf)};A(()=>M(W=>{W?T():k()})),I(()=>h._x_undoIf&&h._x_undoIf())}),Qe("id",(h,{expression:g},{evaluate:A})=>{A(g).forEach(M=>cm(h,M))}),Yi(Wi("@",cs(ft("on:")))),Qe("on",lo((h,{value:g,modifiers:A,expression:I},{cleanup:M})=>{let T=I?oe(h,I):()=>{};h.tagName.toLowerCase()==="template"&&(h._x_forwardEvents||(h._x_forwardEvents=[]),h._x_forwardEvents.includes(g)||h._x_forwardEvents.push(g));let k=rl(h,g,A,W=>{T(()=>{},{scope:{$event:W},params:[W]})});M(()=>k())})),ho("Collapse","collapse","collapse"),ho("Intersect","intersect","intersect"),ho("Focus","trap","focus"),ho("Mask","mask","mask");function ho(h,g,A){Qe(g,I=>D(`You can't use [x-${g}] without first installing the "${h}" plugin here: https://alpinejs.dev/plugins/${A}`,I))}hs.setEvaluator(Te),hs.setReactivityEngine({reactive:co.reactive,effect:co.effect,release:co.stop,raw:co.toRaw});var Em=hs,bm=Em}}),Nm=_n({"../alpine/packages/collapse/dist/module.cjs.js"(n,e){var t=Object.defineProperty,i=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,o=(_,p)=>{for(var m in p)t(_,m,{get:p[m],enumerable:!0})},a=(_,p,m,y)=>{if(p&&typeof p=="object"||typeof p=="function")for(let v of r(p))!s.call(_,v)&&v!==m&&t(_,v,{get:()=>p[v],enumerable:!(y=i(p,v))||y.enumerable});return _},l=_=>a(t({},"__esModule",{value:!0}),_),c={};o(c,{default:()=>f}),e.exports=l(c);function u(_){_.directive("collapse",p),p.inline=(m,{modifiers:y})=>{!y.includes("min")||(m._x_doShow=()=>{},m._x_doHide=()=>{})};function p(m,{modifiers:y}){let v=d(y,"duration",250)/1e3,w=d(y,"min",0),x=!y.includes("min");m._x_isShown||(m.style.height=`${w}px`),!m._x_isShown&&x&&(m.hidden=!0),m._x_isShown||(m.style.overflow="hidden");let E=(L,R)=>{let S=_.setStyles(L,R);return R.height?()=>{}:S},O={transitionProperty:"height",transitionDuration:`${v}s`,transitionTimingFunction:"cubic-bezier(0.4, 0.0, 0.2, 1)"};m._x_transition={in(L=()=>{},R=()=>{}){x&&(m.hidden=!1),x&&(m.style.display=null);let S=m.getBoundingClientRect().height;m.style.height="auto";let B=m.getBoundingClientRect().height;S===B&&(S=w),_.transition(m,_.setStyles,{during:O,start:{height:S+"px"},end:{height:B+"px"}},()=>m._x_isShown=!0,()=>{m.getBoundingClientRect().height==B&&(m.style.overflow=null)})},out(L=()=>{},R=()=>{}){let S=m.getBoundingClientRect().height;_.transition(m,E,{during:O,start:{height:S+"px"},end:{height:w+"px"}},()=>m.style.overflow="hidden",()=>{m._x_isShown=!1,m.style.height==`${w}px`&&x&&(m.style.display="none",m.hidden=!0)})}}}}function d(_,p,m){if(_.indexOf(p)===-1)return m;const y=_[_.indexOf(p)+1];if(!y)return m;if(p==="duration"){let v=y.match(/([0-9]+)ms/);if(v)return v[1]}if(p==="min"){let v=y.match(/([0-9]+)px/);if(v)return v[1]}return y}var f=u}}),Bm=_n({"../alpine/packages/focus/dist/module.cjs.js"(n,e){var t=Object.create,i=Object.defineProperty,r=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,o=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty,l=(R,S)=>function(){return S||(0,R[s(R)[0]])((S={exports:{}}).exports,S),S.exports},c=(R,S)=>{for(var B in S)i(R,B,{get:S[B],enumerable:!0})},u=(R,S,B,U)=>{if(S&&typeof S=="object"||typeof S=="function")for(let j of s(S))!a.call(R,j)&&j!==B&&i(R,j,{get:()=>S[j],enumerable:!(U=r(S,j))||U.enumerable});return R},d=(R,S,B)=>(B=R!=null?t(o(R)):{},u(S||!R||!R.__esModule?i(B,"default",{value:R,enumerable:!0}):B,R)),f=R=>u(i({},"__esModule",{value:!0}),R),_=l({"node_modules/tabbable/dist/index.js"(R){Object.defineProperty(R,"__esModule",{value:!0});var S=["input","select","textarea","a[href]","button","[tabindex]:not(slot)","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"],B=S.join(","),U=typeof Element=="undefined",j=U?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,X=!U&&Element.prototype.getRootNode?function(xe){return xe.getRootNode()}:function(xe){return xe.ownerDocument},K=function($,re,Se){var de=Array.prototype.slice.apply($.querySelectorAll(B));return re&&j.call($,B)&&de.unshift($),de=de.filter(Se),de},Ae=function xe($,re,Se){for(var de=[],rt=Array.from($);rt.length;){var ye=rt.shift();if(ye.tagName==="SLOT"){var se=ye.assignedElements(),ue=se.length?se:ye.children,Ee=xe(ue,!0,Se);Se.flatten?de.push.apply(de,Ee):de.push({scope:ye,candidates:Ee})}else{var Ye=j.call(ye,B);Ye&&Se.filter(ye)&&(re||!$.includes(ye))&&de.push(ye);var Pe=ye.shadowRoot||typeof Se.getShadowRoot=="function"&&Se.getShadowRoot(ye),st=!Se.shadowRootFilter||Se.shadowRootFilter(ye);if(Pe&&st){var ct=xe(Pe===!0?ye.children:Pe.children,!0,Se);Se.flatten?de.push.apply(de,ct):de.push({scope:ye,candidates:ct})}else rt.unshift.apply(rt,ye.children)}}return de},ee=function($,re){return $.tabIndex<0&&(re||/^(AUDIO|VIDEO|DETAILS)$/.test($.tagName)||$.isContentEditable)&&isNaN(parseInt($.getAttribute("tabindex"),10))?0:$.tabIndex},F=function($,re){return $.tabIndex===re.tabIndex?$.documentOrder-re.documentOrder:$.tabIndex-re.tabIndex},N=function($){return $.tagName==="INPUT"},G=function($){return N($)&&$.type==="hidden"},V=function($){var re=$.tagName==="DETAILS"&&Array.prototype.slice.apply($.children).some(function(Se){return Se.tagName==="SUMMARY"});return re},H=function($,re){for(var Se=0;Se<$.length;Se++)if($[Se].checked&&$[Se].form===re)return $[Se]},q=function($){if(!$.name)return!0;var re=$.form||X($),Se=function(se){return re.querySelectorAll('input[type="radio"][name="'+se+'"]')},de;if(typeof window!="undefined"&&typeof window.CSS!="undefined"&&typeof window.CSS.escape=="function")de=Se(window.CSS.escape($.name));else try{de=Se($.name)}catch(ye){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",ye.message),!1}var rt=H(de,$.form);return!rt||rt===$},D=function($){return N($)&&$.type==="radio"},ce=function($){return D($)&&!q($)},J=function($){var re=$.getBoundingClientRect(),Se=re.width,de=re.height;return Se===0&&de===0},ne=function($,re){var Se=re.displayCheck,de=re.getShadowRoot;if(getComputedStyle($).visibility==="hidden")return!0;var rt=j.call($,"details>summary:first-of-type"),ye=rt?$.parentElement:$;if(j.call(ye,"details:not([open]) *"))return!0;var se=X($).host,ue=(se==null?void 0:se.ownerDocument.contains(se))||$.ownerDocument.contains($);if(!Se||Se==="full"){if(typeof de=="function"){for(var Ee=$;$;){var Ye=$.parentElement,Pe=X($);if(Ye&&!Ye.shadowRoot&&de(Ye)===!0)return J($);$.assignedSlot?$=$.assignedSlot:!Ye&&Pe!==$.ownerDocument?$=Pe.host:$=Ye}$=Ee}if(ue)return!$.getClientRects().length}else if(Se==="non-zero-area")return J($);return!1},fe=function($){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test($.tagName))for(var re=$.parentElement;re;){if(re.tagName==="FIELDSET"&&re.disabled){for(var Se=0;Se<re.children.length;Se++){var de=re.children.item(Se);if(de.tagName==="LEGEND")return j.call(re,"fieldset[disabled] *")?!0:!de.contains($)}return!0}re=re.parentElement}return!1},Ne=function($,re){return!(re.disabled||G(re)||ne(re,$)||V(re)||fe(re))},le=function($,re){return!(ce(re)||ee(re)<0||!Ne($,re))},pe=function($){var re=parseInt($.getAttribute("tabindex"),10);return!!(isNaN(re)||re>=0)},Le=function xe($){var re=[],Se=[];return $.forEach(function(de,rt){var ye=!!de.scope,se=ye?de.scope:de,ue=ee(se,ye),Ee=ye?xe(de.candidates):se;ue===0?ye?re.push.apply(re,Ee):re.push(se):Se.push({documentOrder:rt,tabIndex:ue,item:de,isScope:ye,content:Ee})}),Se.sort(F).reduce(function(de,rt){return rt.isScope?de.push.apply(de,rt.content):de.push(rt.content),de},[]).concat(re)},We=function($,re){re=re||{};var Se;return re.getShadowRoot?Se=Ae([$],re.includeContainer,{filter:le.bind(null,re),flatten:!1,getShadowRoot:re.getShadowRoot,shadowRootFilter:pe}):Se=K($,re.includeContainer,le.bind(null,re)),Le(Se)},Ie=function($,re){re=re||{};var Se;return re.getShadowRoot?Se=Ae([$],re.includeContainer,{filter:Ne.bind(null,re),flatten:!0,getShadowRoot:re.getShadowRoot}):Se=K($,re.includeContainer,Ne.bind(null,re)),Se},be=function($,re){if(re=re||{},!$)throw new Error("No node provided");return j.call($,B)===!1?!1:le(re,$)},_t=S.concat("iframe").join(","),lt=function($,re){if(re=re||{},!$)throw new Error("No node provided");return j.call($,_t)===!1?!1:Ne(re,$)};R.focusable=Ie,R.isFocusable=lt,R.isTabbable=be,R.tabbable=We}}),p=l({"node_modules/focus-trap/dist/focus-trap.js"(R){Object.defineProperty(R,"__esModule",{value:!0});var S=_();function B(q,D){var ce=Object.keys(q);if(Object.getOwnPropertySymbols){var J=Object.getOwnPropertySymbols(q);D&&(J=J.filter(function(ne){return Object.getOwnPropertyDescriptor(q,ne).enumerable})),ce.push.apply(ce,J)}return ce}function U(q){for(var D=1;D<arguments.length;D++){var ce=arguments[D]!=null?arguments[D]:{};D%2?B(Object(ce),!0).forEach(function(J){j(q,J,ce[J])}):Object.getOwnPropertyDescriptors?Object.defineProperties(q,Object.getOwnPropertyDescriptors(ce)):B(Object(ce)).forEach(function(J){Object.defineProperty(q,J,Object.getOwnPropertyDescriptor(ce,J))})}return q}function j(q,D,ce){return D in q?Object.defineProperty(q,D,{value:ce,enumerable:!0,configurable:!0,writable:!0}):q[D]=ce,q}var X=function(){var q=[];return{activateTrap:function(ce){if(q.length>0){var J=q[q.length-1];J!==ce&&J.pause()}var ne=q.indexOf(ce);ne===-1||q.splice(ne,1),q.push(ce)},deactivateTrap:function(ce){var J=q.indexOf(ce);J!==-1&&q.splice(J,1),q.length>0&&q[q.length-1].unpause()}}}(),K=function(D){return D.tagName&&D.tagName.toLowerCase()==="input"&&typeof D.select=="function"},Ae=function(D){return D.key==="Escape"||D.key==="Esc"||D.keyCode===27},ee=function(D){return D.key==="Tab"||D.keyCode===9},F=function(D){return setTimeout(D,0)},N=function(D,ce){var J=-1;return D.every(function(ne,fe){return ce(ne)?(J=fe,!1):!0}),J},G=function(D){for(var ce=arguments.length,J=new Array(ce>1?ce-1:0),ne=1;ne<ce;ne++)J[ne-1]=arguments[ne];return typeof D=="function"?D.apply(void 0,J):D},V=function(D){return D.target.shadowRoot&&typeof D.composedPath=="function"?D.composedPath()[0]:D.target},H=function(D,ce){var J=(ce==null?void 0:ce.document)||document,ne=U({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0},ce),fe={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0},Ne,le=function(se,ue,Ee){return se&&se[ue]!==void 0?se[ue]:ne[Ee||ue]},pe=function(se){return fe.containerGroups.findIndex(function(ue){var Ee=ue.container,Ye=ue.tabbableNodes;return Ee.contains(se)||Ye.find(function(Pe){return Pe===se})})},Le=function(se){var ue=ne[se];if(typeof ue=="function"){for(var Ee=arguments.length,Ye=new Array(Ee>1?Ee-1:0),Pe=1;Pe<Ee;Pe++)Ye[Pe-1]=arguments[Pe];ue=ue.apply(void 0,Ye)}if(ue===!0&&(ue=void 0),!ue){if(ue===void 0||ue===!1)return ue;throw new Error("`".concat(se,"` was specified but was not a node, or did not return a node"))}var st=ue;if(typeof ue=="string"&&(st=J.querySelector(ue),!st))throw new Error("`".concat(se,"` as selector refers to no known node"));return st},We=function(){var se=Le("initialFocus");if(se===!1)return!1;if(se===void 0)if(pe(J.activeElement)>=0)se=J.activeElement;else{var ue=fe.tabbableGroups[0],Ee=ue&&ue.firstTabbableNode;se=Ee||Le("fallbackFocus")}if(!se)throw new Error("Your focus-trap needs to have at least one focusable element");return se},Ie=function(){if(fe.containerGroups=fe.containers.map(function(se){var ue=S.tabbable(se,ne.tabbableOptions),Ee=S.focusable(se,ne.tabbableOptions);return{container:se,tabbableNodes:ue,focusableNodes:Ee,firstTabbableNode:ue.length>0?ue[0]:null,lastTabbableNode:ue.length>0?ue[ue.length-1]:null,nextTabbableNode:function(Pe){var st=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,ct=Ee.findIndex(function(zt){return zt===Pe});if(!(ct<0))return st?Ee.slice(ct+1).find(function(zt){return S.isTabbable(zt,ne.tabbableOptions)}):Ee.slice(0,ct).reverse().find(function(zt){return S.isTabbable(zt,ne.tabbableOptions)})}}}),fe.tabbableGroups=fe.containerGroups.filter(function(se){return se.tabbableNodes.length>0}),fe.tabbableGroups.length<=0&&!Le("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},be=function ye(se){if(se!==!1&&se!==J.activeElement){if(!se||!se.focus){ye(We());return}se.focus({preventScroll:!!ne.preventScroll}),fe.mostRecentlyFocusedNode=se,K(se)&&se.select()}},_t=function(se){var ue=Le("setReturnFocus",se);return ue||(ue===!1?!1:se)},lt=function(se){var ue=V(se);if(!(pe(ue)>=0)){if(G(ne.clickOutsideDeactivates,se)){Ne.deactivate({returnFocus:ne.returnFocusOnDeactivate&&!S.isFocusable(ue,ne.tabbableOptions)});return}G(ne.allowOutsideClick,se)||se.preventDefault()}},xe=function(se){var ue=V(se),Ee=pe(ue)>=0;Ee||ue instanceof Document?Ee&&(fe.mostRecentlyFocusedNode=ue):(se.stopImmediatePropagation(),be(fe.mostRecentlyFocusedNode||We()))},$=function(se){var ue=V(se);Ie();var Ee=null;if(fe.tabbableGroups.length>0){var Ye=pe(ue),Pe=Ye>=0?fe.containerGroups[Ye]:void 0;if(Ye<0)se.shiftKey?Ee=fe.tabbableGroups[fe.tabbableGroups.length-1].lastTabbableNode:Ee=fe.tabbableGroups[0].firstTabbableNode;else if(se.shiftKey){var st=N(fe.tabbableGroups,function(nn){var pt=nn.firstTabbableNode;return ue===pt});if(st<0&&(Pe.container===ue||S.isFocusable(ue,ne.tabbableOptions)&&!S.isTabbable(ue,ne.tabbableOptions)&&!Pe.nextTabbableNode(ue,!1))&&(st=Ye),st>=0){var ct=st===0?fe.tabbableGroups.length-1:st-1,zt=fe.tabbableGroups[ct];Ee=zt.lastTabbableNode}}else{var dt=N(fe.tabbableGroups,function(nn){var pt=nn.lastTabbableNode;return ue===pt});if(dt<0&&(Pe.container===ue||S.isFocusable(ue,ne.tabbableOptions)&&!S.isTabbable(ue,ne.tabbableOptions)&&!Pe.nextTabbableNode(ue))&&(dt=Ye),dt>=0){var yi=dt===fe.tabbableGroups.length-1?0:dt+1,zn=fe.tabbableGroups[yi];Ee=zn.firstTabbableNode}}}else Ee=Le("fallbackFocus");Ee&&(se.preventDefault(),be(Ee))},re=function(se){if(Ae(se)&&G(ne.escapeDeactivates,se)!==!1){se.preventDefault(),Ne.deactivate();return}if(ee(se)){$(se);return}},Se=function(se){var ue=V(se);pe(ue)>=0||G(ne.clickOutsideDeactivates,se)||G(ne.allowOutsideClick,se)||(se.preventDefault(),se.stopImmediatePropagation())},de=function(){if(!!fe.active)return X.activateTrap(Ne),fe.delayInitialFocusTimer=ne.delayInitialFocus?F(function(){be(We())}):be(We()),J.addEventListener("focusin",xe,!0),J.addEventListener("mousedown",lt,{capture:!0,passive:!1}),J.addEventListener("touchstart",lt,{capture:!0,passive:!1}),J.addEventListener("click",Se,{capture:!0,passive:!1}),J.addEventListener("keydown",re,{capture:!0,passive:!1}),Ne},rt=function(){if(!!fe.active)return J.removeEventListener("focusin",xe,!0),J.removeEventListener("mousedown",lt,!0),J.removeEventListener("touchstart",lt,!0),J.removeEventListener("click",Se,!0),J.removeEventListener("keydown",re,!0),Ne};return Ne={get active(){return fe.active},get paused(){return fe.paused},activate:function(se){if(fe.active)return this;var ue=le(se,"onActivate"),Ee=le(se,"onPostActivate"),Ye=le(se,"checkCanFocusTrap");Ye||Ie(),fe.active=!0,fe.paused=!1,fe.nodeFocusedBeforeActivation=J.activeElement,ue&&ue();var Pe=function(){Ye&&Ie(),de(),Ee&&Ee()};return Ye?(Ye(fe.containers.concat()).then(Pe,Pe),this):(Pe(),this)},deactivate:function(se){if(!fe.active)return this;var ue=U({onDeactivate:ne.onDeactivate,onPostDeactivate:ne.onPostDeactivate,checkCanReturnFocus:ne.checkCanReturnFocus},se);clearTimeout(fe.delayInitialFocusTimer),fe.delayInitialFocusTimer=void 0,rt(),fe.active=!1,fe.paused=!1,X.deactivateTrap(Ne);var Ee=le(ue,"onDeactivate"),Ye=le(ue,"onPostDeactivate"),Pe=le(ue,"checkCanReturnFocus"),st=le(ue,"returnFocus","returnFocusOnDeactivate");Ee&&Ee();var ct=function(){F(function(){st&&be(_t(fe.nodeFocusedBeforeActivation)),Ye&&Ye()})};return st&&Pe?(Pe(_t(fe.nodeFocusedBeforeActivation)).then(ct,ct),this):(ct(),this)},pause:function(){return fe.paused||!fe.active?this:(fe.paused=!0,rt(),this)},unpause:function(){return!fe.paused||!fe.active?this:(fe.paused=!1,Ie(),de(),this)},updateContainerElements:function(se){var ue=[].concat(se).filter(Boolean);return fe.containers=ue.map(function(Ee){return typeof Ee=="string"?J.querySelector(Ee):Ee}),fe.active&&Ie(),this}},Ne.updateContainerElements(D),Ne};R.createFocusTrap=H}}),m={};c(m,{default:()=>L}),e.exports=f(m);var y=d(p()),v=d(_());function w(R){let S,B;window.addEventListener("focusin",()=>{S=B,B=document.activeElement}),R.magic("focus",U=>{let j=U;return{__noscroll:!1,__wrapAround:!1,within(X){return j=X,this},withoutScrolling(){return this.__noscroll=!0,this},noscroll(){return this.__noscroll=!0,this},withWrapAround(){return this.__wrapAround=!0,this},wrap(){return this.withWrapAround()},focusable(X){return(0,v.isFocusable)(X)},previouslyFocused(){return S},lastFocused(){return S},focused(){return B},focusables(){return Array.isArray(j)?j:(0,v.focusable)(j,{displayCheck:"none"})},all(){return this.focusables()},isFirst(X){let K=this.all();return K[0]&&K[0].isSameNode(X)},isLast(X){let K=this.all();return K.length&&K.slice(-1)[0].isSameNode(X)},getFirst(){return this.all()[0]},getLast(){return this.all().slice(-1)[0]},getNext(){let X=this.all(),K=document.activeElement;if(X.indexOf(K)!==-1)return this.__wrapAround&&X.indexOf(K)===X.length-1?X[0]:X[X.indexOf(K)+1]},getPrevious(){let X=this.all(),K=document.activeElement;if(X.indexOf(K)!==-1)return this.__wrapAround&&X.indexOf(K)===0?X.slice(-1)[0]:X[X.indexOf(K)-1]},first(){this.focus(this.getFirst())},last(){this.focus(this.getLast())},next(){this.focus(this.getNext())},previous(){this.focus(this.getPrevious())},prev(){return this.previous()},focus(X){!X||setTimeout(()=>{X.hasAttribute("tabindex")||X.setAttribute("tabindex","0"),X.focus({preventScroll:this._noscroll})})}}}),R.directive("trap",R.skipDuringClone((U,{expression:j,modifiers:X},{effect:K,evaluateLater:Ae,cleanup:ee})=>{let F=Ae(j),N=!1,G={escapeDeactivates:!1,allowOutsideClick:!0,fallbackFocus:()=>U},V=U.querySelector("[autofocus]");V&&(G.initialFocus=V);let H=(0,y.createFocusTrap)(U,G),q=()=>{},D=()=>{};const ce=()=>{q(),q=()=>{},D(),D=()=>{},H.deactivate({returnFocus:!X.includes("noreturn")})};K(()=>F(J=>{N!==J&&(J&&!N&&(X.includes("noscroll")&&(D=O()),X.includes("inert")&&(q=x(U)),setTimeout(()=>{H.activate()},15)),!J&&N&&ce(),N=!!J)})),ee(ce)},(U,{expression:j,modifiers:X},{evaluate:K})=>{X.includes("inert")&&K(j)&&x(U)}))}function x(R){let S=[];return E(R,B=>{let U=B.hasAttribute("aria-hidden");B.setAttribute("aria-hidden","true"),S.push(()=>U||B.removeAttribute("aria-hidden"))}),()=>{for(;S.length;)S.pop()()}}function E(R,S){R.isSameNode(document.body)||!R.parentNode||Array.from(R.parentNode.children).forEach(B=>{B.isSameNode(R)?E(R.parentNode,S):S(B)})}function O(){let R=document.documentElement.style.overflow,S=document.documentElement.style.paddingRight,B=window.innerWidth-document.documentElement.clientWidth;return document.documentElement.style.overflow="hidden",document.documentElement.style.paddingRight=`${B}px`,()=>{document.documentElement.style.overflow=R,document.documentElement.style.paddingRight=S}}var L=w}}),Gm=_n({"../alpine/packages/persist/dist/module.cjs.js"(n,e){var t=Object.defineProperty,i=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,o=(m,y)=>{for(var v in y)t(m,v,{get:y[v],enumerable:!0})},a=(m,y,v,w)=>{if(y&&typeof y=="object"||typeof y=="function")for(let x of r(y))!s.call(m,x)&&x!==v&&t(m,x,{get:()=>y[x],enumerable:!(w=i(y,x))||w.enumerable});return m},l=m=>a(t({},"__esModule",{value:!0}),m),c={};o(c,{default:()=>p}),e.exports=l(c);function u(m){let y=()=>{let v,w;try{w=localStorage}catch(x){console.error(x),console.warn("Alpine: $persist is using temporary storage since localStorage is unavailable.");let E=new Map;w={getItem:E.get.bind(E),setItem:E.set.bind(E)}}return m.interceptor((x,E,O,L,R)=>{let S=v||`_x_${L}`,B=d(S,w)?f(S,w):x;return O(B),m.effect(()=>{let U=E();_(S,U,w),O(U)}),B},x=>{x.as=E=>(v=E,x),x.using=E=>(w=E,x)})};Object.defineProperty(m,"$persist",{get:()=>y()}),m.magic("persist",y),m.persist=(v,{get:w,set:x},E=localStorage)=>{let O=d(v,E)?f(v,E):w();x(O),m.effect(()=>{let L=w();_(v,L,E),x(L)})}}function d(m,y){return y.getItem(m)!==null}function f(m,y){return JSON.parse(y.getItem(m,y))}function _(m,y,v){v.setItem(m,JSON.stringify(y))}var p=u}}),zm=_n({"../alpine/packages/intersect/dist/module.cjs.js"(n,e){var t=Object.defineProperty,i=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,o=(m,y)=>{for(var v in y)t(m,v,{get:y[v],enumerable:!0})},a=(m,y,v,w)=>{if(y&&typeof y=="object"||typeof y=="function")for(let x of r(y))!s.call(m,x)&&x!==v&&t(m,x,{get:()=>y[x],enumerable:!(w=i(y,x))||w.enumerable});return m},l=m=>a(t({},"__esModule",{value:!0}),m),c={};o(c,{default:()=>p}),e.exports=l(c);function u(m){m.directive("intersect",(y,{value:v,expression:w,modifiers:x},{evaluateLater:E,cleanup:O})=>{let L=E(w),R={rootMargin:_(x),threshold:d(x)},S=new IntersectionObserver(B=>{B.forEach(U=>{U.isIntersecting!==(v==="leave")&&(L(),x.includes("once")&&S.disconnect())})},R);S.observe(y),O(()=>{S.disconnect()})})}function d(m){if(m.includes("full"))return .99;if(m.includes("half"))return .5;if(!m.includes("threshold"))return 0;let y=m[m.indexOf("threshold")+1];return y==="100"?1:y==="0"?0:Number(`.${y}`)}function f(m){let y=m.match(/^(-?[0-9]+)(px|%)?$/);return y?y[1]+(y[2]||"px"):void 0}function _(m){const y="margin",v="0px 0px 0px 0px",w=m.indexOf(y);if(w===-1)return v;let x=[];for(let E=1;E<5;E++)x.push(f(m[w+E]||""));return x=x.filter(E=>E!==void 0),x.length?x.join(" ").trim():v}var p=u}}),jm=_n({"../alpine/packages/anchor/dist/module.cjs.js"(n,e){var t=Object.defineProperty,i=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,o=(C,P)=>{for(var Y in P)t(C,Y,{get:P[Y],enumerable:!0})},a=(C,P,Y,Q)=>{if(P&&typeof P=="object"||typeof P=="function")for(let ie of r(P))!s.call(C,ie)&&ie!==Y&&t(C,ie,{get:()=>P[ie],enumerable:!(Q=i(P,ie))||Q.enumerable});return C},l=C=>a(t({},"__esModule",{value:!0}),C),c={};o(c,{default:()=>mt}),e.exports=l(c);var u=Math.min,d=Math.max,f=Math.round,_=Math.floor,p=C=>({x:C,y:C}),m={left:"right",right:"left",bottom:"top",top:"bottom"},y={start:"end",end:"start"};function v(C,P,Y){return d(C,u(P,Y))}function w(C,P){return typeof C=="function"?C(P):C}function x(C){return C.split("-")[0]}function E(C){return C.split("-")[1]}function O(C){return C==="x"?"y":"x"}function L(C){return C==="y"?"height":"width"}function R(C){return["top","bottom"].includes(x(C))?"y":"x"}function S(C){return O(R(C))}function B(C,P,Y){Y===void 0&&(Y=!1);const Q=E(C),ie=S(C),he=L(ie);let oe=ie==="x"?Q===(Y?"end":"start")?"right":"left":Q==="start"?"bottom":"top";return P.reference[he]>P.floating[he]&&(oe=Ae(oe)),[oe,Ae(oe)]}function U(C){const P=Ae(C);return[j(C),P,j(P)]}function j(C){return C.replace(/start|end/g,P=>y[P])}function X(C,P,Y){const Q=["left","right"],ie=["right","left"],he=["top","bottom"],oe=["bottom","top"];switch(C){case"top":case"bottom":return Y?P?ie:Q:P?Q:ie;case"left":case"right":return P?he:oe;default:return[]}}function K(C,P,Y,Q){const ie=E(C);let he=X(x(C),Y==="start",Q);return ie&&(he=he.map(oe=>oe+"-"+ie),P&&(he=he.concat(he.map(j)))),he}function Ae(C){return C.replace(/left|right|bottom|top/g,P=>m[P])}function ee(C){return{top:0,right:0,bottom:0,left:0,...C}}function F(C){return typeof C!="number"?ee(C):{top:C,right:C,bottom:C,left:C}}function N(C){return{...C,top:C.y,left:C.x,right:C.x+C.width,bottom:C.y+C.height}}function G(C,P,Y){let{reference:Q,floating:ie}=C;const he=R(P),oe=S(P),_e=L(oe),Re=x(P),Te=he==="y",He=Q.x+Q.width/2-ie.width/2,je=Q.y+Q.height/2-ie.height/2,it=Q[_e]/2-ie[_e]/2;let Fe;switch(Re){case"top":Fe={x:He,y:Q.y-ie.height};break;case"bottom":Fe={x:He,y:Q.y+Q.height};break;case"right":Fe={x:Q.x+Q.width,y:je};break;case"left":Fe={x:Q.x-ie.width,y:je};break;default:Fe={x:Q.x,y:Q.y}}switch(E(P)){case"start":Fe[oe]-=it*(Y&&Te?-1:1);break;case"end":Fe[oe]+=it*(Y&&Te?-1:1);break}return Fe}var V=async(C,P,Y)=>{const{placement:Q="bottom",strategy:ie="absolute",middleware:he=[],platform:oe}=Y,_e=he.filter(Boolean),Re=await(oe.isRTL==null?void 0:oe.isRTL(P));let Te=await oe.getElementRects({reference:C,floating:P,strategy:ie}),{x:He,y:je}=G(Te,Q,Re),it=Q,Fe={},ze=0;for(let Ze=0;Ze<_e.length;Ze++){const{name:ft,fn:tt}=_e[Ze],{x:At,y:Qe,data:ni,reset:Mt}=await tt({x:He,y:je,initialPlacement:Q,placement:it,strategy:ie,middlewareData:Fe,rects:Te,platform:oe,elements:{reference:C,floating:P}});if(He=At!=null?At:He,je=Qe!=null?Qe:je,Fe={...Fe,[ft]:{...Fe[ft],...ni}},Mt&&ze<=50){ze++,typeof Mt=="object"&&(Mt.placement&&(it=Mt.placement),Mt.rects&&(Te=Mt.rects===!0?await oe.getElementRects({reference:C,floating:P,strategy:ie}):Mt.rects),{x:He,y:je}=G(Te,it,Re)),Ze=-1;continue}}return{x:He,y:je,placement:it,strategy:ie,middlewareData:Fe}};async function H(C,P){var Y;P===void 0&&(P={});const{x:Q,y:ie,platform:he,rects:oe,elements:_e,strategy:Re}=C,{boundary:Te="clippingAncestors",rootBoundary:He="viewport",elementContext:je="floating",altBoundary:it=!1,padding:Fe=0}=w(P,C),ze=F(Fe),ft=_e[it?je==="floating"?"reference":"floating":je],tt=N(await he.getClippingRect({element:(Y=await(he.isElement==null?void 0:he.isElement(ft)))==null||Y?ft:ft.contextElement||await(he.getDocumentElement==null?void 0:he.getDocumentElement(_e.floating)),boundary:Te,rootBoundary:He,strategy:Re})),At=je==="floating"?{...oe.floating,x:Q,y:ie}:oe.reference,Qe=await(he.getOffsetParent==null?void 0:he.getOffsetParent(_e.floating)),ni=await(he.isElement==null?void 0:he.isElement(Qe))?await(he.getScale==null?void 0:he.getScale(Qe))||{x:1,y:1}:{x:1,y:1},Mt=N(he.convertOffsetParentRelativeRectToViewportRelativeRect?await he.convertOffsetParentRelativeRectToViewportRelativeRect({rect:At,offsetParent:Qe,strategy:Re}):At);return{top:(tt.top-Mt.top+ze.top)/ni.y,bottom:(Mt.bottom-tt.bottom+ze.bottom)/ni.y,left:(tt.left-Mt.left+ze.left)/ni.x,right:(Mt.right-tt.right+ze.right)/ni.x}}var q=function(C){return C===void 0&&(C={}),{name:"flip",options:C,async fn(P){var Y,Q;const{placement:ie,middlewareData:he,rects:oe,initialPlacement:_e,platform:Re,elements:Te}=P,{mainAxis:He=!0,crossAxis:je=!0,fallbackPlacements:it,fallbackStrategy:Fe="bestFit",fallbackAxisSideDirection:ze="none",flipAlignment:Ze=!0,...ft}=w(C,P);if((Y=he.arrow)!=null&&Y.alignmentOffset)return{};const tt=x(ie),At=x(_e)===_e,Qe=await(Re.isRTL==null?void 0:Re.isRTL(Te.floating)),ni=it||(At||!Ze?[Ae(_e)]:U(_e));!it&&ze!=="none"&&ni.push(...K(_e,Ze,ze,Qe));const Mt=[_e,...ni],Ii=await H(P,ft),Ui=[];let yn=((Q=he.flip)==null?void 0:Q.overflows)||[];if(He&&Ui.push(Ii[tt]),je){const Wi=B(ie,oe,Qe);Ui.push(Ii[Wi[0]],Ii[Wi[1]])}if(yn=[...yn,{placement:ie,overflows:Ui}],!Ui.every(Wi=>Wi<=0)){var ro,ls;const Wi=(((ro=he.flip)==null?void 0:ro.index)||0)+1,cs=Mt[Wi];if(cs)return{data:{index:Wi,overflows:yn},reset:{placement:cs}};let vn=(ls=yn.filter(on=>on.overflows[0]<=0).sort((on,Yi)=>on.overflows[1]-Yi.overflows[1])[0])==null?void 0:ls.placement;if(!vn)switch(Fe){case"bestFit":{var so;const on=(so=yn.map(Yi=>[Yi.placement,Yi.overflows.filter(wn=>wn>0).reduce((wn,oo)=>wn+oo,0)]).sort((Yi,wn)=>Yi[1]-wn[1])[0])==null?void 0:so[0];on&&(vn=on);break}case"initialPlacement":vn=_e;break}if(ie!==vn)return{reset:{placement:vn}}}return{}}}};async function D(C,P){const{placement:Y,platform:Q,elements:ie}=C,he=await(Q.isRTL==null?void 0:Q.isRTL(ie.floating)),oe=x(Y),_e=E(Y),Re=R(Y)==="y",Te=["left","top"].includes(oe)?-1:1,He=he&&Re?-1:1,je=w(P,C);let{mainAxis:it,crossAxis:Fe,alignmentAxis:ze}=typeof je=="number"?{mainAxis:je,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...je};return _e&&typeof ze=="number"&&(Fe=_e==="end"?ze*-1:ze),Re?{x:Fe*He,y:it*Te}:{x:it*Te,y:Fe*He}}var ce=function(C){return C===void 0&&(C=0),{name:"offset",options:C,async fn(P){const{x:Y,y:Q}=P,ie=await D(P,C);return{x:Y+ie.x,y:Q+ie.y,data:ie}}}},J=function(C){return C===void 0&&(C={}),{name:"shift",options:C,async fn(P){const{x:Y,y:Q,placement:ie}=P,{mainAxis:he=!0,crossAxis:oe=!1,limiter:_e={fn:ft=>{let{x:tt,y:At}=ft;return{x:tt,y:At}}},...Re}=w(C,P),Te={x:Y,y:Q},He=await H(P,Re),je=R(x(ie)),it=O(je);let Fe=Te[it],ze=Te[je];if(he){const ft=it==="y"?"top":"left",tt=it==="y"?"bottom":"right",At=Fe+He[ft],Qe=Fe-He[tt];Fe=v(At,Fe,Qe)}if(oe){const ft=je==="y"?"top":"left",tt=je==="y"?"bottom":"right",At=ze+He[ft],Qe=ze-He[tt];ze=v(At,ze,Qe)}const Ze=_e.fn({...P,[it]:Fe,[je]:ze});return{...Ze,data:{x:Ze.x-Y,y:Ze.y-Q}}}}};function ne(C){return le(C)?(C.nodeName||"").toLowerCase():"#document"}function fe(C){var P;return(C==null||(P=C.ownerDocument)==null?void 0:P.defaultView)||window}function Ne(C){var P;return(P=(le(C)?C.ownerDocument:C.document)||window.document)==null?void 0:P.documentElement}function le(C){return C instanceof Node||C instanceof fe(C).Node}function pe(C){return C instanceof Element||C instanceof fe(C).Element}function Le(C){return C instanceof HTMLElement||C instanceof fe(C).HTMLElement}function We(C){return typeof ShadowRoot=="undefined"?!1:C instanceof ShadowRoot||C instanceof fe(C).ShadowRoot}function Ie(C){const{overflow:P,overflowX:Y,overflowY:Q,display:ie}=re(C);return/auto|scroll|overlay|hidden|clip/.test(P+Q+Y)&&!["inline","contents"].includes(ie)}function be(C){return["table","td","th"].includes(ne(C))}function _t(C){const P=xe(),Y=re(C);return Y.transform!=="none"||Y.perspective!=="none"||(Y.containerType?Y.containerType!=="normal":!1)||!P&&(Y.backdropFilter?Y.backdropFilter!=="none":!1)||!P&&(Y.filter?Y.filter!=="none":!1)||["transform","perspective","filter"].some(Q=>(Y.willChange||"").includes(Q))||["paint","layout","strict","content"].some(Q=>(Y.contain||"").includes(Q))}function lt(C){let P=de(C);for(;Le(P)&&!$(P);){if(_t(P))return P;P=de(P)}return null}function xe(){return typeof CSS=="undefined"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function $(C){return["html","body","#document"].includes(ne(C))}function re(C){return fe(C).getComputedStyle(C)}function Se(C){return pe(C)?{scrollLeft:C.scrollLeft,scrollTop:C.scrollTop}:{scrollLeft:C.pageXOffset,scrollTop:C.pageYOffset}}function de(C){if(ne(C)==="html")return C;const P=C.assignedSlot||C.parentNode||We(C)&&C.host||Ne(C);return We(P)?P.host:P}function rt(C){const P=de(C);return $(P)?C.ownerDocument?C.ownerDocument.body:C.body:Le(P)&&Ie(P)?P:rt(P)}function ye(C,P,Y){var Q;P===void 0&&(P=[]),Y===void 0&&(Y=!0);const ie=rt(C),he=ie===((Q=C.ownerDocument)==null?void 0:Q.body),oe=fe(ie);return he?P.concat(oe,oe.visualViewport||[],Ie(ie)?ie:[],oe.frameElement&&Y?ye(oe.frameElement):[]):P.concat(ie,ye(ie,[],Y))}function se(C){const P=re(C);let Y=parseFloat(P.width)||0,Q=parseFloat(P.height)||0;const ie=Le(C),he=ie?C.offsetWidth:Y,oe=ie?C.offsetHeight:Q,_e=f(Y)!==he||f(Q)!==oe;return _e&&(Y=he,Q=oe),{width:Y,height:Q,$:_e}}function ue(C){return pe(C)?C:C.contextElement}function Ee(C){const P=ue(C);if(!Le(P))return p(1);const Y=P.getBoundingClientRect(),{width:Q,height:ie,$:he}=se(P);let oe=(he?f(Y.width):Y.width)/Q,_e=(he?f(Y.height):Y.height)/ie;return(!oe||!Number.isFinite(oe))&&(oe=1),(!_e||!Number.isFinite(_e))&&(_e=1),{x:oe,y:_e}}var Ye=p(0);function Pe(C){const P=fe(C);return!xe()||!P.visualViewport?Ye:{x:P.visualViewport.offsetLeft,y:P.visualViewport.offsetTop}}function st(C,P,Y){return P===void 0&&(P=!1),!Y||P&&Y!==fe(C)?!1:P}function ct(C,P,Y,Q){P===void 0&&(P=!1),Y===void 0&&(Y=!1);const ie=C.getBoundingClientRect(),he=ue(C);let oe=p(1);P&&(Q?pe(Q)&&(oe=Ee(Q)):oe=Ee(C));const _e=st(he,Y,Q)?Pe(he):p(0);let Re=(ie.left+_e.x)/oe.x,Te=(ie.top+_e.y)/oe.y,He=ie.width/oe.x,je=ie.height/oe.y;if(he){const it=fe(he),Fe=Q&&pe(Q)?fe(Q):Q;let ze=it.frameElement;for(;ze&&Q&&Fe!==it;){const Ze=Ee(ze),ft=ze.getBoundingClientRect(),tt=re(ze),At=ft.left+(ze.clientLeft+parseFloat(tt.paddingLeft))*Ze.x,Qe=ft.top+(ze.clientTop+parseFloat(tt.paddingTop))*Ze.y;Re*=Ze.x,Te*=Ze.y,He*=Ze.x,je*=Ze.y,Re+=At,Te+=Qe,ze=fe(ze).frameElement}}return N({width:He,height:je,x:Re,y:Te})}function zt(C){let{rect:P,offsetParent:Y,strategy:Q}=C;const ie=Le(Y),he=Ne(Y);if(Y===he)return P;let oe={scrollLeft:0,scrollTop:0},_e=p(1);const Re=p(0);if((ie||!ie&&Q!=="fixed")&&((ne(Y)!=="body"||Ie(he))&&(oe=Se(Y)),Le(Y))){const Te=ct(Y);_e=Ee(Y),Re.x=Te.x+Y.clientLeft,Re.y=Te.y+Y.clientTop}return{width:P.width*_e.x,height:P.height*_e.y,x:P.x*_e.x-oe.scrollLeft*_e.x+Re.x,y:P.y*_e.y-oe.scrollTop*_e.y+Re.y}}function dt(C){return Array.from(C.getClientRects())}function yi(C){return ct(Ne(C)).left+Se(C).scrollLeft}function zn(C){const P=Ne(C),Y=Se(C),Q=C.ownerDocument.body,ie=d(P.scrollWidth,P.clientWidth,Q.scrollWidth,Q.clientWidth),he=d(P.scrollHeight,P.clientHeight,Q.scrollHeight,Q.clientHeight);let oe=-Y.scrollLeft+yi(C);const _e=-Y.scrollTop;return re(Q).direction==="rtl"&&(oe+=d(P.clientWidth,Q.clientWidth)-ie),{width:ie,height:he,x:oe,y:_e}}function nn(C,P){const Y=fe(C),Q=Ne(C),ie=Y.visualViewport;let he=Q.clientWidth,oe=Q.clientHeight,_e=0,Re=0;if(ie){he=ie.width,oe=ie.height;const Te=xe();(!Te||Te&&P==="fixed")&&(_e=ie.offsetLeft,Re=ie.offsetTop)}return{width:he,height:oe,x:_e,y:Re}}function pt(C,P){const Y=ct(C,!0,P==="fixed"),Q=Y.top+C.clientTop,ie=Y.left+C.clientLeft,he=Le(C)?Ee(C):p(1),oe=C.clientWidth*he.x,_e=C.clientHeight*he.y,Re=ie*he.x,Te=Q*he.y;return{width:oe,height:_e,x:Re,y:Te}}function rn(C,P,Y){let Q;if(P==="viewport")Q=nn(C,Y);else if(P==="document")Q=zn(Ne(C));else if(pe(P))Q=pt(P,Y);else{const ie=Pe(C);Q={...P,x:P.x-ie.x,y:P.y-ie.y}}return N(Q)}function bi(C,P){const Y=de(C);return Y===P||!pe(Y)||$(Y)?!1:re(Y).position==="fixed"||bi(Y,P)}function mr(C,P){const Y=P.get(C);if(Y)return Y;let Q=ye(C,[],!1).filter(_e=>pe(_e)&&ne(_e)!=="body"),ie=null;const he=re(C).position==="fixed";let oe=he?de(C):C;for(;pe(oe)&&!$(oe);){const _e=re(oe),Re=_t(oe);!Re&&_e.position==="fixed"&&(ie=null),(he?!Re&&!ie:!Re&&_e.position==="static"&&!!ie&&["absolute","fixed"].includes(ie.position)||Ie(oe)&&!Re&&bi(C,oe))?Q=Q.filter(He=>He!==oe):ie=_e,oe=de(oe)}return P.set(C,Q),Q}function jn(C){let{element:P,boundary:Y,rootBoundary:Q,strategy:ie}=C;const oe=[...Y==="clippingAncestors"?mr(P,this._c):[].concat(Y),Q],_e=oe[0],Re=oe.reduce((Te,He)=>{const je=rn(P,He,ie);return Te.top=d(je.top,Te.top),Te.right=u(je.right,Te.right),Te.bottom=u(je.bottom,Te.bottom),Te.left=d(je.left,Te.left),Te},rn(P,_e,ie));return{width:Re.right-Re.left,height:Re.bottom-Re.top,x:Re.left,y:Re.top}}function Ci(C){return se(C)}function Bi(C,P,Y){const Q=Le(P),ie=Ne(P),he=Y==="fixed",oe=ct(C,!0,he,P);let _e={scrollLeft:0,scrollTop:0};const Re=p(0);if(Q||!Q&&!he)if((ne(P)!=="body"||Ie(ie))&&(_e=Se(P)),Q){const Te=ct(P,!0,he,P);Re.x=Te.x+P.clientLeft,Re.y=Te.y+P.clientTop}else ie&&(Re.x=yi(ie));return{x:oe.left+_e.scrollLeft-Re.x,y:oe.top+_e.scrollTop-Re.y,width:oe.width,height:oe.height}}function hi(C,P){return!Le(C)||re(C).position==="fixed"?null:P?P(C):C.offsetParent}function vi(C,P){const Y=fe(C);if(!Le(C))return Y;let Q=hi(C,P);for(;Q&&be(Q)&&re(Q).position==="static";)Q=hi(Q,P);return Q&&(ne(Q)==="html"||ne(Q)==="body"&&re(Q).position==="static"&&!_t(Q))?Y:Q||lt(C)||Y}var Gi=async function(C){let{reference:P,floating:Y,strategy:Q}=C;const ie=this.getOffsetParent||vi,he=this.getDimensions;return{reference:Bi(P,await ie(Y),Q),floating:{x:0,y:0,...await he(Y)}}};function Qt(C){return re(C).direction==="rtl"}var zi={convertOffsetParentRelativeRectToViewportRelativeRect:zt,getDocumentElement:Ne,getClippingRect:jn,getOffsetParent:vi,getElementRects:Gi,getClientRects:dt,getDimensions:Ci,getScale:Ee,isElement:pe,isRTL:Qt};function Kt(C,P){let Y=null,Q;const ie=Ne(C);function he(){clearTimeout(Q),Y&&Y.disconnect(),Y=null}function oe(_e,Re){_e===void 0&&(_e=!1),Re===void 0&&(Re=1),he();const{left:Te,top:He,width:je,height:it}=C.getBoundingClientRect();if(_e||P(),!je||!it)return;const Fe=_(He),ze=_(ie.clientWidth-(Te+je)),Ze=_(ie.clientHeight-(He+it)),ft=_(Te),At={rootMargin:-Fe+"px "+-ze+"px "+-Ze+"px "+-ft+"px",threshold:d(0,u(1,Re))||1};let Qe=!0;function ni(Mt){const Ii=Mt[0].intersectionRatio;if(Ii!==Re){if(!Qe)return oe();Ii?oe(!1,Ii):Q=setTimeout(()=>{oe(!1,1e-7)},100)}Qe=!1}try{Y=new IntersectionObserver(ni,{...At,root:ie.ownerDocument})}catch{Y=new IntersectionObserver(ni,At)}Y.observe(C)}return oe(!0),he}function di(C,P,Y,Q){Q===void 0&&(Q={});const{ancestorScroll:ie=!0,ancestorResize:he=!0,elementResize:oe=typeof ResizeObserver=="function",layoutShift:_e=typeof IntersectionObserver=="function",animationFrame:Re=!1}=Q,Te=ue(C),He=ie||he?[...Te?ye(Te):[],...ye(P)]:[];He.forEach(tt=>{ie&&tt.addEventListener("scroll",Y,{passive:!0}),he&&tt.addEventListener("resize",Y)});const je=Te&&_e?Kt(Te,Y):null;let it=-1,Fe=null;oe&&(Fe=new ResizeObserver(tt=>{let[At]=tt;At&&At.target===Te&&Fe&&(Fe.unobserve(P),cancelAnimationFrame(it),it=requestAnimationFrame(()=>{Fe&&Fe.observe(P)})),Y()}),Te&&!Re&&Fe.observe(Te),Fe.observe(P));let ze,Ze=Re?ct(C):null;Re&&ft();function ft(){const tt=ct(C);Ze&&(tt.x!==Ze.x||tt.y!==Ze.y||tt.width!==Ze.width||tt.height!==Ze.height)&&Y(),Ze=tt,ze=requestAnimationFrame(ft)}return Y(),()=>{He.forEach(tt=>{ie&&tt.removeEventListener("scroll",Y),he&&tt.removeEventListener("resize",Y)}),je&&je(),Fe&&Fe.disconnect(),Fe=null,Re&&cancelAnimationFrame(ze)}}var Vt=(C,P,Y)=>{const Q=new Map,ie={platform:zi,...Y},he={...ie.platform,_c:Q};return V(C,P,{...ie,platform:he})};function ji(C){C.magic("anchor",P=>{if(!P._x_anchor)throw"Alpine: No x-anchor directive found on element using $anchor...";return P._x_anchor}),C.directive("anchor",(P,{expression:Y,modifiers:Q,value:ie},{cleanup:he,evaluate:oe})=>{P._x_anchor=C.reactive({x:0,y:0});let _e=oe(Y);if(!_e)throw"Alpine: no element provided to x-anchor...";let Te=["top","top-start","top-end","right","right-start","right-end","bottom","bottom-start","bottom-end","left","left-start","left-end"].find(Fe=>Q.includes(Fe)),He=0,je=Q.includes("no-style");if(Q.includes("offset")){let Fe=Q.findIndex(ze=>ze==="offset");He=Q[Fe+1]!==void 0?Number(Q[Fe+1]):He}let it=di(_e,P,()=>{let Fe;Vt(_e,P,{placement:Te,middleware:[q(),J({padding:5}),ce(He)]}).then(({x:ze,y:Ze})=>{JSON.stringify({x:ze,y:Ze})!==Fe&&(je||sn(P,ze,Ze),P._x_anchor.x=ze,P._x_anchor.y=Ze),Fe=JSON.stringify({x:ze,y:Ze})})});he(()=>it())})}function sn(C,P,Y){Object.assign(C.style,{left:P+"px",top:Y+"px",position:"absolute"})}var mt=ji}}),Um=_n({"node_modules/nprogress/nprogress.js"(n,e){(function(t,i){typeof define=="function"&&define.amd?define(i):typeof n=="object"?e.exports=i():t.NProgress=i()})(n,function(){var t={};t.version="0.2.0";var i=t.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};t.configure=function(p){var m,y;for(m in p)y=p[m],y!==void 0&&p.hasOwnProperty(m)&&(i[m]=y);return this},t.status=null,t.set=function(p){var m=t.isStarted();p=r(p,i.minimum,1),t.status=p===1?null:p;var y=t.render(!m),v=y.querySelector(i.barSelector),w=i.speed,x=i.easing;return y.offsetWidth,a(function(E){i.positionUsing===""&&(i.positionUsing=t.getPositioningCSS()),l(v,o(p,w,x)),p===1?(l(y,{transition:"none",opacity:1}),y.offsetWidth,setTimeout(function(){l(y,{transition:"all "+w+"ms linear",opacity:0}),setTimeout(function(){t.remove(),E()},w)},w)):setTimeout(E,w)}),this},t.isStarted=function(){return typeof t.status=="number"},t.start=function(){t.status||t.set(0);var p=function(){setTimeout(function(){!t.status||(t.trickle(),p())},i.trickleSpeed)};return i.trickle&&p(),this},t.done=function(p){return!p&&!t.status?this:t.inc(.3+.5*Math.random()).set(1)},t.inc=function(p){var m=t.status;return m?(typeof p!="number"&&(p=(1-m)*r(Math.random()*m,.1,.95)),m=r(m+p,0,.994),t.set(m)):t.start()},t.trickle=function(){return t.inc(Math.random()*i.trickleRate)},function(){var p=0,m=0;t.promise=function(y){return!y||y.state()==="resolved"?this:(m===0&&t.start(),p++,m++,y.always(function(){m--,m===0?(p=0,t.done()):t.set((p-m)/p)}),this)}}(),t.render=function(p){if(t.isRendered())return document.getElementById("nprogress");u(document.documentElement,"nprogress-busy");var m=document.createElement("div");m.id="nprogress",m.innerHTML=i.template;var y=m.querySelector(i.barSelector),v=p?"-100":s(t.status||0),w=document.querySelector(i.parent),x;return l(y,{transition:"all 0 linear",transform:"translate3d("+v+"%,0,0)"}),i.showSpinner||(x=m.querySelector(i.spinnerSelector),x&&_(x)),w!=document.body&&u(w,"nprogress-custom-parent"),w.appendChild(m),m},t.remove=function(){d(document.documentElement,"nprogress-busy"),d(document.querySelector(i.parent),"nprogress-custom-parent");var p=document.getElementById("nprogress");p&&_(p)},t.isRendered=function(){return!!document.getElementById("nprogress")},t.getPositioningCSS=function(){var p=document.body.style,m="WebkitTransform"in p?"Webkit":"MozTransform"in p?"Moz":"msTransform"in p?"ms":"OTransform"in p?"O":"";return m+"Perspective"in p?"translate3d":m+"Transform"in p?"translate":"margin"};function r(p,m,y){return p<m?m:p>y?y:p}function s(p){return(-1+p)*100}function o(p,m,y){var v;return i.positionUsing==="translate3d"?v={transform:"translate3d("+s(p)+"%,0,0)"}:i.positionUsing==="translate"?v={transform:"translate("+s(p)+"%,0)"}:v={"margin-left":s(p)+"%"},v.transition="all "+m+"ms "+y,v}var a=function(){var p=[];function m(){var y=p.shift();y&&y(m)}return function(y){p.push(y),p.length==1&&m()}}(),l=function(){var p=["Webkit","O","Moz","ms"],m={};function y(E){return E.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(O,L){return L.toUpperCase()})}function v(E){var O=document.body.style;if(E in O)return E;for(var L=p.length,R=E.charAt(0).toUpperCase()+E.slice(1),S;L--;)if(S=p[L]+R,S in O)return S;return E}function w(E){return E=y(E),m[E]||(m[E]=v(E))}function x(E,O,L){O=w(O),E.style[O]=L}return function(E,O){var L=arguments,R,S;if(L.length==2)for(R in O)S=O[R],S!==void 0&&O.hasOwnProperty(R)&&x(E,R,S);else x(E,L[1],L[2])}}();function c(p,m){var y=typeof p=="string"?p:f(p);return y.indexOf(" "+m+" ")>=0}function u(p,m){var y=f(p),v=y+m;c(y,m)||(p.className=v.substring(1))}function d(p,m){var y=f(p),v;!c(p,m)||(v=y.replace(" "+m+" "," "),p.className=v.substring(1,v.length-1))}function f(p){return(" "+(p.className||"")+" ").replace(/\s+/gi," ")}function _(p){p&&p.parentNode&&p.parentNode.removeChild(p)}return t})}}),Wm=_n({"../alpine/packages/morph/dist/module.cjs.js"(n,e){var t=Object.defineProperty,i=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,o=(L,R)=>{for(var S in R)t(L,S,{get:R[S],enumerable:!0})},a=(L,R,S,B)=>{if(R&&typeof R=="object"||typeof R=="function")for(let U of r(R))!s.call(L,U)&&U!==S&&t(L,U,{get:()=>R[U],enumerable:!(B=i(R,U))||B.enumerable});return L},l=L=>a(t({},"__esModule",{value:!0}),L),c={};o(c,{default:()=>O,morph:()=>u}),e.exports=l(c);function u(L,R,S){w();let B,U,j,X,K,Ae,ee,F,N;function G(le={}){let pe=We=>We.getAttribute("key"),Le=()=>{};X=le.updating||Le,K=le.updated||Le,Ae=le.removing||Le,ee=le.removed||Le,F=le.adding||Le,N=le.added||Le,U=le.key||pe,j=le.lookahead||!1}function V(le,pe){if(H(le,pe))return q(le,pe);let Le=!1;if(!d(X,le,pe,()=>Le=!0)){if(le.nodeType===1&&window.Alpine&&window.Alpine.cloneNode(le,pe),p(pe)){D(le,pe),K(le,pe);return}Le||ce(le,pe),K(le,pe),J(le,pe)}}function H(le,pe){return le.nodeType!=pe.nodeType||le.nodeName!=pe.nodeName||ne(le)!=ne(pe)}function q(le,pe){if(d(Ae,le))return;let Le=pe.cloneNode(!0);d(F,Le)||(le.replaceWith(Le),ee(le),N(Le))}function D(le,pe){let Le=pe.nodeValue;le.nodeValue!==Le&&(le.nodeValue=Le)}function ce(le,pe){if(le._x_transitioning||le._x_isShown&&!pe._x_isShown||!le._x_isShown&&pe._x_isShown)return;let Le=Array.from(le.attributes),We=Array.from(pe.attributes);for(let Ie=Le.length-1;Ie>=0;Ie--){let be=Le[Ie].name;pe.hasAttribute(be)||le.removeAttribute(be)}for(let Ie=We.length-1;Ie>=0;Ie--){let be=We[Ie].name,_t=We[Ie].value;le.getAttribute(be)!==_t&&le.setAttribute(be,_t)}}function J(le,pe){le._x_teleport&&(le=le._x_teleport),pe._x_teleport&&(pe=pe._x_teleport);let Le=fe(le.children),We={},Ie=y(pe),be=y(le);for(;Ie;){x(Ie,be);let lt=ne(Ie),xe=ne(be);if(!be)if(lt&&We[lt]){let de=We[lt];le.appendChild(de),be=de}else{if(!d(F,Ie)){let de=Ie.cloneNode(!0);le.appendChild(de),N(de)}Ie=v(pe,Ie);continue}let $=de=>de&&de.nodeType===8&&de.textContent==="[if BLOCK]><![endif]",re=de=>de&&de.nodeType===8&&de.textContent==="[if ENDBLOCK]><![endif]";if($(Ie)&&$(be)){let de=0,rt=be;for(;be;){let Pe=v(le,be);if($(Pe))de++;else if(re(Pe)&&de>0)de--;else if(re(Pe)&&de===0){be=Pe;break}be=Pe}let ye=be;de=0;let se=Ie;for(;Ie;){let Pe=v(pe,Ie);if($(Pe))de++;else if(re(Pe)&&de>0)de--;else if(re(Pe)&&de===0){Ie=Pe;break}Ie=Pe}let ue=Ie,Ee=new m(rt,ye),Ye=new m(se,ue);J(Ee,Ye);continue}if(be.nodeType===1&&j&&!be.isEqualNode(Ie)){let de=v(pe,Ie),rt=!1;for(;!rt&&de;)de.nodeType===1&&be.isEqualNode(de)&&(rt=!0,be=Ne(le,Ie,be),xe=ne(be)),de=v(pe,de)}if(lt!==xe){if(!lt&&xe){We[xe]=be,be=Ne(le,Ie,be),We[xe].remove(),be=v(le,be),Ie=v(pe,Ie);continue}if(lt&&!xe&&Le[lt]&&(be.replaceWith(Le[lt]),be=Le[lt]),lt&&xe){let de=Le[lt];if(de)We[xe]=be,be.replaceWith(de),be=de;else{We[xe]=be,be=Ne(le,Ie,be),We[xe].remove(),be=v(le,be),Ie=v(pe,Ie);continue}}}let Se=be&&v(le,be);V(be,Ie),Ie=Ie&&v(pe,Ie),be=Se}let _t=[];for(;be;)d(Ae,be)||_t.push(be),be=v(le,be);for(;_t.length;){let lt=_t.shift();lt.remove(),ee(lt)}}function ne(le){return le&&le.nodeType===1&&U(le)}function fe(le){let pe={};for(let Le of le){let We=ne(Le);We&&(pe[We]=Le)}return pe}function Ne(le,pe,Le){if(!d(F,pe)){let We=pe.cloneNode(!0);return le.insertBefore(We,Le),N(We),We}return pe}return G(S),B=typeof R=="string"?_(R):R,window.Alpine&&window.Alpine.closestDataStack&&!L._x_dataStack&&(B._x_dataStack=window.Alpine.closestDataStack(L),B._x_dataStack&&window.Alpine.cloneNode(L,B)),V(L,B),B=void 0,L}u.step=()=>{},u.log=()=>{};function d(L,...R){let S=!1;return L(...R,()=>S=!0),S}var f=!1;function _(L){const R=document.createElement("template");return R.innerHTML=L,R.content.firstElementChild}function p(L){return L.nodeType===3||L.nodeType===8}var m=class{constructor(L,R){this.startComment=L,this.endComment=R}get children(){let L=[],R=this.startComment.nextSibling;for(;R&&R!==this.endComment;)L.push(R),R=R.nextSibling;return L}appendChild(L){this.endComment.before(L)}get firstChild(){let L=this.startComment.nextSibling;if(L!==this.endComment)return L}nextNode(L){let R=L.nextSibling;if(R!==this.endComment)return R}insertBefore(L,R){return R.before(L),L}};function y(L){return L.firstChild}function v(L,R){let S;return L instanceof m?S=L.nextNode(R):S=R.nextSibling,S}function w(){if(f)return;f=!0;let L=Element.prototype.setAttribute,R=document.createElement("div");Element.prototype.setAttribute=function(B,U){if(!B.includes("@"))return L.call(this,B,U);R.innerHTML=`<span ${B}="${U}"></span>`;let j=R.firstElementChild.getAttributeNode(B);R.firstElementChild.removeAttributeNode(j),this.setAttributeNode(j)}}function x(L,R){let S=R&&R._x_bindings&&R._x_bindings.id;!S||(L.setAttribute("id",S),L.id=S)}function E(L){L.morph=u}var O=E}}),Ym=_n({"../alpine/packages/mask/dist/module.cjs.js"(n,e){var t=Object.defineProperty,i=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,o=(y,v)=>{for(var w in v)t(y,w,{get:v[w],enumerable:!0})},a=(y,v,w,x)=>{if(v&&typeof v=="object"||typeof v=="function")for(let E of r(v))!s.call(y,E)&&E!==w&&t(y,E,{get:()=>v[E],enumerable:!(x=i(v,E))||x.enumerable});return y},l=y=>a(t({},"__esModule",{value:!0}),y),c={};o(c,{default:()=>m,stripDown:()=>f}),e.exports=l(c);function u(y){y.directive("mask",(v,{value:w,expression:x},{effect:E,evaluateLater:O})=>{let L=()=>x,R="";queueMicrotask(()=>{if(["function","dynamic"].includes(w)){let U=O(x);E(()=>{L=j=>{let X;return y.dontAutoEvaluateFunctions(()=>{U(K=>{X=typeof K=="function"?K(j):K},{scope:{$input:j,$money:p.bind({el:v})}})}),X},S(v,!1)})}else S(v,!1);v._x_model&&v._x_model.set(v.value)}),v.addEventListener("input",()=>S(v)),v.addEventListener("blur",()=>S(v,!1));function S(U,j=!0){let X=U.value,K=L(X);if(!K||K==="false")return!1;if(R.length-U.value.length===1)return R=U.value;let Ae=()=>{R=U.value=B(X,K)};j?d(U,K,()=>{Ae()}):Ae()}function B(U,j){if(U==="")return"";let X=f(j,U);return _(j,X)}}).before("model")}function d(y,v,w){let x=y.selectionStart,E=y.value;w();let O=E.slice(0,x),L=_(v,f(v,O)).length;y.setSelectionRange(L,L)}function f(y,v){let w=v,x="",E={9:/[0-9]/,a:/[a-zA-Z]/,"*":/[a-zA-Z0-9]/},O="";for(let L=0;L<y.length;L++){if(["9","a","*"].includes(y[L])){O+=y[L];continue}for(let R=0;R<w.length;R++)if(w[R]===y[L]){w=w.slice(0,R)+w.slice(R+1);break}}for(let L=0;L<O.length;L++){let R=!1;for(let S=0;S<w.length;S++)if(E[O[L]].test(w[S])){x+=w[S],w=w.slice(0,S)+w.slice(S+1),R=!0;break}if(!R)break}return x}function _(y,v){let w=Array.from(v),x="";for(let E=0;E<y.length;E++){if(!["9","a","*"].includes(y[E])){x+=y[E];continue}if(w.length===0)break;x+=w.shift()}return x}function p(y,v=".",w,x=2){if(y==="-")return"-";if(/^\D+$/.test(y))return"9";w==null&&(w=v===","?".":",");let E=(S,B)=>{let U="",j=0;for(let X=S.length-1;X>=0;X--)S[X]!==B&&(j===3?(U=S[X]+B+U,j=0):U=S[X]+U,j++);return U},O=y.startsWith("-")?"-":"",L=y.replaceAll(new RegExp(`[^0-9\\${v}]`,"g"),""),R=Array.from({length:L.split(v)[0].length}).fill("9").join("");return R=`${O}${E(R,w)}`,x>0&&y.includes(v)&&(R+=`${v}`+"9".repeat(x)),queueMicrotask(()=>{this.el.value.endsWith(v)||this.el.value[this.el.selectionStart-1]===v&&this.el.setSelectionRange(this.el.selectionStart-1,this.el.selectionStart-1)}),R}var m=u}}),$d=class{constructor(){this.arrays=new WeakMap}add(n,e){this.arrays.has(n)||this.arrays.set(n,[]),this.arrays.get(n).push(e)}get(n){return this.arrays.has(n)?this.arrays.get(n):[]}each(n,e){return this.get(n).forEach(e)}};function wl(n,e,t={},i=!0){n.dispatchEvent(new CustomEvent(e,{detail:t,bubbles:i,composed:!0,cancelable:!0}))}function qd(n){return typeof n=="object"&&n!==null}function hh(n){return qd(n)&&!Kl(n)}function Kl(n){return Array.isArray(n)}function Xm(n){return typeof n=="function"}function dh(n){return typeof n!="object"||n===null}function Vn(n){return JSON.parse(JSON.stringify(n))}function dn(n,e){return e===""?n:e.split(".").reduce((t,i)=>{if(t!==void 0)return t[i]},n)}function wa(n,e,t){let i=e.split(".");if(i.length===1)return n[e]=t;let r=i.shift(),s=i.join(".");n[r]===void 0&&(n[r]={}),wa(n[r],s,t)}function Tc(n,e,t={},i=""){if(n===e)return t;if(typeof n!=typeof e||hh(n)&&Kl(e)||Kl(n)&&hh(e)||dh(n)||dh(e))return t[i]=e,t;let r=Object.keys(n);return Object.entries(e).forEach(([s,o])=>{t={...t,...Tc(n[s],e[s],t,i===""?s:`${i}.${s}`)},r=r.filter(a=>a!==s)}),r.forEach(s=>{t[`${i}.${s}`]="__rm__"}),t}function Nr(n){let e=fh(n)?n[0]:n;return fh(n)&&n[1],qd(e)&&Object.entries(e).forEach(([t,i])=>{e[t]=Nr(i)}),e}function fh(n){return Array.isArray(n)&&n.length===2&&typeof n[1]=="object"&&Object.keys(n[1]).includes("s")}function Jd(){var n;if(document.querySelector('meta[name="csrf-token"]'))return document.querySelector('meta[name="csrf-token"]').getAttribute("content");if(document.querySelector("[data-csrf]"))return document.querySelector("[data-csrf]").getAttribute("data-csrf");if((n=window.livewireScriptConfig.csrf)!=null&&n)return window.livewireScriptConfig.csrf;throw"Livewire: No CSRF token detected"}function ef(n){return!!n.match(/<script>Sfdump\(".+"\)<\/script>/)}function Hm(n){let e=n.match(/.*<script>Sfdump\(".+"\)<\/script>/s);return[e,n.replace(e,"")]}function tf(n){let e=document.createElement("html");e.innerHTML=n,e.querySelectorAll("a").forEach(r=>r.setAttribute("target","_top"));let t=document.getElementById("livewire-error");typeof t!="undefined"&&t!=null?t.innerHTML="":(t=document.createElement("div"),t.id="livewire-error",t.style.position="fixed",t.style.width="100vw",t.style.height="100vh",t.style.padding="50px",t.style.backgroundColor="rgba(0, 0, 0, .6)",t.style.zIndex=2e5);let i=document.createElement("iframe");i.style.backgroundColor="#17161A",i.style.borderRadius="5px",i.style.width="100%",i.style.height="100%",t.appendChild(i),document.body.prepend(t),document.body.style.overflow="hidden",i.contentWindow.document.open(),i.contentWindow.document.write(e.outerHTML),i.contentWindow.document.close(),t.addEventListener("click",()=>gh(t)),t.setAttribute("tabindex",0),t.addEventListener("keydown",r=>{r.key==="Escape"&&gh(t)}),t.focus()}function gh(n){n.outerHTML="",document.body.style.overflow="visible"}var Br=[];function St(n,e){return Br[n]||(Br[n]=[]),Br[n].push(e),()=>{Br[n]=Br[n].filter(t=>t!==e)}}function Yt(n,...e){let t=Br[n]||[],i=[];for(let r=0;r<t.length;r++){let s=t[r](...e);Xm(s)&&i.push(s)}return r=>{let s=r;for(let o=0;o<i.length;o++){let a=i[o](s);a!==void 0&&(s=a)}return s}}var Hd,Qd,Kd,ph=(Kd=(Qd=(Hd=document.querySelector("[data-uri]"))==null?void 0:Hd.getAttribute("data-uri"))!=null?Qd:window.livewireScriptConfig.uri)!=null?Kd:null;function nf(){Qm(()=>{Km()})}var Al;function Qm(n){Al||(Al=setTimeout(()=>{n(),Al=void 0},5))}async function Km(){Vm(),await Jm(async()=>{let[n,e,t]=Zm(),i={method:"POST",body:JSON.stringify({_token:Jd(),components:n}),headers:{"Content-type":"application/json","X-Livewire":""}},r=[],s=[],o=[],a=m=>r.forEach(y=>y(m)),l=m=>s.forEach(y=>y(m)),c=m=>o.forEach(y=>y(m)),u=Yt("request.profile",i);Yt("request",{url:ph,options:i,payload:i.body,respond:m=>o.push(m),succeed:m=>r.push(m),fail:m=>s.push(m)});let d=await fetch(ph,i),f={status:d.status,response:d};c(f),d=f.response;let _=await d.text();if(!d.ok){u({content:"{}",failed:!0});let m=!1;return t(),l({status:d.status,content:_,preventDefault:()=>m=!0}),m?void 0:(d.status===419&&$m(),qm(_))}d.redirected&&(window.location.href=d.url),ef(_)?([dump,_]=Hm(_),tf(dump),u({content:"{}",failed:!0})):u({content:_,failed:!1});let{components:p}=JSON.parse(_);e(p),a({status:d.status,json:JSON.parse(_)})})}function Vm(){e_().forEach(e=>e.prepare())}function Zm(){let n=[],e=[],t=[];return t_(s=>{let[o,a,l]=s.toRequestPayload();n.push(o),e.push(a),t.push(l)}),[n,s=>e.forEach(o=>o(s.shift())),()=>t.forEach(s=>s())]}function $m(){confirm(`This page has expired.
Would you like to refresh the page?`)&&window.location.reload()}function qm(n){tf(n)}var Vl=!1,Zl=[];async function rf(n){return new Promise(e=>{Vl?Zl.push(()=>e(n())):e(n())})}async function Jm(n){for(Vl=!0,await n(),Vl=!1;Zl.length>0;)Zl.shift()()}var Fs=[];function e_(){return Fs}function t_(n){for(;Fs.length>0;)n(Fs.shift())}function sf(n){let e=Fs.find(t=>t.component.id===n.id);return e||Fs.push(e=new n_(n)),e}async function of(n){return await rf(()=>{let e=sf(n);return nf(),new Promise((t,i)=>{e.addResolver(t)})})}async function i_(n,e,t){return await rf(()=>{let i=sf(n);return nf(),new Promise((r,s)=>{i.addCall(e,t,o=>r(o))})})}var n_=class{constructor(n){this.component=n,this.calls=[],this.receivers=[],this.resolvers=[]}addResolver(n){this.resolvers.push(n)}addCall(n,e,t){this.calls.push({path:"",method:n,params:e,handleReturn(i){t(i)}})}prepare(){Yt("commit.prepare",{component:this.component})}toRequestPayload(){let n=Tc(this.component.canonical,this.component.ephemeral),e={snapshot:this.component.snapshotEncoded,updates:n,calls:this.calls.map(d=>({path:d.path,method:d.method,params:d.params}))},t=[],i=[],r=[],s=d=>t.forEach(f=>f(d)),o=()=>i.forEach(d=>d()),a=()=>r.forEach(d=>d()),l=Yt("commit",{component:this.component,commit:e,succeed:d=>{t.push(d)},fail:d=>{i.push(d)},respond:d=>{r.push(d)}});return[e,d=>{let{snapshot:f,effects:_}=d;if(a(),this.component.mergeNewSnapshot(f,_,n),$l(this.component,this.component.effects),_.returns){let m=_.returns;this.calls.map(({handleReturn:v})=>v).forEach((v,w)=>{v(m[w])})}let p=JSON.parse(f);l({snapshot:p,effects:_}),this.resolvers.forEach(m=>m()),s(d)},()=>{a(),o()}]}};function $l(n,e){Yt("effects",n,e)}var mh=vt(Gt());function af(n,e){return e||(e=()=>{}),(t,i=!1)=>{let r=i,s=t,o=n.$wire,a=o.get(s);return mh.default.interceptor((c,u,d,f,_)=>{if(typeof a=="undefined"){console.error(`Livewire Entangle Error: Livewire property ['${s}'] cannot be found on component: ['${n.name}']`);return}let p=mh.default.entangle({get(){return o.get(t)},set(m){o.set(t,m,r)}},{get(){return u()},set(m){d(m)}});return e(()=>p()),o.get(t)},c=>{Object.defineProperty(c,"live",{get(){return r=!0,c}})})(a)}}var lf=vt(Gt()),xl=new WeakMap;function Aa(n){if(!xl.has(n)){let e=new s_(n);xl.set(n,e),e.registerListeners()}return xl.get(n)}function r_(n,e,t,i){let r=Aa(t),s=()=>n.dispatchEvent(new CustomEvent("livewire-upload-start",{bubbles:!0,detail:{id:t.id,property:e}})),o=()=>n.dispatchEvent(new CustomEvent("livewire-upload-finish",{bubbles:!0,detail:{id:t.id,property:e}})),a=()=>n.dispatchEvent(new CustomEvent("livewire-upload-error",{bubbles:!0,detail:{id:t.id,property:e}})),l=d=>{var f=Math.round(d.loaded*100/d.total);n.dispatchEvent(new CustomEvent("livewire-upload-progress",{bubbles:!0,detail:{progress:f}}))},c=d=>{d.target.files.length!==0&&(s(),d.target.multiple?r.uploadMultiple(e,d.target.files,o,a,l):r.upload(e,d.target.files[0],o,a,l))};n.addEventListener("change",c);let u=()=>{n.value=null};n.addEventListener("click",u),i(()=>{n.removeEventListener("change",c),n.removeEventListener("click",u)})}var s_=class{constructor(n){this.component=n,this.uploadBag=new _h,this.removeBag=new _h}registerListeners(){this.component.$wire.$on("upload:generatedSignedUrl",({name:n,url:e})=>{this.component,this.handleSignedUrl(n,e)}),this.component.$wire.$on("upload:generatedSignedUrlForS3",({name:n,payload:e})=>{this.component,this.handleS3PreSignedUrl(n,e)}),this.component.$wire.$on("upload:finished",({name:n,tmpFilenames:e})=>this.markUploadFinished(n,e)),this.component.$wire.$on("upload:errored",({name:n})=>this.markUploadErrored(n)),this.component.$wire.$on("upload:removed",({name:n,tmpFilename:e})=>this.removeBag.shift(n).finishCallback(e))}upload(n,e,t,i,r){this.setUpload(n,{files:[e],multiple:!1,finishCallback:t,errorCallback:i,progressCallback:r})}uploadMultiple(n,e,t,i,r){this.setUpload(n,{files:Array.from(e),multiple:!0,finishCallback:t,errorCallback:i,progressCallback:r})}removeUpload(n,e,t){this.removeBag.push(n,{tmpFilename:e,finishCallback:t}),this.component.$wire.call("_removeUpload",n,e)}setUpload(n,e){this.uploadBag.add(n,e),this.uploadBag.get(n).length===1&&this.startUpload(n,e)}handleSignedUrl(n,e){let t=new FormData;Array.from(this.uploadBag.first(n).files).forEach(s=>t.append("files[]",s,s.name));let i={Accept:"application/json"},r=Jd();r&&(i["X-CSRF-TOKEN"]=r),this.makeRequest(n,t,"post",e,i,s=>s.paths)}handleS3PreSignedUrl(n,e){let t=this.uploadBag.first(n).files[0],i=e.headers;"Host"in i&&delete i.Host;let r=e.url;this.makeRequest(n,t,"put",r,i,s=>[e.path])}makeRequest(n,e,t,i,r,s){let o=new XMLHttpRequest;o.open(t,i),Object.entries(r).forEach(([a,l])=>{o.setRequestHeader(a,l)}),o.upload.addEventListener("progress",a=>{a.detail={},a.detail.progress=Math.round(a.loaded*100/a.total),this.uploadBag.first(n).progressCallback(a)}),o.addEventListener("load",()=>{if((o.status+"")[0]==="2"){let l=s(o.response&&JSON.parse(o.response));this.component.$wire.call("_finishUpload",n,l,this.uploadBag.first(n).multiple);return}let a=null;o.status===422&&(a=o.response),this.component.$wire.call("_uploadErrored",n,a,this.uploadBag.first(n).multiple)}),o.send(e)}startUpload(n,e){let t=e.files.map(i=>({name:i.name,size:i.size,type:i.type}));this.component.$wire.call("_startUpload",n,t,e.multiple),this.component}markUploadFinished(n,e){this.component;let t=this.uploadBag.shift(n);t.finishCallback(t.multiple?e:e[0]),this.uploadBag.get(n).length>0&&this.startUpload(n,this.uploadBag.last(n))}markUploadErrored(n){this.component,this.uploadBag.shift(n).errorCallback(),this.uploadBag.get(n).length>0&&this.startUpload(n,this.uploadBag.last(n))}},_h=class{constructor(){this.bag={}}add(n,e){this.bag[n]||(this.bag[n]=[]),this.bag[n].push(e)}push(n,e){this.add(n,e)}first(n){return this.bag[n]?this.bag[n][0]:null}last(n){return this.bag[n].slice(-1)[0]}get(n){return this.bag[n]}shift(n){return this.bag[n].shift()}call(n,...e){(this.listeners[n]||[]).forEach(t=>{t(...e)})}has(n){return Object.keys(this.listeners).includes(n)}};function o_(n,e,t,i=()=>{},r=()=>{},s=()=>{}){Aa(n).upload(e,t,i,r,s)}function a_(n,e,t,i=()=>{},r=()=>{},s=()=>{}){Aa(n).uploadMultiple(e,t,i,r,s)}function l_(n,e,t,i=()=>{},r=()=>{}){Aa(n).removeUpload(e,t,i,r)}var Lc={},cf;function ii(n,e,t=null){Lc[n]=e}function c_(n){cf=n}var yh={on:"$on",get:"$get",set:"$set",call:"$call",commit:"$commit",watch:"$watch",entangle:"$entangle",dispatch:"$dispatch",dispatchTo:"$dispatchTo",dispatchSelf:"$dispatchSelf",upload:"$upload",uploadMultiple:"$uploadMultiple",removeUpload:"$removeUpload"};function u_(n,e){return new Proxy({},{get(t,i){if(i==="__instance")return n;if(i in yh)return vh(n,yh[i]);if(i in Lc)return vh(n,i);if(i in e)return e[i];if(!["then"].includes(i))return h_(n)(i)},set(t,i,r){return i in e&&(e[i]=r),!0}})}function vh(n,e){return Lc[e](n)}function h_(n){return cf(n)}lf.default.magic("wire",(n,{cleanup:e})=>{let t;return new Proxy({},{get(i,r){return t||(t=Pn(n)),["$entangle","entangle"].includes(r)?af(t,e):t.$wire[r]},set(i,r,s){return t||(t=Pn(n)),t.$wire[r]=s,!0}})});ii("__instance",n=>n);ii("$get",n=>(e,t=!0)=>dn(t?n.reactive:n.ephemeral,e));ii("$set",n=>async(e,t,i=!0)=>(wa(n.reactive,e,t),i?await of(n):Promise.resolve()));ii("$call",n=>async(e,...t)=>await n.$wire[e](...t));ii("$entangle",n=>(e,t=!1)=>af(n)(e,t));ii("$toggle",n=>(e,t=!0)=>n.$wire.set(e,!n.$wire.get(e),t));ii("$watch",n=>(e,t)=>{let i=!0,r;lf.default.effect(()=>{let s=dn(n.reactive,e);JSON.stringify(s),i?r=s:queueMicrotask(()=>{t(s,r),r=s}),i=!1})});ii("$refresh",n=>n.$wire.$commit);ii("$commit",n=>async()=>await of(n));ii("$on",n=>(...e)=>b_(n,...e));ii("$dispatch",n=>(...e)=>hf(n,...e));ii("$dispatchSelf",n=>(...e)=>Yr(n,...e));ii("$dispatchTo",n=>(...e)=>Mc(n,...e));ii("$upload",n=>(...e)=>o_(n,...e));ii("$uploadMultiple",n=>(...e)=>a_(n,...e));ii("$removeUpload",n=>(...e)=>l_(n,...e));var El=new WeakMap;ii("$parent",n=>{if(El.has(n))return El.get(n).$wire;let e=Pn(n.el.parentElement);return El.set(n,e),e.$wire});var Wr=new WeakMap;function d_(n,e,t){Wr.has(n)||Wr.set(n,{});let i=Wr.get(n);i[e]=t,Wr.set(n,i)}c_(n=>e=>async(...t)=>{if(t.length===1&&t[0]instanceof Event&&(t=[]),Wr.has(n)){let i=Wr.get(n);if(typeof i[e]=="function")return i[e](t)}return await i_(n,e,t)});var f_=class{constructor(n){if(n.__livewire)throw"Component already initialized";if(n.__livewire=this,this.el=n,this.id=n.getAttribute("wire:id"),this.__livewireId=this.id,this.snapshotEncoded=n.getAttribute("wire:snapshot"),this.snapshot=JSON.parse(this.snapshotEncoded),!this.snapshot)throw"Snapshot missing on Livewire component with id: "+this.id;this.name=this.snapshot.memo.name,this.effects=JSON.parse(n.getAttribute("wire:effects")),this.originalEffects=Vn(this.effects),this.canonical=Nr(Vn(this.snapshot.data)),this.ephemeral=Nr(Vn(this.snapshot.data)),this.reactive=Alpine.reactive(this.ephemeral),this.$wire=u_(this,this.reactive),this.cleanups=[],$l(this,this.effects)}mergeNewSnapshot(n,e,t={}){let i=JSON.parse(n),r=Vn(this.canonical),s=this.applyUpdates(r,t),o=Nr(Vn(i.data)),a=Tc(s,o);this.snapshotEncoded=n,this.snapshot=i,this.effects=e,this.canonical=Nr(Vn(i.data));let l=Nr(Vn(i.data));return Object.entries(a).forEach(([c,u])=>{let d=c.split(".")[0];this.reactive[d]=l[d]}),a}applyUpdates(n,e){for(let t in e)wa(n,t,e[t]);return n}replayUpdate(n,e){let t={...this.effects,html:e};this.mergeNewSnapshot(JSON.stringify(n),t),$l(this,{html:e})}get children(){let n=this.snapshot.memo;return Object.values(n.children).map(t=>t[1]).map(t=>m_(t))}inscribeSnapshotAndEffectsOnElement(){let n=this.el;n.setAttribute("wire:snapshot",this.snapshotEncoded);let e=this.originalEffects.listeners?{listeners:this.originalEffects.listeners}:{};this.originalEffects.url&&(e.url=this.originalEffects.url),n.setAttribute("wire:effects",JSON.stringify(e))}addCleanup(n){this.cleanups.push(n)}cleanup(){for(;this.cleanups.length>0;)this.cleanups.pop()()}},pn={};function g_(n){let e=new f_(n);if(pn[e.id])throw"Component already registered";return Yt("component.init",{component:e,cleanup:i=>e.addCleanup(i)}),pn[e.id]=e,e}function p_(n){let e=pn[n];!e||(e.cleanup(),delete pn[n])}function m_(n){let e=pn[n];if(!e)throw"Component not found: "+n;return e}function Pn(n,e=!0){let t=Alpine.findClosest(n,i=>i.__livewire);if(!t){if(e)throw"Could not find Livewire component in DOM tree";return}return t.__livewire}function uf(n){return Object.values(pn).filter(e=>n==e.name)}function __(n){return uf(n).map(e=>e.$wire)}function y_(n){let e=pn[n];return e&&e.$wire}function v_(){return Object.values(pn)[0].$wire}function w_(){return Object.values(pn)}vt(Gt());St("effects",(n,e)=>{A_(n,e.listeners||[]),x_(n,e.dispatches||[])});function A_(n,e){e.forEach(t=>{let i=r=>{r.__livewire&&r.__livewire.receivedBy.push(n),n.$wire.call("__dispatch",t,r.detail||{})};window.addEventListener(t,i),n.addCleanup(()=>window.removeEventListener(t,i)),n.el.addEventListener(t,r=>{!r.__livewire||r.bubbles||(r.__livewire&&r.__livewire.receivedBy.push(n.id),n.$wire.call("__dispatch",t,r.detail||{}))})})}function x_(n,e){e.forEach(({name:t,params:i={},self:r=!1,to:s})=>{r?Yr(n,t,i):s?Mc(n,s,t,i):hf(n,t,i)})}function xa(n,e,t,i=!0){let r=new CustomEvent(e,{bubbles:i,detail:t});r.__livewire={name:e,params:t,receivedBy:[]},n.dispatchEvent(r)}function hf(n,e,t){xa(n.el,e,t)}function E_(n,e){xa(window,n,e)}function Yr(n,e,t){xa(n.el,e,t,!1)}function Mc(n,e,t,i){uf(e).forEach(s=>{xa(s.el,t,i,!1)})}function b_(n,e,t){n.el.addEventListener(e,i=>{t(i.detail)})}function C_(n,e){window.addEventListener(n,t=>{!t.__livewire||e(t.detail)})}vt(Gt());function ql(n){return n.match(new RegExp("wire:"))}function Jl(n,e){let[t,...i]=e.replace(new RegExp("wire:"),"").split(".");return new S_(t,i,e,n)}function Di(n,e){St("directive.init",({el:t,component:i,directive:r,cleanup:s})=>{r.value===n&&e({el:t,directive:r,component:i,cleanup:s})})}function Ea(n){return new I_(n)}var I_=class{constructor(n){this.el=n,this.directives=this.extractTypeModifiersAndValue()}all(){return this.directives}has(n){return this.directives.map(e=>e.value).includes(n)}missing(n){return!this.has(n)}get(n){return this.directives.find(e=>e.value===n)}extractTypeModifiersAndValue(){return Array.from(this.el.getAttributeNames().filter(n=>ql(n)).map(n=>Jl(this.el,n)))}},S_=class{constructor(n,e,t,i){this.rawName=this.raw=t,this.el=i,this.eventContext,this.value=n,this.modifiers=e,this.expression=this.el.getAttribute(this.rawName)}get method(){const{method:n}=this.parseOutMethodAndParams(this.expression);return n}get params(){const{params:n}=this.parseOutMethodAndParams(this.expression);return n}parseOutMethodAndParams(n){let e=n,t=[];const i=e.match(/(.*?)\((.*)\)/s);return i&&(e=i[1],t=new Function("$event",`return (function () {
                for (var l=arguments.length, p=new Array(l), k=0; k<l; k++) {
                    p[k] = arguments[k];
                }
                return [].concat(p);
            })(${i[2]})`)(this.eventContext)),{method:e,params:t}}},R_=vt(Nm()),T_=vt(Bm()),L_=vt(Gm()),M_=vt(zm()),O_=vt(jm());function P_(){let n=new URL(window.location.href,document.baseURI);N_(n,document.documentElement.outerHTML)}function F_(n){window.addEventListener("popstate",e=>{let i=(e.state||{}).alpine||{};if(!i._html)return;let r=B_(i._html);n(r)})}function D_(n,e){k_(e,n)}function k_(n,e){df("pushState",n,e)}function N_(n,e){df("replaceState",n,e)}function df(n,e,t){let i=new Date().getTime();ff(i,t);let r=history.state||{};r.alpine||(r.alpine={}),r.alpine._html=i;try{history[n](r,document.title,e)}catch(s){s instanceof DOMException&&s.name==="SecurityError"&&console.error("Livewire: You can't use wire:navigate with a link to a different root domain: "+e),console.error(s)}}function B_(n){return JSON.parse(sessionStorage.getItem("alpine:"+n))}function ff(n,e){try{sessionStorage.setItem("alpine:"+n,JSON.stringify(e))}catch(t){if(![22,1,2,3,4,5,6,7,8,9,10,11,12,13,14].includes(t.code))return;let i=Object.keys(sessionStorage).map(r=>Number(r.replace("alpine:",""))).sort().shift();if(!i)return;sessionStorage.removeItem("alpine:"+i),ff(n,e)}}var Ki={};function wh(n,e){let t=n.pathname;Ki[t]||(Ki[t]={finished:!1,html:null,whenFinished:()=>{}},fetch(t).then(i=>i.text()).then(i=>{e(i)}))}function Ah(n,e){let t=Ki[e.pathname];t.html=n,t.finished=!0,t.whenFinished()}function G_(n,e,t){let i=n.pathname+n.search;if(!Ki[i])return t();if(Ki[i].finished){let r=Ki[i].html;return delete Ki[i],e(r)}else Ki[i].whenFinished=()=>{let r=Ki[i].html;delete Ki[i],e(r)}}function z_(n,e){let t=r=>r.which>1||r.altKey||r.ctrlKey||r.metaKey||r.shiftKey,i=r=>r.which!==13||r.altKey||r.ctrlKey||r.metaKey||r.shiftKey;n.addEventListener("click",r=>{t(r)||r.preventDefault()}),n.addEventListener("mousedown",r=>{t(r)||(r.preventDefault(),e(s=>{let o=a=>{a.preventDefault(),s(),n.removeEventListener("mouseup",o)};n.addEventListener("mouseup",o)}))}),n.addEventListener("keydown",r=>{i(r)||(r.preventDefault(),e(s=>{s()}))})}function j_(n,e=60,t){n.addEventListener("mouseenter",i=>{let r=setTimeout(()=>{t(i)},e),s=()=>{clearTimeout(r),n.removeEventListener("mouseleave",s)};n.addEventListener("mouseleave",s)})}function xh(n){return gf(n.getAttribute("href"))}function gf(n){return new URL(n,document.baseURI)}var Oc=vt(Gt());function Eh(n){Oc.default.mutateDom(()=>{n.querySelectorAll("[data-teleport-template]").forEach(e=>e._x_teleport.remove())})}function bh(n){Oc.default.mutateDom(()=>{n.querySelectorAll("[data-teleport-target]").forEach(e=>e.remove())})}function Ch(n){Oc.default.walk(n,(e,t)=>{!e._x_teleport||(e._x_teleportPutBack(),t())})}function Ih(){document.body.setAttribute("data-scroll-x",document.body.scrollLeft),document.body.setAttribute("data-scroll-y",document.body.scrollTop),document.querySelectorAll(["[x-navigate\\:scroll]","[wire\\:scroll]"]).forEach(n=>{n.setAttribute("data-scroll-x",n.scrollLeft),n.setAttribute("data-scroll-y",n.scrollTop)})}function Sh(){let n=e=>{e.hasAttribute("data-scroll-x")?(e.scrollTo({top:Number(e.getAttribute("data-scroll-x")),left:Number(e.getAttribute("data-scroll-y")),behavior:"instant"}),e.removeAttribute("data-scroll-x"),e.removeAttribute("data-scroll-y")):window.scrollTo({top:0,left:0,behavior:"instant"})};queueMicrotask(()=>{n(document.body),document.querySelectorAll(["[x-navigate\\:scroll]","[wire\\:scroll]"]).forEach(n)})}var ec=vt(Gt()),Ts={};function Rh(n){Ts={},document.querySelectorAll("[x-persist]").forEach(e=>{Ts[e.getAttribute("x-persist")]=e,n(e),ec.default.mutateDom(()=>{e.remove()})})}function Th(n){let e=[];document.querySelectorAll("[x-persist]").forEach(t=>{let i=Ts[t.getAttribute("x-persist")];!i||(e.push(t.getAttribute("x-persist")),i._x_wasPersisted=!0,n(i,t),ec.default.mutateDom(()=>{t.replaceWith(i)}))}),Object.entries(Ts).forEach(([t,i])=>{e.includes(t)||ec.default.destroyTree(i)}),Ts={}}var Ds=vt(Um());Ds.default.configure({minimum:.1});Ds.default.configure({trickleSpeed:200});Y_();var tc=!1;function U_(){tc=!0,setTimeout(()=>{!tc||Ds.default.start()},150)}function W_(){tc=!1,Ds.default.done(),Ds.default.remove()}function Y_(){let n=document.createElement("style");n.innerHTML=`/* Make clicks pass-through */

    #nprogress {
      pointer-events: none;
    }

    #nprogress .bar {
      background: var(--livewire-progress-bar-color, #29d);

      position: fixed;
      z-index: 1031;
      top: 0;
      left: 0;

      width: 100%;
      height: 2px;
    }

    /* Fancy blur effect */
    #nprogress .peg {
      display: block;
      position: absolute;
      right: 0px;
      width: 100px;
      height: 100%;
      box-shadow: 0 0 10px #29d, 0 0 5px #29d;
      opacity: 1.0;

      -webkit-transform: rotate(3deg) translate(0px, -4px);
          -ms-transform: rotate(3deg) translate(0px, -4px);
              transform: rotate(3deg) translate(0px, -4px);
    }

    /* Remove these to get rid of the spinner */
    #nprogress .spinner {
      display: block;
      position: fixed;
      z-index: 1031;
      top: 15px;
      right: 15px;
    }

    #nprogress .spinner-icon {
      width: 18px;
      height: 18px;
      box-sizing: border-box;

      border: solid 2px transparent;
      border-top-color: var(--livewire-progress-bar-color, #29d);
      border-left-color: var(--livewire-progress-bar-color, #29d);
      border-radius: 50%;

      -webkit-animation: nprogress-spinner 400ms linear infinite;
              animation: nprogress-spinner 400ms linear infinite;
    }

    .nprogress-custom-parent {
      overflow: hidden;
      position: relative;
    }

    .nprogress-custom-parent #nprogress .spinner,
    .nprogress-custom-parent #nprogress .bar {
      position: absolute;
    }

    @-webkit-keyframes nprogress-spinner {
      0%   { -webkit-transform: rotate(0deg); }
      100% { -webkit-transform: rotate(360deg); }
    }
    @keyframes nprogress-spinner {
      0%   { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    `,document.head.appendChild(n)}var bl=[],pf=["data-csrf"];function Lh(n,e){let t=new DOMParser().parseFromString(n,"text/html"),i=document.adoptNode(t.body),r=document.adoptNode(t.head);bl=bl.concat(Array.from(document.body.querySelectorAll("script")).map(o=>vf(wf(o.outerHTML,pf)))),H_(r),X_(i,bl);let s=document.body;document.body.replaceWith(i),Alpine.destroyTree(s),e()}function X_(n,e){n.querySelectorAll("script").forEach(t=>{if(t.hasAttribute("data-navigate-once")){let i=vf(wf(t.outerHTML,pf));if(e.includes(i))return}t.replaceWith(mf(t))})}function H_(n){let e=Array.from(document.head.children),t=e.map(r=>r.outerHTML),i=document.createDocumentFragment();for(let r of Array.from(n.children))Oh(r)&&(t.includes(r.outerHTML)?i.appendChild(r):(_f(r)&&Q_(r,e)&&setTimeout(()=>window.location.reload()),yf(r)?document.head.appendChild(mf(r)):document.head.appendChild(r)));for(let r of Array.from(document.head.children))Oh(r)||r.remove();for(let r of Array.from(n.children))document.head.appendChild(r)}function mf(n){let e=document.createElement("script");e.textContent=n.textContent,e.async=n.async;for(let t of n.attributes)e.setAttribute(t.name,t.value);return e}function _f(n){return n.hasAttribute("data-navigate-track")}function Q_(n,e){let[t,i]=Mh(n);return e.some(r=>{if(!_f(r))return!1;let[s,o]=Mh(r);if(s===t&&i!==o)return!0})}function Mh(n){return(yf(n)?n.src:n.href).split("?")}function Oh(n){return n.tagName.toLowerCase()==="link"&&n.getAttribute("rel").toLowerCase()==="stylesheet"||n.tagName.toLowerCase()==="style"||n.tagName.toLowerCase()==="script"}function yf(n){return n.tagName.toLowerCase()==="script"}function vf(n){return n.split("").reduce((e,t)=>(e=(e<<5)-e+t.charCodeAt(0),e&e),0)}function wf(n,e){let t=n;return e.forEach(i=>{const r=new RegExp(`${i}="[^"]*"|${i}='[^']*'`,"g");t=t.replace(r,"")}),t.trim()}function K_(n,e){let t=n.pathname+n.search;fetch(t).then(i=>i.text()).then(i=>{e(i)})}vt(Gt());var Cl=!0;function V_(n){n.navigate=t=>{e(gf(t))},n.navigate.disableProgressBar=()=>{Cl=!1},n.addInitSelector(()=>`[${n.prefixed("navigate")}]`),n.directive("navigate",(t,{value:i,expression:r,modifiers:s},{evaluateLater:o,cleanup:a})=>{s.includes("hover")&&j_(t,60,()=>{let c=xh(t);wh(c,u=>{Ah(u,c)})}),z_(t,c=>{let u=xh(t);wh(u,d=>{Ah(d,u)}),c(()=>{e(u)})})});function e(t){Cl&&U_(),Z_(t,i=>{To("alpine:navigating"),Ih(),Cl&&W_(),P_(),Ph(n,r=>{Rh(s=>{Eh(s)}),Lh(i,()=>{bh(document.body),Th((s,o)=>{Ch(s)}),Sh(),To("alpine:navigated"),D_(i,t),r(()=>{Fh(n)})})})})}F_(t=>{Ih(),Ph(n,i=>{Rh(r=>{Eh(r)}),Lh(t,()=>{bh(document.body),Th((r,s)=>{Ch(r)}),Sh(),To("alpine:navigated"),i(()=>{Fh(n)})})})}),setTimeout(()=>{To("alpine:navigated")})}function Z_(n,e){G_(n,e,()=>{K_(n,e)})}function Ph(n,e){n.stopObservingMutations(),e(t=>{n.startObservingMutations(),setTimeout(()=>{t()})})}function To(n){document.dispatchEvent(new CustomEvent(n,{bubbles:!0}))}function Fh(n){n.initTree(document.body,void 0,(e,t)=>{e._x_wasPersisted&&t()})}function $_(n){n.magic("queryString",(e,{interceptor:t})=>{let i,r=!1,s=!1;return t((o,a,l,c,u)=>{let d=i||c,{initial:f,replace:_,push:p,pop:m}=ic(d,o,r);return l(f),s?(n.effect(()=>p(a())),m(async y=>{l(y),await(()=>Promise.resolve())()})):n.effect(()=>_(a())),f},o=>{o.alwaysShow=()=>(r=!0,o),o.usePush=()=>(s=!0,o),o.as=a=>(i=a,o)})}),n.history={track:ic}}function ic(n,e,t=!1){let{has:i,get:r,set:s,remove:o}=J_(),a=new URL(window.location.href),l=i(a,n),c=l?r(a,n):e,u=JSON.stringify(c),d=p=>JSON.stringify(p)===u;t&&(a=s(a,n,c)),Dh(a,n,{value:c});let f=!1,_=(p,m)=>{if(f)return;let y=new URL(window.location.href);!t&&!l&&d(m)?y=o(y,n):y=s(y,n,m),p(y,n,{value:m})};return{initial:c,replace(p){_(Dh,p)},push(p){_(q_,p)},pop(p){let m=y=>{!y.state||!y.state.alpine||Object.entries(y.state.alpine).forEach(([v,{value:w}])=>{if(v!==n)return;f=!0;let x=p(w);x instanceof Promise?x.finally(()=>f=!1):f=!1})};return window.addEventListener("popstate",m),()=>window.removeEventListener("popstate",m)}}}function Dh(n,e,t){let i=window.history.state||{};i.alpine||(i.alpine={}),i.alpine[e]=Af(t),window.history.replaceState(i,"",n.toString())}function q_(n,e,t){let i=window.history.state||{};i.alpine||(i.alpine={}),i={alpine:{...i.alpine,[e]:Af(t)}},window.history.pushState(i,"",n.toString())}function Af(n){return JSON.parse(JSON.stringify(n))}function J_(){return{has(n,e){let t=n.search;if(!t)return!1;let i=Lo(t);return Object.keys(i).includes(e)},get(n,e){let t=n.search;return t?Lo(t)[e]:!1},set(n,e,t){let i=Lo(n.search);return i[e]=t,n.search=kh(i),n},remove(n,e){let t=Lo(n.search);return delete t[e],n.search=kh(t),n}}}function kh(n){let e=r=>typeof r=="object"&&r!==null,t=(r,s={},o="")=>(Object.entries(r).forEach(([a,l])=>{let c=o===""?a:`${o}[${a}]`;e(l)?s={...s,...t(l,s,c)}:s[c]=encodeURIComponent(l).replaceAll("%20","+").replaceAll("%2C",",")}),s),i=t(n);return Object.entries(i).map(([r,s])=>`${r}=${s}`).join("&")}function Lo(n){if(n=n.replace("?",""),n==="")return{};let e=(r,s,o)=>{let[a,l,...c]=r.split(".");if(!l)return o[r]=s;o[a]===void 0&&(o[a]=isNaN(l)?{}:[]),e([l,...c].join("."),s,o[a])},t=n.split("&").map(r=>r.split("=")),i={};return t.forEach(([r,s])=>{if(!!s)if(s=decodeURIComponent(s.replaceAll("+","%20")),!r.includes("["))i[r]=s;else{let o=r.replaceAll("[",".").replaceAll("]","");e(o,s,i)}}),i}var ey=vt(Wm()),ty=vt(Ym()),ei=vt(Gt());function iy(){wl(document,"livewire:init"),wl(document,"livewire:initializing"),ei.default.plugin(ey.default),ei.default.plugin($_),ei.default.plugin(M_.default),ei.default.plugin(R_.default),ei.default.plugin(O_.default),ei.default.plugin(T_.default),ei.default.plugin(L_.default),ei.default.plugin(V_),ei.default.plugin(ty.default),ei.default.addRootSelector(()=>"[wire\\:id]"),ei.default.onAttributesAdded((n,e)=>{let t=Pn(n,!1);!t||e.forEach(i=>{if(!ql(i.name))return;let r=Jl(n,i.name);Yt("directive.init",{el:n,component:t,directive:r,cleanup:s=>{ei.default.onAttributeRemoved(n,r.raw,s)}})})}),ei.default.interceptInit(ei.default.skipDuringClone(n=>{if(n.hasAttribute("wire:id")){let t=g_(n);ei.default.onAttributeRemoved(n,"wire:id",()=>{p_(t.id)})}let e=Pn(n,!1);e&&(Yt("element.init",{el:n,component:e}),Array.from(n.getAttributeNames()).filter(i=>ql(i)).map(i=>Jl(n,i)).forEach(i=>{Yt("directive.init",{el:n,component:e,directive:i,cleanup:r=>{ei.default.onAttributeRemoved(n,i.raw,r)}})}))})),ei.default.start(),setTimeout(()=>window.Livewire.initialRenderIsFinished=!0),wl(document,"livewire:initialized")}function ny(){}function ry(){}var xf=vt(Gt());St("commit.prepare",({component:n})=>{n.children.forEach(e=>{sy(e)&&e.$wire.$commit()})});function sy(n){return!!n.snapshot.memo.bindings}var oy=vt(Gt()),Kr={};St("element.init",({el:n,component:e})=>{Ea(n).missing("submit")||n.addEventListener("submit",()=>{Kr[e.id]=[],oy.default.walk(e.el,(i,r)=>{if(!!n.contains(i)){if(i.hasAttribute("wire:ignore"))return r();i.tagName.toLowerCase()==="button"&&i.type==="submit"||i.tagName.toLowerCase()==="select"||i.tagName.toLowerCase()==="input"&&(i.type==="checkbox"||i.type==="radio")?(i.disabled||Kr[e.id].push(()=>i.disabled=!1),i.disabled=!0):(i.tagName.toLowerCase()==="input"||i.tagName.toLowerCase()==="textarea")&&(i.readOnly||Kr[e.id].push(()=>i.readOnly=!1),i.readOnly=!0)}})})});St("commit",({component:n,respond:e})=>{e(()=>{ay(n)})});function ay(n){if(!!Kr[n.id])for(;Kr[n.id].length>0;)Kr[n.id].shift()()}St("commit",({component:n,succeed:e})=>{e(({effects:t})=>{let i=t.download;if(!i)return;let r=window.webkitURL||window.URL,s=r.createObjectURL(ly(i.content,i.contentType)),o=document.createElement("a");o.style.display="none",o.href=s,o.download=i.name,document.body.appendChild(o),o.click(),setTimeout(function(){r.revokeObjectURL(s)},0)})});function ly(n,e="",t=512){const i=atob(n),r=[];e===null&&(e="");for(let s=0;s<i.length;s+=t){let o=i.slice(s,s+t),a=new Array(o.length);for(let c=0;c<o.length;c++)a[c]=o.charCodeAt(c);let l=new Uint8Array(a);r.push(l)}return new Blob(r,{type:e})}var Nh=vt(Gt());St("effects",(n,e)=>{let t=e.js,i=e.xjs;t&&Object.entries(t).forEach(([r,s])=>{d_(n,r,()=>{Nh.default.evaluate(n.el,s)})}),i&&i.forEach(r=>{Nh.default.evaluate(n.el,r)})});var Bh=vt(Gt());St("component.init",({component:n,cleanup:e})=>{let i=n.effects.url;!i||Object.entries(i).forEach(([r,s])=>{let{name:o,as:a,use:l,alwaysShow:c}=cy(r,s);a||(a=o);let u=dn(n.ephemeral,o),{initial:d,replace:f,push:_,pop:p}=ic(a,u,c);if(l==="replace"){let m=Bh.default.effect(()=>{f(dn(n.reactive,o))});e(()=>Bh.default.release(m))}else if(l==="push"){let m=St("commit",({component:v,succeed:w})=>{let x=dn(v.canonical,o);w(()=>{let E=dn(v.canonical,o);JSON.stringify(x)!==JSON.stringify(E)&&_(E)})}),y=p(async v=>{await n.$wire.set(o,v),document.querySelectorAll("input").forEach(w=>{w._x_forceModelUpdate&&w._x_forceModelUpdate(w._x_model.get())})});e(()=>{m(),y()})}})});function cy(n,e){let t={use:"replace",alwaysShow:!1};return typeof e=="string"?{...t,name:e,as:e}:{...{...t,name:n,as:n},...e}}St("request",({options:n})=>{window.Echo&&(n.headers["X-Socket-ID"]=window.Echo.socketId())});St("effects",(n,e)=>{(e.listeners||[]).forEach(i=>{if(i.startsWith("echo")){if(typeof window.Echo=="undefined"){console.warn("Laravel Echo cannot be found");return}let r=i.split(/(echo:|echo-)|:|,/);r[1]=="echo:"&&r.splice(2,0,"channel",void 0),r[2]=="notification"&&r.push(void 0,void 0);let[s,o,a,l,c,u,d]=r;["channel","private","encryptedPrivate"].includes(a)?window.Echo[a](c).listen(d,f=>{Yr(n,i,[f])}):a=="presence"?["here","joining","leaving"].includes(d)?window.Echo.join(c)[d](f=>{Yr(n,i,[f])}):window.Echo.join(c).listen(d,f=>{Yr(n,i,[f])}):a=="notification"?window.Echo.private(c).notification(f=>{Yr(n,i,[f])}):console.warn("Echo channel type not yet supported")}})});hy()&&Alpine.navigate.disableProgressBar();document.addEventListener("alpine:navigated",n=>{document.dispatchEvent(new CustomEvent("livewire:navigated",{bubbles:!0}))});document.addEventListener("alpine:navigating",n=>{document.dispatchEvent(new CustomEvent("livewire:navigating",{bubbles:!0}))});function uy(n,e,t){n.redirectUsingNavigate?Alpine.navigate(e):t()}function hy(){return!!(document.querySelector("[data-no-progress-bar]")||window.livewireScriptConfig&&window.livewireScriptConfig.progressBar===!1)}St("effects",(n,e)=>{if(!e.redirect)return;let t=e.redirect;uy(e,t,()=>{window.location.href=t})});var dy=vt(Gt());function fy(n,e,t){let i=e.parentElement?e.parentElement.tagName.toLowerCase():"div",r=document.createElement(i);r.innerHTML=t;let s;try{s=Pn(e.parentElement)}catch{}s&&(r.__livewire=s);let o=r.firstElementChild;o.__livewire=n,Yt("morph",{el:e,toEl:o,component:n}),dy.default.morph(e,o,{updating:(a,l,c,u)=>{if(!Mr(a)){if(Yt("morph.updating",{el:a,toEl:l,component:n,skip:u,childrenOnly:c}),a.__livewire_ignore===!0||(a.__livewire_ignore_self===!0&&c(),Gh(a)&&a.getAttribute("wire:id")!==n.id))return u();Gh(a)&&(l.__livewire=n)}},updated:(a,l)=>{Mr(a)||Yt("morph.updated",{el:a,component:n})},removing:(a,l)=>{Mr(a)||Yt("morph.removing",{el:a,component:n,skip:l})},removed:a=>{Mr(a)||Yt("morph.removed",{el:a,component:n})},adding:a=>{Yt("morph.adding",{el:a,component:n})},added:a=>{Mr(a)||(Pn(a).id,Yt("morph.added",{el:a}))},key:a=>{if(!Mr(a))return a.hasAttribute("wire:key")?a.getAttribute("wire:key"):a.hasAttribute("wire:id")?a.getAttribute("wire:id"):a.id},lookahead:!1})}function Mr(n){return typeof n.hasAttribute!="function"}function Gh(n){return n.hasAttribute("wire:id")}St("effects",(n,e)=>{let t=e.html;!t||queueMicrotask(()=>{fy(n,n.el,t)})});St("commit.prepare",({component:n})=>{Ef(n,e=>{e.snapshot.memo.props&&e.$wire.$commit()})});function Ef(n,e){n.children.forEach(t=>{e(t),Ef(t,e)})}var zh=vt(Gt());St("morph.added",({el:n})=>{n.__addedByMorph=!0});Di("transition",({el:n,directive:e,component:t,cleanup:i})=>{let r=zh.default.reactive({state:!n.__addedByMorph});zh.default.bind(n,{[e.rawName.replace("wire:","x-")]:"","x-show"(){return r.state}}),n.__addedByMorph&&setTimeout(()=>r.state=!0);let s=[];s.push(St("morph.removing",({el:o,skip:a})=>{a(),o.addEventListener("transitionend",()=>{o.remove()}),r.state=!1,s.push(St("morph",({component:l})=>{l===t&&(o.remove(),s.forEach(c=>c()))}))})),i(()=>s.forEach(o=>o()))});var gy=new $d;function py(n,e){gy.each(n,t=>{t.callback(),t.callback=()=>{}}),e()}var jh=vt(Gt());St("directive.init",({el:n,directive:e,cleanup:t,component:i})=>{if(["snapshot","effects","model","init","loading","poll","ignore","id","data","key","target","dirty"].includes(e.value))return;let r=e.rawName.replace("wire:","x-on:");e.value==="submit"&&!e.modifiers.includes("prevent")&&(r=r+".prevent");let s=jh.default.bind(n,{[r](o){let a=()=>{py(i,()=>{jh.default.evaluate(n,"$wire."+e.expression,{scope:{$event:o}})})};n.__livewire_confirm?n.__livewire_confirm(()=>{a()}):a()}});t(s)});var Xr=vt(Gt());Xr.default.addInitSelector(()=>"[wire\\:navigate]");Xr.default.addInitSelector(()=>"[wire\\:navigate\\.hover]");Xr.default.interceptInit(Xr.default.skipDuringClone(n=>{n.hasAttribute("wire:navigate")?Xr.default.bind(n,{["x-navigate"]:!0}):n.hasAttribute("wire:navigate.hover")&&Xr.default.bind(n,{["x-navigate.hover"]:!0})}));document.addEventListener("alpine:navigating",()=>{Livewire.all().forEach(n=>{n.inscribeSnapshotAndEffectsOnElement()})});Di("confirm",({el:n,directive:e})=>{let t=e.expression,i=e.modifiers.includes("prompt");t=t.replaceAll("\\n",`
`),t===""&&(t="Are you sure?"),n.__livewire_confirm=r=>{if(i){let[s,o]=t.split("|");o?prompt(s)===o&&r():console.warn("Livewire: Must provide expectation with wire:confirm.prompt")}else confirm(t)&&r()}});function ir(n,e,t,i=null){if(t=e.modifiers.includes("remove")?!t:t,e.modifiers.includes("class")){let r=e.expression.split(" ");t?n.classList.add(...r):n.classList.remove(...r)}else if(e.modifiers.includes("attr"))t?n.setAttribute(e.expression,!0):n.removeAttribute(e.expression);else{let r=i!=null?i:window.getComputedStyle(n,null).getPropertyValue("display"),s=["inline","block","table","flex","grid","inline-flex"].filter(o=>e.modifiers.includes(o))[0]||"inline-block";s=e.modifiers.includes("remove")?r:s,n.style.display=t?s:"none"}}var nc=new Set,rc=new Set;window.addEventListener("offline",()=>nc.forEach(n=>n()));window.addEventListener("online",()=>rc.forEach(n=>n()));Di("offline",({el:n,directive:e,cleanup:t})=>{let i=()=>ir(n,e,!0),r=()=>ir(n,e,!1);nc.add(i),rc.add(r),t(()=>{nc.delete(i),rc.delete(r)})});Di("loading",({el:n,directive:e,component:t})=>{let i=wy(n),[r,s]=my(e);_y(t,i,[()=>r(()=>ir(n,e,!0)),()=>s(()=>ir(n,e,!1))]),yy(t,i,[()=>r(()=>ir(n,e,!0)),()=>s(()=>ir(n,e,!1))])});function my(n){if(!n.modifiers.includes("delay")||n.modifiers.includes("none"))return[s=>s(),s=>s()];let e=200,t={shortest:50,shorter:100,short:150,default:200,long:300,longer:500,longest:1e3};Object.keys(t).some(s=>{if(n.modifiers.includes(s))return e=t[s],!0});let i,r=!1;return[s=>{i=setTimeout(()=>{s(),r=!0},e)},async s=>{r?(await s(),r=!1):clearTimeout(i)}]}function _y(n,e,[t,i]){St("commit",({component:r,commit:s,respond:o})=>{r===n&&(e.length>0&&!vy(s,e)||(t(),o(()=>{i()})))})}function yy(n,e,[t,i]){let r=s=>{let{id:o,property:a}=s.detail;return o!==n.id||e.length>0&&!e.map(l=>l.target).includes(a)};window.addEventListener("livewire-upload-start",s=>{r(s)||t()}),window.addEventListener("livewire-upload-finish",s=>{r(s)||i()}),window.addEventListener("livewire-upload-error",s=>{r(s)||i()})}function vy(n,e){let{updates:t,calls:i}=n;return e.some(({target:r,params:s})=>{if(s)return i.some(({method:a,params:l})=>r===a&&s===bf(JSON.stringify(l)));if(Object.keys(t).some(a=>a.startsWith(r))||i.map(a=>a.method).includes(r))return!0})}function wy(n){let e=Ea(n),t=[];if(e.has("target")){let i=e.get("target"),r=i.expression;r.includes("(")&&r.includes(")")?t.push({target:i.method,params:bf(JSON.stringify(i.params))}):r.includes(",")?r.split(",").map(s=>s.trim()).forEach(s=>{t.push({target:s})}):t.push({target:r})}else{let i=["init","dirty","offline","target","loading","poll","ignore","key","id"];e.all().filter(r=>!i.includes(r.value)).map(r=>r.expression.split("(")[0]).forEach(r=>t.push({target:r}))}return t}function bf(n){return btoa(encodeURIComponent(n))}Di("stream",({el:n,directive:e,component:t,cleanup:i})=>{let{expression:r,modifiers:s}=e,o=St("stream",({name:a,content:l,replace:c})=>{a===r&&(s.includes("replace")||c?n.innerHTML=l:n.innerHTML=n.innerHTML+l)});i(o)});St("request",({respond:n})=>{n(e=>{let t=e.response;!t.headers.has("X-Livewire-Stream")||(e.response={ok:!0,redirected:!1,status:200,async text(){let i=await Ay(t,r=>{Yt("stream",r)});return ef(i)&&(this.ok=!1),i}})})});async function Ay(n,e){let t=n.body.getReader(),i="";for(;;){let{done:r,value:s}=await t.read(),a=new TextDecoder().decode(s),[l,c]=xy(i+a);if(l.forEach(u=>{e(u)}),i=c,r)return i}}function xy(n){let e=/({"stream":true.*?"endStream":true})/g,t=n.match(e),i=[];if(t)for(let s=0;s<t.length;s++)i.push(JSON.parse(t[s]).body);let r=n.replace(e,"");return[i,r]}Di("ignore",({el:n,directive:e})=>{e.modifiers.includes("self")?n.__livewire_ignore_self=!0:n.__livewire_ignore=!0});var Cf=new $d;St("commit",({component:n,respond:e})=>{e(()=>{setTimeout(()=>{Cf.each(n,t=>t(!1))})})});Di("dirty",({el:n,directive:e,component:t})=>{let i=Ey(n);Alpine.reactive({state:!1});let r=!1,s=n.style.display,o=a=>{ir(n,e,a,s),r=a};Cf.add(t,o),Alpine.effect(()=>{let a=!1;if(i.length===0)a=JSON.stringify(t.canonical)!==JSON.stringify(t.reactive);else for(let l=0;l<i.length&&!a;l++){let c=i[l];a=JSON.stringify(dn(t.canonical,c))!==JSON.stringify(dn(t.reactive,c))}r!==a&&o(a),r=a})});function Ey(n){let e=Ea(n),t=[];return e.has("model")&&t.push(e.get("model").expression),e.has("target")&&(t=t.concat(e.get("target").expression.split(",").map(i=>i.trim()))),t}var by=vt(Gt());Di("model",({el:n,directive:e,component:t,cleanup:i})=>{let{expression:r,modifiers:s}=e;if(!r)return console.warn("Livewire: [wire:model] is missing a value.",n);if(If(t,r))return console.warn('Livewire: [wire:model="'+r+'"] property does not exist on component: ['+t.name+"]",n);if(n.type&&n.type.toLowerCase()==="file")return r_(n,r,t,i);let o=s.includes("live"),a=s.includes("lazy")||s.includes("change"),l=s.includes("blur"),c=s.includes("debounce"),u=r.startsWith("$parent")?()=>t.$wire.$parent.$commit():()=>t.$wire.$commit(),d=Iy(n)&&!c&&o?Sy(u,150):u;by.default.bind(n,{["@change"](){a&&u()},["@blur"](){l&&u()},["x-model"+Cy(s)](){return{get(){return dn(t.$wire,r)},set(f){wa(t.$wire,r,f),o&&!a&&!l&&d()}}}})});function Cy(n){return n=n.filter(e=>!["lazy","defer"].includes(e)),n.length===0?"":"."+n.join(".")}function Iy(n){return["INPUT","TEXTAREA"].includes(n.tagName.toUpperCase())&&!["checkbox","radio"].includes(n.type)}function If(n,e){if(e.startsWith("$parent")){let i=Pn(n.el.parentElement,!1);return i?If(i,e.split("$parent.")[1]):!0}let t=e.split(".")[0];return!Object.keys(n.canonical).includes(t)}function Sy(n,e){var t;return function(){var i=this,r=arguments,s=function(){t=null,n.apply(i,r)};clearTimeout(t),t=setTimeout(s,e)}}var Ry=vt(Gt());Di("init",({el:n,directive:e})=>{var i;let t=(i=e.expression)!=null?i:"$refresh";Ry.default.evaluate(n,`$wire.${t}`)});var Ty=vt(Gt());Di("poll",({el:n,directive:e,component:t})=>{let i=zy(e.modifiers,2e3),{start:r,pauseWhile:s,throttleWhile:o,stopWhen:a}=My(()=>{Ly(n,e)},i);r(),o(()=>Fy()&&ky(e)),s(()=>Ny(e)&&By(n)),s(()=>Dy(n)),s(()=>Py()),a(()=>Gy(n))});function Ly(n,e){Ty.default.evaluate(n,e.expression?"$wire."+e.expression:"$wire.$commit()")}function My(n,e=2e3){let t=[],i=[],r=[];return{start(){let s=Oy(e,()=>{if(r.some(o=>o()))return s();t.some(o=>o())||i.some(o=>o())&&Math.random()<.95||n()})},pauseWhile(s){t.push(s)},throttleWhile(s){i.push(s)},stopWhen(s){r.push(s)}}}var Zn=[];function Oy(n,e){if(!Zn[n]){let t={timer:setInterval(()=>t.callbacks.forEach(i=>i()),n),callbacks:new Set};Zn[n]=t}return Zn[n].callbacks.add(e),()=>{Zn[n].callbacks.delete(e),Zn[n].callbacks.size===0&&(clearInterval(Zn[n].timer),delete Zn[n])}}var Pc=!1;window.addEventListener("offline",()=>Pc=!0);window.addEventListener("online",()=>Pc=!1);function Py(){return Pc}var Sf=!1;document.addEventListener("visibilitychange",()=>{Sf=document.hidden},!1);function Fy(){return Sf}function Dy(n){return!Ea(n).has("poll")}function ky(n){return!n.modifiers.includes("keep-alive")}function Ny(n){return n.modifiers.includes("visible")}function By(n){let e=n.getBoundingClientRect();return!(e.top<(window.innerHeight||document.documentElement.clientHeight)&&e.left<(window.innerWidth||document.documentElement.clientWidth)&&e.bottom>0&&e.right>0)}function Gy(n){return n.isConnected===!1}function zy(n,e){let t,i=n.find(s=>s.match(/([0-9]+)ms/)),r=n.find(s=>s.match(/([0-9]+)s/));return i?t=Number(i.replace("ms","")):r&&(t=Number(r.replace("s",""))*1e3),t||e}var Fc={directive:Di,dispatchTo:Mc,start:iy,stop:ny,rescan:ry,first:v_,find:y_,getByName:__,all:w_,hook:St,trigger:Yt,dispatch:E_,on:C_};window.Livewire&&console.warn("Detected multiple instances of Livewire running");window.Alpine&&console.warn("Detected multiple instances of Alpine running");window.Livewire=Fc;window.Alpine=xf.default;window.livewireScriptConfig===void 0&&document.addEventListener("DOMContentLoaded",()=>{Fc.start()});var Rf=xf.default;/* NProgress, (c) 2013, 2014 Rico Sta. Cruz - http://ricostacruz.com/nprogress
 * @license MIT *//*! Bundled license information:

tabbable/dist/index.js:
  (*!
  * tabbable 5.3.3
  * @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
  *)

focus-trap/dist/focus-trap.js:
  (*!
  * focus-trap 6.9.4
  * @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
  *)
*/let Tf=()=>{};const Uh=n=>(typeof n=="function"&&(n=n()),typeof n=="object"&&(n=JSON.stringify(n)),window.navigator.clipboard.writeText(n).then(Tf));function sc(n){n.magic("clipboard",()=>Uh),n.directive("clipboard",(e,{modifiers:t,expression:i},{evaluateLater:r,cleanup:s})=>{const o=t.includes("raw")?l=>l(i):r(i),a=()=>o(Uh);e.addEventListener("click",a),s(()=>{e.removeEventListener("click",a)})})}sc.configure=n=>(n.hasOwnProperty("onCopy")&&typeof n.onCopy=="function"&&(Tf=n.onCopy),sc);/*! image-blob-reduce 4.1.0 https://github.com/nodeca/image-blob-reduce @license MIT */function Mo(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ba={};ba.assign=function(e){for(var t,i=1;i<arguments.length;i++){t=Object(arguments[i]);for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e};function Lf(n,e){var t={};return e.forEach(function(i){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}),t}function jy(n){return Lf(n,["alpha","unsharpAmount","unsharpRadius","unsharpThreshold","cancelToken"])}ba.pick=Lf;ba.pick_pica_resize_options=jy;var Mf={exports:{}};/*!

pica
https://github.com/nodeca/pica

*/(function(n,e){(function(t){n.exports=t()})(function(){return function(){function t(i,r,s){function o(c,u){if(!r[c]){if(!i[c]){var d=typeof Mo=="function"&&Mo;if(!u&&d)return d(c,!0);if(a)return a(c,!0);var f=new Error("Cannot find module '"+c+"'");throw f.code="MODULE_NOT_FOUND",f}var _=r[c]={exports:{}};i[c][0].call(_.exports,function(p){var m=i[c][1][p];return o(m||p)},_,_.exports,t,i,r,s)}return r[c].exports}for(var a=typeof Mo=="function"&&Mo,l=0;l<s.length;l++)o(s[l]);return o}return t}()({1:[function(t,i,r){var s=t("multimath"),o=t("./mm_unsharp_mask"),a=t("./mm_resize");function l(c){var u=c||[],d={js:u.indexOf("js")>=0,wasm:u.indexOf("wasm")>=0};s.call(this,d),this.features={js:d.js,wasm:d.wasm&&this.has_wasm()},this.use(o),this.use(a)}l.prototype=Object.create(s.prototype),l.prototype.constructor=l,l.prototype.resizeAndUnsharp=function(u,d){var f=this.resize(u,d);return u.unsharpAmount&&this.unsharp_mask(f,u.toWidth,u.toHeight,u.unsharpAmount,u.unsharpRadius,u.unsharpThreshold),f},i.exports=l},{"./mm_resize":4,"./mm_unsharp_mask":9,multimath:19}],2:[function(t,i,r){function s(d){return d<0?0:d>255?255:d}function o(d){return d>=0?d:0}function a(d,f,_,p,m,y){var v,w,x,E,O,L,R,S,B,U,j,X=0,K=0;for(B=0;B<p;B++){for(O=0,U=0;U<m;U++){for(L=y[O++],R=y[O++],S=X+L*4|0,v=w=x=E=0;R>0;R--)j=y[O++],E=E+j*d[S+3]|0,x=x+j*d[S+2]|0,w=w+j*d[S+1]|0,v=v+j*d[S]|0,S=S+4|0;f[K+3]=o(E>>7),f[K+2]=o(x>>7),f[K+1]=o(w>>7),f[K]=o(v>>7),K=K+p*4|0}K=(B+1)*4|0,X=(B+1)*_*4|0}}function l(d,f,_,p,m,y){var v,w,x,E,O,L,R,S,B,U,j,X=0,K=0;for(B=0;B<p;B++){for(O=0,U=0;U<m;U++){for(L=y[O++],R=y[O++],S=X+L*4|0,v=w=x=E=0;R>0;R--)j=y[O++],E=E+j*d[S+3]|0,x=x+j*d[S+2]|0,w=w+j*d[S+1]|0,v=v+j*d[S]|0,S=S+4|0;v>>=7,w>>=7,x>>=7,E>>=7,f[K+3]=s(E+(1<<13)>>14),f[K+2]=s(x+(1<<13)>>14),f[K+1]=s(w+(1<<13)>>14),f[K]=s(v+(1<<13)>>14),K=K+p*4|0}K=(B+1)*4|0,X=(B+1)*_*4|0}}function c(d,f,_,p,m,y){var v,w,x,E,O,L,R,S,B,U,j,X,K=0,Ae=0;for(U=0;U<p;U++){for(L=0,j=0;j<m;j++){for(R=y[L++],S=y[L++],B=K+R*4|0,v=w=x=E=0;S>0;S--)X=y[L++],O=d[B+3],E=E+X*O|0,x=x+X*d[B+2]*O|0,w=w+X*d[B+1]*O|0,v=v+X*d[B]*O|0,B=B+4|0;x=x/255|0,w=w/255|0,v=v/255|0,f[Ae+3]=o(E>>7),f[Ae+2]=o(x>>7),f[Ae+1]=o(w>>7),f[Ae]=o(v>>7),Ae=Ae+p*4|0}Ae=(U+1)*4|0,K=(U+1)*_*4|0}}function u(d,f,_,p,m,y){var v,w,x,E,O,L,R,S,B,U,j,X=0,K=0;for(B=0;B<p;B++){for(O=0,U=0;U<m;U++){for(L=y[O++],R=y[O++],S=X+L*4|0,v=w=x=E=0;R>0;R--)j=y[O++],E=E+j*d[S+3]|0,x=x+j*d[S+2]|0,w=w+j*d[S+1]|0,v=v+j*d[S]|0,S=S+4|0;v>>=7,w>>=7,x>>=7,E>>=7,E=s(E+(1<<13)>>14),E>0&&(v=v*255/E|0,w=w*255/E|0,x=x*255/E|0),f[K+3]=E,f[K+2]=s(x+(1<<13)>>14),f[K+1]=s(w+(1<<13)>>14),f[K]=s(v+(1<<13)>>14),K=K+p*4|0}K=(B+1)*4|0,X=(B+1)*_*4|0}}i.exports={convolveHor:a,convolveVert:l,convolveHorWithPre:c,convolveVertWithPre:u}},{}],3:[function(t,i,r){i.exports="AGFzbQEAAAAADAZkeWxpbmsAAAAAAAEYA2AGf39/f39/AGAAAGAIf39/f39/f38AAg8BA2VudgZtZW1vcnkCAAADBwYBAAAAAAIGBgF/AEEACweUAQgRX193YXNtX2NhbGxfY3RvcnMAAAtjb252b2x2ZUhvcgABDGNvbnZvbHZlVmVydAACEmNvbnZvbHZlSG9yV2l0aFByZQADE2NvbnZvbHZlVmVydFdpdGhQcmUABApjb252b2x2ZUhWAAUMX19kc29faGFuZGxlAwAYX193YXNtX2FwcGx5X2RhdGFfcmVsb2NzAAAKyA4GAwABC4wDARB/AkAgA0UNACAERQ0AIANBAnQhFQNAQQAhE0EAIQsDQCALQQJqIQcCfyALQQF0IAVqIgYuAQIiC0UEQEEAIQhBACEGQQAhCUEAIQogBwwBCyASIAYuAQBqIQhBACEJQQAhCiALIRRBACEOIAchBkEAIQ8DQCAFIAZBAXRqLgEAIhAgACAIQQJ0aigCACIRQRh2bCAPaiEPIBFB/wFxIBBsIAlqIQkgEUEQdkH/AXEgEGwgDmohDiARQQh2Qf8BcSAQbCAKaiEKIAhBAWohCCAGQQFqIQYgFEEBayIUDQALIAlBB3UhCCAKQQd1IQYgDkEHdSEJIA9BB3UhCiAHIAtqCyELIAEgDEEBdCIHaiAIQQAgCEEAShs7AQAgASAHQQJyaiAGQQAgBkEAShs7AQAgASAHQQRyaiAJQQAgCUEAShs7AQAgASAHQQZyaiAKQQAgCkEAShs7AQAgDCAVaiEMIBNBAWoiEyAERw0ACyANQQFqIg0gAmwhEiANQQJ0IQwgAyANRw0ACwsL2gMBD38CQCADRQ0AIARFDQAgAkECdCEUA0AgCyEMQQAhE0EAIQIDQCACQQJqIQYCfyACQQF0IAVqIgcuAQIiAkUEQEEAIQhBACEHQQAhCkEAIQkgBgwBCyAHLgEAQQJ0IBJqIQhBACEJIAIhCkEAIQ0gBiEHQQAhDkEAIQ8DQCAFIAdBAXRqLgEAIhAgACAIQQF0IhFqLwEAbCAJaiEJIAAgEUEGcmovAQAgEGwgDmohDiAAIBFBBHJqLwEAIBBsIA9qIQ8gACARQQJyai8BACAQbCANaiENIAhBBGohCCAHQQFqIQcgCkEBayIKDQALIAlBB3UhCCANQQd1IQcgDkEHdSEKIA9BB3UhCSACIAZqCyECIAEgDEECdGogB0GAQGtBDnUiBkH/ASAGQf8BSBsiBkEAIAZBAEobQQh0QYD+A3EgCUGAQGtBDnUiBkH/ASAGQf8BSBsiBkEAIAZBAEobQRB0QYCA/AdxIApBgEBrQQ51IgZB/wEgBkH/AUgbIgZBACAGQQBKG0EYdHJyIAhBgEBrQQ51IgZB/wEgBkH/AUgbIgZBACAGQQBKG3I2AgAgAyAMaiEMIBNBAWoiEyAERw0ACyAUIAtBAWoiC2whEiADIAtHDQALCwuSAwEQfwJAIANFDQAgBEUNACADQQJ0IRUDQEEAIRNBACEGA0AgBkECaiEIAn8gBkEBdCAFaiIGLgECIgdFBEBBACEJQQAhDEEAIQ1BACEOIAgMAQsgEiAGLgEAaiEJQQAhDkEAIQ1BACEMIAchFEEAIQ8gCCEGA0AgBSAGQQF0ai4BACAAIAlBAnRqKAIAIhBBGHZsIhEgD2ohDyARIBBBEHZB/wFxbCAMaiEMIBEgEEEIdkH/AXFsIA1qIQ0gESAQQf8BcWwgDmohDiAJQQFqIQkgBkEBaiEGIBRBAWsiFA0ACyAPQQd1IQkgByAIagshBiABIApBAXQiCGogDkH/AW1BB3UiB0EAIAdBAEobOwEAIAEgCEECcmogDUH/AW1BB3UiB0EAIAdBAEobOwEAIAEgCEEEcmogDEH/AW1BB3UiB0EAIAdBAEobOwEAIAEgCEEGcmogCUEAIAlBAEobOwEAIAogFWohCiATQQFqIhMgBEcNAAsgC0EBaiILIAJsIRIgC0ECdCEKIAMgC0cNAAsLC4IEAQ9/AkAgA0UNACAERQ0AIAJBAnQhFANAIAshDEEAIRJBACEHA0AgB0ECaiEKAn8gB0EBdCAFaiICLgECIhNFBEBBACEIQQAhCUEAIQYgCiEHQQAMAQsgAi4BAEECdCARaiEJQQAhByATIQJBACENIAohBkEAIQ5BACEPA0AgBSAGQQF0ai4BACIIIAAgCUEBdCIQai8BAGwgB2ohByAAIBBBBnJqLwEAIAhsIA5qIQ4gACAQQQRyai8BACAIbCAPaiEPIAAgEEECcmovAQAgCGwgDWohDSAJQQRqIQkgBkEBaiEGIAJBAWsiAg0ACyAHQQd1IQggDUEHdSEJIA9BB3UhBiAKIBNqIQcgDkEHdQtBgEBrQQ51IgJB/wEgAkH/AUgbIgJBACACQQBKGyIKQf8BcQRAIAlB/wFsIAJtIQkgCEH/AWwgAm0hCCAGQf8BbCACbSEGCyABIAxBAnRqIAlBgEBrQQ51IgJB/wEgAkH/AUgbIgJBACACQQBKG0EIdEGA/gNxIAZBgEBrQQ51IgJB/wEgAkH/AUgbIgJBACACQQBKG0EQdEGAgPwHcSAKQRh0ciAIQYBAa0EOdSICQf8BIAJB/wFIGyICQQAgAkEAShtycjYCACADIAxqIQwgEkEBaiISIARHDQALIBQgC0EBaiILbCERIAMgC0cNAAsLC0AAIAcEQEEAIAIgAyAEIAUgABADIAJBACAEIAUgBiABEAQPC0EAIAIgAyAEIAUgABABIAJBACAEIAUgBiABEAIL"},{}],4:[function(t,i,r){i.exports={name:"resize",fn:t("./resize"),wasm_fn:t("./resize_wasm"),wasm_src:t("./convolve_wasm_base64")}},{"./convolve_wasm_base64":3,"./resize":5,"./resize_wasm":8}],5:[function(t,i,r){var s=t("./resize_filter_gen"),o=t("./convolve"),a=o.convolveHor,l=o.convolveVert,c=o.convolveHorWithPre,u=o.convolveVertWithPre;function d(_,p,m){for(var y=3,v=p*m*4|0;y<v;){if(_[y]!==255)return!0;y=y+4|0}return!1}function f(_,p,m){for(var y=3,v=p*m*4|0;y<v;)_[y]=255,y=y+4|0}i.exports=function(p){var m=p.src,y=p.width,v=p.height,w=p.toWidth,x=p.toHeight,E=p.scaleX||p.toWidth/p.width,O=p.scaleY||p.toHeight/p.height,L=p.offsetX||0,R=p.offsetY||0,S=p.dest||new Uint8Array(w*x*4),B=typeof p.filter=="undefined"?"mks2013":p.filter,U=s(B,y,w,E,L),j=s(B,v,x,O,R),X=new Uint16Array(w*v*4);return d(m,y,v)?(c(m,X,y,v,w,U),u(X,S,v,w,x,j)):(a(m,X,y,v,w,U),l(X,S,v,w,x,j),f(S,w,x)),S}},{"./convolve":2,"./resize_filter_gen":6}],6:[function(t,i,r){var s=t("./resize_filter_info"),o=14;function a(l){return Math.round(l*((1<<o)-1))}i.exports=function(c,u,d,f,_){var p=s.filter[c].fn,m=1/f,y=Math.min(1,f),v=s.filter[c].win/y,w,x,E,O,L,R,S,B,U,j,X,K,Ae,ee,F,N,G,V=Math.floor((v+1)*2),H=new Int16Array((V+2)*d),q=0,D=!H.subarray||!H.set;for(w=0;w<d;w++){for(x=(w+.5)*m+_,E=Math.max(0,Math.floor(x-v)),O=Math.min(u-1,Math.ceil(x+v)),L=O-E+1,R=new Float32Array(L),S=new Int16Array(L),B=0,U=E,j=0;U<=O;U++,j++)X=p((U+.5-x)*y),B+=X,R[j]=X;for(K=0,j=0;j<R.length;j++)Ae=R[j]/B,K+=Ae,S[j]=a(Ae);for(S[d>>1]+=a(1-K),ee=0;ee<S.length&&S[ee]===0;)ee++;if(ee<S.length){for(F=S.length-1;F>0&&S[F]===0;)F--;if(N=E+ee,G=F-ee+1,H[q++]=N,H[q++]=G,!D)H.set(S.subarray(ee,F+1),q),q+=G;else for(j=ee;j<=F;j++)H[q++]=S[j]}else H[q++]=0,H[q++]=0}return H}},{"./resize_filter_info":7}],7:[function(t,i,r){var s={box:{win:.5,fn:function(a){return a<0&&(a=-a),a<.5?1:0}},hamming:{win:1,fn:function(a){if(a<0&&(a=-a),a>=1)return 0;if(a<11920929e-14)return 1;var l=a*Math.PI;return Math.sin(l)/l*(.54+.46*Math.cos(l/1))}},lanczos2:{win:2,fn:function(a){if(a<0&&(a=-a),a>=2)return 0;if(a<11920929e-14)return 1;var l=a*Math.PI;return Math.sin(l)/l*Math.sin(l/2)/(l/2)}},lanczos3:{win:3,fn:function(a){if(a<0&&(a=-a),a>=3)return 0;if(a<11920929e-14)return 1;var l=a*Math.PI;return Math.sin(l)/l*Math.sin(l/3)/(l/3)}},mks2013:{win:2.5,fn:function(a){return a<0&&(a=-a),a>=2.5?0:a>=1.5?-.125*(a-2.5)*(a-2.5):a>=.5?.25*(4*a*a-11*a+7):1.0625-1.75*a*a}}};i.exports={filter:s,f2q:{box:0,hamming:1,lanczos2:2,lanczos3:3},q2f:["box","hamming","lanczos2","lanczos3"]}},{}],8:[function(t,i,r){var s=t("./resize_filter_gen");function o(d,f,_){for(var p=3,m=f*_*4|0;p<m;){if(d[p]!==255)return!0;p=p+4|0}return!1}function a(d,f,_){for(var p=3,m=f*_*4|0;p<m;)d[p]=255,p=p+4|0}function l(d){return new Uint8Array(d.buffer,0,d.byteLength)}var c=!0;try{c=new Uint32Array(new Uint8Array([1,0,0,0]).buffer)[0]===1}catch{}function u(d,f,_){if(c){f.set(l(d),_);return}for(var p=_,m=0;m<d.length;m++){var y=d[m];f[p++]=y&255,f[p++]=y>>8&255}}i.exports=function(f){var _=f.src,p=f.width,m=f.height,y=f.toWidth,v=f.toHeight,w=f.scaleX||f.toWidth/f.width,x=f.scaleY||f.toHeight/f.height,E=f.offsetX||0,O=f.offsetY||0,L=f.dest||new Uint8Array(y*v*4),R=typeof f.filter=="undefined"?"mks2013":f.filter,S=s(R,p,y,w,E),B=s(R,m,v,x,O),U=0,j=Math.max(_.byteLength,L.byteLength),X=this.__align(U+j),K=m*y*4*2,Ae=this.__align(X+K),ee=this.__align(Ae+S.byteLength),F=ee+B.byteLength,N=this.__instance("resize",F),G=new Uint8Array(this.__memory.buffer),V=new Uint32Array(this.__memory.buffer),H=new Uint32Array(_.buffer);V.set(H),u(S,G,Ae),u(B,G,ee);var q=N.exports.convolveHV||N.exports._convolveHV;o(_,p,m)?q(Ae,ee,X,p,m,y,v,1):(q(Ae,ee,X,p,m,y,v,0),a(L,y,v));var D=new Uint32Array(L.buffer);return D.set(new Uint32Array(this.__memory.buffer,0,v*y)),L}},{"./resize_filter_gen":6}],9:[function(t,i,r){i.exports={name:"unsharp_mask",fn:t("./unsharp_mask"),wasm_fn:t("./unsharp_mask_wasm"),wasm_src:t("./unsharp_mask_wasm_base64")}},{"./unsharp_mask":10,"./unsharp_mask_wasm":11,"./unsharp_mask_wasm_base64":12}],10:[function(t,i,r){var s=t("glur/mono16");function o(a,l,c){for(var u=l*c,d=new Uint16Array(u),f,_,p,m,y=0;y<u;y++)f=a[4*y],_=a[4*y+1],p=a[4*y+2],m=f>=_&&f>=p?f:_>=p&&_>=f?_:p,d[y]=m<<8;return d}i.exports=function(l,c,u,d,f,_){var p,m,y,v,w;if(!(d===0||f<.5)){f>2&&(f=2);var x=o(l,c,u),E=new Uint16Array(x);s(E,c,u,f);for(var O=d/100*4096+.5|0,L=_<<8,R=c*u,S=0;S<R;S++)p=x[S],v=p-E[S],Math.abs(v)>=L&&(m=p+(O*v+2048>>12),m=m>65280?65280:m,m=m<0?0:m,p=p!==0?p:1,y=(m<<12)/p|0,w=S*4,l[w]=l[w]*y+2048>>12,l[w+1]=l[w+1]*y+2048>>12,l[w+2]=l[w+2]*y+2048>>12)}}},{"glur/mono16":18}],11:[function(t,i,r){i.exports=function(o,a,l,c,u,d){if(!(c===0||u<.5)){u>2&&(u=2);var f=a*l,_=f*4,p=f*2,m=f*2,y=Math.max(a,l)*4,v=8*4,w=0,x=_,E=x+p,O=E+m,L=O+m,R=L+y,S=this.__instance("unsharp_mask",_+p+m*2+y+v,{exp:Math.exp}),B=new Uint32Array(o.buffer),U=new Uint32Array(this.__memory.buffer);U.set(B);var j=S.exports.hsv_v16||S.exports._hsv_v16;j(w,x,a,l),j=S.exports.blurMono16||S.exports._blurMono16,j(x,E,O,L,R,a,l,u),j=S.exports.unsharp||S.exports._unsharp,j(w,w,x,E,a,l,c,d),B.set(new Uint32Array(this.__memory.buffer,0,f))}}},{}],12:[function(t,i,r){i.exports="AGFzbQEAAAAADAZkeWxpbmsAAAAAAAE0B2AAAGAEf39/fwBgBn9/f39/fwBgCH9/f39/f39/AGAIf39/f39/f30AYAJ9fwBgAXwBfAIZAgNlbnYDZXhwAAYDZW52Bm1lbW9yeQIAAAMHBgAFAgQBAwYGAX8AQQALB4oBCBFfX3dhc21fY2FsbF9jdG9ycwABFl9fYnVpbGRfZ2F1c3NpYW5fY29lZnMAAg5fX2dhdXNzMTZfbGluZQADCmJsdXJNb25vMTYABAdoc3ZfdjE2AAUHdW5zaGFycAAGDF9fZHNvX2hhbmRsZQMAGF9fd2FzbV9hcHBseV9kYXRhX3JlbG9jcwABCsUMBgMAAQvWAQEHfCABRNuGukOCGvs/IAC7oyICRAAAAAAAAADAohAAIgW2jDgCFCABIAKaEAAiAyADoCIGtjgCECABRAAAAAAAAPA/IAOhIgQgBKIgAyACIAKgokQAAAAAAADwP6AgBaGjIgS2OAIAIAEgBSAEmqIiB7Y4AgwgASADIAJEAAAAAAAA8D+gIASioiIItjgCCCABIAMgAkQAAAAAAADwv6AgBKKiIgK2OAIEIAEgByAIoCAFRAAAAAAAAPA/IAahoCIDo7Y4AhwgASAEIAKgIAOjtjgCGAuGBQMGfwl8An0gAyoCDCEVIAMqAgghFiADKgIUuyERIAMqAhC7IRACQCAEQQFrIghBAEgiCQRAIAIhByAAIQYMAQsgAiAALwEAuCIPIAMqAhi7oiIMIBGiIg0gDCAQoiAPIAMqAgS7IhOiIhQgAyoCALsiEiAPoqCgoCIOtjgCACACQQRqIQcgAEECaiEGIAhFDQAgCEEBIAhBAUgbIgpBf3MhCwJ/IAQgCmtBAXFFBEAgDiENIAgMAQsgAiANIA4gEKIgFCASIAAvAQK4Ig+ioKCgIg22OAIEIAJBCGohByAAQQRqIQYgDiEMIARBAmsLIQIgC0EAIARrRg0AA0AgByAMIBGiIA0gEKIgDyAToiASIAYvAQC4Ig6ioKCgIgy2OAIAIAcgDSARoiAMIBCiIA4gE6IgEiAGLwECuCIPoqCgoCINtjgCBCAHQQhqIQcgBkEEaiEGIAJBAkohACACQQJrIQIgAA0ACwsCQCAJDQAgASAFIAhsQQF0aiIAAn8gBkECay8BACICuCINIBW7IhKiIA0gFrsiE6KgIA0gAyoCHLuiIgwgEKKgIAwgEaKgIg8gB0EEayIHKgIAu6AiDkQAAAAAAADwQWMgDkQAAAAAAAAAAGZxBEAgDqsMAQtBAAs7AQAgCEUNACAGQQRrIQZBACAFa0EBdCEBA0ACfyANIBKiIAJB//8DcbgiDSAToqAgDyIOIBCioCAMIBGioCIPIAdBBGsiByoCALugIgxEAAAAAAAA8EFjIAxEAAAAAAAAAABmcQRAIAyrDAELQQALIQMgBi8BACECIAAgAWoiACADOwEAIAZBAmshBiAIQQFKIQMgDiEMIAhBAWshCCADDQALCwvRAgIBfwd8AkAgB0MAAAAAWw0AIARE24a6Q4Ia+z8gB0MAAAA/l7ujIglEAAAAAAAAAMCiEAAiDLaMOAIUIAQgCZoQACIKIAqgIg22OAIQIAREAAAAAAAA8D8gCqEiCyALoiAKIAkgCaCiRAAAAAAAAPA/oCAMoaMiC7Y4AgAgBCAMIAuaoiIOtjgCDCAEIAogCUQAAAAAAADwP6AgC6KiIg+2OAIIIAQgCiAJRAAAAAAAAPC/oCALoqIiCbY4AgQgBCAOIA+gIAxEAAAAAAAA8D8gDaGgIgqjtjgCHCAEIAsgCaAgCqO2OAIYIAYEQANAIAAgBSAIbEEBdGogAiAIQQF0aiADIAQgBSAGEAMgCEEBaiIIIAZHDQALCyAFRQ0AQQAhCANAIAIgBiAIbEEBdGogASAIQQF0aiADIAQgBiAFEAMgCEEBaiIIIAVHDQALCwtxAQN/IAIgA2wiBQRAA0AgASAAKAIAIgRBEHZB/wFxIgIgAiAEQQh2Qf8BcSIDIAMgBEH/AXEiBEkbIAIgA0sbIgYgBiAEIAIgBEsbIAMgBEsbQQh0OwEAIAFBAmohASAAQQRqIQAgBUEBayIFDQALCwuZAgIDfwF8IAQgBWwhBAJ/IAazQwAAgEWUQwAAyEKVu0QAAAAAAADgP6AiC5lEAAAAAAAA4EFjBEAgC6oMAQtBgICAgHgLIQUgBARAIAdBCHQhCUEAIQYDQCAJIAIgBkEBdCIHai8BACIBIAMgB2ovAQBrIgcgB0EfdSIIaiAIc00EQCAAIAZBAnQiCGoiCiAFIAdsQYAQakEMdSABaiIHQYD+AyAHQYD+A0gbIgdBACAHQQBKG0EMdCABQQEgARtuIgEgCi0AAGxBgBBqQQx2OgAAIAAgCEEBcmoiByABIActAABsQYAQakEMdjoAACAAIAhBAnJqIgcgASAHLQAAbEGAEGpBDHY6AAALIAZBAWoiBiAERw0ACwsL"},{}],13:[function(t,i,r){var s=100;function o(a,l){this.create=a,this.available=[],this.acquired={},this.lastId=1,this.timeoutId=0,this.idle=l||2e3}o.prototype.acquire=function(){var a=this,l;return this.available.length!==0?l=this.available.pop():(l=this.create(),l.id=this.lastId++,l.release=function(){return a.release(l)}),this.acquired[l.id]=l,l},o.prototype.release=function(a){var l=this;delete this.acquired[a.id],a.lastUsed=Date.now(),this.available.push(a),this.timeoutId===0&&(this.timeoutId=setTimeout(function(){return l.gc()},s))},o.prototype.gc=function(){var a=this,l=Date.now();this.available=this.available.filter(function(c){return l-c.lastUsed>a.idle?(c.destroy(),!1):!0}),this.available.length!==0?this.timeoutId=setTimeout(function(){return a.gc()},s):this.timeoutId=0},i.exports=o},{}],14:[function(t,i,r){var s=2;i.exports=function(a,l,c,u,d,f){var _=c/a,p=u/l,m=(2*f+s+1)/d;if(m>.5)return[[c,u]];var y=Math.ceil(Math.log(Math.min(_,p))/Math.log(m));if(y<=1)return[[c,u]];for(var v=[],w=0;w<y;w++){var x=Math.round(Math.pow(Math.pow(a,y-w-1)*Math.pow(c,w+1),1/y)),E=Math.round(Math.pow(Math.pow(l,y-w-1)*Math.pow(u,w+1),1/y));v.push([x,E])}return v}},{}],15:[function(t,i,r){var s=1e-5;function o(l){var c=Math.round(l);return Math.abs(l-c)<s?c:Math.floor(l)}function a(l){var c=Math.round(l);return Math.abs(l-c)<s?c:Math.ceil(l)}i.exports=function(c){var u=c.toWidth/c.width,d=c.toHeight/c.height,f=o(c.srcTileSize*u)-2*c.destTileBorder,_=o(c.srcTileSize*d)-2*c.destTileBorder;if(f<1||_<1)throw new Error("Internal error in pica: target tile width/height is too small.");var p,m,y,v,w,x,E=[],O;for(v=0;v<c.toHeight;v+=_)for(y=0;y<c.toWidth;y+=f)p=y-c.destTileBorder,p<0&&(p=0),w=y+f+c.destTileBorder-p,p+w>=c.toWidth&&(w=c.toWidth-p),m=v-c.destTileBorder,m<0&&(m=0),x=v+_+c.destTileBorder-m,m+x>=c.toHeight&&(x=c.toHeight-m),O={toX:p,toY:m,toWidth:w,toHeight:x,toInnerX:y,toInnerY:v,toInnerWidth:f,toInnerHeight:_,offsetX:p/u-o(p/u),offsetY:m/d-o(m/d),scaleX:u,scaleY:d,x:o(p/u),y:o(m/d),width:a(w/u),height:a(x/d)},E.push(O);return E}},{}],16:[function(t,i,r){function s(o){return Object.prototype.toString.call(o)}i.exports.isCanvas=function(a){var l=s(a);return l==="[object HTMLCanvasElement]"||l==="[object OffscreenCanvas]"||l==="[object Canvas]"},i.exports.isImage=function(a){return s(a)==="[object HTMLImageElement]"},i.exports.isImageBitmap=function(a){return s(a)==="[object ImageBitmap]"},i.exports.limiter=function(a){var l=0,c=[];function u(){l<a&&c.length&&(l++,c.shift()())}return function(f){return new Promise(function(_,p){c.push(function(){f().then(function(m){_(m),l--,u()},function(m){p(m),l--,u()})}),u()})}},i.exports.cib_quality_name=function(a){switch(a){case 0:return"pixelated";case 1:return"low";case 2:return"medium"}return"high"},i.exports.cib_support=function(a){return Promise.resolve().then(function(){if(typeof createImageBitmap=="undefined")return!1;var l=a(100,100);return createImageBitmap(l,0,0,100,100,{resizeWidth:10,resizeHeight:10,resizeQuality:"high"}).then(function(c){var u=c.width===10;return c.close(),l=null,u})}).catch(function(){return!1})},i.exports.worker_offscreen_canvas_support=function(){return new Promise(function(a,l){if(typeof OffscreenCanvas=="undefined"){a(!1);return}function c(f){if(typeof createImageBitmap=="undefined"){f.postMessage(!1);return}Promise.resolve().then(function(){var _=new OffscreenCanvas(10,10),p=_.getContext("2d");return p.rect(0,0,1,1),createImageBitmap(_,0,0,1,1)}).then(function(){return f.postMessage(!0)},function(){return f.postMessage(!1)})}var u=btoa("(".concat(c.toString(),")(self);")),d=new Worker("data:text/javascript;base64,".concat(u));d.onmessage=function(f){return a(f.data)},d.onerror=l}).then(function(a){return a},function(){return!1})},i.exports.can_use_canvas=function(a){var l=!1;try{var c=a(2,1),u=c.getContext("2d"),d=u.createImageData(2,1);d.data[0]=12,d.data[1]=23,d.data[2]=34,d.data[3]=255,d.data[4]=45,d.data[5]=56,d.data[6]=67,d.data[7]=255,u.putImageData(d,0,0),d=null,d=u.getImageData(0,0,2,1),d.data[0]===12&&d.data[1]===23&&d.data[2]===34&&d.data[3]===255&&d.data[4]===45&&d.data[5]===56&&d.data[6]===67&&d.data[7]===255&&(l=!0)}catch{}return l},i.exports.cib_can_use_region=function(){return new Promise(function(a){if(typeof createImageBitmap=="undefined"){a(!1);return}var l=new Image;l.src="data:image/jpeg;base64,/9j/4QBiRXhpZgAATU0AKgAAAAgABQESAAMAAAABAAYAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAAAAABIAAAAAQAAAEgAAAAB/9sAQwAEAwMEAwMEBAMEBQQEBQYKBwYGBgYNCQoICg8NEBAPDQ8OERMYFBESFxIODxUcFRcZGRsbGxAUHR8dGh8YGhsa/9sAQwEEBQUGBQYMBwcMGhEPERoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoa/8IAEQgAAQACAwERAAIRAQMRAf/EABQAAQAAAAAAAAAAAAAAAAAAAAf/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAF/P//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAQUCf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Bf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Bf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEABj8Cf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAT8hf//aAAwDAQACAAMAAAAQH//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Qf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Qf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAT8Qf//Z",l.onload=function(){createImageBitmap(l,0,0,l.width,l.height).then(function(c){c.width===l.width&&c.height===l.height?a(!0):a(!1)},function(){return a(!1)})},l.onerror=function(){return a(!1)}})}},{}],17:[function(t,i,r){i.exports=function(){var s=t("./mathlib"),o;onmessage=function(l){var c=l.data.opts;if(!c.src&&c.srcBitmap){var u=new OffscreenCanvas(c.width,c.height),d=u.getContext("2d");d.drawImage(c.srcBitmap,0,0),c.src=d.getImageData(0,0,c.width,c.height).data,u.width=u.height=0,u=null,c.srcBitmap.close(),c.srcBitmap=null}o||(o=new s(l.data.features));var f=o.resizeAndUnsharp(c);postMessage({data:f},[f.buffer])}}},{"./mathlib":1}],18:[function(t,i,r){var s,o,a,l,c,u,d,f;function _(y){y<.5&&(y=.5);var v=Math.exp(.726*.726)/y,w=Math.exp(-v),x=Math.exp(-2*v),E=(1-w)*(1-w)/(1+2*v*w-x);return s=E,o=E*(v-1)*w,a=E*(v+1)*w,l=-E*x,c=2*w,u=-x,d=(s+o)/(1-c-u),f=(a+l)/(1-c-u),new Float32Array([s,o,a,l,c,u,d,f])}function p(y,v,w,x,E,O){var L,R,S,B,U,j,X,K,Ae,ee,F,N,G,V;for(Ae=0;Ae<O;Ae++){for(j=Ae*E,X=Ae,K=0,L=y[j],U=L*x[6],B=U,F=x[0],N=x[1],G=x[4],V=x[5],ee=0;ee<E;ee++)R=y[j],S=R*F+L*N+B*G+U*V,U=B,B=S,L=R,w[K]=B,K++,j++;for(j--,K--,X+=O*(E-1),L=y[j],U=L*x[7],B=U,R=L,F=x[2],N=x[3],ee=E-1;ee>=0;ee--)S=R*F+L*N+B*G+U*V,U=B,B=S,L=R,R=y[j],v[X]=w[K]+B,j--,K--,X-=O}}function m(y,v,w,x){if(!!x){var E=new Uint16Array(y.length),O=new Float32Array(Math.max(v,w)),L=_(x);p(y,E,O,L,v,w),p(E,y,O,L,w,v)}}i.exports=m},{}],19:[function(t,i,r){var s=t("object-assign"),o=t("./lib/base64decode"),a=t("./lib/wa_detect"),l={js:!0,wasm:!0};function c(u){if(!(this instanceof c))return new c(u);var d=s({},l,u||{});if(this.options=d,this.__cache={},this.__init_promise=null,this.__modules=d.modules||{},this.__memory=null,this.__wasm={},this.__isLE=new Uint32Array(new Uint8Array([1,0,0,0]).buffer)[0]===1,!this.options.js&&!this.options.wasm)throw new Error('mathlib: at least "js" or "wasm" should be enabled')}c.prototype.has_wasm=a,c.prototype.use=function(u){return this.__modules[u.name]=u,this.options.wasm&&this.has_wasm()&&u.wasm_fn?this[u.name]=u.wasm_fn:this[u.name]=u.fn,this},c.prototype.init=function(){if(this.__init_promise)return this.__init_promise;if(!this.options.js&&this.options.wasm&&!this.has_wasm())return Promise.reject(new Error(`mathlib: only "wasm" was enabled, but it's not supported`));var u=this;return this.__init_promise=Promise.all(Object.keys(u.__modules).map(function(d){var f=u.__modules[d];return!u.options.wasm||!u.has_wasm()||!f.wasm_fn||u.__wasm[d]?null:WebAssembly.compile(u.__base64decode(f.wasm_src)).then(function(_){u.__wasm[d]=_})})).then(function(){return u}),this.__init_promise},c.prototype.__base64decode=o,c.prototype.__reallocate=function(d){if(!this.__memory)return this.__memory=new WebAssembly.Memory({initial:Math.ceil(d/(64*1024))}),this.__memory;var f=this.__memory.buffer.byteLength;return f<d&&this.__memory.grow(Math.ceil((d-f)/(64*1024))),this.__memory},c.prototype.__instance=function(d,f,_){if(f&&this.__reallocate(f),!this.__wasm[d]){var p=this.__modules[d];this.__wasm[d]=new WebAssembly.Module(this.__base64decode(p.wasm_src))}if(!this.__cache[d]){var m={memoryBase:0,memory:this.__memory,tableBase:0,table:new WebAssembly.Table({initial:0,element:"anyfunc"})};this.__cache[d]=new WebAssembly.Instance(this.__wasm[d],{env:s(m,_||{})})}return this.__cache[d]},c.prototype.__align=function(d,f){f=f||8;var _=d%f;return d+(_?f-_:0)},i.exports=c},{"./lib/base64decode":20,"./lib/wa_detect":21,"object-assign":22}],20:[function(t,i,r){var s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";i.exports=function(a){for(var l=a.replace(/[\r\n=]/g,""),c=l.length,u=new Uint8Array(c*3>>2),d=0,f=0,_=0;_<c;_++)_%4===0&&_&&(u[f++]=d>>16&255,u[f++]=d>>8&255,u[f++]=d&255),d=d<<6|s.indexOf(l.charAt(_));var p=c%4*6;return p===0?(u[f++]=d>>16&255,u[f++]=d>>8&255,u[f++]=d&255):p===18?(u[f++]=d>>10&255,u[f++]=d>>2&255):p===12&&(u[f++]=d>>4&255),u}},{}],21:[function(t,i,r){var s;i.exports=function(){if(typeof s!="undefined"||(s=!1,typeof WebAssembly=="undefined"))return s;try{var a=new Uint8Array([0,97,115,109,1,0,0,0,1,6,1,96,1,127,1,127,3,2,1,0,5,3,1,0,1,7,8,1,4,116,101,115,116,0,0,10,16,1,14,0,32,0,65,1,54,2,0,32,0,40,2,0,11]),l=new WebAssembly.Module(a),c=new WebAssembly.Instance(l,{});return c.exports.test(4)!==0&&(s=!0),s}catch{}return s}},{}],22:[function(t,i,r){var s=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;function l(u){if(u==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(u)}function c(){try{if(!Object.assign)return!1;var u=new String("abc");if(u[5]="de",Object.getOwnPropertyNames(u)[0]==="5")return!1;for(var d={},f=0;f<10;f++)d["_"+String.fromCharCode(f)]=f;var _=Object.getOwnPropertyNames(d).map(function(m){return d[m]});if(_.join("")!=="0123456789")return!1;var p={};return"abcdefghijklmnopqrst".split("").forEach(function(m){p[m]=m}),Object.keys(Object.assign({},p)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}i.exports=c()?Object.assign:function(u,d){for(var f,_=l(u),p,m=1;m<arguments.length;m++){f=Object(arguments[m]);for(var y in f)o.call(f,y)&&(_[y]=f[y]);if(s){p=s(f);for(var v=0;v<p.length;v++)a.call(f,p[v])&&(_[p[v]]=f[p[v]])}}return _}},{}],23:[function(t,i,r){var s=arguments[3],o=arguments[4],a=arguments[5],l=JSON.stringify;i.exports=function(c,u){for(var d,f=Object.keys(a),_=0,p=f.length;_<p;_++){var m=f[_],y=a[m].exports;if(y===c||y&&y.default===c){d=m;break}}if(!d){d=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var v={},_=0,p=f.length;_<p;_++){var m=f[_];v[m]=m}o[d]=["function(require,module,exports){"+c+"(self); }",v]}var w=Math.floor(Math.pow(16,8)*Math.random()).toString(16),x={};x[d]=d,o[w]=["function(require,module,exports){var f = require("+l(d)+");(f.default ? f.default : f)(self);}",x];var E={};O(w);function O(j){E[j]=!0;for(var X in o[j][1]){var K=o[j][1][X];E[K]||O(K)}}var L="("+s+")({"+Object.keys(E).map(function(j){return l(j)+":["+o[j][0]+","+l(o[j][1])+"]"}).join(",")+"},{},["+l(w)+"])",R=window.URL||window.webkitURL||window.mozURL||window.msURL,S=new Blob([L],{type:"text/javascript"});if(u&&u.bare)return S;var B=R.createObjectURL(S),U=new Worker(B);return U.objectURL=B,U}},{}],"/index.js":[function(t,i,r){function s(F,N){return u(F)||c(F,N)||a(F,N)||o()}function o(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function a(F,N){if(!!F){if(typeof F=="string")return l(F,N);var G=Object.prototype.toString.call(F).slice(8,-1);if(G==="Object"&&F.constructor&&(G=F.constructor.name),G==="Map"||G==="Set")return Array.from(F);if(G==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(G))return l(F,N)}}function l(F,N){(N==null||N>F.length)&&(N=F.length);for(var G=0,V=new Array(N);G<N;G++)V[G]=F[G];return V}function c(F,N){var G=F==null?null:typeof Symbol!="undefined"&&F[Symbol.iterator]||F["@@iterator"];if(G!=null){var V=[],H=!0,q=!1,D,ce;try{for(G=G.call(F);!(H=(D=G.next()).done)&&(V.push(D.value),!(N&&V.length===N));H=!0);}catch(J){q=!0,ce=J}finally{try{!H&&G.return!=null&&G.return()}finally{if(q)throw ce}}return V}}function u(F){if(Array.isArray(F))return F}var d=t("object-assign"),f=t("webworkify"),_=t("./lib/mathlib"),p=t("./lib/pool"),m=t("./lib/utils"),y=t("./lib/worker"),v=t("./lib/stepper"),w=t("./lib/tiler"),x=t("./lib/mm_resize/resize_filter_info"),E={},O=!1;try{typeof navigator!="undefined"&&navigator.userAgent&&(O=navigator.userAgent.indexOf("Safari")>=0)}catch{}var L=1;typeof navigator!="undefined"&&(L=Math.min(navigator.hardwareConcurrency||1,4));var R={tile:1024,concurrency:L,features:["js","wasm","ww"],idle:2e3,createCanvas:function(N,G){var V=document.createElement("canvas");return V.width=N,V.height=G,V}},S={filter:"mks2013",unsharpAmount:0,unsharpRadius:0,unsharpThreshold:0},B=!1,U=!1,j=!1,X=!1,K=!1;function Ae(){return{value:f(y),destroy:function(){if(this.value.terminate(),typeof window!="undefined"){var N=window.URL||window.webkitURL||window.mozURL||window.msURL;N&&N.revokeObjectURL&&this.value.objectURL&&N.revokeObjectURL(this.value.objectURL)}}}}function ee(F){if(!(this instanceof ee))return new ee(F);this.options=d({},R,F||{});var N="lk_".concat(this.options.concurrency);this.__limit=E[N]||m.limiter(this.options.concurrency),E[N]||(E[N]=this.__limit),this.features={js:!1,wasm:!1,cib:!1,ww:!1},this.__workersPool=null,this.__requested_features=[],this.__mathlib=null}ee.prototype.init=function(){var F=this;if(this.__initPromise)return this.__initPromise;if(typeof ImageData!="undefined"&&typeof Uint8ClampedArray!="undefined")try{new ImageData(new Uint8ClampedArray(400),10,10),B=!0}catch{}typeof ImageBitmap!="undefined"&&(ImageBitmap.prototype&&ImageBitmap.prototype.close?U=!0:this.debug("ImageBitmap does not support .close(), disabled"));var N=this.options.features.slice();if(N.indexOf("all")>=0&&(N=["cib","wasm","js","ww"]),this.__requested_features=N,this.__mathlib=new _(N),N.indexOf("ww")>=0&&typeof window!="undefined"&&"Worker"in window)try{var G=t("webworkify")(function(){});G.terminate(),this.features.ww=!0;var V="wp_".concat(JSON.stringify(this.options));E[V]?this.__workersPool=E[V]:(this.__workersPool=new p(Ae,this.options.idle),E[V]=this.__workersPool)}catch{}var H=this.__mathlib.init().then(function(J){d(F.features,J.features)}),q;U?q=m.cib_support(this.options.createCanvas).then(function(J){if(F.features.cib&&N.indexOf("cib")<0){F.debug("createImageBitmap() resize supported, but disabled by config");return}N.indexOf("cib")>=0&&(F.features.cib=J)}):q=Promise.resolve(!1),j=m.can_use_canvas(this.options.createCanvas);var D;U&&B&&N.indexOf("ww")!==-1?D=m.worker_offscreen_canvas_support():D=Promise.resolve(!1),D=D.then(function(J){X=J});var ce=m.cib_can_use_region().then(function(J){K=J});return this.__initPromise=Promise.all([H,q,D,ce]).then(function(){return F}),this.__initPromise},ee.prototype.__invokeResize=function(F,N){var G=this;return N.__mathCache=N.__mathCache||{},Promise.resolve().then(function(){return G.features.ww?new Promise(function(V,H){var q=G.__workersPool.acquire();N.cancelToken&&N.cancelToken.catch(function(ce){return H(ce)}),q.value.onmessage=function(ce){q.release(),ce.data.err?H(ce.data.err):V(ce.data)};var D=[];F.src&&D.push(F.src.buffer),F.srcBitmap&&D.push(F.srcBitmap),q.value.postMessage({opts:F,features:G.__requested_features,preload:{wasm_nodule:G.__mathlib.__}},D)}):{data:G.__mathlib.resizeAndUnsharp(F,N.__mathCache)}})},ee.prototype.__extractTileData=function(F,N,G,V,H){if(this.features.ww&&X&&(m.isCanvas(N)||K))return this.debug("Create tile for OffscreenCanvas"),createImageBitmap(V.srcImageBitmap||N,F.x,F.y,F.width,F.height).then(function(ce){return H.srcBitmap=ce,H});if(m.isCanvas(N))return V.srcCtx||(V.srcCtx=N.getContext("2d")),this.debug("Get tile pixel data"),H.src=V.srcCtx.getImageData(F.x,F.y,F.width,F.height).data,H;this.debug("Draw tile imageBitmap/image to temporary canvas");var q=this.options.createCanvas(F.width,F.height),D=q.getContext("2d");return D.globalCompositeOperation="copy",D.drawImage(V.srcImageBitmap||N,F.x,F.y,F.width,F.height,0,0,F.width,F.height),this.debug("Get tile pixel data"),H.src=D.getImageData(0,0,F.width,F.height).data,q.width=q.height=0,H},ee.prototype.__landTileData=function(F,N,G){var V;if(this.debug("Convert raw rgba tile result to ImageData"),N.bitmap)return G.toCtx.drawImage(N.bitmap,F.toX,F.toY),null;if(B)V=new ImageData(new Uint8ClampedArray(N.data),F.toWidth,F.toHeight);else if(V=G.toCtx.createImageData(F.toWidth,F.toHeight),V.data.set)V.data.set(N.data);else for(var H=V.data.length-1;H>=0;H--)V.data[H]=N.data[H];return this.debug("Draw tile"),O?G.toCtx.putImageData(V,F.toX,F.toY,F.toInnerX-F.toX,F.toInnerY-F.toY,F.toInnerWidth+1e-5,F.toInnerHeight+1e-5):G.toCtx.putImageData(V,F.toX,F.toY,F.toInnerX-F.toX,F.toInnerY-F.toY,F.toInnerWidth,F.toInnerHeight),null},ee.prototype.__tileAndResize=function(F,N,G){var V=this,H={srcCtx:null,srcImageBitmap:null,isImageBitmapReused:!1,toCtx:null},q=function(ce){return V.__limit(function(){if(G.canceled)return G.cancelToken;var J={width:ce.width,height:ce.height,toWidth:ce.toWidth,toHeight:ce.toHeight,scaleX:ce.scaleX,scaleY:ce.scaleY,offsetX:ce.offsetX,offsetY:ce.offsetY,filter:G.filter,unsharpAmount:G.unsharpAmount,unsharpRadius:G.unsharpRadius,unsharpThreshold:G.unsharpThreshold};return V.debug("Invoke resize math"),Promise.resolve(J).then(function(ne){return V.__extractTileData(ce,F,G,H,ne)}).then(function(ne){return V.debug("Invoke resize math"),V.__invokeResize(ne,G)}).then(function(ne){return G.canceled?G.cancelToken:(H.srcImageData=null,V.__landTileData(ce,ne,H))})})};return Promise.resolve().then(function(){if(H.toCtx=N.getContext("2d"),m.isCanvas(F))return null;if(m.isImageBitmap(F))return H.srcImageBitmap=F,H.isImageBitmapReused=!0,null;if(m.isImage(F))return U?(V.debug("Decode image via createImageBitmap"),createImageBitmap(F).then(function(D){H.srcImageBitmap=D}).catch(function(D){return null})):null;throw new Error('Pica: ".from" should be Image, Canvas or ImageBitmap')}).then(function(){if(G.canceled)return G.cancelToken;V.debug("Calculate tiles");var D=w({width:G.width,height:G.height,srcTileSize:V.options.tile,toWidth:G.toWidth,toHeight:G.toHeight,destTileBorder:G.__destTileBorder}),ce=D.map(function(ne){return q(ne)});function J(ne){ne.srcImageBitmap&&(ne.isImageBitmapReused||ne.srcImageBitmap.close(),ne.srcImageBitmap=null)}return V.debug("Process tiles"),Promise.all(ce).then(function(){return V.debug("Finished!"),J(H),N},function(ne){throw J(H),ne})})},ee.prototype.__processStages=function(F,N,G,V){var H=this;if(V.canceled)return V.cancelToken;var q=F.shift(),D=s(q,2),ce=D[0],J=D[1],ne=F.length===0,fe;ne||x.q2f.indexOf(V.filter)<0?fe=V.filter:V.filter==="box"?fe="box":fe="hamming",V=d({},V,{toWidth:ce,toHeight:J,filter:fe});var Ne;return ne||(Ne=this.options.createCanvas(ce,J)),this.__tileAndResize(N,ne?G:Ne,V).then(function(){return ne?G:(V.width=ce,V.height=J,H.__processStages(F,Ne,G,V))}).then(function(le){return Ne&&(Ne.width=Ne.height=0),le})},ee.prototype.__resizeViaCreateImageBitmap=function(F,N,G){var V=this,H=N.getContext("2d");return this.debug("Resize via createImageBitmap()"),createImageBitmap(F,{resizeWidth:G.toWidth,resizeHeight:G.toHeight,resizeQuality:m.cib_quality_name(x.f2q[G.filter])}).then(function(q){if(G.canceled)return G.cancelToken;if(!G.unsharpAmount)return H.drawImage(q,0,0),q.close(),H=null,V.debug("Finished!"),N;V.debug("Unsharp result");var D=V.options.createCanvas(G.toWidth,G.toHeight),ce=D.getContext("2d");ce.drawImage(q,0,0),q.close();var J=ce.getImageData(0,0,G.toWidth,G.toHeight);return V.__mathlib.unsharp_mask(J.data,G.toWidth,G.toHeight,G.unsharpAmount,G.unsharpRadius,G.unsharpThreshold),H.putImageData(J,0,0),D.width=D.height=0,J=ce=D=H=null,V.debug("Finished!"),N})},ee.prototype.resize=function(F,N,G){var V=this;this.debug("Start resize...");var H=d({},S);if(isNaN(G)?G&&(H=d(H,G)):H=d(H,{quality:G}),H.toWidth=N.width,H.toHeight=N.height,H.width=F.naturalWidth||F.width,H.height=F.naturalHeight||F.height,Object.prototype.hasOwnProperty.call(H,"quality")){if(H.quality<0||H.quality>3)throw new Error("Pica: .quality should be [0..3], got ".concat(H.quality));H.filter=x.q2f[H.quality]}if(N.width===0||N.height===0)return Promise.reject(new Error("Invalid output size: ".concat(N.width,"x").concat(N.height)));H.unsharpRadius>2&&(H.unsharpRadius=2),H.canceled=!1,H.cancelToken&&(H.cancelToken=H.cancelToken.then(function(D){throw H.canceled=!0,D},function(D){throw H.canceled=!0,D}));var q=3;return H.__destTileBorder=Math.ceil(Math.max(q,2.5*H.unsharpRadius|0)),this.init().then(function(){if(H.canceled)return H.cancelToken;if(V.features.cib){if(x.q2f.indexOf(H.filter)>=0)return V.__resizeViaCreateImageBitmap(F,N,H);V.debug("cib is enabled, but not supports provided filter, fallback to manual math")}if(!j){var D=new Error("Pica: cannot use getImageData on canvas, make sure fingerprinting protection isn't enabled");throw D.code="ERR_GET_IMAGE_DATA",D}var ce=v(H.width,H.height,H.toWidth,H.toHeight,V.options.tile,H.__destTileBorder);return V.__processStages(ce,F,N,H)})},ee.prototype.resizeBuffer=function(F){var N=this,G=d({},S,F);if(Object.prototype.hasOwnProperty.call(G,"quality")){if(G.quality<0||G.quality>3)throw new Error("Pica: .quality should be [0..3], got ".concat(G.quality));G.filter=x.q2f[G.quality]}return this.init().then(function(){return N.__mathlib.resizeAndUnsharp(G)})},ee.prototype.toBlob=function(F,N,G){return N=N||"image/png",new Promise(function(V){if(F.toBlob){F.toBlob(function(J){return V(J)},N,G);return}if(F.convertToBlob){V(F.convertToBlob({type:N,quality:G}));return}for(var H=atob(F.toDataURL(N,G).split(",")[1]),q=H.length,D=new Uint8Array(q),ce=0;ce<q;ce++)D[ce]=H.charCodeAt(ce);V(new Blob([D],{type:N}))})},ee.prototype.debug=function(){},i.exports=ee},{"./lib/mathlib":1,"./lib/mm_resize/resize_filter_info":7,"./lib/pool":13,"./lib/stepper":14,"./lib/tiler":15,"./lib/utils":16,"./lib/worker":17,"object-assign":22,webworkify:23}]},{},[])("/index.js")})})(Mf);var Qs={},Of={exports:{}};(function(n){function e(a,l){var c=new Error(a);return c.code=l,c}function t(a){for(var l=a.toString(16).toUpperCase(),c=2-l.length;c>0;c--)l="0"+l;return"0x"+l}function i(a){try{return unescape(encodeURIComponent(a))}catch{return a}}function r(a){try{return decodeURIComponent(escape(a))}catch{return a}}function s(a){return Object.prototype.toString.call(a)==="[object Uint8Array]"}function o(a,l,c){this.input=a.subarray(l,c),this.start=l;var u=String.fromCharCode.apply(null,this.input.subarray(0,4));if(u!=="II*\0"&&u!=="MM\0*")throw e("invalid TIFF signature","EBADDATA");this.big_endian=u[0]==="M"}o.prototype.each=function(a){this.aborted=!1;var l=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:l}];this.ifds_to_read.length>0&&!this.aborted;){var c=this.ifds_to_read.shift();!c.offset||this.scan_ifd(c.id,c.offset,a)}},o.prototype.filter=function(a){var l={};l.ifd0={id:0,entries:[]},this.each(function(f){a(f)===!1&&!f.is_subifd_link||f.is_subifd_link&&f.count!==1&&f.format!==4||(l["ifd"+f.ifd]||(l["ifd"+f.ifd]={id:f.ifd,entries:[]}),l["ifd"+f.ifd].entries.push(f))}),delete l.ifd1;var c=8;Object.keys(l).forEach(function(f){c+=2,l[f].entries.forEach(function(_){c+=12+(_.data_length>4?Math.ceil(_.data_length/2)*2:0)}),c+=4}),this.output=new Uint8Array(c),this.output[0]=this.output[1]=(this.big_endian?"M":"I").charCodeAt(0),this.write_uint16(2,42);var u=8,d=this;if(this.write_uint32(4,u),Object.keys(l).forEach(function(f){l[f].written_offset=u;var _=u,p=_+2+l[f].entries.length*12+4;u=p,d.write_uint16(_,l[f].entries.length),l[f].entries.sort(function(y,v){return y.tag-v.tag}).forEach(function(y,v){var w=_+2+v*12;d.write_uint16(w,y.tag),d.write_uint16(w+2,y.format),d.write_uint32(w+4,y.count),y.is_subifd_link?l["ifd"+y.tag]&&(l["ifd"+y.tag].link_offset=w+8):y.data_length<=4?d.output.set(d.input.subarray(y.data_offset-d.start,y.data_offset-d.start+4),w+8):(d.write_uint32(w+8,u),d.output.set(d.input.subarray(y.data_offset-d.start,y.data_offset-d.start+y.data_length),u),u+=Math.ceil(y.data_length/2)*2)});var m=l["ifd"+(l[f].id+1)];m&&(m.link_offset=p-4)}),Object.keys(l).forEach(function(f){l[f].written_offset&&l[f].link_offset&&d.write_uint32(l[f].link_offset,l[f].written_offset)}),this.output.length!==u)throw e("internal error: incorrect buffer size allocated");return this.output},o.prototype.read_uint16=function(a){var l=this.input;if(a+2>l.length)throw e("unexpected EOF","EBADDATA");return this.big_endian?l[a]*256+l[a+1]:l[a]+l[a+1]*256},o.prototype.read_uint32=function(a){var l=this.input;if(a+4>l.length)throw e("unexpected EOF","EBADDATA");return this.big_endian?l[a]*16777216+l[a+1]*65536+l[a+2]*256+l[a+3]:l[a]+l[a+1]*256+l[a+2]*65536+l[a+3]*16777216},o.prototype.write_uint16=function(a,l){var c=this.output;this.big_endian?(c[a]=l>>>8&255,c[a+1]=l&255):(c[a]=l&255,c[a+1]=l>>>8&255)},o.prototype.write_uint32=function(a,l){var c=this.output;this.big_endian?(c[a]=l>>>24&255,c[a+1]=l>>>16&255,c[a+2]=l>>>8&255,c[a+3]=l&255):(c[a]=l&255,c[a+1]=l>>>8&255,c[a+2]=l>>>16&255,c[a+3]=l>>>24&255)},o.prototype.is_subifd_link=function(a,l){return a===0&&l===34665||a===0&&l===34853||a===34665&&l===40965},o.prototype.exif_format_length=function(a){switch(a){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},o.prototype.exif_format_read=function(a,l){var c;switch(a){case 1:case 2:return c=this.input[l],c;case 6:return c=this.input[l],c|(c&128)*33554430;case 3:return c=this.read_uint16(l),c;case 8:return c=this.read_uint16(l),c|(c&32768)*131070;case 4:return c=this.read_uint32(l),c;case 9:return c=this.read_uint32(l),c|0;case 5:case 10:case 11:case 12:return null;case 7:return null;default:return null}},o.prototype.scan_ifd=function(a,l,c){var u=this.read_uint16(l);l+=2;for(var d=0;d<u;d++){var f=this.read_uint16(l),_=this.read_uint16(l+2),p=this.read_uint32(l+4),m=this.exif_format_length(_),y=p*m,v=y<=4?l+8:this.read_uint32(l+8),w=!1;if(v+y>this.input.length)throw e("unexpected EOF","EBADDATA");for(var x=[],E=v,O=0;O<p;O++,E+=m){var L=this.exif_format_read(_,E);if(L===null){x=null;break}x.push(L)}if(Array.isArray(x)&&_===2){try{x=r(String.fromCharCode.apply(null,x))}catch{x=null}x&&x[x.length-1]==="\0"&&(x=x.slice(0,-1))}this.is_subifd_link(a,f)&&Array.isArray(x)&&Number.isInteger(x[0])&&x[0]>0&&(this.ifds_to_read.push({id:f,offset:x[0]}),w=!0);var R={is_big_endian:this.big_endian,ifd:a,tag:f,format:_,count:p,entry_offset:l+this.start,data_length:y,data_offset:v+this.start,value:x,is_subifd_link:w};if(c(R)===!1){this.aborted=!0;return}l+=12}a===0&&this.ifds_to_read.push({id:1,offset:this.read_uint32(l)})},n.exports.is_jpeg=function(a){return a.length>=4&&a[0]===255&&a[1]===216&&a[2]===255},n.exports.jpeg_segments_each=function(a,l){if(!s(a))throw e("Invalid argument (jpeg_bin), Uint8Array expected","EINVAL");if(typeof l!="function")throw e("Invalid argument (on_segment), Function expected","EINVAL");if(!n.exports.is_jpeg(a))throw e("Unknown file format","ENOTJPEG");for(var c=0,u=a.length,d=!1;;){var f,_;if(c+1>=u)throw e("Unexpected EOF","EBADDATA");var p=a[c],m=a[c+1];if(p===255&&m===255)f=255,_=1;else if(p===255&&m!==0){if(f=m,_=2,!(208<=f&&f<=217||f===1)){if(c+3>=u)throw e("Unexpected EOF","EBADDATA");if(_+=a[c+2]*256+a[c+3],_<2)throw e("Invalid segment length","EBADDATA");if(c+_-1>=u)throw e("Unexpected EOF","EBADDATA")}d&&(f>=208&&f<=215||(d=!1)),f===218&&(d=!0)}else if(d)for(var y=c+1;;y++){if(y>=u)throw e("Unexpected EOF","EBADDATA");if(a[y]===255){if(y+1>=u)throw e("Unexpected EOF","EBADDATA");if(a[y+1]!==0){f=0,_=y-c;break}}}else throw e("Unexpected byte at segment start: "+t(p)+" (offset "+t(c)+")","EBADDATA");if(l({code:f,offset:c,length:_})===!1||f===217)break;c+=_}},n.exports.jpeg_segments_filter=function(a,l){if(!s(a))throw e("Invalid argument (jpeg_bin), Uint8Array expected","EINVAL");if(typeof l!="function")throw e("Invalid argument (on_segment), Function expected","EINVAL");var c=[],u=0;n.exports.jpeg_segments_each(a,function(_){var p=l(_);if(s(p))c.push({data:p}),u+=p.length;else if(Array.isArray(p))p.filter(s).forEach(function(y){c.push({data:y}),u+=y.length});else if(p!==!1){var m={start:_.offset,end:_.offset+_.length};c.length>0&&c[c.length-1].end===m.start?c[c.length-1].end=m.end:c.push(m),u+=_.length}});var d=new Uint8Array(u),f=0;return c.forEach(function(_){var p=_.data||a.subarray(_.start,_.end);d.set(p,f),f+=p.length}),d},n.exports.jpeg_exif_tags_each=function(a,l){if(!s(a))throw e("Invalid argument (jpeg_bin), Uint8Array expected","EINVAL");if(typeof l!="function")throw e("Invalid argument (on_exif_entry), Function expected","EINVAL");n.exports.jpeg_segments_each(a,function(c){if(c.code===218)return!1;if(c.code===225&&c.length>=10&&a[c.offset+4]===69&&a[c.offset+5]===120&&a[c.offset+6]===105&&a[c.offset+7]===102&&a[c.offset+8]===0&&a[c.offset+9]===0)return new o(a,c.offset+10,c.offset+c.length).each(l),!1})},n.exports.jpeg_exif_tags_filter=function(a,l){if(!s(a))throw e("Invalid argument (jpeg_bin), Uint8Array expected","EINVAL");if(typeof l!="function")throw e("Invalid argument (on_exif_entry), Function expected","EINVAL");var c=!1;return n.exports.jpeg_segments_filter(a,function(u){if(!c&&(u.code===218&&(c=!0),u.code===225&&u.length>=10&&a[u.offset+4]===69&&a[u.offset+5]===120&&a[u.offset+6]===105&&a[u.offset+7]===102&&a[u.offset+8]===0&&a[u.offset+9]===0)){var d=new o(a,u.offset+10,u.offset+u.length).filter(l);if(!d)return!1;var f=new Uint8Array(10);return f.set(a.slice(u.offset,u.offset+10)),f[2]=d.length+8>>>8&255,f[3]=d.length+8&255,c=!0,[f,d]}})},n.exports.jpeg_add_comment=function(a,l){var c=!1,u=0;return n.exports.jpeg_segments_filter(a,function(d){if(u++,!(u===1&&d.code===216)&&!(u===2&&d.code===224)&&!c){l=i(l);var f=new Uint8Array(5+l.length),_=0;return f[_++]=255,f[_++]=254,f[_++]=l.length+3>>>8&255,f[_++]=l.length+3&255,l.split("").forEach(function(p){f[_++]=p.charCodeAt(0)&255}),f[_++]=0,c=!0,[f,a.subarray(d.offset,d.offset+d.length)]}})}})(Of);var qo=Of.exports;function Pf(n){return this._getUint8Array(n.blob).then(function(e){if(n.is_jpeg=qo.is_jpeg(e),!n.is_jpeg)return Promise.resolve(n);n.orig_blob=n.blob;try{var t,i;if(qo.jpeg_exif_tags_each(e,function(s){if(s.ifd===0&&s.tag===274&&Array.isArray(s.value))return n.orientation=s.value[0]||1,t=s.is_big_endian,i=s.data_offset,!1}),i){var r=t?new Uint8Array([0,1]):new Uint8Array([1,0]);n.blob=new Blob([e.slice(0,i),r,e.slice(i+2)],{type:"image/jpeg"})}}catch{}return n})}function Ff(n){if(!n.is_jpeg)return Promise.resolve(n);var e=n.orientation-1;if(!e)return Promise.resolve(n);var t;e&4?t=this.pica.options.createCanvas(n.out_canvas.height,n.out_canvas.width):t=this.pica.options.createCanvas(n.out_canvas.width,n.out_canvas.height);var i=t.getContext("2d");return i.save(),e&1&&i.transform(-1,0,0,1,t.width,0),e&2&&i.transform(-1,0,0,-1,t.width,t.height),e&4&&i.transform(0,1,1,0,0,0),i.drawImage(n.out_canvas,0,0),i.restore(),n.out_canvas.width=n.out_canvas.height=0,n.out_canvas=t,Promise.resolve(n)}function Df(n){return n.is_jpeg?Promise.all([this._getUint8Array(n.blob),this._getUint8Array(n.out_blob)]).then(function(e){var t=e[0],i=e[1];if(!qo.is_jpeg(t))return Promise.resolve(n);var r=[];return qo.jpeg_segments_each(t,function(s){if(s.code===218)return!1;r.push(s)}),r=r.filter(function(s){return s.code===226?!1:s.code>=224&&s.code<240||s.code===254}).map(function(s){return t.slice(s.offset,s.offset+s.length)}),n.out_blob=new Blob([i.slice(0,2)].concat(r).concat([i.slice(20)]),{type:"image/jpeg"}),n}):Promise.resolve(n)}function Uy(n){n.before("_blob_to_image",Pf),n.after("_transform",Ff),n.after("_create_blob",Df)}Qs.jpeg_patch_exif=Pf;Qs.jpeg_rotate_canvas=Ff;Qs.jpeg_attach_orig_segments=Df;Qs.assign=Uy;var Dc=ba,kf=Mf.exports;function ai(n){if(!(this instanceof ai))return new ai(n);n=n||{},this.pica=n.pica||kf({}),this.initialized=!1,this.utils=Dc}ai.prototype.use=function(n){var e=[this].concat(Array.prototype.slice.call(arguments,1));return n.apply(n,e),this};ai.prototype.init=function(){this.use(Qs.assign)};ai.prototype.toBlob=function(n,e){var t=Dc.assign({max:1/0},e),i={blob:n,opts:t};return this.initialized||(this.init(),this.initialized=!0),Promise.resolve(i).then(this._blob_to_image).then(this._calculate_size).then(this._transform).then(this._cleanup).then(this._create_blob).then(function(r){return r.out_canvas.width=r.out_canvas.height=0,r.out_blob})};ai.prototype.toCanvas=function(n,e){var t=Dc.assign({max:1/0},e),i={blob:n,opts:t};return this.initialized||(this.init(),this.initialized=!0),Promise.resolve(i).then(this._blob_to_image).then(this._calculate_size).then(this._transform).then(this._cleanup).then(function(r){return r.out_canvas})};ai.prototype.before=function(n,e){if(!this[n])throw new Error('Method "'+n+'" does not exist');if(typeof e!="function")throw new Error('Invalid argument "fn", function expected');var t=this[n],i=this;return this[n]=function(r){return e.call(i,r).then(function(s){return t.call(i,s)})},this};ai.prototype.after=function(n,e){if(!this[n])throw new Error('Method "'+n+'" does not exist');if(typeof e!="function")throw new Error('Invalid argument "fn", function expected');var t=this[n],i=this;return this[n]=function(r){return t.call(i,r).then(function(s){return e.call(i,s)})},this};ai.prototype._blob_to_image=function(n){var e=window.URL||window.webkitURL||window.mozURL||window.msURL;return n.image=document.createElement("img"),n.image_url=e.createObjectURL(n.blob),n.image.src=n.image_url,new Promise(function(t,i){n.image.onerror=function(){i(new Error("ImageBlobReduce: failed to create Image() from blob"))},n.image.onload=function(){t(n)}})};ai.prototype._calculate_size=function(n){var e=n.opts.max/Math.max(n.image.width,n.image.height);return e>1&&(e=1),n.transform_width=Math.max(Math.round(n.image.width*e),1),n.transform_height=Math.max(Math.round(n.image.height*e),1),n.scale_factor=e,Promise.resolve(n)};ai.prototype._transform=function(n){n.out_canvas=this.pica.options.createCanvas(n.transform_width,n.transform_height),n.transform_width=null,n.transform_height=null;var e={alpha:n.blob.type==="image/png"};return this.utils.assign(e,this.utils.pick_pica_resize_options(n.opts)),this.pica.resize(n.image,n.out_canvas,e).then(function(){return n})};ai.prototype._cleanup=function(n){n.image.src="",n.image=null;var e=window.URL||window.webkitURL||window.mozURL||window.msURL;return e.revokeObjectURL&&e.revokeObjectURL(n.image_url),n.image_url=null,Promise.resolve(n)};ai.prototype._create_blob=function(n){return this.pica.toBlob(n.out_canvas,n.blob.type).then(function(e){return n.out_blob=e,n})};ai.prototype._getUint8Array=function(n){return n.arrayBuffer?n.arrayBuffer().then(function(e){return new Uint8Array(e)}):new Promise(function(e,t){var i=new FileReader;i.readAsArrayBuffer(n),i.onload=function(){e(new Uint8Array(i.result))},i.onerror=function(){t(new Error("ImageBlobReduce: failed to load data from input blob")),i.abort()},i.onabort=function(){t(new Error("ImageBlobReduce: failed to load data from input blob (aborted)"))}})};ai.pica=kf;var Wy=ai,Oo,Yy=new Uint8Array(16);function Xy(){if(!Oo&&(Oo=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Oo))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Oo(Yy)}var Hy=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Qy(n){return typeof n=="string"&&Hy.test(n)}var ti=[];for(var Il=0;Il<256;++Il)ti.push((Il+256).toString(16).substr(1));function Ky(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(ti[n[e+0]]+ti[n[e+1]]+ti[n[e+2]]+ti[n[e+3]]+"-"+ti[n[e+4]]+ti[n[e+5]]+"-"+ti[n[e+6]]+ti[n[e+7]]+"-"+ti[n[e+8]]+ti[n[e+9]]+"-"+ti[n[e+10]]+ti[n[e+11]]+ti[n[e+12]]+ti[n[e+13]]+ti[n[e+14]]+ti[n[e+15]]).toLowerCase();if(!Qy(t))throw TypeError("Stringified UUID is invalid");return t}var Wh,Sl,Rl=0,Tl=0;function Vy(n,e,t){var i=e&&t||0,r=e||new Array(16);n=n||{};var s=n.node||Wh,o=n.clockseq!==void 0?n.clockseq:Sl;if(s==null||o==null){var a=n.random||(n.rng||Xy)();s==null&&(s=Wh=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),o==null&&(o=Sl=(a[6]<<8|a[7])&16383)}var l=n.msecs!==void 0?n.msecs:Date.now(),c=n.nsecs!==void 0?n.nsecs:Tl+1,u=l-Rl+(c-Tl)/1e4;if(u<0&&n.clockseq===void 0&&(o=o+1&16383),(u<0||l>Rl)&&n.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Rl=l,Tl=c,Sl=o,l+=122192928e5;var d=((l&268435455)*1e4+c)%4294967296;r[i++]=d>>>24&255,r[i++]=d>>>16&255,r[i++]=d>>>8&255,r[i++]=d&255;var f=l/4294967296*1e4&268435455;r[i++]=f>>>8&255,r[i++]=f&255,r[i++]=f>>>24&15|16,r[i++]=f>>>16&255,r[i++]=o>>>8|128,r[i++]=o&255;for(var _=0;_<6;++_)r[i+_]=s[_];return e||Ky(r)}class Zy{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}var en=Zy,$r={PROPERTYCHANGE:"propertychange"};class $y{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}var kc=$y;function qy(n,e,t){let i,r;t=t||ur;let s=0,o=n.length,a=!1;for(;s<o;)i=s+(o-s>>1),r=+t(n[i],e),r<0?s=i+1:(o=i,a=!r);return a?s:~s}function ur(n,e){return n>e?1:n<e?-1:0}function Nc(n,e,t){const i=n.length;if(n[0]<=e)return 0;if(e<=n[i-1])return i-1;let r;if(t>0){for(r=1;r<i;++r)if(n[r]<e)return r-1}else if(t<0){for(r=1;r<i;++r)if(n[r]<=e)return r}else for(r=1;r<i;++r){if(n[r]==e)return r;if(n[r]<e)return typeof t=="function"?t(e,n[r-1],n[r])>0?r-1:r:n[r-1]-e<e-n[r]?r-1:r}return i-1}function Jy(n,e,t){for(;e<t;){const i=n[e];n[e]=n[t],n[t]=i,++e,--t}}function Pi(n,e){const t=Array.isArray(e)?e:[e],i=t.length;for(let r=0;r<i;r++)n[n.length]=t[r]}function kn(n,e){const t=n.length;if(t!==e.length)return!1;for(let i=0;i<t;i++)if(n[i]!==e[i])return!1;return!0}function e0(n,e,t){const i=e||ur;return n.every(function(r,s){if(s===0)return!0;const o=i(n[s-1],r);return!(o>0||t&&o===0)})}function ks(){return!0}function Ca(){return!1}function qr(){}function t0(n){let e=!1,t,i,r;return function(){const s=Array.prototype.slice.call(arguments);return(!e||this!==r||!kn(s,i))&&(e=!0,r=this,i=s,t=n.apply(this,arguments)),t}}function Ks(n){for(const e in n)delete n[e]}function Jr(n){let e;for(e in n)return!1;return!e}class i0 extends kc{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const i=this.listeners_||(this.listeners_={}),r=i[e]||(i[e]=[]);r.includes(t)||r.push(t)}dispatchEvent(e){const t=typeof e=="string",i=t?e:e.type,r=this.listeners_&&this.listeners_[i];if(!r)return;const s=t?new en(e):e;s.target||(s.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});i in o||(o[i]=0,a[i]=0),++o[i];let l;for(let c=0,u=r.length;c<u;++c)if("handleEvent"in r[c]?l=r[c].handleEvent(s):l=r[c].call(this,s),l===!1||s.propagationStopped){l=!1;break}if(--o[i]===0){let c=a[i];for(delete a[i];c--;)this.removeEventListener(i,qr);delete o[i]}return l}disposeInternal(){this.listeners_&&Ks(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){const i=this.listeners_&&this.listeners_[e];if(i){const r=i.indexOf(t);r!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(i[r]=qr,++this.pendingRemovals_[e]):(i.splice(r,1),i.length===0&&delete this.listeners_[e]))}}}var Ia=i0,Ue={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function nt(n,e,t,i,r){if(i&&i!==n&&(t=t.bind(i)),r){const o=t;t=function(){n.removeEventListener(e,t),o.apply(this,arguments)}}const s={target:n,type:e,listener:t};return n.addEventListener(e,t),s}function Jo(n,e,t,i){return nt(n,e,t,i,!0)}function bt(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),Ks(n))}class Sa extends Ia{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(Ue.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const i=e.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=nt(this,e[s],t);return r}return nt(this,e,t)}onceInternal(e,t){let i;if(Array.isArray(e)){const r=e.length;i=new Array(r);for(let s=0;s<r;++s)i[s]=Jo(this,e[s],t)}else i=Jo(this,e,t);return t.ol_key=i,i}unInternal(e,t){const i=t.ol_key;if(i)n0(i);else if(Array.isArray(e))for(let r=0,s=e.length;r<s;++r)this.removeEventListener(e[r],t);else this.removeEventListener(e,t)}}Sa.prototype.on;Sa.prototype.once;Sa.prototype.un;function n0(n){if(Array.isArray(n))for(let e=0,t=n.length;e<t;++e)bt(n[e]);else bt(n)}var Nf=Sa;function Ge(){throw new Error("Unimplemented abstract method.")}let r0=0;function ht(n){return n.ol_uid||(n.ol_uid=String(++r0))}class Yh extends en{constructor(e,t,i){super(e),this.key=t,this.oldValue=i}}class s0 extends Nf{constructor(e){super(),this.on,this.once,this.un,ht(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}hasProperties(){return!!this.values_}notify(e,t){let i;i=`change:${e}`,this.hasListener(i)&&this.dispatchEvent(new Yh(i,e,t)),i=$r.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new Yh(i,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,i){const r=this.values_||(this.values_={});if(i)r[e]=t;else{const s=r[e];r[e]=t,s!==t&&this.notify(e,s)}}setProperties(e,t){for(const i in e)this.set(i,e[i],t)}applyProperties(e){!e.values_||Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const i=this.values_[e];delete this.values_[e],Jr(this.values_)&&(this.values_=null),t||this.notify(e,i)}}}var ki=s0;const o0={1:"The view center is not defined",2:"The view resolution is not defined",3:"The view rotation is not defined",4:"`image` and `src` cannot be provided at the same time",5:"`imgSize` must be set when `image` is provided",7:"`format` must be set when `url` is set",8:"Unknown `serverType` configured",9:"`url` must be configured or set using `#setUrl()`",10:"The default `geometryFunction` can only handle `Point` geometries",11:"`options.featureTypes` must be an Array",12:"`options.geometryName` must also be provided when `options.bbox` is set",13:"Invalid corner",14:"Invalid color",15:"Tried to get a value for a key that does not exist in the cache",16:"Tried to set a value for a key that is used already",17:"`resolutions` must be sorted in descending order",18:"Either `origin` or `origins` must be configured, never both",19:"Number of `tileSizes` and `resolutions` must be equal",20:"Number of `origins` and `resolutions` must be equal",22:"Either `tileSize` or `tileSizes` must be configured, never both",24:"Invalid extent or geometry provided as `geometry`",25:"Cannot fit empty extent provided as `geometry`",26:"Features must have an id set",27:"Features must have an id set",28:'`renderMode` must be `"hybrid"` or `"vector"`',30:"The passed `feature` was already added to the source",31:"Tried to enqueue an `element` that was already added to the queue",32:"Transformation matrix cannot be inverted",33:"Invalid units",34:"Invalid geometry layout",36:"Unknown SRS type",37:"Unknown geometry type found",38:"`styleMapValue` has an unknown type",39:"Unknown geometry type",40:"Expected `feature` to have a geometry",41:"Expected an `ol/style/Style` or an array of `ol/style/Style.js`",42:"Question unknown, the answer is 42",43:"Expected `layers` to be an array or a `Collection`",47:"Expected `controls` to be an array or an `ol/Collection`",48:"Expected `interactions` to be an array or an `ol/Collection`",49:"Expected `overlays` to be an array or an `ol/Collection`",50:"`options.featureTypes` should be an Array",51:"Either `url` or `tileJSON` options must be provided",52:"Unknown `serverType` configured",53:"Unknown `tierSizeCalculation` configured",55:"The {-y} placeholder requires a tile grid with extent",56:"mapBrowserEvent must originate from a pointer event",57:"At least 2 conditions are required",59:"Invalid command found in the PBF",60:"Missing or invalid `size`",61:"Cannot determine IIIF Image API version from provided image information JSON",62:"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`",64:"Layer opacity must be a number",66:"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`",67:"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both",68:"A VectorTile source can only be rendered if it has a projection compatible with the view projection",69:"`width` or `height` cannot be provided together with `scale`"};class a0 extends Error{constructor(e){const t=o0[e];super(t),this.code=e,this.name="AssertionError",this.message=t}}var Bf=a0,gi={ADD:"add",REMOVE:"remove"};const Xh={LENGTH:"length"};class Po extends en{constructor(e,t,i){super(e),this.element=t,this.index=i}}class l0 extends ki{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e||[],this.unique_)for(let i=0,r=this.array_.length;i<r;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,i=e.length;t<i;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let i=0,r=t.length;i<r;++i)e(t[i],i,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(Xh.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new Po(gi.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let i=0,r=t.length;i<r;++i)if(t[i]===e)return this.removeAt(i)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new Po(gi.REMOVE,t,e)),t}setAt(e,t){const i=this.getLength();if(e>=i){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const r=this.array_[e];this.array_[e]=t,this.dispatchEvent(new Po(gi.REMOVE,r,e)),this.dispatchEvent(new Po(gi.ADD,t,e))}updateLength_(){this.set(Xh.LENGTH,this.array_.length)}assertUnique_(e,t){for(let i=0,r=this.array_.length;i<r;++i)if(this.array_[i]===e&&i!==t)throw new Bf(58)}}var Zi=l0;const Fn=typeof navigator!="undefined"&&typeof navigator.userAgent!="undefined"?navigator.userAgent.toLowerCase():"",c0=Fn.includes("firefox"),u0=Fn.includes("safari")&&!Fn.includes("chrom");u0&&(Fn.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Fn));const h0=Fn.includes("webkit")&&!Fn.includes("edge"),d0=Fn.includes("macintosh"),Gf=typeof devicePixelRatio!="undefined"?devicePixelRatio:1,Bc=typeof WorkerGlobalScope!="undefined"&&typeof OffscreenCanvas!="undefined"&&self instanceof WorkerGlobalScope,f0=typeof Image!="undefined"&&Image.prototype.decode,zf=function(){let n=!1;try{const e=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return n}();function Ve(n,e){if(!n)throw new Bf(e)}new Array(6);function qi(){return[1,0,0,1,0,0]}function g0(n,e,t,i,r,s,o){return n[0]=e,n[1]=t,n[2]=i,n[3]=r,n[4]=s,n[5]=o,n}function p0(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n}function Wt(n,e){const t=e[0],i=e[1];return e[0]=n[0]*t+n[2]*i+n[4],e[1]=n[1]*t+n[3]*i+n[5],e}function m0(n,e,t){return g0(n,e,0,0,t,0,0)}function Dn(n,e,t,i,r,s,o,a){const l=Math.sin(s),c=Math.cos(s);return n[0]=i*c,n[1]=r*l,n[2]=-i*l,n[3]=r*c,n[4]=o*i*c-a*i*l+e,n[5]=o*r*l+a*r*c+t,n}function Gc(n,e){const t=_0(e);Ve(t!==0,32);const i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5];return n[0]=o/t,n[1]=-r/t,n[2]=-s/t,n[3]=i/t,n[4]=(s*l-o*a)/t,n[5]=-(i*l-r*a)/t,n}function _0(n){return n[0]*n[3]-n[1]*n[2]}let Hh;function jf(n){const e="matrix("+n.join(", ")+")";if(Bc)return e;const t=Hh||(Hh=document.createElement("div"));return t.style.transform=e,t.style.transform}var Ut={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function Qh(n){const e=Ei();for(let t=0,i=n.length;t<i;++t)Ls(e,n[t]);return e}function zc(n,e,t){return t?(t[0]=n[0]-e,t[1]=n[1]-e,t[2]=n[2]+e,t[3]=n[3]+e,t):[n[0]-e,n[1]-e,n[2]+e,n[3]+e]}function Uf(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n.slice()}function fr(n,e,t){let i,r;return e<n[0]?i=n[0]-e:n[2]<e?i=e-n[2]:i=0,t<n[1]?r=n[1]-t:n[3]<t?r=t-n[3]:r=0,i*i+r*r}function Ra(n,e){return jc(n,e[0],e[1])}function Hr(n,e){return n[0]<=e[0]&&e[2]<=n[2]&&n[1]<=e[1]&&e[3]<=n[3]}function jc(n,e,t){return n[0]<=e&&e<=n[2]&&n[1]<=t&&t<=n[3]}function oc(n,e){const t=n[0],i=n[1],r=n[2],s=n[3],o=e[0],a=e[1];let l=Ut.UNKNOWN;return o<t?l=l|Ut.LEFT:o>r&&(l=l|Ut.RIGHT),a<i?l=l|Ut.BELOW:a>s&&(l=l|Ut.ABOVE),l===Ut.UNKNOWN&&(l=Ut.INTERSECTING),l}function Ei(){return[1/0,1/0,-1/0,-1/0]}function mn(n,e,t,i,r){return r?(r[0]=n,r[1]=e,r[2]=t,r[3]=i,r):[n,e,t,i]}function Vs(n){return mn(1/0,1/0,-1/0,-1/0,n)}function y0(n,e){const t=n[0],i=n[1];return mn(t,i,t,i,e)}function Wf(n,e,t,i,r){const s=Vs(r);return Xf(s,n,e,t,i)}function Ns(n,e){return n[0]==e[0]&&n[2]==e[2]&&n[1]==e[1]&&n[3]==e[3]}function Yf(n,e){return e[0]<n[0]&&(n[0]=e[0]),e[2]>n[2]&&(n[2]=e[2]),e[1]<n[1]&&(n[1]=e[1]),e[3]>n[3]&&(n[3]=e[3]),n}function Ls(n,e){e[0]<n[0]&&(n[0]=e[0]),e[0]>n[2]&&(n[2]=e[0]),e[1]<n[1]&&(n[1]=e[1]),e[1]>n[3]&&(n[3]=e[1])}function Xf(n,e,t,i,r){for(;t<i;t+=r)v0(n,e[t],e[t+1]);return n}function v0(n,e,t){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}function Hf(n,e){let t;return t=e(Ta(n)),t||(t=e(La(n)),t)||(t=e(Ma(n)),t)||(t=e(gr(n)),t)?t:!1}function ac(n){let e=0;return Uc(n)||(e=Et(n)*Ji(n)),e}function Ta(n){return[n[0],n[1]]}function La(n){return[n[2],n[1]]}function hr(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function w0(n,e){let t;return e==="bottom-left"?t=Ta(n):e==="bottom-right"?t=La(n):e==="top-left"?t=gr(n):e==="top-right"?t=Ma(n):Ve(!1,13),t}function lc(n,e,t,i,r){const[s,o,a,l,c,u,d,f]=cc(n,e,t,i);return mn(Math.min(s,a,c,d),Math.min(o,l,u,f),Math.max(s,a,c,d),Math.max(o,l,u,f),r)}function cc(n,e,t,i){const r=e*i[0]/2,s=e*i[1]/2,o=Math.cos(t),a=Math.sin(t),l=r*o,c=r*a,u=s*o,d=s*a,f=n[0],_=n[1];return[f-l+d,_-c-u,f-l-d,_-c+u,f+l-d,_+c+u,f+l+d,_+c-u,f-l+d,_-c-u]}function Ji(n){return n[3]-n[1]}function Ms(n,e,t){const i=t||Ei();return ci(n,e)?(n[0]>e[0]?i[0]=n[0]:i[0]=e[0],n[1]>e[1]?i[1]=n[1]:i[1]=e[1],n[2]<e[2]?i[2]=n[2]:i[2]=e[2],n[3]<e[3]?i[3]=n[3]:i[3]=e[3]):Vs(i),i}function gr(n){return[n[0],n[3]]}function Ma(n){return[n[2],n[3]]}function Et(n){return n[2]-n[0]}function ci(n,e){return n[0]<=e[2]&&n[2]>=e[0]&&n[1]<=e[3]&&n[3]>=e[1]}function Uc(n){return n[2]<n[0]||n[3]<n[1]}function A0(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n}function x0(n,e,t){let i=!1;const r=oc(n,e),s=oc(n,t);if(r===Ut.INTERSECTING||s===Ut.INTERSECTING)i=!0;else{const o=n[0],a=n[1],l=n[2],c=n[3],u=e[0],d=e[1],f=t[0],_=t[1],p=(_-d)/(f-u);let m,y;!!(s&Ut.ABOVE)&&!(r&Ut.ABOVE)&&(m=f-(_-c)/p,i=m>=o&&m<=l),!i&&!!(s&Ut.RIGHT)&&!(r&Ut.RIGHT)&&(y=_-(f-l)*p,i=y>=a&&y<=c),!i&&!!(s&Ut.BELOW)&&!(r&Ut.BELOW)&&(m=f-(_-a)/p,i=m>=o&&m<=l),!i&&!!(s&Ut.LEFT)&&!(r&Ut.LEFT)&&(y=_-(f-o)*p,i=y>=a&&y<=c)}return i}function Qf(n,e){const t=e.getExtent(),i=hr(n);if(e.canWrapX()&&(i[0]<t[0]||i[0]>=t[2])){const r=Et(t),o=Math.floor((i[0]-t[0])/r)*r;n[0]-=o,n[2]-=o}return n}function E0(n,e){if(e.canWrapX()){const t=e.getExtent();if(!isFinite(n[0])||!isFinite(n[2]))return[[t[0],n[1],t[2],n[3]]];Qf(n,e);const i=Et(t);if(Et(n)>i)return[[t[0],n[1],t[2],n[3]]];if(n[0]<t[0])return[[n[0]+i,n[1],t[2],n[3]],[t[0],n[1],n[2],n[3]]];if(n[2]>t[2])return[[n[0],n[1],t[2],n[3]],[t[0],n[1],n[2]-i,n[3]]]}return[n]}function Pt(n,e,t){return Math.min(Math.max(n,e),t)}function b0(n,e,t,i,r,s){const o=r-t,a=s-i;if(o!==0||a!==0){const l=((n-t)*o+(e-i)*a)/(o*o+a*a);l>1?(t=r,i=s):l>0&&(t+=o*l,i+=a*l)}return or(n,e,t,i)}function or(n,e,t,i){const r=t-n,s=i-e;return r*r+s*s}function C0(n){const e=n.length;for(let i=0;i<e;i++){let r=i,s=Math.abs(n[i][i]);for(let a=i+1;a<e;a++){const l=Math.abs(n[a][i]);l>s&&(s=l,r=a)}if(s===0)return null;const o=n[r];n[r]=n[i],n[i]=o;for(let a=i+1;a<e;a++){const l=-n[a][i]/n[i][i];for(let c=i;c<e+1;c++)i==c?n[a][c]=0:n[a][c]+=l*n[i][c]}}const t=new Array(e);for(let i=e-1;i>=0;i--){t[i]=n[i][e]/n[i][i];for(let r=i-1;r>=0;r--)n[r][e]-=n[r][i]*t[i]}return t}function Kh(n){return n*180/Math.PI}function ar(n){return n*Math.PI/180}function lr(n,e){const t=n%e;return t*e<0?t+e:t}function pi(n,e,t){return n+t*(e-n)}function Wc(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}function Fo(n,e){return Math.floor(Wc(n,e))}function Do(n,e){return Math.ceil(Wc(n,e))}const I0=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,S0=/^([a-z]*)$|^hsla?\(.*\)$/i;function Kf(n){return typeof n=="string"?n:Vf(n)}function R0(n){const e=document.createElement("div");if(e.style.color=n,e.style.color!==""){document.body.appendChild(e);const t=getComputedStyle(e).color;return document.body.removeChild(e),t}return""}const T0=function(){const e={};let t=0;return function(i){let r;if(e.hasOwnProperty(i))r=e[i];else{if(t>=1024){let s=0;for(const o in e)(s++&3)===0&&(delete e[o],--t)}r=L0(i),e[i]=r,++t}return r}}();function ea(n){return Array.isArray(n)?n:T0(n)}function L0(n){let e,t,i,r,s;if(S0.exec(n)&&(n=R0(n)),I0.exec(n)){const o=n.length-1;let a;o<=4?a=1:a=2;const l=o===4||o===8;e=parseInt(n.substr(1+0*a,a),16),t=parseInt(n.substr(1+1*a,a),16),i=parseInt(n.substr(1+2*a,a),16),l?r=parseInt(n.substr(1+3*a,a),16):r=255,a==1&&(e=(e<<4)+e,t=(t<<4)+t,i=(i<<4)+i,l&&(r=(r<<4)+r)),s=[e,t,i,r/255]}else n.startsWith("rgba(")?(s=n.slice(5,-1).split(",").map(Number),Vh(s)):n.startsWith("rgb(")?(s=n.slice(4,-1).split(",").map(Number),s.push(1),Vh(s)):Ve(!1,14);return s}function Vh(n){return n[0]=Pt(n[0]+.5|0,0,255),n[1]=Pt(n[1]+.5|0,0,255),n[2]=Pt(n[2]+.5|0,0,255),n[3]=Pt(n[3],0,1),n}function Vf(n){let e=n[0];e!=(e|0)&&(e=e+.5|0);let t=n[1];t!=(t|0)&&(t=t+.5|0);let i=n[2];i!=(i|0)&&(i=i+.5|0);const r=n[3]===void 0?1:Math.round(n[3]*100)/100;return"rgba("+e+","+t+","+i+","+r+")"}class M0{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const i=this.cache_[t];(e++&3)===0&&!i.hasListener()&&(delete this.cache_[t],--this.cacheSize_)}}}get(e,t,i){const r=Zh(e,t,i);return r in this.cache_?this.cache_[r]:null}set(e,t,i,r){const s=Zh(e,t,i);this.cache_[s]=r,++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function Zh(n,e,t){const i=t?Kf(t):"null";return e+":"+n+":"+i}const ta=new M0;var gt={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class O0 extends ki{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[gt.OPACITY]=e.opacity!==void 0?e.opacity:1,Ve(typeof t[gt.OPACITY]=="number",64),t[gt.VISIBLE]=e.visible!==void 0?e.visible:!0,t[gt.Z_INDEX]=e.zIndex,t[gt.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[gt.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[gt.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[gt.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},i=this.getZIndex();return t.opacity=Pt(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=i===void 0&&!t.managed?1/0:i,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return Ge()}getLayerStatesArray(e){return Ge()}getExtent(){return this.get(gt.EXTENT)}getMaxResolution(){return this.get(gt.MAX_RESOLUTION)}getMinResolution(){return this.get(gt.MIN_RESOLUTION)}getMinZoom(){return this.get(gt.MIN_ZOOM)}getMaxZoom(){return this.get(gt.MAX_ZOOM)}getOpacity(){return this.get(gt.OPACITY)}getSourceState(){return Ge()}getVisible(){return this.get(gt.VISIBLE)}getZIndex(){return this.get(gt.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(gt.EXTENT,e)}setMaxResolution(e){this.set(gt.MAX_RESOLUTION,e)}setMinResolution(e){this.set(gt.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(gt.MAX_ZOOM,e)}setMinZoom(e){this.set(gt.MIN_ZOOM,e)}setOpacity(e){Ve(typeof e=="number",64),this.set(gt.OPACITY,e)}setVisible(e){this.set(gt.VISIBLE,e)}setZIndex(e){this.set(gt.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}var Zf=O0,On={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},si={ANIMATING:0,INTERACTING:1},Mi={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};const P0=42,Yc=256,es={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class F0{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||es[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}var $f=F0;const Zs=6378137,Qr=Math.PI*Zs,D0=[-Qr,-Qr,Qr,Qr],k0=[-180,-85,180,85],ko=Zs*Math.log(Math.tan(Math.PI/2));class Or extends $f{constructor(e){super({code:e,units:"m",extent:D0,global:!0,worldExtent:k0,getPointResolution:function(t,i){return t/Math.cosh(i[1]/Zs)}})}}const $h=[new Or("EPSG:3857"),new Or("EPSG:102100"),new Or("EPSG:102113"),new Or("EPSG:900913"),new Or("http://www.opengis.net/def/crs/EPSG/0/3857"),new Or("http://www.opengis.net/gml/srs/epsg.xml#3857")];function N0(n,e,t){const i=n.length;t=t>1?t:2,e===void 0&&(t>2?e=n.slice():e=new Array(i));for(let r=0;r<i;r+=t){e[r]=Qr*n[r]/180;let s=Zs*Math.log(Math.tan(Math.PI*(+n[r+1]+90)/360));s>ko?s=ko:s<-ko&&(s=-ko),e[r+1]=s}return e}function B0(n,e,t){const i=n.length;t=t>1?t:2,e===void 0&&(t>2?e=n.slice():e=new Array(i));for(let r=0;r<i;r+=t)e[r]=180*n[r]/Qr,e[r+1]=360*Math.atan(Math.exp(n[r+1]/Zs))/Math.PI-90;return e}const G0=6378137,qh=[-180,-90,180,90],z0=Math.PI*G0/180;class $n extends $f{constructor(e,t){super({code:e,units:"degrees",extent:qh,axisOrientation:t,global:!0,metersPerUnit:z0,worldExtent:qh})}}const Jh=[new $n("CRS:84"),new $n("EPSG:4326","neu"),new $n("urn:ogc:def:crs:OGC:1.3:CRS84"),new $n("urn:ogc:def:crs:OGC:2:84"),new $n("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new $n("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new $n("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let uc={};function j0(n){return uc[n]||uc[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function U0(n,e){uc[n]=e}let Vr={};function ia(n,e,t){const i=n.getCode(),r=e.getCode();i in Vr||(Vr[i]={}),Vr[i][r]=t}function W0(n,e){let t;return n in Vr&&e in Vr[n]&&(t=Vr[n][e]),t}function xs(n,e,t){const i=t!==void 0?n.toFixed(t):""+n;let r=i.indexOf(".");return r=r===-1?i.length:r,r>e?i:new Array(1+e-r).join("0")+i}function Y0(n,e){return n[0]+=+e[0],n[1]+=+e[1],n}function na(n,e){let t=!0;for(let i=n.length-1;i>=0;--i)if(n[i]!=e[i]){t=!1;break}return t}function Xc(n,e){const t=Math.cos(e),i=Math.sin(e),r=n[0]*t-n[1]*i,s=n[1]*t+n[0]*i;return n[0]=r,n[1]=s,n}function X0(n,e){return n[0]*=e,n[1]*=e,n}function qf(n,e){if(e.canWrapX()){const t=Et(e.getExtent()),i=H0(n,e,t);i&&(n[0]-=i*t)}return n}function H0(n,e,t){const i=e.getExtent();let r=0;return e.canWrapX()&&(n[0]<i[0]||n[0]>i[2])&&(t=t||Et(i),r=Math.floor((n[0]-i[0])/t)),r}const Jf=63710088e-1;function ed(n,e,t){t=t||Jf;const i=ar(n[1]),r=ar(e[1]),s=(r-i)/2,o=ar(e[0]-n[0])/2,a=Math.sin(s)*Math.sin(s)+Math.sin(o)*Math.sin(o)*Math.cos(i)*Math.cos(r);return 2*t*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}function Q0(n,e,t,i){i=i||Jf;const r=ar(n[1]),s=ar(n[0]),o=e/i,a=Math.asin(Math.sin(r)*Math.cos(o)+Math.cos(r)*Math.sin(o)*Math.cos(t)),l=s+Math.atan2(Math.sin(t)*Math.sin(o)*Math.cos(r),Math.cos(o)-Math.sin(r)*Math.sin(a));return[Kh(l),Kh(a)]}const eg={info:1,warn:2,error:3,none:4};let K0=eg.info;function tg(...n){K0>eg.warn||console.warn(...n)}let hc=!0;function ig(n){hc=!(n===void 0?!0:n)}function Hc(n,e){if(e!==void 0){for(let t=0,i=n.length;t<i;++t)e[t]=n[t];e=e}else e=n.slice();return e}function Qc(n,e){if(e!==void 0&&n!==e){for(let t=0,i=n.length;t<i;++t)e[t]=n[t];n=e}return n}function V0(n){U0(n.getCode(),n),ia(n,n,Hc)}function Z0(n){n.forEach(V0)}function Tt(n){return typeof n=="string"?j0(n):n||null}function ra(n,e,t,i){n=Tt(n);let r;const s=n.getPointResolutionFunc();if(s){if(r=s(e,t),i&&i!==n.getUnits()){const o=n.getMetersPerUnit();o&&(r=r*o/es[i])}}else{const o=n.getUnits();if(o=="degrees"&&!i||i=="degrees")r=e;else{const a=Oa(n,Tt("EPSG:4326"));if(a===Qc&&o!=="degrees")r=e*n.getMetersPerUnit();else{let c=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];c=a(c,c,2);const u=ed(c.slice(0,2),c.slice(2,4)),d=ed(c.slice(4,6),c.slice(6,8));r=(u+d)/2}const l=i?es[i]:n.getMetersPerUnit();l!==void 0&&(r/=l)}}return r}function td(n){Z0(n),n.forEach(function(e){n.forEach(function(t){e!==t&&ia(e,t,Hc)})})}function $0(n,e,t,i){n.forEach(function(r){e.forEach(function(s){ia(r,s,t),ia(s,r,i)})})}function Kc(n,e){if(n){if(typeof n=="string")return Tt(n)}else return Tt(e);return n}function Ai(n,e){return ig(),Vc(n,"EPSG:4326",e!==void 0?e:"EPSG:3857")}function fn(n,e){const t=Vc(n,e!==void 0?e:"EPSG:3857","EPSG:4326"),i=t[0];return(i<-180||i>180)&&(t[0]=lr(i+180,360)-180),t}function tr(n,e){if(n===e)return!0;const t=n.getUnits()===e.getUnits();return(n.getCode()===e.getCode()||Oa(n,e)===Hc)&&t}function Oa(n,e){const t=n.getCode(),i=e.getCode();let r=W0(t,i);return r||(r=Qc),r}function sa(n,e){const t=Tt(n),i=Tt(e);return Oa(t,i)}function Vc(n,e,t){return sa(e,t)(n,void 0,n.length)}function dc(n,e){return n}function cn(n,e){return hc&&!na(n,[0,0])&&n[0]>=-180&&n[0]<=180&&n[1]>=-90&&n[1]<=90&&(hc=!1,tg("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),n}function Zc(n,e){return n}function Tn(n,e){return n}function q0(n,e){return n}function J0(){td($h),td(Jh),$0(Jh,$h,N0,B0)}J0();function id(n,e,t){return function(i,r,s,o,a){if(!i)return;if(!r&&!e)return i;const l=e?0:s[0]*r,c=e?0:s[1]*r,u=a?a[0]:0,d=a?a[1]:0;let f=n[0]+l/2+u,_=n[2]-l/2+u,p=n[1]+c/2+d,m=n[3]-c/2+d;f>_&&(f=(_+f)/2,_=f),p>m&&(p=(m+p)/2,m=p);let y=Pt(i[0],f,_),v=Pt(i[1],p,m);if(o&&t&&r){const w=30*r;y+=-w*Math.log(1+Math.max(0,f-i[0])/w)+w*Math.log(1+Math.max(0,i[0]-_)/w),v+=-w*Math.log(1+Math.max(0,p-i[1])/w)+w*Math.log(1+Math.max(0,i[1]-m)/w)}return[y,v]}}function ev(n){return n}function $c(n,e,t,i){const r=Et(e)/t[0],s=Ji(e)/t[1];return i?Math.min(n,Math.max(r,s)):Math.min(n,Math.min(r,s))}function qc(n,e,t){let i=Math.min(n,e);const r=50;return i*=Math.log(1+r*Math.max(0,n/e-1))/r+1,t&&(i=Math.max(i,t),i/=Math.log(1+r*Math.max(0,t/n-1))/r+1),Pt(i,t/2,e*2)}function tv(n,e,t,i){return e=e!==void 0?e:!0,function(r,s,o,a){if(r!==void 0){const l=n[0],c=n[n.length-1],u=t?$c(l,t,o,i):l;if(a)return e?qc(r,u,c):Pt(r,c,u);const d=Math.min(u,r),f=Math.floor(Nc(n,d,s));return n[f]>u&&f<n.length-1?n[f+1]:n[f]}}}function iv(n,e,t,i,r,s){return i=i!==void 0?i:!0,t=t!==void 0?t:0,function(o,a,l,c){if(o!==void 0){const u=r?$c(e,r,l,s):e;if(c)return i?qc(o,u,t):Pt(o,t,u);const d=1e-9,f=Math.ceil(Math.log(e/u)/Math.log(n)-d),_=-a*(.5-d)+.5,p=Math.min(u,o),m=Math.floor(Math.log(e/p)/Math.log(n)+_),y=Math.max(f,m),v=e/Math.pow(n,y);return Pt(v,t,u)}}}function nd(n,e,t,i,r){return t=t!==void 0?t:!0,function(s,o,a,l){if(s!==void 0){const c=i?$c(n,i,a,r):n;return!t||!l?Pt(s,e,c):qc(s,c,e)}}}function Jc(n){if(n!==void 0)return 0}function rd(n){if(n!==void 0)return n}function nv(n){const e=2*Math.PI/n;return function(t,i){if(i)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t}}function rv(n){return n=n||ar(5),function(e,t){if(t)return e;if(e!==void 0)return Math.abs(e)<=n?0:e}}function ng(n){return Math.pow(n,3)}function ns(n){return 1-ng(1-n)}function sv(n){return 3*n*n-2*n*n*n}function ov(n){return n}function cr(n,e,t,i,r,s){s=s||[];let o=0;for(let a=e;a<t;a+=i){const l=n[a],c=n[a+1];s[o++]=r[0]*l+r[2]*c+r[4],s[o++]=r[1]*l+r[3]*c+r[5]}return s&&s.length!=o&&(s.length=o),s}function rg(n,e,t,i,r,s,o){o=o||[];const a=Math.cos(r),l=Math.sin(r),c=s[0],u=s[1];let d=0;for(let f=e;f<t;f+=i){const _=n[f]-c,p=n[f+1]-u;o[d++]=c+_*a-p*l,o[d++]=u+_*l+p*a;for(let m=f+2;m<f+i;++m)o[d++]=n[m]}return o&&o.length!=d&&(o.length=d),o}function av(n,e,t,i,r,s,o,a){a=a||[];const l=o[0],c=o[1];let u=0;for(let d=e;d<t;d+=i){const f=n[d]-l,_=n[d+1]-c;a[u++]=l+r*f,a[u++]=c+s*_;for(let p=d+2;p<d+i;++p)a[u++]=n[p]}return a&&a.length!=u&&(a.length=u),a}function lv(n,e,t,i,r,s,o){o=o||[];let a=0;for(let l=e;l<t;l+=i){o[a++]=n[l]+r,o[a++]=n[l+1]+s;for(let c=l+2;c<l+i;++c)o[a++]=n[c]}return o&&o.length!=a&&(o.length=a),o}const sd=qi();class cv extends ki{constructor(){super(),this.extent_=Ei(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=t0(function(e,t,i){if(!i)return this.getSimplifiedGeometry(t);const r=this.clone();return r.applyTransform(i),r.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return Ge()}closestPointXY(e,t,i,r){return Ge()}containsXY(e,t){const i=this.getClosestPoint([e,t]);return i[0]===e&&i[1]===t}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return Ge()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&Vs(t),this.extentRevision_=this.getRevision()}return A0(this.extent_,e)}rotate(e,t){Ge()}scale(e,t,i){Ge()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return Ge()}getType(){return Ge()}applyTransform(e){Ge()}intersectsExtent(e){return Ge()}translate(e,t){Ge()}transform(e,t){const i=Tt(e),r=i.getUnits()=="tile-pixels"?function(s,o,a){const l=i.getExtent(),c=i.getWorldExtent(),u=Ji(c)/Ji(l);return Dn(sd,c[0],c[3],u,-u,0,0,0),cr(s,0,s.length,a,sd,o),sa(i,t)(s,o,a)}:sa(i,t);return this.applyTransform(r),this}}var sg=cv;class uv extends sg{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(e){return Wf(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return Ge()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=od(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){Ge()}setLayout(e,t,i){let r;if(e)r=od(e);else{for(let s=0;s<i;++s){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}r=t.length,e=hv(r)}this.layout=e,this.stride=r}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(e,t){const i=this.getFlatCoordinates();if(i){const r=this.getStride();rg(i,0,i.length,r,e,t,i),this.changed()}}scale(e,t,i){t===void 0&&(t=e),i||(i=hr(this.getExtent()));const r=this.getFlatCoordinates();if(r){const s=this.getStride();av(r,0,r.length,s,e,t,i,r),this.changed()}}translate(e,t){const i=this.getFlatCoordinates();if(i){const r=this.getStride();lv(i,0,i.length,r,e,t,i),this.changed()}}}function hv(n){let e;return n==2?e="XY":n==3?e="XYZ":n==4&&(e="XYZM"),e}function od(n){let e;return n=="XY"?e=2:n=="XYZ"||n=="XYM"?e=3:n=="XYZM"&&(e=4),e}function dv(n,e,t){const i=n.getFlatCoordinates();if(!i)return null;const r=n.getStride();return cr(i,0,i.length,r,e,t)}var pr=uv;function ad(n,e,t,i,r,s,o){const a=n[e],l=n[e+1],c=n[t]-a,u=n[t+1]-l;let d;if(c===0&&u===0)d=e;else{const f=((r-a)*c+(s-l)*u)/(c*c+u*u);if(f>1)d=t;else if(f>0){for(let _=0;_<i;++_)o[_]=pi(n[e+_],n[t+_],f);o.length=i;return}else d=e}for(let f=0;f<i;++f)o[f]=n[d+f];o.length=i}function eu(n,e,t,i,r){let s=n[e],o=n[e+1];for(e+=i;e<t;e+=i){const a=n[e],l=n[e+1],c=or(s,o,a,l);c>r&&(r=c),s=a,o=l}return r}function tu(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s){const a=t[s];r=eu(n,e,a,i,r),e=a}return r}function fv(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s){const a=t[s];r=tu(n,e,a,i,r),e=a[a.length-1]}return r}function iu(n,e,t,i,r,s,o,a,l,c,u){if(e==t)return c;let d,f;if(r===0){if(f=or(o,a,n[e],n[e+1]),f<c){for(d=0;d<i;++d)l[d]=n[e+d];return l.length=i,f}return c}u=u||[NaN,NaN];let _=e+i;for(;_<t;)if(ad(n,_-i,_,i,o,a,u),f=or(o,a,u[0],u[1]),f<c){for(c=f,d=0;d<i;++d)l[d]=u[d];l.length=i,_+=i}else _+=i*Math.max((Math.sqrt(f)-Math.sqrt(c))/r|0,1);if(s&&(ad(n,t-i,e,i,o,a,u),f=or(o,a,u[0],u[1]),f<c)){for(c=f,d=0;d<i;++d)l[d]=u[d];l.length=i}return c}function nu(n,e,t,i,r,s,o,a,l,c,u){u=u||[NaN,NaN];for(let d=0,f=t.length;d<f;++d){const _=t[d];c=iu(n,e,_,i,r,s,o,a,l,c,u),e=_}return c}function gv(n,e,t,i,r,s,o,a,l,c,u){u=u||[NaN,NaN];for(let d=0,f=t.length;d<f;++d){const _=t[d];c=nu(n,e,_,i,r,s,o,a,l,c,u),e=_[_.length-1]}return c}function pv(n,e,t,i){for(let r=0,s=t.length;r<s;++r)n[e++]=t[r];return e}function Pa(n,e,t,i){for(let r=0,s=t.length;r<s;++r){const o=t[r];for(let a=0;a<i;++a)n[e++]=o[a]}return e}function ru(n,e,t,i,r){r=r||[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=Pa(n,e,t[o],i);r[s++]=l,e=l}return r.length=s,r}function mv(n,e,t,i,r){r=r||[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=ru(n,e,t[o],i,r[s]);l.length===0&&(l[0]=e),r[s++]=l,e=l[l.length-1]}return r.length=s,r}function su(n,e,t,i,r,s,o){const a=(t-e)/i;if(a<3){for(;e<t;e+=i)s[o++]=n[e],s[o++]=n[e+1];return o}const l=new Array(a);l[0]=1,l[a-1]=1;const c=[e,t-i];let u=0;for(;c.length>0;){const d=c.pop(),f=c.pop();let _=0;const p=n[f],m=n[f+1],y=n[d],v=n[d+1];for(let w=f+i;w<d;w+=i){const x=n[w],E=n[w+1],O=b0(x,E,p,m,y,v);O>_&&(u=w,_=O)}_>r&&(l[(u-e)/i]=1,f+i<u&&c.push(f,u),u+i<d&&c.push(u,d))}for(let d=0;d<a;++d)l[d]&&(s[o++]=n[e+d*i],s[o++]=n[e+d*i+1]);return o}function _v(n,e,t,i,r,s,o,a){for(let l=0,c=t.length;l<c;++l){const u=t[l];o=su(n,e,u,i,r,s,o),a.push(o),e=u}return o}function er(n,e){return e*Math.round(n/e)}function yv(n,e,t,i,r,s,o){if(e==t)return o;let a=er(n[e],r),l=er(n[e+1],r);e+=i,s[o++]=a,s[o++]=l;let c,u;do if(c=er(n[e],r),u=er(n[e+1],r),e+=i,e==t)return s[o++]=c,s[o++]=u,o;while(c==a&&u==l);for(;e<t;){const d=er(n[e],r),f=er(n[e+1],r);if(e+=i,d==c&&f==u)continue;const _=c-a,p=u-l,m=d-a,y=f-l;if(_*y==p*m&&(_<0&&m<_||_==m||_>0&&m>_)&&(p<0&&y<p||p==y||p>0&&y>p)){c=d,u=f;continue}s[o++]=c,s[o++]=u,a=c,l=u,c=d,u=f}return s[o++]=c,s[o++]=u,o}function og(n,e,t,i,r,s,o,a){for(let l=0,c=t.length;l<c;++l){const u=t[l];o=yv(n,e,u,i,r,s,o),a.push(o),e=u}return o}function vv(n,e,t,i,r,s,o,a){for(let l=0,c=t.length;l<c;++l){const u=t[l],d=[];o=og(n,e,u,i,r,s,o,d),a.push(d),e=u[u.length-1]}return o}function Ln(n,e,t,i,r){r=r!==void 0?r:[];let s=0;for(let o=e;o<t;o+=i)r[s++]=n.slice(o,o+i);return r.length=s,r}function Bs(n,e,t,i,r){r=r!==void 0?r:[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=t[o];r[s++]=Ln(n,e,l,i,r[s]),e=l}return r.length=s,r}function fc(n,e,t,i,r){r=r!==void 0?r:[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=t[o];r[s++]=l.length===1&&l[0]===e?[]:Bs(n,e,l,i,r[s]),e=l[l.length-1]}return r.length=s,r}function ag(n,e,t,i){let r=0,s=n[t-i],o=n[t-i+1];for(;e<t;e+=i){const a=n[e],l=n[e+1];r+=o*a-s*l,s=a,o=l}return r/2}function lg(n,e,t,i){let r=0;for(let s=0,o=t.length;s<o;++s){const a=t[s];r+=ag(n,e,a,i),e=a}return r}function wv(n,e,t,i){let r=0;for(let s=0,o=t.length;s<o;++s){const a=t[s];r+=lg(n,e,a,i),e=a[a.length-1]}return r}class oa extends pr{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new oa(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,i,r){return r<fr(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(eu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),iu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,i,r))}getArea(){return ag(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Ln(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=su(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new oa(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Pa(this.flatCoordinates,0,e,this.stride),this.changed()}}var ld=oa;class ou extends pr{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new ou(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){const s=this.flatCoordinates,o=or(e,t,s[0],s[1]);if(o<r){const a=this.stride;for(let l=0;l<a;++l)i[l]=s[l];return i.length=a,o}return r}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(e){return y0(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return jc(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=pv(this.flatCoordinates,0,e,this.stride),this.changed()}}var Fi=ou;function Av(n,e,t,i,r){return!Hf(r,function(o){return!nr(n,e,t,i,o[0],o[1])})}function nr(n,e,t,i,r,s){let o=0,a=n[t-i],l=n[t-i+1];for(;e<t;e+=i){const c=n[e],u=n[e+1];l<=s?u>s&&(c-a)*(s-l)-(r-a)*(u-l)>0&&o++:u<=s&&(c-a)*(s-l)-(r-a)*(u-l)<0&&o--,a=c,l=u}return o!==0}function au(n,e,t,i,r,s){if(t.length===0||!nr(n,e,t[0],i,r,s))return!1;for(let o=1,a=t.length;o<a;++o)if(nr(n,t[o-1],t[o],i,r,s))return!1;return!0}function xv(n,e,t,i,r,s){if(t.length===0)return!1;for(let o=0,a=t.length;o<a;++o){const l=t[o];if(au(n,e,l,i,r,s))return!0;e=l[l.length-1]}return!1}function cg(n,e,t,i,r,s,o){let a,l,c,u,d,f,_;const p=r[s+1],m=[];for(let w=0,x=t.length;w<x;++w){const E=t[w];for(u=n[E-i],f=n[E-i+1],a=e;a<E;a+=i)d=n[a],_=n[a+1],(p<=f&&_<=p||f<=p&&p<=_)&&(c=(p-f)/(_-f)*(d-u)+u,m.push(c)),u=d,f=_}let y=NaN,v=-1/0;for(m.sort(ur),u=m[0],a=1,l=m.length;a<l;++a){d=m[a];const w=Math.abs(d-u);w>v&&(c=(u+d)/2,au(n,e,t,i,c,p)&&(y=c,v=w)),u=d}return isNaN(y)&&(y=r[s]),o?(o.push(y,p,v),o):[y,p,v]}function Ev(n,e,t,i,r){let s=[];for(let o=0,a=t.length;o<a;++o){const l=t[o];s=cg(n,e,l,i,r,2*o,s),e=l[l.length-1]}return s}function ug(n,e,t,i,r){let s;for(e+=i;e<t;e+=i)if(s=r(n.slice(e-i,e),n.slice(e,e+i)),s)return s;return!1}function Fa(n,e,t,i,r){const s=Xf(Ei(),n,e,t,i);return ci(r,s)?Hr(r,s)||s[0]>=r[0]&&s[2]<=r[2]||s[1]>=r[1]&&s[3]<=r[3]?!0:ug(n,e,t,i,function(o,a){return x0(r,o,a)}):!1}function bv(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s){if(Fa(n,e,t[s],i,r))return!0;e=t[s]}return!1}function hg(n,e,t,i,r){return!!(Fa(n,e,t,i,r)||nr(n,e,t,i,r[0],r[1])||nr(n,e,t,i,r[0],r[3])||nr(n,e,t,i,r[2],r[1])||nr(n,e,t,i,r[2],r[3]))}function dg(n,e,t,i,r){if(!hg(n,e,t[0],i,r))return!1;if(t.length===1)return!0;for(let s=1,o=t.length;s<o;++s)if(Av(n,t[s-1],t[s],i,r)&&!Fa(n,t[s-1],t[s],i,r))return!1;return!0}function Cv(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s){const a=t[s];if(dg(n,e,a,i,r))return!0;e=a[a.length-1]}return!1}function Iv(n,e,t,i){for(;e<t-i;){for(let r=0;r<i;++r){const s=n[e+r];n[e+r]=n[t-i+r],n[t-i+r]=s}e+=i,t-=i}}function fg(n,e,t,i){let r=0,s=n[t-i],o=n[t-i+1];for(;e<t;e+=i){const a=n[e],l=n[e+1];r+=(a-s)*(l+o),s=a,o=l}return r===0?void 0:r>0}function gg(n,e,t,i,r){r=r!==void 0?r:!1;for(let s=0,o=t.length;s<o;++s){const a=t[s],l=fg(n,e,a,i);if(s===0){if(r&&l||!r&&!l)return!1}else if(r&&!l||!r&&l)return!1;e=a}return!0}function Sv(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s){const a=t[s];if(!gg(n,e,a,i,r))return!1;a.length&&(e=a[a.length-1])}return!0}function gc(n,e,t,i,r){r=r!==void 0?r:!1;for(let s=0,o=t.length;s<o;++s){const a=t[s],l=fg(n,e,a,i);(s===0?r&&l||!r&&!l:r&&!l||!r&&l)&&Iv(n,e,a,i),e=a}return e}function cd(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s)e=gc(n,e,t[s],i,r);return e}class ts extends pr{constructor(e,t,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&i?(this.setFlatCoordinates(t,e),this.ends_=i):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?Pi(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new ts(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<fr(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(tu(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),nu(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,i,r))}containsXY(e,t){return au(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return lg(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),gc(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,Bs(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=hr(this.getExtent());this.flatInteriorPoint_=cg(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Fi(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new ld(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,i=this.ends_,r=[];let s=0;for(let o=0,a=i.length;o<a;++o){const l=i[o],c=new ld(t.slice(s,l),e);r.push(c),s=l}return r}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;gg(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=gc(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=og(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,i),new ts(t,"XY",i)}getType(){return"Polygon"}intersectsExtent(e){return dg(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=ru(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}var aa=ts;function Rv(n,e,t,i){t=t||32;const r=[];for(let s=0;s<t;++s)Pi(r,Q0(n,e,2*Math.PI*s/t,i));return r.push(r[0],r[1]),new ts(r,"XY",[r.length])}function ud(n){const e=n[0],t=n[1],i=n[2],r=n[3],s=[e,t,e,r,i,r,i,t,e,t];return new ts(s,"XY",[s.length])}const Ll=0;class Tv extends ki{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=Kc(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&ig(),e.center&&(e.center=cn(e.center,this.projection_)),e.extent&&(e.extent=Tn(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const a in Mi)delete t[a];this.setProperties(t,!0);const i=Mv(e);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=i.minZoom;const r=Lv(e),s=i.constraint,o=Ov(e);this.constraints_={center:r,resolution:s,rotation:o},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const i=this.getCenterInternal();if(i){const r=e||[0,0,0,0];t=t||[0,0,0,0];const s=this.getResolution(),o=s/2*(r[3]-t[3]+t[1]-r[1]),a=s/2*(r[0]-t[0]+t[2]-r[2]);this.setCenterInternal([i[0]+o,i[1]-a])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let i=0;i<t.length;++i){let r=arguments[i];r.center&&(r=Object.assign({},r),r.center=cn(r.center,this.getProjection())),r.anchor&&(r=Object.assign({},r),r.anchor=cn(r.anchor,this.getProjection())),t[i]=r}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,i;t>1&&typeof arguments[t-1]=="function"&&(i=arguments[t-1],--t);let r=0;for(;r<t&&!this.isDef();++r){const u=arguments[r];u.center&&this.setCenterInternal(u.center),u.zoom!==void 0?this.setZoom(u.zoom):u.resolution&&this.setResolution(u.resolution),u.rotation!==void 0&&this.setRotation(u.rotation)}if(r===t){i&&No(i,!0);return}let s=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_;const c=[];for(;r<t;++r){const u=arguments[r],d={start:s,complete:!1,anchor:u.anchor,duration:u.duration!==void 0?u.duration:1e3,easing:u.easing||sv,callback:i};if(u.center&&(d.sourceCenter=o,d.targetCenter=u.center.slice(),o=d.targetCenter),u.zoom!==void 0?(d.sourceResolution=a,d.targetResolution=this.getResolutionForZoom(u.zoom),a=d.targetResolution):u.resolution&&(d.sourceResolution=a,d.targetResolution=u.resolution,a=d.targetResolution),u.rotation!==void 0){d.sourceRotation=l;const f=lr(u.rotation-l+Math.PI,2*Math.PI)-Math.PI;d.targetRotation=l+f,l=d.targetRotation}Pv(d)?d.complete=!0:s+=d.duration,c.push(d)}this.animations_.push(c),this.setHint(si.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[si.ANIMATING]>0}getInteracting(){return this.hints_[si.INTERACTING]>0}cancelAnimations(){this.setHint(si.ANIMATING,-this.hints_[si.ANIMATING]);let e;for(let t=0,i=this.animations_.length;t<i;++t){const r=this.animations_[t];if(r[0].callback&&No(r[0].callback,!1),!e)for(let s=0,o=r.length;s<o;++s){const a=r[s];if(!a.complete){e=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let i=this.animations_.length-1;i>=0;--i){const r=this.animations_[i];let s=!0;for(let o=0,a=r.length;o<a;++o){const l=r[o];if(l.complete)continue;const c=e-l.start;let u=l.duration>0?c/l.duration:1;u>=1?(l.complete=!0,u=1):s=!1;const d=l.easing(u);if(l.sourceCenter){const f=l.sourceCenter[0],_=l.sourceCenter[1],p=l.targetCenter[0],m=l.targetCenter[1];this.nextCenter_=l.targetCenter;const y=f+d*(p-f),v=_+d*(m-_);this.targetCenter_=[y,v]}if(l.sourceResolution&&l.targetResolution){const f=d===1?l.targetResolution:l.sourceResolution+d*(l.targetResolution-l.sourceResolution);if(l.anchor){const _=this.getViewportSize_(this.getRotation()),p=this.constraints_.resolution(f,0,_,!0);this.targetCenter_=this.calculateCenterZoom(p,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=f,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){const f=d===1?lr(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+d*(l.targetRotation-l.sourceRotation);if(l.anchor){const _=this.constraints_.rotation(f,!0);this.targetCenter_=this.calculateCenterRotate(_,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=f}if(this.applyTargetState_(!0),t=!0,!l.complete)break}if(s){this.animations_[i]=null,this.setHint(si.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const o=r[0].callback;o&&No(o,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let i;const r=this.getCenterInternal();return r!==void 0&&(i=[r[0]-t[0],r[1]-t[1]],Xc(i,e-this.getRotation()),Y0(i,t)),i}calculateCenterZoom(e,t){let i;const r=this.getCenterInternal(),s=this.getResolution();if(r!==void 0&&s!==void 0){const o=t[0]-e*(t[0]-r[0])/s,a=t[1]-e*(t[1]-r[1])/s;i=[o,a]}return i}getViewportSize_(e){const t=this.viewportSize_;if(e){const i=t[0],r=t[1];return[Math.abs(i*Math.cos(e))+Math.abs(r*Math.sin(e)),Math.abs(i*Math.sin(e))+Math.abs(r*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&dc(e,this.getProjection())}getCenterInternal(){return this.get(Mi.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return Zc(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();Ve(t,1);const i=this.getResolution();Ve(i!==void 0,2);const r=this.getRotation();return Ve(r!==void 0,3),lc(t,i,r,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(Mi.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(Tn(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const i=Et(e)/t[0],r=Ji(e)/t[1];return Math.max(i,r)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,r=Math.log(t/i)/Math.log(e);return function(s){return t/Math.pow(e,s*r)}}getRotation(){return this.get(Mi.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),i=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,s=Math.log(i/r)/t;return function(o){return Math.log(i/o)/t/s}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const i=this.padding_;return i&&(t=[t[0]-i[1]-i[3],t[1]-i[0]-i[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),i=this.getRotation();let r=this.getCenterInternal();const s=this.padding_;if(s){const o=this.getViewportSizeMinusPadding_();r=Ml(r,this.getViewportSize_(),[o[0]/2+s[3],o[1]/2+s[0]],t,i)}return{center:r.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,i,r;if(this.resolutions_){const s=Nc(this.resolutions_,e,1);t=s,i=this.resolutions_[s],s==this.resolutions_.length-1?r=2:r=i/this.resolutions_[s+1]}else i=this.maxResolution_,r=this.zoomFactor_;return t+Math.log(i/e)/Math.log(r)}getResolutionForZoom(e){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const t=Pt(Math.floor(e),0,this.resolutions_.length-2),i=this.resolutions_[t]/this.resolutions_[t+1];return this.resolutions_[t]/Math.pow(i,Pt(e-t,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let i;if(Ve(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function",24),Array.isArray(e)){Ve(!Uc(e),25);const r=Tn(e,this.getProjection());i=ud(r)}else if(e.getType()==="Circle"){const r=Tn(e.getExtent(),this.getProjection());i=ud(r),i.rotate(this.getRotation(),hr(r))}else i=e;this.fitInternal(i,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),i=Math.cos(t),r=Math.sin(-t),s=e.getFlatCoordinates(),o=e.getStride();let a=1/0,l=1/0,c=-1/0,u=-1/0;for(let d=0,f=s.length;d<f;d+=o){const _=s[d]*i-s[d+1]*r,p=s[d]*r+s[d+1]*i;a=Math.min(a,_),l=Math.min(l,p),c=Math.max(c,_),u=Math.max(u,p)}return[a,l,c,u]}fitInternal(e,t){t=t||{};let i=t.size;i||(i=this.getViewportSizeMinusPadding_());const r=t.padding!==void 0?t.padding:[0,0,0,0],s=t.nearest!==void 0?t.nearest:!1;let o;t.minResolution!==void 0?o=t.minResolution:t.maxZoom!==void 0?o=this.getResolutionForZoom(t.maxZoom):o=0;const a=this.rotatedExtentForGeometry(e);let l=this.getResolutionForExtentInternal(a,[i[0]-r[1]-r[3],i[1]-r[0]-r[2]]);l=isNaN(l)?o:Math.max(l,o),l=this.getConstrainedResolution(l,s?0:1);const c=this.getRotation(),u=Math.sin(c),d=Math.cos(c),f=hr(a);f[0]+=(r[1]-r[3])/2*l,f[1]+=(r[0]-r[2])/2*l;const _=f[0]*d-f[1]*u,p=f[1]*d+f[0]*u,m=this.getConstrainedCenter([_,p],l),y=t.callback?t.callback:qr;t.duration!==void 0?this.animateInternal({resolution:l,center:m,duration:t.duration,easing:t.easing},y):(this.targetResolution_=l,this.targetCenter_=m,this.applyTargetState_(!1,!0),No(y,!0))}centerOn(e,t,i){this.centerOnInternal(cn(e,this.getProjection()),t,i)}centerOnInternal(e,t,i){this.setCenterInternal(Ml(e,t,i,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,i,r){let s;const o=this.padding_;if(o&&e){const a=this.getViewportSizeMinusPadding_(-i),l=Ml(e,r,[a[0]/2+o[3],a[1]/2+o[0]],t,i);s=[e[0]-l[0],e[1]-l[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=dc(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&cn(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const i=this.getAnimating()||this.getInteracting(),r=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*e,0,r,i);t&&(this.targetCenter_=this.calculateCenterZoom(s,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=cn(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const i=this.getAnimating()||this.getInteracting(),r=this.constraints_.rotation(this.targetRotation_+e,i);t&&(this.targetCenter_=this.calculateCenterRotate(r,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&cn(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const i=this.getAnimating()||this.getInteracting()||t,r=this.constraints_.rotation(this.targetRotation_,i),s=this.getViewportSize_(r),o=this.constraints_.resolution(this.targetResolution_,0,s,i),a=this.constraints_.center(this.targetCenter_,o,s,i,this.calculateCenterShift(this.targetCenter_,o,r,s));this.get(Mi.ROTATION)!==r&&this.set(Mi.ROTATION,r),this.get(Mi.RESOLUTION)!==o&&(this.set(Mi.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(Mi.CENTER)||!na(this.get(Mi.CENTER),a))&&this.set(Mi.CENTER,a),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,i){e=e!==void 0?e:200;const r=t||0,s=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(s),a=this.constraints_.resolution(this.targetResolution_,r,o),l=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,s,o));if(e===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=s,this.targetCenter_=l,this.applyTargetState_();return}i=i||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==s||!this.getCenterInternal()||!na(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:l,resolution:a,duration:e,easing:ns,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(si.INTERACTING,1)}endInteraction(e,t,i){i=i&&cn(i,this.getProjection()),this.endInteractionInternal(e,t,i)}endInteractionInternal(e,t,i){!this.getInteracting()||(this.setHint(si.INTERACTING,-1),this.resolveConstraints(e,t,i))}getConstrainedCenter(e,t){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),i)}getConstrainedZoom(e,t){const i=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(i,t))}getConstrainedResolution(e,t){t=t||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,i)}}function No(n,e){setTimeout(function(){n(e)},0)}function Lv(n){if(n.extent!==void 0){const t=n.smoothExtentConstraint!==void 0?n.smoothExtentConstraint:!0;return id(n.extent,n.constrainOnlyCenter,t)}const e=Kc(n.projection,"EPSG:3857");if(n.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,id(t,!1,!1)}return ev}function Mv(n){let e,t,i,o=n.minZoom!==void 0?n.minZoom:Ll,a=n.maxZoom!==void 0?n.maxZoom:28;const l=n.zoomFactor!==void 0?n.zoomFactor:2,c=n.multiWorld!==void 0?n.multiWorld:!1,u=n.smoothResolutionConstraint!==void 0?n.smoothResolutionConstraint:!0,d=n.showFullExtent!==void 0?n.showFullExtent:!1,f=Kc(n.projection,"EPSG:3857"),_=f.getExtent();let p=n.constrainOnlyCenter,m=n.extent;if(!c&&!m&&f.isGlobal()&&(p=!1,m=_),n.resolutions!==void 0){const y=n.resolutions;t=y[o],i=y[a]!==void 0?y[a]:y[y.length-1],n.constrainResolution?e=tv(y,u,!p&&m,d):e=nd(t,i,u,!p&&m,d)}else{const v=(_?Math.max(Et(_),Ji(_)):360*es.degrees/f.getMetersPerUnit())/Yc/Math.pow(2,Ll),w=v/Math.pow(2,28-Ll);t=n.maxResolution,t!==void 0?o=0:t=v/Math.pow(l,o),i=n.minResolution,i===void 0&&(n.maxZoom!==void 0?n.maxResolution!==void 0?i=t/Math.pow(l,a):i=v/Math.pow(l,a):i=w),a=o+Math.floor(Math.log(t/i)/Math.log(l)),i=t/Math.pow(l,a-o),n.constrainResolution?e=iv(l,t,i,u,!p&&m,d):e=nd(t,i,u,!p&&m,d)}return{constraint:e,maxResolution:t,minResolution:i,minZoom:o,zoomFactor:l}}function Ov(n){if(n.enableRotation!==void 0?n.enableRotation:!0){const t=n.constrainRotation;return t===void 0||t===!0?rv():t===!1?rd:typeof t=="number"?nv(t):rd}return Jc}function Pv(n){return!(n.sourceCenter&&n.targetCenter&&!na(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}function Ml(n,e,t,i,r){const s=Math.cos(-r);let o=Math.sin(-r),a=n[0]*s-n[1]*o,l=n[1]*s+n[0]*o;a+=(e[0]/2-t[0])*i,l+=(t[1]-e[1]/2)*i,o=-o;const c=a*s-l*o,u=l*s+a*o;return[c,u]}var mi=Tv;class Fv extends Zf{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(gt.SOURCE,this.handleSourcePropertyChange_);const i=e.source?e.source:null;this.setSource(i)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(gt.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(bt(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=nt(e,Ue.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;e instanceof mi?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e;const i=this.getExtent();return this.getVisible()&&lu(this.getLayerState(),t.viewState)&&(!i||ci(i,t.extent))}getAttributions(e){if(!this.isVisible(e))return[];let t;const i=this.getSource();if(i&&(t=i.getAttributions()),!t)return[];const r=e instanceof mi?e.getViewStateAndExtent():e;let s=t(r);return Array.isArray(s)||(s=[s]),s}render(e,t){const i=this.getRenderer();if(i.prepareFrame(e))return this.rendered=!0,i.renderFrame(e,t)}unrender(){this.rendered=!1}setMapInternal(e){e||this.unrender(),this.set(gt.MAP,e)}getMapInternal(){return this.get(gt.MAP)}setMap(e){this.mapPrecomposeKey_&&(bt(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(bt(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=nt(e,On.PRECOMPOSE,function(t){const r=t.frameState.layerStatesArray,s=this.getLayerState(!1);Ve(!r.some(function(o){return o.layer===s.layer}),67),r.push(s)},this),this.mapRenderKey_=nt(this,Ue.CHANGE,e.render,e),this.changed())}setSource(e){this.set(gt.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function lu(n,e){if(!n.visible)return!1;const t=e.resolution;if(t<n.minResolution||t>=n.maxResolution)return!1;const i=e.zoom;return i>n.minZoom&&i<=n.maxZoom}var Da=Fv;class Dv extends kc{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){Ge()}calculateMatrices2D(e){const t=e.viewState,i=e.coordinateToPixelTransform,r=e.pixelToCoordinateTransform;Dn(i,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),Gc(r,i)}forEachFeatureAtCoordinate(e,t,i,r,s,o,a,l){let c;const u=t.viewState;function d(E,O,L,R){return s.call(o,O,E?L:null,R)}const f=u.projection,_=qf(e.slice(),f),p=[[0,0]];if(f.canWrapX()&&r){const E=f.getExtent(),O=Et(E);p.push([-O,0],[O,0])}const m=t.layerStatesArray,y=m.length,v=[],w=[];for(let E=0;E<p.length;E++)for(let O=y-1;O>=0;--O){const L=m[O],R=L.layer;if(R.hasRenderer()&&lu(L,u)&&a.call(l,R)){const S=R.getRenderer(),B=R.getSource();if(S&&B){const U=B.getWrapX()?_:e,j=d.bind(null,L.managed);w[0]=U[0]+p[E][0],w[1]=U[1]+p[E][1],c=S.forEachFeatureAtCoordinate(w,t,i,j,v)}if(c)return c}}if(v.length===0)return;const x=1/v.length;return v.forEach((E,O)=>E.distanceSq+=O*x),v.sort((E,O)=>E.distanceSq-O.distanceSq),v.some(E=>c=E.callback(E.feature,E.layer,E.geometry)),c}hasFeatureAtCoordinate(e,t,i,r,s,o){return this.forEachFeatureAtCoordinate(e,t,i,r,ks,this,s,o)!==void 0}getMap(){return this.map_}renderFrame(e){Ge()}scheduleExpireIconCache(e){ta.canExpireCache()&&e.postRenderFunctions.push(kv)}}function kv(n,e){ta.expire()}var Nv=Dv;class Bv extends en{constructor(e,t,i,r){super(e),this.inversePixelTransform=t,this.frameState=i,this.context=r}}var pg=Bv;const Bo="ol-hidden",$s="ol-unselectable",cu="ol-control",hd="ol-collapsed",Gv=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),dd=["style","variant","weight","size","lineHeight","family"],mg=function(n){const e=n.match(Gv);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let i=0,r=dd.length;i<r;++i){const s=e[i+1];s!==void 0&&(t[dd[i]]=s)}return t.families=t.family.split(/,\s?/),t};function ui(n,e,t,i){let r;return t&&t.length?r=t.shift():Bc?r=new OffscreenCanvas(n||300,e||300):r=document.createElement("canvas"),n&&(r.width=n),e&&(r.height=e),r.getContext("2d",i)}function ka(n){const e=n.canvas;e.width=1,e.height=1,n.clearRect(0,0,1,1)}function fd(n,e){const t=e.parentNode;t&&t.replaceChild(n,e)}function pc(n){return n&&n.parentNode?n.parentNode.removeChild(n):null}function zv(n){for(;n.lastChild;)n.removeChild(n.lastChild)}function jv(n,e){const t=n.childNodes;for(let i=0;;++i){const r=t[i],s=e[i];if(!r&&!s)break;if(r!==s){if(!r){n.appendChild(s);continue}if(!s){n.removeChild(r),--i;continue}n.insertBefore(s,r)}}}const _g="10px sans-serif",gn="#000",la="round",Gs=[],zs=0,is="round",js=10,Us="#000",Ws="center",ca="middle",rr=[0,0,0,0],Ys=1,un=new ki;let Gr=null,mc;const _c={},Uv=function(){const e="32px ",t=["monospace","serif"],i=t.length,r="wmytzilWMYTZIL@#/&?$%10\uF013";let s,o;function a(c,u,d){let f=!0;for(let _=0;_<i;++_){const p=t[_];if(o=ua(c+" "+u+" "+e+p,r),d!=p){const m=ua(c+" "+u+" "+e+d+","+p,r);f=f&&m!=o}}return!!f}function l(){let c=!0;const u=un.getKeys();for(let d=0,f=u.length;d<f;++d){const _=u[d];un.get(_)<100&&(a.apply(this,_.split(`
`))?(Ks(_c),Gr=null,mc=void 0,un.set(_,100)):(un.set(_,un.get(_)+1,!0),c=!1))}c&&(clearInterval(s),s=void 0)}return function(c){const u=mg(c);if(!u)return;const d=u.families;for(let f=0,_=d.length;f<_;++f){const p=d[f],m=u.style+`
`+u.weight+`
`+p;un.get(m)===void 0&&(un.set(m,100,!0),a(u.style,u.weight,p)||(un.set(m,0,!0),s===void 0&&(s=setInterval(l,32))))}}}(),Wv=function(){let n;return function(e){let t=_c[e];if(t==null){if(Bc){const i=mg(e),r=yg(e,"\u017Dg");t=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else n||(n=document.createElement("div"),n.innerHTML="M",n.style.minHeight="0",n.style.maxHeight="none",n.style.height="auto",n.style.padding="0",n.style.border="none",n.style.position="absolute",n.style.display="block",n.style.left="-99999px"),n.style.font=e,document.body.appendChild(n),t=n.offsetHeight,document.body.removeChild(n);_c[e]=t}return t}}();function yg(n,e){return Gr||(Gr=ui(1,1)),n!=mc&&(Gr.font=n,mc=Gr.font),Gr.measureText(e)}function ua(n,e){return yg(n,e).width}function gd(n,e,t){if(e in t)return t[e];const i=e.split(`
`).reduce((r,s)=>Math.max(r,ua(n,s)),0);return t[e]=i,i}function Yv(n,e){const t=[],i=[],r=[];let s=0,o=0,a=0,l=0;for(let c=0,u=e.length;c<=u;c+=2){const d=e[c];if(d===`
`||c===u){s=Math.max(s,o),r.push(o),o=0,a+=l;continue}const f=e[c+1]||n.font,_=ua(f,d);t.push(_),o+=_;const p=Wv(f);i.push(p),l=Math.max(l,p)}return{width:s,height:a,widths:t,heights:i,lineWidths:r}}function Xv(n,e,t,i,r,s,o,a,l,c,u){n.save(),t!==1&&(n.globalAlpha*=t),e&&n.setTransform.apply(n,e),i.contextInstructions?(n.translate(l,c),n.scale(u[0],u[1]),Hv(i,n)):u[0]<0||u[1]<0?(n.translate(l,c),n.scale(u[0],u[1]),n.drawImage(i,r,s,o,a,0,0,o,a)):n.drawImage(i,r,s,o,a,l,c,o*u[0],a*u[1]),n.restore()}function Hv(n,e){const t=n.contextInstructions;for(let i=0,r=t.length;i<r;i+=2)Array.isArray(t[i+1])?e[t[i]].apply(e,t[i+1]):e[t[i]]=t[i+1]}class Qv extends Nv{constructor(e){super(e),this.fontChangeListenerKey_=nt(un,$r.PROPERTYCHANGE,e.redrawText.bind(e)),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=$s+" ol-layers";const i=e.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const i=this.getMap();if(i.hasListener(e)){const r=new pg(e,void 0,t);i.dispatchEvent(r)}}disposeInternal(){bt(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(On.PRECOMPOSE,e);const t=e.layerStatesArray.sort(function(o,a){return o.zIndex-a.zIndex}),i=e.viewState;this.children_.length=0;const r=[];let s=null;for(let o=0,a=t.length;o<a;++o){const l=t[o];e.layerIndex=o;const c=l.layer,u=c.getSourceState();if(!lu(l,i)||u!="ready"&&u!="undefined"){c.unrender();continue}const d=c.render(e,s);!d||(d!==s&&(this.children_.push(d),s=d),"getDeclutter"in c&&r.push(c))}for(let o=r.length-1;o>=0;--o)r[o].renderDeclutter(e);jv(this.element_,this.children_),this.dispatchRenderEvent(On.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}}var Kv=Qv;class Rn extends en{constructor(e,t){super(e),this.layer=t}}const Ol={LAYERS:"layers"};class uu extends Zf{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let i=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Ol.LAYERS,this.handleLayersChanged_),i?Array.isArray(i)?i=new Zi(i.slice(),{unique:!0}):Ve(typeof i.getArray=="function",43):i=new Zi(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(bt),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(nt(e,gi.ADD,this.handleLayersAdd_,this),nt(e,gi.REMOVE,this.handleLayersRemove_,this));for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach(bt);Ks(this.listenerKeys_);const t=e.getArray();for(let i=0,r=t.length;i<r;i++){const s=t[i];this.registerLayerListeners_(s),this.dispatchEvent(new Rn("addlayer",s))}this.changed()}registerLayerListeners_(e){const t=[nt(e,$r.PROPERTYCHANGE,this.handleLayerChange_,this),nt(e,Ue.CHANGE,this.handleLayerChange_,this)];e instanceof uu&&t.push(nt(e,"addlayer",this.handleLayerGroupAdd_,this),nt(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[ht(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new Rn("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new Rn("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new Rn("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,i=ht(t);this.listenerKeys_[i].forEach(bt),delete this.listenerKeys_[i],this.dispatchEvent(new Rn("removelayer",t)),this.changed()}getLayers(){return this.get(Ol.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const i=t.getArray();for(let r=0,s=i.length;r<s;++r)this.dispatchEvent(new Rn("removelayer",i[r]))}this.set(Ol.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],i=t.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(t)});const r=this.getLayerState();let s=r.zIndex;!e&&r.zIndex===void 0&&(s=0);for(let o=i,a=t.length;o<a;o++){const l=t[o];l.opacity*=r.opacity,l.visible=l.visible&&r.visible,l.maxResolution=Math.min(l.maxResolution,r.maxResolution),l.minResolution=Math.max(l.minResolution,r.minResolution),l.minZoom=Math.max(l.minZoom,r.minZoom),l.maxZoom=Math.min(l.maxZoom,r.maxZoom),r.extent!==void 0&&(l.extent!==void 0?l.extent=Ms(l.extent,r.extent):l.extent=r.extent),l.zIndex===void 0&&(l.zIndex=s)}return t}getSourceState(){return"ready"}}var Na=uu;class Vv extends en{constructor(e,t,i){super(e),this.map=t,this.frameState=i!==void 0?i:null}}var zr=Vv;class Zv extends zr{constructor(e,t,i,r,s,o){super(e,t,s),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=r!==void 0?r:!1,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}var In=Zv,Rt={SINGLECLICK:"singleclick",CLICK:Ue.CLICK,DBLCLICK:Ue.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},yc={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class $v extends Ia{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=nt(i,yc.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=nt(i,yc.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(Ue.TOUCHMOVE,this.boundHandleTouchMove_,zf?{passive:!1}:!1)}emulateClick_(e){let t=new In(Rt.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new In(Rt.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const i=new In(Rt.SINGLECLICK,this.map_,e);this.dispatchEvent(i)},250)}updateActivePointers_(e){const t=e,i=t.pointerId;if(t.type==Rt.POINTERUP||t.type==Rt.POINTERCANCEL){delete this.trackedTouches_[i];for(const r in this.trackedTouches_)if(this.trackedTouches_[r].target!==t.target){delete this.trackedTouches_[r];break}}else(t.type==Rt.POINTERDOWN||t.type==Rt.POINTERMOVE)&&(this.trackedTouches_[i]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new In(Rt.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(bt),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new In(Rt.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(nt(i,Rt.POINTERMOVE,this.handlePointerMove_,this),nt(i,Rt.POINTERUP,this.handlePointerUp_,this),nt(this.element_,Rt.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(nt(this.element_.getRootNode(),Rt.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new In(Rt.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new In(Rt.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(bt(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(Ue.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(bt(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(bt),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}var qv=$v,Sn={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},ri={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};const ha=1/0;class Jv{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,Ks(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,i=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const r=this.keyFunction_(i);return delete this.queuedElements_[r],i}enqueue(e){Ve(!(this.keyFunction_(e)in this.queuedElements_),31);const t=this.priorityFunction_(e);return t!=ha?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,i=this.priorities_,r=t.length,s=t[e],o=i[e],a=e;for(;e<r>>1;){const l=this.getLeftChildIndex_(e),c=this.getRightChildIndex_(e),u=c<r&&i[c]<i[l]?c:l;t[e]=t[u],i[e]=i[u],e=u}t[e]=s,i[e]=o,this.siftDown_(a,e)}siftDown_(e,t){const i=this.elements_,r=this.priorities_,s=i[t],o=r[t];for(;t>e;){const a=this.getParentIndex_(t);if(r[a]>o)i[t]=i[a],r[t]=r[a],t=a;else break}i[t]=s,r[t]=o}reprioritize(){const e=this.priorityFunction_,t=this.elements_,i=this.priorities_;let r=0;const s=t.length;let o,a,l;for(a=0;a<s;++a)o=t[a],l=e(o),l==ha?delete this.queuedElements_[this.keyFunction_(o)]:(i[r]=l,t[r++]=o);t.length=r,i.length=r,this.heapify_()}}var ew=Jv,De={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class tw extends ew{constructor(e,t){super(function(i){return e.apply(null,i)},function(i){return i[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(Ue.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,i=t.getState();if(i===De.LOADED||i===De.ERROR||i===De.EMPTY){i!==De.ERROR&&t.removeEventListener(Ue.CHANGE,this.boundHandleTileChange_);const r=t.getKey();r in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[r],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let i=0,r,s,o;for(;this.tilesLoading_<e&&i<t&&this.getCount()>0;)s=this.dequeue()[0],o=s.getKey(),r=s.getState(),r===De.IDLE&&!(o in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++i,s.load())}}var iw=tw;function nw(n,e,t,i,r){if(!n||!(t in n.wantedTiles)||!n.wantedTiles[t][e.getKey()])return ha;const s=n.viewState.center,o=i[0]-s[0],a=i[1]-s[1];return 65536*Math.log(r)+Math.sqrt(o*o+a*a)/r}class rw extends ki{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){pc(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&pc(this.element);for(let t=0,i=this.listenerKeys.length;t<i;++t)bt(this.listenerKeys[t]);this.listenerKeys.length=0,this.map_=e,e&&((this.target_?this.target_:e.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==qr&&this.listenerKeys.push(nt(e,Sn.POSTRENDER,this.render,this)),e.render())}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}var Ba=rw;class sw extends Ba{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1);const t=e.className!==void 0?e.className:"ol-attribution",i=e.tipLabel!==void 0?e.tipLabel:"Attributions",r=e.expandClassName!==void 0?e.expandClassName:t+"-expand",s=e.collapseLabel!==void 0?e.collapseLabel:"\u203A",o=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=o):this.collapseLabel_=s;const a=e.label!==void 0?e.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=r):this.label_=a;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(Ue.CLICK,this.handleClick_.bind(this),!1);const c=t+" "+$s+" "+cu+(this.collapsed_&&this.collapsible_?" "+hd:"")+(this.collapsible_?"":" ol-uncollapsible"),u=this.element;u.className=c,u.appendChild(this.toggleButton_),u.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=Array.from(new Set(this.getMap().getAllLayers().flatMap(r=>r.getAttributions(e)))),i=!this.getMap().getAllLayers().some(r=>r.getSource()&&r.getSource().getAttributionsCollapsible()===!1);return this.overrideCollapsible_||this.setCollapsible(i),t}updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=this.collectSourceAttributions_(e),i=t.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!kn(t,this.renderedAttributions_)){zv(this.ulElement_);for(let r=0,s=t.length;r<s;++r){const o=document.createElement("li");o.innerHTML=t[r],this.ulElement_.appendChild(o)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(hd),this.collapsed_?fd(this.collapseLabel_,this.label_):fd(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}var ow=sw;class aw extends Ba{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",i=e.label!==void 0?e.label:"\u21E7",r=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof i=="string"?(this.label_=document.createElement("span"),this.label_.className=r,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(r));const s=e.tipLabel?e.tipLabel:"Reset rotation",o=document.createElement("button");o.className=t+"-reset",o.setAttribute("type","button"),o.title=s,o.appendChild(this.label_),o.addEventListener(Ue.CLICK,this.handleClick_.bind(this),!1);const a=t+" "+$s+" "+cu,l=this.element;l.className=a,l.appendChild(o),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(Bo)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const i=t.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:ns}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const i=t.viewState.rotation;if(i!=this.rotation_){const r="rotate("+i+"rad)";if(this.autoHide_){const s=this.element.classList.contains(Bo);!s&&i===0?this.element.classList.add(Bo):s&&i!==0&&this.element.classList.remove(Bo)}this.label_.style.transform=r}this.rotation_=i}}var lw=aw;class cw extends Ba{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",i=e.delta!==void 0?e.delta:1,r=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",s=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",o=e.zoomInLabel!==void 0?e.zoomInLabel:"+",a=e.zoomOutLabel!==void 0?e.zoomOutLabel:"\u2013",l=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",c=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",u=document.createElement("button");u.className=r,u.setAttribute("type","button"),u.title=l,u.appendChild(typeof o=="string"?document.createTextNode(o):o),u.addEventListener(Ue.CLICK,this.handleClick_.bind(this,i),!1);const d=document.createElement("button");d.className=s,d.setAttribute("type","button"),d.title=c,d.appendChild(typeof a=="string"?document.createTextNode(a):a),d.addEventListener(Ue.CLICK,this.handleClick_.bind(this,-i),!1);const f=t+" "+$s+" "+cu,_=this.element;_.className=f,_.appendChild(u),_.appendChild(d),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const i=this.getMap().getView();if(!i)return;const r=i.getZoom();if(r!==void 0){const s=i.getConstrainedZoom(r+e);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:s,duration:this.duration_,easing:ns})):i.setZoom(s)}}}var uw=cw;function qs(n){n=n||{};const e=new Zi;return(n.zoom!==void 0?n.zoom:!0)&&e.push(new uw(n.zoomOptions)),(n.rotate!==void 0?n.rotate:!0)&&e.push(new lw(n.rotateOptions)),(n.attribution!==void 0?n.attribution:!0)&&e.push(new ow(n.attributionOptions)),e}var pd={ACTIVE:"active"};class hw extends ki{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(pd.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(pd.ACTIVE,e)}setMap(e){this.map_=e}}function dw(n,e,t){const i=n.getCenterInternal();if(i){const r=[i[0]+e[0],i[1]+e[1]];n.animateInternal({duration:t!==void 0?t:250,easing:ov,center:n.getConstrainedCenter(r)})}}function hu(n,e,t,i){const r=n.getZoom();if(r===void 0)return;const s=n.getConstrainedZoom(r+e),o=n.getResolutionForZoom(s);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:o,anchor:t,duration:i!==void 0?i:250,easing:ns})}var Js=hw;class fw extends Js{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==Rt.DBLCLICK){const i=e.originalEvent,r=e.map,s=e.coordinate,o=i.shiftKey?-this.delta_:this.delta_,a=r.getView();hu(a,o,s,this.duration_),i.preventDefault(),t=!0}return!t}}var gw=fw;class pw extends Js{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==Rt.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==Rt.POINTERUP){const i=this.handleUpEvent(e);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(e.type==Rt.POINTERDOWN){const i=this.handleDownEvent(e);this.handlingDownUpSequence=i,t=this.stopDown(i)}else e.type==Rt.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function du(n){const e=n.length;let t=0,i=0;for(let r=0;r<e;r++)t+=n[r].clientX,i+=n[r].clientY;return{clientX:t/e,clientY:i/e}}var eo=pw;function vc(n){const e=arguments;return function(t){let i=!0;for(let r=0,s=e.length;r<s&&(i=i&&e[r](t),!!i);++r);return i}}const mw=function(n){const e=n.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},_w=function(n){const e=n.map.getTargetElement(),t=n.map.getOwnerDocument().activeElement;return e.contains(t)},vg=function(n){return n.map.getTargetElement().hasAttribute("tabindex")?_w(n):!0},yw=ks,wg=function(n){const e=n.originalEvent;return e.button==0&&!(h0&&d0&&e.ctrlKey)},Ag=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},vw=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},xg=function(n){const e=n.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},Pl=function(n){const e=n.originalEvent;return Ve(e!==void 0,56),e.pointerType=="mouse"},ww=function(n){const e=n.originalEvent;return Ve(e!==void 0,56),e.isPrimary&&e.button===0};class Aw extends eo{constructor(e){super({stopDown:Ca}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:vc(Ag,ww);this.condition_=e.onFocusOnly?vc(vg,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const i=this.targetPointers,r=t.getEventPixel(du(i));if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){const s=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],a=e.map.getView();X0(s,a.getResolution()),Xc(s,a.getRotation()),a.adjustCenterInternal(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=i.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,i=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const r=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),o=i.getCenterInternal(),a=t.getPixelFromCoordinateInternal(o),l=t.getCoordinateFromPixelInternal([a[0]-r*Math.cos(s),a[1]-r*Math.sin(s)]);i.animateInternal({center:i.getConstrainedCenter(l),duration:500,easing:ns})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const i=e.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}var xw=Aw;class Ew extends eo{constructor(e){e=e||{},super({stopDown:Ca}),this.condition_=e.condition?e.condition:mw,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!Pl(e))return;const t=e.map,i=t.getView();if(i.getConstraints().rotation===Jc)return;const r=t.getSize(),s=e.pixel,o=Math.atan2(r[1]/2-s[1],s[0]-r[0]/2);if(this.lastAngle_!==void 0){const a=o-this.lastAngle_;i.adjustRotationInternal(-a)}this.lastAngle_=o}handleUpEvent(e){return Pl(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return Pl(e)&&wg(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}var bw=Ew;class Cw extends kc{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,i="px",r=this.element_.style;r.left=Math.min(e[0],t[0])+i,r.top=Math.min(e[1],t[1])+i,r.width=Math.abs(t[0]-e[0])+i,r.height=Math.abs(t[1]-e[1])+i}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const e=this.startPixel_,t=this.endPixel_,r=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new aa([r])}getGeometry(){return this.geometry_}}var Iw=Cw;const Go={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class Fl extends en{constructor(e,t,i){super(e),this.coordinate=t,this.mapBrowserEvent=i}}class Sw extends eo{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.box_=new Iw(e.className||"ol-dragbox"),this.minArea_=e.minArea!==void 0?e.minArea:64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition?e.condition:wg,this.boxEndCondition_=e.boxEndCondition?e.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,i){const r=i[0]-t[0],s=i[1]-t[1];return r*r+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new Fl(Go.BOXDRAG,e.coordinate,e))}handleUpEvent(e){this.box_.setMap(null);const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new Fl(t?Go.BOXEND:Go.BOXCANCEL,e.coordinate,e)),!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Fl(Go.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}}var Rw=Sw;class Tw extends Rw{constructor(e){e=e||{};const t=e.condition?e.condition:vw;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const i=this.getMap().getView();let r=this.getGeometry();if(this.out_){const s=i.rotatedExtentForGeometry(r),o=i.getResolutionForExtentInternal(s),a=i.getResolution()/o;r=r.clone(),r.scale(a*a)}i.fitInternal(r,{duration:this.duration_,easing:ns})}}var Lw=Tw,qn={LEFT:37,UP:38,RIGHT:39,DOWN:40};class Mw extends Js{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return Ag(t)&&xg(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==Ue.KEYDOWN){const i=e.originalEvent,r=i.keyCode;if(this.condition_(e)&&(r==qn.DOWN||r==qn.LEFT||r==qn.RIGHT||r==qn.UP)){const o=e.map.getView(),a=o.getResolution()*this.pixelDelta_;let l=0,c=0;r==qn.DOWN?c=-a:r==qn.LEFT?l=-a:r==qn.RIGHT?l=a:c=a;const u=[l,c];Xc(u,o.getRotation()),dw(o,u,this.duration_),i.preventDefault(),t=!0}}return!t}}var Ow=Mw;class Pw extends Js{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:xg,this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==Ue.KEYDOWN||e.type==Ue.KEYPRESS){const i=e.originalEvent,r=i.key;if(this.condition_(e)&&(r==="+"||r==="-")){const s=e.map,o=r==="+"?this.delta_:-this.delta_,a=s.getView();hu(a,o,void 0,this.duration_),i.preventDefault(),t=!0}}return!t}}var Fw=Pw;class Dw{constructor(e,t,i){this.decay_=e,this.minVelocity_=t,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let i=t-3;for(;i>0&&this.points_[i+2]>e;)i-=3;const r=this.points_[t+2]-this.points_[i+2];if(r<1e3/60)return!1;const s=this.points_[t]-this.points_[i],o=this.points_[t+1]-this.points_[i+1];return this.angle_=Math.atan2(o,s),this.initialVelocity_=Math.sqrt(s*s+o*o)/r,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}var kw=Dw;class Nw extends Js{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:yw;this.condition_=e.onFocusOnly?vc(vg,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(e){if(!this.condition_(e)||e.type!==Ue.WHEEL)return!0;const i=e.map,r=e.originalEvent;r.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.coordinate);let s;if(e.type==Ue.WHEEL&&(s=r.deltaY,c0&&r.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(s/=Gf),r.deltaMode===WheelEvent.DOM_DELTA_LINE&&(s*=40)),s===0)return!1;this.lastDelta_=s;const o=Date.now();this.startTime_===void 0&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const a=i.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=o,!1;this.totalDelta_+=s;const l=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),l),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let i=-Pt(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),hu(t,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}var Bw=Nw;class Gw extends eo{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=Ca),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const i=this.targetPointers[0],r=this.targetPointers[1],s=Math.atan2(r.clientY-i.clientY,r.clientX-i.clientX);if(this.lastAngle_!==void 0){const l=s-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=l}this.lastAngle_=s;const o=e.map,a=o.getView();a.getConstraints().rotation!==Jc&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(du(this.targetPointers))),this.rotating_&&(o.render(),a.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}var zw=Gw;class jw extends eo{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=Ca),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const i=this.targetPointers[0],r=this.targetPointers[1],s=i.clientX-r.clientX,o=i.clientY-r.clientY,a=Math.sqrt(s*s+o*o);this.lastDistance_!==void 0&&(t=this.lastDistance_/a),this.lastDistance_=a;const l=e.map,c=l.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(du(this.targetPointers))),l.render(),c.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const i=e.map.getView(),r=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,r),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}var Uw=jw;function Ww(n){n=n||{};const e=new Zi,t=new kw(-.005,.05,100);return(n.altShiftDragRotate!==void 0?n.altShiftDragRotate:!0)&&e.push(new bw),(n.doubleClickZoom!==void 0?n.doubleClickZoom:!0)&&e.push(new gw({delta:n.zoomDelta,duration:n.zoomDuration})),(n.dragPan!==void 0?n.dragPan:!0)&&e.push(new xw({onFocusOnly:n.onFocusOnly,kinetic:t})),(n.pinchRotate!==void 0?n.pinchRotate:!0)&&e.push(new zw),(n.pinchZoom!==void 0?n.pinchZoom:!0)&&e.push(new Uw({duration:n.zoomDuration})),(n.keyboard!==void 0?n.keyboard:!0)&&(e.push(new Ow),e.push(new Fw({delta:n.zoomDelta,duration:n.zoomDuration}))),(n.mouseWheelZoom!==void 0?n.mouseWheelZoom:!0)&&e.push(new Bw({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(n.shiftDragZoom!==void 0?n.shiftDragZoom:!0)&&e.push(new Lw({duration:n.zoomDuration})),e}function md(n){return n[0]>0&&n[1]>0}function Yw(n,e,t){return t===void 0&&(t=[0,0]),t[0]=n[0]*e+.5|0,t[1]=n[1]*e+.5|0,t}function _i(n,e){return Array.isArray(n)?n:(e===void 0?e=[n,n]:(e[0]=n,e[1]=n),e)}function Eg(n){if(n instanceof Da){n.setMapInternal(null);return}n instanceof Na&&n.getLayers().forEach(Eg)}function bg(n,e){if(n instanceof Da){n.setMapInternal(e);return}if(n instanceof Na){const t=n.getLayers().getArray();for(let i=0,r=t.length;i<r;++i)bg(t[i],e)}}class Xw extends ki{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=Hw(e);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:Gf,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=qi(),this.pixelToCoordinateTransform_=qi(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=t.controls||qs(),this.interactions=t.interactions||Ww({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new iw(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(ri.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(ri.VIEW,this.handleViewChanged_),this.addChangeListener(ri.SIZE,this.handleSizeChanged_),this.addChangeListener(ri.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const i=this;e.view&&!(e.view instanceof mi)&&e.view.then(function(r){i.setView(new mi(r))}),this.controls.addEventListener(gi.ADD,r=>{r.element.setMap(this)}),this.controls.addEventListener(gi.REMOVE,r=>{r.element.setMap(null)}),this.interactions.addEventListener(gi.ADD,r=>{r.element.setMap(this)}),this.interactions.addEventListener(gi.REMOVE,r=>{r.element.setMap(null)}),this.overlays_.addEventListener(gi.ADD,r=>{this.addOverlayInternal_(r.element)}),this.overlays_.addEventListener(gi.REMOVE,r=>{const s=r.element.getId();s!==void 0&&delete this.overlayIdIndex_[s.toString()],r.element.setMap(null)}),this.controls.forEach(r=>{r.setMap(this)}),this.interactions.forEach(r=>{r.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){bg(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,i){if(!this.frameState_||!this.renderer_)return;const r=this.getCoordinateFromPixelInternal(e);i=i!==void 0?i:{};const s=i.hitTolerance!==void 0?i.hitTolerance:0,o=i.layerFilter!==void 0?i.layerFilter:ks,a=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,s,a,t,null,o,null)}getFeaturesAtPixel(e,t){const i=[];return this.forEachFeatureAtPixel(e,function(r){i.push(r)},t),i}getAllLayers(){const e=[];function t(i){i.forEach(function(r){r instanceof Na?t(r.getLayers()):e.push(r)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const r=t.layerFilter!==void 0?t.layerFilter:ks,s=t.hitTolerance!==void 0?t.hitTolerance:0,o=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,s,o,r,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const i=this.viewport_.getBoundingClientRect(),r=this.getSize(),s=i.width/r[0],o=i.height/r[1],a="changedTouches"in e?e.changedTouches[0]:e;return[(a.clientX-i.left)/s,(a.clientY-i.top)/o]}getTarget(){return this.get(ri.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return dc(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?Wt(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(ri.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof Zi){t.setLayers(e);return}const i=t.getLayers();i.clear(),i.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,i=e.length;t<i;++t){const r=e[t];if(!r.visible)continue;const s=r.layer.getRenderer();if(s&&!s.ready)return!0;const o=r.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(e){const t=cn(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?Wt(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(ri.SIZE)}getView(){return this.get(ri.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,i,r){return nw(this.frameState_,e,t,i,r)}handleBrowserEvent(e,t){t=t||e.type;const i=new In(t,this,e);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,i=t.type;if(i===yc.POINTERDOWN||i===Ue.WHEEL||i===Ue.KEYDOWN){const r=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():r,o=t.target;if(this.overlayContainerStopEvent_.contains(o)||!(s===r?r.documentElement:s).contains(o))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const r=this.getInteractions().getArray().slice();for(let s=r.length-1;s>=0;s--){const o=r[s];if(o.getMap()!==this||!o.getActive()||!this.getTargetElement())continue;if(!o.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let r=this.maxTilesLoading_,s=r;if(e){const o=e.viewHints;if(o[si.ANIMATING]||o[si.INTERACTING]){const a=Date.now()-e.time>8;r=a?0:8,s=a?0:2}}t.getTilesLoading()<r&&(t.reprioritize(),t.loadMoreTiles(r,s))}e&&this.renderer_&&!e.animate&&(this.renderComplete_===!0?(this.hasListener(On.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(On.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new zr(Sn.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new zr(Sn.LOADSTART,this,e))));const i=this.postRenderFunctions_;for(let r=0,s=i.length;r<s;++r)i[r](this,e);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let i=0,r=this.targetChangeHandlerKeys_.length;i<r;++i)bt(this.targetChangeHandlerKeys_[i]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(Ue.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(Ue.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,pc(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const i=this.targetElement_.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.unobserve(i.host)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new Kv(this)),this.mapBrowserEventHandler_=new qv(this,this.moveTolerance_);for(const s in Rt)this.mapBrowserEventHandler_.addEventListener(Rt[s],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(Ue.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(Ue.WHEEL,this.boundHandleBrowserEvent_,zf?{passive:!1}:!1);const i=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.targetChangeHandlerKeys_=[nt(i,Ue.KEYDOWN,this.handleBrowserEvent,this),nt(i,Ue.KEYPRESS,this.handleBrowserEvent,this)];const r=t.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.observe(r.host),this.resizeObserver_.observe(t)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(bt(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(bt(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=nt(e,$r.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=nt(e,Ue.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(bt),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new Rn("addlayer",e)),this.layerGroupPropertyListenerKeys_=[nt(e,$r.PROPERTYCHANGE,this.render,this),nt(e,Ue.CHANGE,this.render,this),nt(e,"addlayer",this.handleLayerAdd_,this),nt(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,i=e.length;t<i;++t){const r=e[t].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){Eg(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),i=this.getView(),r=this.frameState_;let s=null;if(t!==void 0&&md(t)&&i&&i.isDef()){const o=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=i.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:lc(a.center,a.resolution,a.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{},mapId:ht(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const l=isNaN(a.nextRotation)?a.rotation:a.nextRotation;s.nextExtent=lc(a.nextCenter,a.nextResolution,l,t)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),r&&(!this.previousExtent_||!Uc(this.previousExtent_)&&!Ns(s.extent,this.previousExtent_))&&(this.dispatchEvent(new zr(Sn.MOVESTART,this,r)),this.previousExtent_=Vs(this.previousExtent_)),this.previousExtent_&&!s.viewHints[si.ANIMATING]&&!s.viewHints[si.INTERACTING]&&!Ns(s.extent,this.previousExtent_)&&(this.dispatchEvent(new zr(Sn.MOVEEND,this,s)),Uf(s.extent,this.previousExtent_))),this.dispatchEvent(new zr(Sn.POSTRENDER,this,s)),this.renderComplete_=this.hasListener(Sn.LOADSTART)||this.hasListener(Sn.LOADEND)||this.hasListener(On.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new Rn("removelayer",t)),this.set(ri.LAYERGROUP,e)}setSize(e){this.set(ri.SIZE,e)}setTarget(e){this.set(ri.TARGET,e)}setView(e){if(!e||e instanceof mi){this.set(ri.VIEW,e);return}this.set(ri.VIEW,new mi);const t=this;e.then(function(i){t.setView(new mi(i))})}updateSize(){const e=this.getTargetElement();let t;if(e){const r=getComputedStyle(e),s=e.offsetWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight)-parseFloat(r.borderRightWidth),o=e.offsetHeight-parseFloat(r.borderTopWidth)-parseFloat(r.paddingTop)-parseFloat(r.paddingBottom)-parseFloat(r.borderBottomWidth);!isNaN(s)&&!isNaN(o)&&(t=[s,o],!md(t)&&!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&tg("No map visible because the map container's width or height are 0."))}const i=this.getSize();t&&(!i||!kn(t,i))&&(this.setSize(t),this.updateViewportSize_())}updateViewportSize_(){const e=this.getView();if(e){let t;const i=getComputedStyle(this.viewport_);i.width&&i.height&&(t=[parseInt(i.width,10),parseInt(i.height,10)]),e.setViewportSize(t)}}}function Hw(n){let e=null;n.keyboardEventTarget!==void 0&&(e=typeof n.keyboardEventTarget=="string"?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);const t={},i=n.layers&&typeof n.layers.getLayers=="function"?n.layers:new Na({layers:n.layers});t[ri.LAYERGROUP]=i,t[ri.TARGET]=n.target,t[ri.VIEW]=n.view instanceof mi?n.view:new mi;let r;n.controls!==void 0&&(Array.isArray(n.controls)?r=new Zi(n.controls.slice()):(Ve(typeof n.controls.getArray=="function",47),r=n.controls));let s;n.interactions!==void 0&&(Array.isArray(n.interactions)?s=new Zi(n.interactions.slice()):(Ve(typeof n.interactions.getArray=="function",48),s=n.interactions));let o;return n.overlays!==void 0?Array.isArray(n.overlays)?o=new Zi(n.overlays.slice()):(Ve(typeof n.overlays.getArray=="function",49),o=n.overlays):o=new Zi,{controls:r,interactions:s,keyboardEventTarget:e,overlays:o,values:t}}var Ga=Xw;class fu extends ki{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new fu(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const i=this.getStyle();return i&&e.setStyle(i),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(bt(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=nt(e,Ue.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?Qw(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function Qw(n){if(typeof n=="function")return n;let e;return Array.isArray(n)?e=n:(Ve(typeof n.getZIndex=="function",41),e=[n]),function(){return e}}var xi=fu,Nt={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class gu{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=_i(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new gu({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return Ge()}getImage(e){return Ge()}getHitDetectionImage(){return Ge()}getPixelRatio(e){return 1}getImageState(){return Ge()}getImageSize(){return Ge()}getOrigin(){return Ge()}getSize(){return Ge()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=_i(e)}listenImageChange(e){Ge()}load(){Ge()}unlistenImageChange(e){Ge()}}var Cg=gu;function $i(n){return Array.isArray(n)?Vf(n):n}class pu extends Cg{constructor(e){const t=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:1,rotateWithView:t,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius_=e.radius!==void 0?e.radius:e.radius1,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){const e=this.getScale(),t=new pu({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_;if(!e)return null;const t=this.getDisplacement(),i=this.getScaleArray();return[e[0]/2-t[0]/i[0],e[1]/2+t[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(e){let t=this.canvas_[e];if(!t){const i=this.renderOptions_,r=ui(i.size*e,i.size*e);this.draw_(i,r,e),t=r.canvas,this.canvas_[e]=t}return t}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return Nt.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,i){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let r=this.radius_,s=this.radius2_===void 0?r:this.radius2_;if(r<s){const L=r;r=s,s=L}const o=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/o,l=s*Math.sin(a),c=Math.sqrt(s*s-l*l),u=r-c,d=Math.sqrt(l*l+u*u),f=d/l;if(e==="miter"&&f<=i)return f*t;const _=t/2/f,p=t/2*(u/d),y=Math.sqrt((r+_)*(r+_)+p*p)-r;if(this.radius2_===void 0||e==="bevel")return y*2;const v=r*Math.sin(a),w=Math.sqrt(r*r-v*v),x=s-w,O=Math.sqrt(v*v+x*x)/v;if(O<=i){const L=O*t/2-s-r;return 2*Math.max(y,L)}return y*2}createRenderOptions(){let e=is,t=0,i=null,r=0,s,o=0;this.stroke_&&(s=this.stroke_.getColor(),s===null&&(s=Us),s=$i(s),o=this.stroke_.getWidth(),o===void 0&&(o=Ys),i=this.stroke_.getLineDash(),r=this.stroke_.getLineDashOffset(),e=this.stroke_.getLineJoin(),e===void 0&&(e=is),t=this.stroke_.getMiterLimit(),t===void 0&&(t=js));const a=this.calculateLineJoinSize_(e,o,t),l=Math.max(this.radius_,this.radius2_||0),c=Math.ceil(2*l+a);return{strokeStyle:s,strokeWidth:o,size:c,lineDash:i,lineDashOffset:r,lineJoin:e,miterLimit:t}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.canvas_={},this.size_=[e,e]}draw_(e,t,i){if(t.scale(i,i),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let r=this.fill_.getColor();r===null&&(r=gn),t.fillStyle=$i(r),t.fill()}this.stroke_&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){if(this.fill_){let t=this.fill_.getColor(),i=0;if(typeof t=="string"&&(t=ea(t)),t===null?i=1:Array.isArray(t)&&(i=t.length===4?t[3]:1),i===0){const r=ui(e.size,e.size);this.hitDetectionCanvas_=r.canvas,this.drawHitDetectionCanvas_(e,r)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(e){let t=this.points_;const i=this.radius_;if(t===1/0)e.arc(0,0,i,0,2*Math.PI);else{const r=this.radius2_===void 0?i:this.radius2_;this.radius2_!==void 0&&(t*=2);const s=this.angle_-Math.PI/2,o=2*Math.PI/t;for(let a=0;a<t;a++){const l=s+a*o,c=a%2===0?i:r;e.lineTo(c*Math.cos(l),c*Math.sin(l))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=gn,t.fill(),this.stroke_&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}}var Ig=pu;class mu extends Ig{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new mu({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius_=e,this.render()}}var Xt=mu;class _u{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null}clone(){const e=this.getColor();return new _u({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){this.color_=e}}var Bt=_u;function Sg(n,e,t){const i=n;let r=!0,s=!1,o=!1;const a=[Jo(i,Ue.LOAD,function(){o=!0,s||e()})];return i.src&&f0?(s=!0,i.decode().then(function(){r&&e()}).catch(function(l){r&&(o?e():t())})):a.push(Jo(i,Ue.ERROR,t)),function(){r=!1,a.forEach(bt)}}let Es=null;class Kw extends Ia{constructor(e,t,i,r,s,o){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=r,this.canvas_={},this.color_=o,this.unlisten_=null,this.imageState_=s,this.size_=i,this.src_=t,this.tainted_}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===Nt.LOADED){Es||(Es=ui(1,1,void 0,{willReadFrequently:!0})),Es.drawImage(this.image_,0,0);try{Es.getImageData(0,0,1,1),this.tainted_=!1}catch{Es=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(Ue.CHANGE)}handleImageError_(){this.imageState_=Nt.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=Nt.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],i=ui(e,t);i.fillRect(0,0,e,t),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===Nt.IDLE){this.image_||this.initializeImage_(),this.imageState_=Nt.LOADING;try{this.image_.src=this.src_}catch{this.handleImageError_()}this.unlisten_=Sg(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==Nt.LOADED)return;const t=this.image_,i=document.createElement("canvas");i.width=Math.ceil(t.width*e),i.height=Math.ceil(t.height*e);const r=i.getContext("2d");r.scale(e,e),r.drawImage(t,0,0),r.globalCompositeOperation="multiply",r.fillStyle=Kf(this.color_),r.fillRect(0,0,i.width/e,i.height/e),r.globalCompositeOperation="destination-in",r.drawImage(t,0,0),this.canvas_[e]=i}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function Vw(n,e,t,i,r,s){let o=ta.get(e,i,s);return o||(o=new Kw(n,e,t,i,r,s),ta.set(e,i,s,o)),o}class yu extends Cg{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,i=e.rotation!==void 0?e.rotation:0,r=e.scale!==void 0?e.scale:1,s=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:i,scale:r,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:s,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const o=e.img!==void 0?e.img:null;this.imgSize_=e.imgSize;let a=e.src;Ve(!(a!==void 0&&o),4),Ve(!o||o&&this.imgSize_,5),(a===void 0||a.length===0)&&o&&(a=o.src||ht(o)),Ve(a!==void 0&&a.length>0,6),Ve(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),69);const l=e.src!==void 0?Nt.IDLE:Nt.LOADED;if(this.color_=e.color!==void 0?ea(e.color):null,this.iconImage_=Vw(o,a,this.imgSize_!==void 0?this.imgSize_:null,this.crossOrigin_,l,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.width_=e.width,this.height_=e.height,this.width_!==void 0||this.height_!==void 0){const c=this.getImage(1),u=()=>{this.updateScaleFromWidthAndHeight(this.width_,this.height_)};c.width>0?this.updateScaleFromWidthAndHeight(this.width_,this.height_):c.addEventListener("load",u)}}clone(){let e=this.getScale();return e=Array.isArray(e)?e.slice():e,(this.width_!==void 0||this.height_!==void 0)&&(e=void 0),new yu({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode(),width:this.width_,height:this.height_})}updateScaleFromWidthAndHeight(e,t){const i=this.getImage(1);e!==void 0&&t!==void 0?super.setScale([e/i.width,t/i.height]):e!==void 0?super.setScale([e/i.width,e/i.width]):t!==void 0?super.setScale([t/i.height,t/i.height]):super.setScale([1,1])}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const r=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!r)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=r[0]),this.anchorYUnits_=="fraction"&&(e[1]*=r[1])}if(this.anchorOrigin_!="top-left"){if(!r)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+r[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+r[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),i=this.getScaleArray();return[e[0]-t[0]/i[0],e[1]+t[1]/i[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),i=this.iconImage_.getSize();if(!t||!i)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=i[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=i[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){return this.width_}getHeight(){return this.height_}setWidth(e){this.width_=e,this.updateScaleFromWidthAndHeight(e,this.height_)}setHeight(e){this.height_=e,this.updateScaleFromWidthAndHeight(this.width_,e)}setScale(e){super.setScale(e);const t=this.getImage(1);if(t){const i=Array.isArray(e)?e[0]:e;i!==void 0&&(this.width_=i*t.width);const r=Array.isArray(e)?e[1]:e;r!==void 0&&(this.height_=r*t.height)}}listenImageChange(e){this.iconImage_.addEventListener(Ue.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(Ue.CHANGE,e)}}var Rg=yu;class vu{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new vu({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}var oi=vu;class za{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=_d,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new za({geometry:e,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=_d,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function Zw(n){let e;if(typeof n=="function")e=n;else{let t;Array.isArray(n)?t=n:(Ve(typeof n.getZIndex=="function",41),t=[n]),e=function(){return t}}return e}let Dl=null;function $w(n,e){if(!Dl){const t=new Bt({color:"rgba(255,255,255,0.4)"}),i=new oi({color:"#3399CC",width:1.25});Dl=[new za({image:new Xt({fill:t,stroke:i,radius:5}),fill:t,stroke:i})]}return Dl}function _d(n){return n.getGeometry()}var Lt=za;const qw="#333";class wu{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=_i(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new Bt({color:qw}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding}clone(){const e=this.getScale();return new wu({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=_i(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}var Jw=wu;class eA{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const i=this.entries_[e];return Ve(i!==void 0,15),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(e){const t=this.entries_[e];return Ve(t!==void 0,15),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.key_;return e}getValues(){const e=new Array(this.count_);let t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){if(!!this.containsKey(e))return this.entries_[e].value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){Ve(!(e in this.entries_),16);const i={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[e]=i,++this.count_}setSize(e){this.highWaterMark=e}}var tA=eA;class iA extends Ia{constructor(e,t,i){super(),i=i||{},this.tileCoord=e,this.state=t,this.interimTile=null,this.key="",this.transition_=i.transition===void 0?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(Ue.CHANGE)}release(){this.state===De.ERROR&&this.setState(De.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let e=this.interimTile;do{if(e.getState()==De.LOADED)return this.transition_=0,e;e=e.interimTile}while(e);return this}refreshInterimChain(){if(!this.interimTile)return;let e=this.interimTile,t=this;do{if(e.getState()==De.LOADED){e.interimTile=null;break}else e.getState()==De.LOADING?t=e:e.getState()==De.IDLE?t.interimTile=e.interimTile:t=e;e=t.interimTile}while(e)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==De.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}load(){Ge()}getAlpha(e,t){if(!this.transition_)return 1;let i=this.transitionStarts_[e];if(!i)i=t,this.transitionStarts_[e]=i;else if(i===-1)return 1;const r=t-i+1e3/60;return r>=this.transition_?1:ng(r/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}}var Tg=iA;class nA extends Tg{constructor(e,t,i,r,s,o){super(e,t,o),this.crossOrigin_=r,this.src_=i,this.key=i,this.image_=new Image,r!==null&&(this.image_.crossOrigin=r),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(e){this.image_=e,this.state=De.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=De.ERROR,this.unlistenImage_(),this.image_=rA(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=De.LOADED:this.state=De.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==De.ERROR&&(this.state=De.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==De.IDLE&&(this.state=De.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=Sg(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function rA(){const n=ui(1,1);return n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1),n.canvas}var Lg=nA;const sA=.5,oA=10,yd=.25;class aA{constructor(e,t,i,r,s,o){this.sourceProj_=e,this.targetProj_=t;let a={};const l=sa(this.targetProj_,this.sourceProj_);this.transformInv_=function(w){const x=w[0]+"/"+w[1];return a[x]||(a[x]=l(w)),a[x]},this.maxSourceExtent_=r,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&Et(r)==Et(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Et(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Et(this.targetProj_.getExtent()):null;const c=gr(i),u=Ma(i),d=La(i),f=Ta(i),_=this.transformInv_(c),p=this.transformInv_(u),m=this.transformInv_(d),y=this.transformInv_(f),v=oA+(o?Math.max(0,Math.ceil(Math.log2(ac(i)/(o*o*256*256)))):0);if(this.addQuad_(c,u,d,f,_,p,m,y,v),this.wrapsXInSource_){let w=1/0;this.triangles_.forEach(function(x,E,O){w=Math.min(w,x.source[0][0],x.source[1][0],x.source[2][0])}),this.triangles_.forEach(x=>{if(Math.max(x.source[0][0],x.source[1][0],x.source[2][0])-w>this.sourceWorldWidth_/2){const E=[[x.source[0][0],x.source[0][1]],[x.source[1][0],x.source[1][1]],[x.source[2][0],x.source[2][1]]];E[0][0]-w>this.sourceWorldWidth_/2&&(E[0][0]-=this.sourceWorldWidth_),E[1][0]-w>this.sourceWorldWidth_/2&&(E[1][0]-=this.sourceWorldWidth_),E[2][0]-w>this.sourceWorldWidth_/2&&(E[2][0]-=this.sourceWorldWidth_);const O=Math.min(E[0][0],E[1][0],E[2][0]);Math.max(E[0][0],E[1][0],E[2][0])-O<this.sourceWorldWidth_/2&&(x.source=E)}})}a={}}addTriangle_(e,t,i,r,s,o){this.triangles_.push({source:[r,s,o],target:[e,t,i]})}addQuad_(e,t,i,r,s,o,a,l,c){const u=Qh([s,o,a,l]),d=this.sourceWorldWidth_?Et(u)/this.sourceWorldWidth_:null,f=this.sourceWorldWidth_,_=this.sourceProj_.canWrapX()&&d>.5&&d<1;let p=!1;if(c>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const y=Qh([e,t,i,r]);p=Et(y)/this.targetWorldWidth_>yd||p}!_&&this.sourceProj_.isGlobal()&&d&&(p=d>yd||p)}if(!p&&this.maxSourceExtent_&&isFinite(u[0])&&isFinite(u[1])&&isFinite(u[2])&&isFinite(u[3])&&!ci(u,this.maxSourceExtent_))return;let m=0;if(!p&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(l[0])||!isFinite(l[1]))){if(c>0)p=!0;else if(m=(!isFinite(s[0])||!isFinite(s[1])?8:0)+(!isFinite(o[0])||!isFinite(o[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),m!=1&&m!=2&&m!=4&&m!=8)return}if(c>0){if(!p){const y=[(e[0]+i[0])/2,(e[1]+i[1])/2],v=this.transformInv_(y);let w;_?w=(lr(s[0],f)+lr(a[0],f))/2-lr(v[0],f):w=(s[0]+a[0])/2-v[0];const x=(s[1]+a[1])/2-v[1];p=w*w+x*x>this.errorThresholdSquared_}if(p){if(Math.abs(e[0]-i[0])<=Math.abs(e[1]-i[1])){const y=[(t[0]+i[0])/2,(t[1]+i[1])/2],v=this.transformInv_(y),w=[(r[0]+e[0])/2,(r[1]+e[1])/2],x=this.transformInv_(w);this.addQuad_(e,t,y,w,s,o,v,x,c-1),this.addQuad_(w,y,i,r,x,v,a,l,c-1)}else{const y=[(e[0]+t[0])/2,(e[1]+t[1])/2],v=this.transformInv_(y),w=[(i[0]+r[0])/2,(i[1]+r[1])/2],x=this.transformInv_(w);this.addQuad_(e,y,w,r,s,v,x,l,c-1),this.addQuad_(y,t,i,w,v,o,a,x,c-1)}return}}if(_){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(m&11)==0&&this.addTriangle_(e,i,r,s,a,l),(m&14)==0&&this.addTriangle_(e,i,t,s,a,o),m&&((m&13)==0&&this.addTriangle_(t,r,e,o,l,s),(m&7)==0&&this.addTriangle_(t,r,i,o,l,a))}calculateSourceExtent(){const e=Ei();return this.triangles_.forEach(function(t,i,r){const s=t.source;Ls(e,s[0]),Ls(e,s[1]),Ls(e,s[2])}),e}getTriangles(){return this.triangles_}}var lA=aA;let kl;const Zr=[];function vd(n,e,t,i,r){n.beginPath(),n.moveTo(0,0),n.lineTo(e,t),n.lineTo(i,r),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(e,i)+1,Math.max(t,r)),n.restore()}function Nl(n,e){return Math.abs(n[e*4]-210)>2||Math.abs(n[e*4+3]-.75*255)>2}function cA(){if(kl===void 0){const n=ui(6,6,Zr);n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",vd(n,4,5,4,0),vd(n,4,5,0,5);const e=n.getImageData(0,0,3,3).data;kl=Nl(e,0)||Nl(e,4)||Nl(e,8),ka(n),Zr.push(n.canvas)}return kl}function wd(n,e,t,i){const r=Vc(t,e,n);let s=ra(e,i,t);const o=e.getMetersPerUnit();o!==void 0&&(s*=o);const a=n.getMetersPerUnit();a!==void 0&&(s/=a);const l=n.getExtent();if(!l||Ra(l,r)){const c=ra(n,s,r)/s;isFinite(c)&&c>0&&(s/=c)}return s}function uA(n,e,t,i){const r=hr(t);let s=wd(n,e,r,i);return(!isFinite(s)||s<=0)&&Hf(t,function(o){return s=wd(n,e,o,i),isFinite(s)&&s>0}),s}function hA(n,e,t,i,r,s,o,a,l,c,u,d){const f=ui(Math.round(t*n),Math.round(t*e),Zr);if(d||(f.imageSmoothingEnabled=!1),l.length===0)return f.canvas;f.scale(t,t);function _(E){return Math.round(E*t)/t}f.globalCompositeOperation="lighter";const p=Ei();l.forEach(function(E,O,L){Yf(p,E.extent)});const m=Et(p),y=Ji(p),v=ui(Math.round(t*m/i),Math.round(t*y/i),Zr);d||(v.imageSmoothingEnabled=!1);const w=t/i;l.forEach(function(E,O,L){const R=E.extent[0]-p[0],S=-(E.extent[3]-p[3]),B=Et(E.extent),U=Ji(E.extent);E.image.width>0&&E.image.height>0&&v.drawImage(E.image,c,c,E.image.width-2*c,E.image.height-2*c,R*w,S*w,B*w,U*w)});const x=gr(o);return a.getTriangles().forEach(function(E,O,L){const R=E.source,S=E.target;let B=R[0][0],U=R[0][1],j=R[1][0],X=R[1][1],K=R[2][0],Ae=R[2][1];const ee=_((S[0][0]-x[0])/s),F=_(-(S[0][1]-x[1])/s),N=_((S[1][0]-x[0])/s),G=_(-(S[1][1]-x[1])/s),V=_((S[2][0]-x[0])/s),H=_(-(S[2][1]-x[1])/s),q=B,D=U;B=0,U=0,j-=q,X-=D,K-=q,Ae-=D;const ce=[[j,X,0,0,N-ee],[K,Ae,0,0,V-ee],[0,0,j,X,G-F],[0,0,K,Ae,H-F]],J=C0(ce);if(!!J){if(f.save(),f.beginPath(),cA()||!d){f.moveTo(N,G);const ne=4,fe=ee-N,Ne=F-G;for(let le=0;le<ne;le++)f.lineTo(N+_((le+1)*fe/ne),G+_(le*Ne/(ne-1))),le!=ne-1&&f.lineTo(N+_((le+1)*fe/ne),G+_((le+1)*Ne/(ne-1)));f.lineTo(V,H)}else f.moveTo(N,G),f.lineTo(ee,F),f.lineTo(V,H);f.clip(),f.transform(J[0],J[2],J[1],J[3],ee,F),f.translate(p[0]-q,p[3]-D),f.scale(i/t,-i/t),f.drawImage(v.canvas,0,0),f.restore()}}),ka(v),Zr.push(v.canvas),u&&(f.save(),f.globalCompositeOperation="source-over",f.strokeStyle="black",f.lineWidth=1,a.getTriangles().forEach(function(E,O,L){const R=E.target,S=(R[0][0]-x[0])/s,B=-(R[0][1]-x[1])/s,U=(R[1][0]-x[0])/s,j=-(R[1][1]-x[1])/s,X=(R[2][0]-x[0])/s,K=-(R[2][1]-x[1])/s;f.beginPath(),f.moveTo(U,j),f.lineTo(S,B),f.lineTo(X,K),f.closePath(),f.stroke()}),f.restore()),f.canvas}class dA extends Tg{constructor(e,t,i,r,s,o,a,l,c,u,d,f){super(s,De.IDLE,{interpolate:!!f}),this.renderEdges_=d!==void 0?d:!1,this.pixelRatio_=a,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=r,this.wrappedTileCoord_=o||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const _=r.getTileCoordExtent(this.wrappedTileCoord_),p=this.targetTileGrid_.getExtent();let m=this.sourceTileGrid_.getExtent();const y=p?Ms(_,p):_;if(ac(y)===0){this.state=De.EMPTY;return}const v=e.getExtent();v&&(m?m=Ms(m,v):m=v);const w=r.getResolution(this.wrappedTileCoord_[0]),x=uA(e,i,y,w);if(!isFinite(x)||x<=0){this.state=De.EMPTY;return}const E=u!==void 0?u:sA;if(this.triangulation_=new lA(e,i,y,m,x*E,w),this.triangulation_.getTriangles().length===0){this.state=De.EMPTY;return}this.sourceZ_=t.getZForResolution(x);let O=this.triangulation_.calculateSourceExtent();if(m&&(e.canWrapX()?(O[1]=Pt(O[1],m[1],m[3]),O[3]=Pt(O[3],m[1],m[3])):O=Ms(O,m)),!ac(O))this.state=De.EMPTY;else{const L=t.getTileRangeForExtentAndZ(O,this.sourceZ_);for(let R=L.minX;R<=L.maxX;R++)for(let S=L.minY;S<=L.maxY;S++){const B=c(this.sourceZ_,R,S,a);B&&this.sourceTiles_.push(B)}this.sourceTiles_.length===0&&(this.state=De.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{t&&t.getState()==De.LOADED&&e.push({extent:this.sourceTileGrid_.getTileCoordExtent(t.tileCoord),image:t.getImage()})}),this.sourceTiles_.length=0,e.length===0)this.state=De.ERROR;else{const t=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(t),r=typeof i=="number"?i:i[0],s=typeof i=="number"?i:i[1],o=this.targetTileGrid_.getResolution(t),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=hA(r,s,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=De.LOADED}this.changed()}load(){if(this.state==De.IDLE){this.state=De.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(t=>{const i=t.getState();if(i==De.IDLE||i==De.LOADING){e++;const r=nt(t,Ue.CHANGE,function(s){const o=t.getState();(o==De.LOADED||o==De.ERROR||o==De.EMPTY)&&(bt(r),e--,e===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(r)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(t,i,r){t.getState()==De.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(bt),this.sourcesListenerKeys_=null}release(){this.canvas_&&(ka(this.canvas_.getContext("2d")),Zr.push(this.canvas_),this.canvas_=null),super.release()}}var wc=dA;function Ad(n,e,t,i){return i!==void 0?(i[0]=n,i[1]=e,i[2]=t,i):[n,e,t]}function ja(n,e,t){return n+"/"+e+"/"+t}function Mg(n){return ja(n[0],n[1],n[2])}function fA(n){return n.split("/").map(Number)}function gA(n){return(n[1]<<n[0])+n[2]}function pA(n,e){const t=n[0],i=n[1],r=n[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const s=e.getFullTileRange(t);return s?s.containsXY(i,r):!0}class mA extends tA{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(e){for(;this.canExpireCache()&&!(this.peekLast().getKey()in e);)this.pop().release()}pruneExceptNewestZ(){if(this.getCount()===0)return;const e=this.peekFirstKey(),i=fA(e)[0];this.forEach(r=>{r.tileCoord[0]!==i&&(this.remove(Mg(r.tileCoord)),r.release())})}}var Og=mA,Bl={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class _A extends ki{constructor(e){super(),this.projection=Tt(e.projection),this.attributions_=xd(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible!==void 0?e.attributionsCollapsible:!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(i,r){t.viewResolver=i,t.viewRejector=r})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=xd(e),this.changed()}setState(e){this.state_=e,this.changed()}}function xd(n){return n?Array.isArray(n)?function(e){return n}:typeof n=="function"?n:function(e){return[n]}:null}var Pg=_A;class Fg{constructor(e,t,i,r){this.minX=e,this.maxX=t,this.minY=i,this.maxY=r}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function Pr(n,e,t,i,r){return r!==void 0?(r.minX=n,r.maxX=e,r.minY=t,r.maxY=i,r):new Fg(n,e,t,i)}var Dg=Fg;const Fr=[0,0,0],xn=5;class yA{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,Ve(e0(this.resolutions_,function(r,s){return s-r},!0),17);let t;if(!e.origins){for(let r=0,s=this.resolutions_.length-1;r<s;++r)if(!t)t=this.resolutions_[r]/this.resolutions_[r+1];else if(this.resolutions_[r]/this.resolutions_[r+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,Ve(this.origins_.length==this.resolutions_.length,20));const i=e.extent;i!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=gr(i)),Ve(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,Ve(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:Yc,Ve(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=i!==void 0?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map(function(r,s){const o=new Dg(Math.min(0,r[0]),Math.max(r[0]-1,-1),Math.min(0,r[1]),Math.max(r[1]-1,-1));if(i){const a=this.getTileRangeForExtentAndZ(i,s);o.minX=Math.max(a.minX,o.minX),o.maxX=Math.min(a.maxX,o.maxX),o.minY=Math.max(a.minY,o.minY),o.maxY=Math.min(a.maxY,o.maxY)}return o},this):i&&this.calculateTileRanges_(i)}forEachTileCoord(e,t,i){const r=this.getTileRangeForExtentAndZ(e,t);for(let s=r.minX,o=r.maxX;s<=o;++s)for(let a=r.minY,l=r.maxY;a<=l;++a)i([t,s,a])}forEachTileCoordParentTileRange(e,t,i,r){let s,o,a,l=null,c=e[0]-1;for(this.zoomFactor_===2?(o=e[1],a=e[2]):l=this.getTileCoordExtent(e,r);c>=this.minZoom;){if(this.zoomFactor_===2?(o=Math.floor(o/2),a=Math.floor(a/2),s=Pr(o,o,a,a,i)):s=this.getTileRangeForExtentAndZ(l,c,i),t(c,s))return!0;--c}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,i){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const s=e[1]*2,o=e[2]*2;return Pr(s,s+1,o,o+1,t)}const r=this.getTileCoordExtent(e,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,i){if(t>this.maxZoom||t<this.minZoom)return null;const r=e[0],s=e[1],o=e[2];if(t===r)return Pr(s,o,s,o,i);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,t-r),c=Math.floor(s*l),u=Math.floor(o*l);if(t<r)return Pr(c,c,u,u,i);const d=Math.floor(l*(s+1))-1,f=Math.floor(l*(o+1))-1;return Pr(c,d,u,f,i)}const a=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,t,i)}getTileRangeExtent(e,t,i){const r=this.getOrigin(e),s=this.getResolution(e),o=_i(this.getTileSize(e),this.tmpSize_),a=r[0]+t.minX*o[0]*s,l=r[0]+(t.maxX+1)*o[0]*s,c=r[1]+t.minY*o[1]*s,u=r[1]+(t.maxY+1)*o[1]*s;return mn(a,c,l,u,i)}getTileRangeForExtentAndZ(e,t,i){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,Fr);const r=Fr[1],s=Fr[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,Fr);const o=Fr[1],a=Fr[2];return Pr(r,o,s,a,i)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),i=this.getResolution(e[0]),r=_i(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*r[0]*i,t[1]-(e[2]+.5)*r[1]*i]}getTileCoordExtent(e,t){const i=this.getOrigin(e[0]),r=this.getResolution(e[0]),s=_i(this.getTileSize(e[0]),this.tmpSize_),o=i[0]+e[1]*s[0]*r,a=i[1]-(e[2]+1)*s[1]*r,l=o+s[0]*r,c=a+s[1]*r;return mn(o,a,l,c,t)}getTileCoordForCoordAndResolution(e,t,i){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,i)}getTileCoordForXYAndResolution_(e,t,i,r,s){const o=this.getZForResolution(i),a=i/this.getResolution(o),l=this.getOrigin(o),c=_i(this.getTileSize(o),this.tmpSize_);let u=a*(e-l[0])/i/c[0],d=a*(l[1]-t)/i/c[1];return r?(u=Do(u,xn)-1,d=Do(d,xn)-1):(u=Fo(u,xn),d=Fo(d,xn)),Ad(o,u,d,s)}getTileCoordForXYAndZ_(e,t,i,r,s){const o=this.getOrigin(i),a=this.getResolution(i),l=_i(this.getTileSize(i),this.tmpSize_);let c=(e-o[0])/a/l[0],u=(o[1]-t)/a/l[1];return r?(c=Do(c,xn)-1,u=Do(u,xn)-1):(c=Fo(c,xn),u=Fo(u,xn)),Ad(i,c,u,s)}getTileCoordForCoordAndZ(e,t,i){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,i)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const i=Nc(this.resolutions_,e,t||0);return Pt(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return hg(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,i=new Array(t);for(let r=this.minZoom;r<t;++r)i[r]=this.getTileRangeForExtentAndZ(e,r);this.fullTileRanges_=i}}var kg=yA;function Ng(n){let e=n.getDefaultTileGrid();return e||(e=AA(n),n.setDefaultTileGrid(e)),e}function vA(n,e,t){const i=e[0],r=n.getTileCoordCenter(e),s=Au(t);if(!Ra(s,r)){const o=Et(s),a=Math.ceil((s[0]-r[0])/o);return r[0]+=o*a,n.getTileCoordForCoordAndZ(r,i)}return e}function wA(n,e,t,i){i=i!==void 0?i:"top-left";const r=Bg(n,e,t);return new kg({extent:n,origin:w0(n,i),resolutions:r,tileSize:t})}function Ua(n){const e=n||{},t=e.extent||Tt("EPSG:3857").getExtent(),i={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:Bg(t,e.maxZoom,e.tileSize,e.maxResolution)};return new kg(i)}function Bg(n,e,t,i){e=e!==void 0?e:P0,t=_i(t!==void 0?t:Yc);const r=Ji(n),s=Et(n);i=i>0?i:Math.max(s/t[0],r/t[1]);const o=e+1,a=new Array(o);for(let l=0;l<o;++l)a[l]=i/Math.pow(2,l);return a}function AA(n,e,t,i){const r=Au(n);return wA(r,e,t,i)}function Au(n){n=Tt(n);let e=n.getExtent();if(!e){const t=180*es.degrees/n.getMetersPerUnit();e=mn(-t,-t,t,t)}return e}class xA extends Pg{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.opaque_=e.opaque!==void 0?e.opaque:!1,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&_i(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tileCache=new Og(e.cacheSize||0),this.tmpSize=[0,0],this.key_=e.key||"",this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(e,t){const i=this.getTileCacheForProjection(e);i&&i.expireCache(t)}forEachLoadedTile(e,t,i,r){const s=this.getTileCacheForProjection(e);if(!s)return!1;let o=!0,a,l,c;for(let u=i.minX;u<=i.maxX;++u)for(let d=i.minY;d<=i.maxY;++d)l=ja(t,u,d),c=!1,s.containsKey(l)&&(a=s.get(l),c=a.getState()===De.LOADED,c&&(c=r(a)!==!1)),c||(o=!1);return o}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getOpaque(e){return this.opaque_}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,i,r,s){return Ge()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:Ng(e)}getTileCacheForProjection(e){const t=this.getProjection();return Ve(t===null||tr(t,e),68),this.tileCache}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,i){const r=this.getTileGridForProjection(i),s=this.getTilePixelRatio(t),o=_i(r.getTileSize(e),this.tmpSize);return s==1?o:Yw(o,s,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){t=t!==void 0?t:this.getProjection();const i=this.getTileGridForProjection(t);return this.getWrapX()&&t.isGlobal()&&(e=vA(i,e,t)),pA(e,i)?e:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(e,t){const i=this.getTileCacheForProjection(t);e>i.highWaterMark&&(i.highWaterMark=e)}useTile(e,t,i,r){}}class EA extends en{constructor(e,t){super(e),this.tile=t}}var bA=xA;function CA(n,e){const t=/\{z\}/g,i=/\{x\}/g,r=/\{y\}/g,s=/\{-y\}/g;return function(o,a,l){if(!!o)return n.replace(t,o[0].toString()).replace(i,o[1].toString()).replace(r,o[2].toString()).replace(s,function(){const c=o[0],u=e.getFullTileRange(c);return Ve(u,55),(u.getHeight()-o[2]-1).toString()})}}function IA(n,e){const t=n.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=CA(n[r],e);return SA(i)}function SA(n){return n.length===1?n[0]:function(e,t,i){if(!e)return;const r=gA(e),s=lr(r,n.length);return n[s](e,t,i)}}function RA(n){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(n);if(t){const i=t[1].charCodeAt(0),r=t[2].charCodeAt(0);let s;for(s=i;s<=r;++s)e.push(n.replace(t[0],String.fromCharCode(s)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(n),t){const i=parseInt(t[2],10);for(let r=parseInt(t[1],10);r<=i;r++)e.push(n.replace(t[0],r.toString()));return e}return e.push(n),e}class xu extends bA{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===xu.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,i=ht(t),r=t.getState();let s;r==De.LOADING?(this.tileLoadingKeys_[i]=!0,s=Bl.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],s=r==De.ERROR?Bl.TILELOADERROR:r==De.LOADED?Bl.TILELOADEND:void 0),s!=null&&this.dispatchEvent(new EA(s,t))}setTileLoadFunction(e){this.tileCache.clear(),this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,this.tileCache.pruneExceptNewestZ(),typeof t!="undefined"?this.setKey(t):this.changed()}setUrl(e){const t=RA(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(IA(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,i){}useTile(e,t,i){const r=ja(e,t,i);this.tileCache.containsKey(r)&&this.tileCache.get(r)}}var TA=xu;class LA extends TA{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:MA,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:Lg,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1}expireCache(e,t){const i=this.getTileCacheForProjection(e);this.tileCache.expireCache(this.tileCache==i?t:{});for(const r in this.tileCacheForProjection){const s=this.tileCacheForProjection[r];s.expireCache(s==i?t:{})}}getGutterForProjection(e){return this.getProjection()&&e&&!tr(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getOpaque(e){return this.getProjection()&&e&&!tr(this.getProjection(),e)?!1:super.getOpaque(e)}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||tr(t,e)))return this.tileGrid;const i=ht(e);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=Ng(e)),this.tileGridForProjection[i]}getTileCacheForProjection(e){const t=this.getProjection();if(!t||tr(t,e))return this.tileCache;const i=ht(e);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new Og(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]}createTile_(e,t,i,r,s,o){const a=[e,t,i],l=this.getTileCoordForTileUrlFunction(a,s),c=l?this.tileUrlFunction(l,r,s):void 0,u=new this.tileClass(a,c!==void 0?De.IDLE:De.EMPTY,c!==void 0?c:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return u.key=o,u.addEventListener(Ue.CHANGE,this.handleTileChange.bind(this)),u}getTile(e,t,i,r,s){const o=this.getProjection();if(!o||!s||tr(o,s))return this.getTileInternal(e,t,i,r,o||s);const a=this.getTileCacheForProjection(s),l=[e,t,i];let c;const u=Mg(l);a.containsKey(u)&&(c=a.get(u));const d=this.getKey();if(c&&c.key==d)return c;const f=this.getTileGridForProjection(o),_=this.getTileGridForProjection(s),p=this.getTileCoordForTileUrlFunction(l,s),m=new wc(o,f,s,_,l,p,this.getTilePixelRatio(r),this.getGutter(),(y,v,w,x)=>this.getTileInternal(y,v,w,x,o),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return m.key=d,c?(m.interimTile=c,m.refreshInterimChain(),a.replace(u,m)):a.set(u,m),m}getTileInternal(e,t,i,r,s){let o=null;const a=ja(e,t,i),l=this.getKey();if(!this.tileCache.containsKey(a))o=this.createTile_(e,t,i,r,s,l),this.tileCache.set(a,o);else if(o=this.tileCache.get(a),o.key!=l){const c=o;o=this.createTile_(e,t,i,r,s,l),c.getState()==De.IDLE?o.interimTile=c.interimTile:o.interimTile=c,o.refreshInterimChain(),this.tileCache.replace(a,o)}return o}setRenderReprojectionEdges(e){if(this.renderReprojectionEdges_!=e){this.renderReprojectionEdges_=e;for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear();this.changed()}}setTileGridForProjection(e,t){const i=Tt(e);if(i){const r=ht(i);r in this.tileGridForProjection||(this.tileGridForProjection[r]=t)}}clear(){super.clear();for(const e in this.tileCacheForProjection)this.tileCacheForProjection[e].clear()}}function MA(n,e){n.getImage().src=e}var OA=LA;class PA extends OA{constructor(e){e=e||{};const t=e.projection!==void 0?e.projection:"EPSG:3857",i=e.tileGrid!==void 0?e.tileGrid:Ua({extent:Au(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,opaque:e.opaque,projection:t,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}}var Nn=PA;function FA(n,e,t,i,r){Gg(n,e,t||0,i||n.length-1,r||DA)}function Gg(n,e,t,i,r){for(;i>t;){if(i-t>600){var s=i-t+1,o=e-t+1,a=Math.log(s),l=.5*Math.exp(2*a/3),c=.5*Math.sqrt(a*l*(s-l)/s)*(o-s/2<0?-1:1),u=Math.max(t,Math.floor(e-o*l/s+c)),d=Math.min(i,Math.floor(e+(s-o)*l/s+c));Gg(n,e,u,d,r)}var f=n[e],_=t,p=i;for(bs(n,t,e),r(n[i],f)>0&&bs(n,t,i);_<p;){for(bs(n,_,p),_++,p--;r(n[_],f)<0;)_++;for(;r(n[p],f)>0;)p--}r(n[t],f)===0?bs(n,t,p):(p++,bs(n,p,i)),p<=e&&(t=p+1),e<=p&&(i=p-1)}}function bs(n,e,t){var i=n[e];n[e]=n[t],n[t]=i}function DA(n,e){return n<e?-1:n>e?1:0}class zg{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const i=[];if(!jo(e,t))return i;const r=this.toBBox,s=[];for(;t;){for(let o=0;o<t.children.length;o++){const a=t.children[o],l=t.leaf?r(a):a;jo(e,l)&&(t.leaf?i.push(a):zl(e,l)?this._all(a,i):s.push(a))}t=s.pop()}return i}collides(e){let t=this.data;if(!jo(e,t))return!1;const i=[];for(;t;){for(let r=0;r<t.children.length;r++){const s=t.children[r],o=t.leaf?this.toBBox(s):s;if(jo(e,o)){if(t.leaf||zl(e,o))return!0;i.push(s)}}t=i.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let i=0;i<e.length;i++)this.insert(e[i]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const i=this.data;this.data=t,t=i}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=jr([]),this}remove(e,t){if(!e)return this;let i=this.data;const r=this.toBBox(e),s=[],o=[];let a,l,c;for(;i||s.length;){if(i||(i=s.pop(),l=s[s.length-1],a=o.pop(),c=!0),i.leaf){const u=kA(e,i.children,t);if(u!==-1)return i.children.splice(u,1),s.push(i),this._condense(s),this}!c&&!i.leaf&&zl(i,r)?(s.push(i),o.push(a),a=0,l=i,i=i.children[0]):l?(a++,i=l.children[a],c=!1):i=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const i=[];for(;e;)e.leaf?t.push(...e.children):i.push(...e.children),e=i.pop();return t}_build(e,t,i,r){const s=i-t+1;let o=this._maxEntries,a;if(s<=o)return a=jr(e.slice(t,i+1)),Dr(a,this.toBBox),a;r||(r=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,r-1))),a=jr([]),a.leaf=!1,a.height=r;const l=Math.ceil(s/o),c=l*Math.ceil(Math.sqrt(o));Ed(e,t,i,c,this.compareMinX);for(let u=t;u<=i;u+=c){const d=Math.min(u+c-1,i);Ed(e,u,d,l,this.compareMinY);for(let f=u;f<=d;f+=l){const _=Math.min(f+l-1,d);a.children.push(this._build(e,f,_,r-1))}}return Dr(a,this.toBBox),a}_chooseSubtree(e,t,i,r){for(;r.push(t),!(t.leaf||r.length-1===i);){let s=1/0,o=1/0,a;for(let l=0;l<t.children.length;l++){const c=t.children[l],u=Gl(c),d=GA(e,c)-u;d<o?(o=d,s=u<s?u:s,a=c):d===o&&u<s&&(s=u,a=c)}t=a||t.children[0]}return t}_insert(e,t,i){const r=i?e:this.toBBox(e),s=[],o=this._chooseSubtree(r,this.data,t,s);for(o.children.push(e),Ss(o,r);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(r,s,t)}_split(e,t){const i=e[t],r=i.children.length,s=this._minEntries;this._chooseSplitAxis(i,s,r);const o=this._chooseSplitIndex(i,s,r),a=jr(i.children.splice(o,i.children.length-o));a.height=i.height,a.leaf=i.leaf,Dr(i,this.toBBox),Dr(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(i,a)}_splitRoot(e,t){this.data=jr([e,t]),this.data.height=e.height+1,this.data.leaf=!1,Dr(this.data,this.toBBox)}_chooseSplitIndex(e,t,i){let r,s=1/0,o=1/0;for(let a=t;a<=i-t;a++){const l=Is(e,0,a,this.toBBox),c=Is(e,a,i,this.toBBox),u=zA(l,c),d=Gl(l)+Gl(c);u<s?(s=u,r=a,o=d<o?d:o):u===s&&d<o&&(o=d,r=a)}return r||i-t}_chooseSplitAxis(e,t,i){const r=e.leaf?this.compareMinX:NA,s=e.leaf?this.compareMinY:BA,o=this._allDistMargin(e,t,i,r),a=this._allDistMargin(e,t,i,s);o<a&&e.children.sort(r)}_allDistMargin(e,t,i,r){e.children.sort(r);const s=this.toBBox,o=Is(e,0,t,s),a=Is(e,i-t,i,s);let l=zo(o)+zo(a);for(let c=t;c<i-t;c++){const u=e.children[c];Ss(o,e.leaf?s(u):u),l+=zo(o)}for(let c=i-t-1;c>=t;c--){const u=e.children[c];Ss(a,e.leaf?s(u):u),l+=zo(a)}return l}_adjustParentBBoxes(e,t,i){for(let r=i;r>=0;r--)Ss(t[r],e)}_condense(e){for(let t=e.length-1,i;t>=0;t--)e[t].children.length===0?t>0?(i=e[t-1].children,i.splice(i.indexOf(e[t]),1)):this.clear():Dr(e[t],this.toBBox)}}function kA(n,e,t){if(!t)return e.indexOf(n);for(let i=0;i<e.length;i++)if(t(n,e[i]))return i;return-1}function Dr(n,e){Is(n,0,n.children.length,e,n)}function Is(n,e,t,i,r){r||(r=jr(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let s=e;s<t;s++){const o=n.children[s];Ss(r,n.leaf?i(o):o)}return r}function Ss(n,e){return n.minX=Math.min(n.minX,e.minX),n.minY=Math.min(n.minY,e.minY),n.maxX=Math.max(n.maxX,e.maxX),n.maxY=Math.max(n.maxY,e.maxY),n}function NA(n,e){return n.minX-e.minX}function BA(n,e){return n.minY-e.minY}function Gl(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function zo(n){return n.maxX-n.minX+(n.maxY-n.minY)}function GA(n,e){return(Math.max(e.maxX,n.maxX)-Math.min(e.minX,n.minX))*(Math.max(e.maxY,n.maxY)-Math.min(e.minY,n.minY))}function zA(n,e){const t=Math.max(n.minX,e.minX),i=Math.max(n.minY,e.minY),r=Math.min(n.maxX,e.maxX),s=Math.min(n.maxY,e.maxY);return Math.max(0,r-t)*Math.max(0,s-i)}function zl(n,e){return n.minX<=e.minX&&n.minY<=e.minY&&e.maxX<=n.maxX&&e.maxY<=n.maxY}function jo(n,e){return e.minX<=n.maxX&&e.minY<=n.maxY&&e.maxX>=n.minX&&e.maxY>=n.minY}function jr(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Ed(n,e,t,i,r){const s=[e,t];for(;s.length;){if(t=s.pop(),e=s.pop(),t-e<=i)continue;const o=e+Math.ceil((t-e)/i/2)*i;FA(n,o,e,t,r),s.push(e,o,o,t)}}class jA{constructor(e){this.rbush_=new zg(e),this.items_={}}insert(e,t){const i={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(i),this.items_[ht(t)]=i}load(e,t){const i=new Array(t.length);for(let r=0,s=t.length;r<s;r++){const o=e[r],a=t[r],l={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};i[r]=l,this.items_[ht(a)]=l}this.rbush_.load(i)}remove(e){const t=ht(e),i=this.items_[t];return delete this.items_[t],this.rbush_.remove(i)!==null}update(e,t){const i=this.items_[ht(t)],r=[i.minX,i.minY,i.maxX,i.maxY];Ns(r,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(r){return r.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let i;for(let r=0,s=e.length;r<s;r++)if(i=t(e[r]),i)return i;return i}isEmpty(){return Jr(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return mn(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}var bd=jA,Oi={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function UA(n,e){return[[-1/0,-1/0,1/0,1/0]]}function Eu(n){return function(e,t,i){const r=n.getZForResolution(q0(t)),s=n.getTileRangeForExtentAndZ(Tn(e),r),o=[],a=[r,0,0];for(a[1]=s.minX;a[1]<=s.maxX;++a[1])for(a[2]=s.minY;a[2]<=s.maxY;++a[2])o.push(Zc(n.getTileCoordExtent(a)));return o}}let WA=!1;function YA(n,e,t,i,r,s,o){const a=new XMLHttpRequest;a.open("GET",typeof n=="function"?n(t,i,r):n,!0),e.getType()=="arraybuffer"&&(a.responseType="arraybuffer"),a.withCredentials=WA,a.onload=function(l){if(!a.status||a.status>=200&&a.status<300){const c=e.getType();let u;c=="json"||c=="text"?u=a.responseText:c=="xml"?(u=a.responseXML,u||(u=new DOMParser().parseFromString(a.responseText,"application/xml"))):c=="arraybuffer"&&(u=a.response),u?s(e.readFeatures(u,{extent:t,featureProjection:r}),e.readProjection(u)):o()}else o()},a.onerror=o,a.send()}function Cd(n,e){return function(t,i,r,s,o){const a=this;YA(n,e,t,i,r,function(l,c){a.addFeatures(l),s!==void 0&&s(l)},o||qr)}}class En extends en{constructor(e,t,i){super(e),this.feature=t,this.features=i}}class XA extends Pg{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=qr,this.format_=e.format,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(Ve(this.format_,7),this.loader_=Cd(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:UA;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new bd:null,this.loadedExtentsRtree_=new bd,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let i,r;Array.isArray(e.features)?r=e.features:e.features&&(i=e.features,r=i.getArray()),!t&&i===void 0&&(i=new Zi(r)),r!==void 0&&this.addFeaturesInternal(r),i!==void 0&&this.bindFeaturesCollection_(i)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=ht(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const i=e.getGeometry();if(i){const r=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(r,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new En(Oi.ADDFEATURE,e))}setupChangeEvents_(e,t){this.featureChangeKeys_[e]=[nt(t,Ue.CHANGE,this.handleFeatureChange_,this),nt(t,$r.PROPERTYCHANGE,this.handleFeatureChange_,this)]}addToIndex_(e,t){let i=!0;const r=t.getId();return r!==void 0&&(r.toString()in this.idIndex_?i=!1:this.idIndex_[r.toString()]=t),i&&(Ve(!(e in this.uidIndex_),30),this.uidIndex_[e]=t),i}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],i=[],r=[];for(let s=0,o=e.length;s<o;s++){const a=e[s],l=ht(a);this.addToIndex_(l,a)&&i.push(a)}for(let s=0,o=i.length;s<o;s++){const a=i[s],l=ht(a);this.setupChangeEvents_(l,a);const c=a.getGeometry();if(c){const u=c.getExtent();t.push(u),r.push(a)}else this.nullGeometryFeatures_[l]=a}if(this.featuresRtree_&&this.featuresRtree_.load(t,r),this.hasListener(Oi.ADDFEATURE))for(let s=0,o=i.length;s<o;s++)this.dispatchEvent(new En(Oi.ADDFEATURE,i[s]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(Oi.ADDFEATURE,function(i){t||(t=!0,e.push(i.feature),t=!1)}),this.addEventListener(Oi.REMOVEFEATURE,function(i){t||(t=!0,e.remove(i.feature),t=!1)}),e.addEventListener(gi.ADD,i=>{t||(t=!0,this.addFeature(i.element),t=!1)}),e.addEventListener(gi.REMOVE,i=>{t||(t=!0,this.removeFeature(i.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach(bt);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const i=r=>{this.removeFeatureInternal(r)};this.featuresRtree_.forEach(i);for(const r in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new En(Oi.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const i=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(i,function(r){if(r.getGeometry().intersectsCoordinate(e))return t(r)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(i){if(i.getGeometry().intersectsExtent(e)){const s=t(i);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),Jr(this.nullGeometryFeatures_)||Pi(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(i){t.push(i)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const r=E0(e,t);return[].concat(...r.map(s=>this.featuresRtree_.getInExtent(s)))}else if(this.featuresCollection_)return this.featuresCollection_.getArray().slice(0);return[]}getClosestFeatureToCoordinate(e,t){const i=e[0],r=e[1];let s=null;const o=[NaN,NaN];let a=1/0;const l=[-1/0,-1/0,1/0,1/0];return t=t||ks,this.featuresRtree_.forEachInExtent(l,function(c){if(t(c)){const u=c.getGeometry(),d=a;if(a=u.closestPointXY(i,r,o,a),a<d){s=c;const f=Math.sqrt(a);l[0]=i-f,l[1]=r-f,l[2]=i+f,l[3]=r+f}}}),s}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,i=ht(t),r=t.getGeometry();if(!r)i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[i]=t);else{const o=r.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(o,t)):this.featuresRtree_&&this.featuresRtree_.update(o,t)}const s=t.getId();if(s!==void 0){const o=s.toString();this.idIndex_[o]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[o]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[i]=t;this.changed(),this.dispatchEvent(new En(Oi.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:ht(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Jr(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,i){const r=this.loadedExtentsRtree_,s=this.strategy_(e,t,i);for(let o=0,a=s.length;o<a;++o){const l=s[o];r.forEachInExtent(l,function(u){return Hr(u.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new En(Oi.FEATURESLOADSTART)),this.loader_.call(this,l,t,i,u=>{--this.loadingExtentsCount_,this.dispatchEvent(new En(Oi.FEATURESLOADEND,void 0,u))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new En(Oi.FEATURESLOADERROR))}),r.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_;let i;t.forEachInExtent(e,function(r){if(Ns(r.extent,e))return i=r,!0}),i&&t.remove(i)}removeFeature(e){if(!e)return;const t=ht(e);t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=ht(e),i=this.featureChangeKeys_[t];if(!i)return;i.forEach(bt),delete this.featureChangeKeys_[t];const r=e.getId();return r!==void 0&&delete this.idIndex_[r.toString()],delete this.uidIndex_[t],this.dispatchEvent(new En(Oi.REMOVEFEATURE,e)),e}removeFromIdIndex_(e){let t=!1;for(const i in this.idIndex_)if(this.idIndex_[i]===e){delete this.idIndex_[i],t=!0;break}return t}setLoader(e){this.loader_=e}setUrl(e){Ve(this.format_,7),this.url_=e,this.setLoader(Cd(e,this.format_))}}var Ni=XA;const HA='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class QA extends Nn{constructor(e){e=e||{};let t;e.attributions!==void 0?t=e.attributions:t=[HA];const i=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",r=e.url!==void 0?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:t,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:i,interpolate:e.interpolate,maxZoom:e.maxZoom!==void 0?e.maxZoom:19,opaque:e.opaque!==void 0?e.opaque:!0,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:r,wrapX:e.wrapX,zDirection:e.zDirection})}}var KA=QA;class VA extends Nf{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.declutterExecutorGroup=null}getFeatures(e){return Ge()}getData(e){return null}prepareFrame(e){return Ge()}renderFrame(e,t){return Ge()}loadedTileCallback(e,t,i){e[t]||(e[t]={}),e[t][i.tileCoord.toString()]=i}createLoadedTileFinder(e,t,i){return(r,s)=>{const o=this.loadedTileCallback.bind(this,i,r);return e.forEachLoadedTile(t,r,s,o)}}forEachFeatureAtCoordinate(e,t,i,r,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){e.target.getState()===Nt.LOADED&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=Nt.LOADED&&t!=Nt.ERROR&&e.addEventListener(Ue.CHANGE,this.boundHandleImageChange_),t==Nt.IDLE&&(e.load(),t=e.getState()),t==Nt.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}}var ZA=VA;const Id=[];let Ur=null;function $A(){Ur=ui(1,1,void 0,{willReadFrequently:!0})}class qA extends ZA{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=qi(),this.pixelTransform=qi(),this.inversePixelTransform=qi(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(e,t,i){Ur||$A(),Ur.clearRect(0,0,1,1);let r;try{Ur.drawImage(e,t,i,1,1,0,0,1,1),r=Ur.getImageData(0,0,1,1).data}catch{return Ur=null,null}return r}getBackground(e){let i=this.getLayer().getBackground();return typeof i=="function"&&(i=i(e.viewState.resolution)),i||void 0}useContainer(e,t,i){const r=this.getLayer().getClassName();let s,o;if(e&&e.className===r&&(!i||e&&e.style.backgroundColor&&kn(ea(e.style.backgroundColor),ea(i)))){const a=e.firstElementChild;a instanceof HTMLCanvasElement&&(o=a.getContext("2d"))}if(o&&o.canvas.style.transform===t?(this.container=e,this.context=o,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){s=document.createElement("div"),s.className=r;let a=s.style;a.position="absolute",a.width="100%",a.height="100%",o=ui();const l=o.canvas;s.appendChild(l),a=l.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=s,this.context=o}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(e,t,i){const r=gr(i),s=Ma(i),o=La(i),a=Ta(i);Wt(t.coordinateToPixelTransform,r),Wt(t.coordinateToPixelTransform,s),Wt(t.coordinateToPixelTransform,o),Wt(t.coordinateToPixelTransform,a);const l=this.inversePixelTransform;Wt(l,r),Wt(l,s),Wt(l,o),Wt(l,a),e.save(),e.beginPath(),e.moveTo(Math.round(r[0]),Math.round(r[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.clip()}dispatchRenderEvent_(e,t,i){const r=this.getLayer();if(r.hasListener(e)){const s=new pg(e,this.inversePixelTransform,i,t);r.dispatchEvent(s)}}preRender(e,t){this.frameState=t,this.dispatchRenderEvent_(On.PRERENDER,e,t)}postRender(e,t){this.dispatchRenderEvent_(On.POSTRENDER,e,t)}getRenderTransform(e,t,i,r,s,o,a){const l=s/2,c=o/2,u=r/t,d=-u,f=-e[0]+a,_=-e[1];return Dn(this.tempTransform,l,c,u,d,-i,f,_)}disposeInternal(){delete this.frameState,super.disposeInternal()}}var jg=qA,Uo={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class JA extends Da{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getPreload(){return this.get(Uo.PRELOAD)}setPreload(e){this.set(Uo.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(Uo.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(Uo.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}var ex=JA;class tx extends jg{constructor(e){super(e),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=Ei(),this.tmpTileRange_=new Dg(0,0,0,0)}isDrawableTile(e){const t=this.getLayer(),i=e.getState(),r=t.getUseInterimTilesOnError();return i==De.LOADED||i==De.EMPTY||i==De.ERROR&&!r}getTile(e,t,i,r){const s=r.pixelRatio,o=r.viewState.projection,a=this.getLayer();let c=a.getSource().getTile(e,t,i,s,o);return c.getState()==De.ERROR&&a.getUseInterimTilesOnError()&&a.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(c)||(c=c.getInterimTile()),c}getData(e){const t=this.frameState;if(!t)return null;const i=this.getLayer(),r=Wt(t.pixelToCoordinateTransform,e.slice()),s=i.getExtent();if(s&&!Ra(s,r))return null;const o=t.pixelRatio,a=t.viewState.projection,l=t.viewState,c=i.getRenderSource(),u=c.getTileGridForProjection(l.projection),d=c.getTilePixelRatio(t.pixelRatio);for(let f=u.getZForResolution(l.resolution);f>=u.getMinZoom();--f){const _=u.getTileCoordForCoordAndZ(r,f),p=c.getTile(f,_[1],_[2],o,a);if(!(p instanceof Lg||p instanceof wc)||p instanceof wc&&p.getState()===De.EMPTY)return null;if(p.getState()!==De.LOADED)continue;const m=u.getOrigin(f),y=_i(u.getTileSize(f)),v=u.getResolution(f),w=Math.floor(d*((r[0]-m[0])/v-_[1]*y[0])),x=Math.floor(d*((m[1]-r[1])/v-_[2]*y[1])),E=Math.round(d*c.getGutterForProjection(l.projection));return this.getImageData(p.getImage(),w+E,x+E)}return null}loadedTileCallback(e,t,i){return this.isDrawableTile(i)?super.loadedTileCallback(e,t,i):!1}prepareFrame(e){return!!this.getLayer().getSource()}renderFrame(e,t){const i=e.layerStatesArray[e.layerIndex],r=e.viewState,s=r.projection,o=r.resolution,a=r.center,l=r.rotation,c=e.pixelRatio,u=this.getLayer(),d=u.getSource(),f=d.getRevision(),_=d.getTileGridForProjection(s),p=_.getZForResolution(o,d.zDirection),m=_.getResolution(p);let y=e.extent;const v=e.viewState.resolution,w=d.getTilePixelRatio(c),x=Math.round(Et(y)/v*c),E=Math.round(Ji(y)/v*c),O=i.extent&&Tn(i.extent);O&&(y=Ms(y,Tn(i.extent)));const L=m*x/2/w,R=m*E/2/w,S=[a[0]-L,a[1]-R,a[0]+L,a[1]+R],B=_.getTileRangeForExtentAndZ(y,p),U={};U[p]={};const j=this.createLoadedTileFinder(d,s,U),X=this.tmpExtent,K=this.tmpTileRange_;this.newTiles_=!1;const Ae=l?cc(r.center,v,l,e.size):void 0;for(let ce=B.minX;ce<=B.maxX;++ce)for(let J=B.minY;J<=B.maxY;++J){if(l&&!_.tileCoordIntersectsViewport([p,ce,J],Ae))continue;const ne=this.getTile(p,ce,J,e);if(this.isDrawableTile(ne)){const le=ht(this);if(ne.getState()==De.LOADED){U[p][ne.tileCoord.toString()]=ne;let pe=ne.inTransition(le);pe&&i.opacity!==1&&(ne.endTransition(le),pe=!1),!this.newTiles_&&(pe||!this.renderedTiles.includes(ne))&&(this.newTiles_=!0)}if(ne.getAlpha(le,e.time)===1)continue}const fe=_.getTileCoordChildTileRange(ne.tileCoord,K,X);let Ne=!1;fe&&(Ne=j(p+1,fe)),Ne||_.forEachTileCoordParentTileRange(ne.tileCoord,j,K,X)}const ee=m/o*c/w;Dn(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/c,1/c,l,-x/2,-E/2);const F=jf(this.pixelTransform);this.useContainer(t,F,this.getBackground(e));const N=this.context,G=N.canvas;Gc(this.inversePixelTransform,this.pixelTransform),Dn(this.tempTransform,x/2,E/2,ee,ee,0,-x/2,-E/2),G.width!=x||G.height!=E?(G.width=x,G.height=E):this.containerReused||N.clearRect(0,0,x,E),O&&this.clipUnrotated(N,e,O),d.getInterpolate()||(N.imageSmoothingEnabled=!1),this.preRender(N,e),this.renderedTiles.length=0;let V=Object.keys(U).map(Number);V.sort(ur);let H,q,D;i.opacity===1&&(!this.containerReused||d.getOpaque(e.viewState.projection))?V=V.reverse():(H=[],q=[]);for(let ce=V.length-1;ce>=0;--ce){const J=V[ce],ne=d.getTilePixelSize(J,c,s),Ne=_.getResolution(J)/m,le=ne[0]*Ne*ee,pe=ne[1]*Ne*ee,Le=_.getTileCoordForCoordAndZ(gr(S),J),We=_.getTileCoordExtent(Le),Ie=Wt(this.tempTransform,[w*(We[0]-S[0])/m,w*(S[3]-We[3])/m]),be=w*d.getGutterForProjection(s),_t=U[J];for(const lt in _t){const xe=_t[lt],$=xe.tileCoord,re=Le[1]-$[1],Se=Math.round(Ie[0]-(re-1)*le),de=Le[2]-$[2],rt=Math.round(Ie[1]-(de-1)*pe),ye=Math.round(Ie[0]-re*le),se=Math.round(Ie[1]-de*pe),ue=Se-ye,Ee=rt-se,Ye=p===J,Pe=Ye&&xe.getAlpha(ht(this),e.time)!==1;let st=!1;if(!Pe)if(H){D=[ye,se,ye+ue,se,ye+ue,se+Ee,ye,se+Ee];for(let ct=0,zt=H.length;ct<zt;++ct)if(p!==J&&J<q[ct]){const dt=H[ct];ci([ye,se,ye+ue,se+Ee],[dt[0],dt[3],dt[4],dt[7]])&&(st||(N.save(),st=!0),N.beginPath(),N.moveTo(D[0],D[1]),N.lineTo(D[2],D[3]),N.lineTo(D[4],D[5]),N.lineTo(D[6],D[7]),N.moveTo(dt[6],dt[7]),N.lineTo(dt[4],dt[5]),N.lineTo(dt[2],dt[3]),N.lineTo(dt[0],dt[1]),N.clip())}H.push(D),q.push(J)}else N.clearRect(ye,se,ue,Ee);this.drawTileImage(xe,e,ye,se,ue,Ee,be,Ye),H&&!Pe?(st&&N.restore(),this.renderedTiles.unshift(xe)):this.renderedTiles.push(xe),this.updateUsedTiles(e.usedTiles,d,xe)}}return this.renderedRevision=f,this.renderedResolution=m,this.extentChanged=!this.renderedExtent_||!Ns(this.renderedExtent_,S),this.renderedExtent_=S,this.renderedPixelRatio=c,this.renderedProjection=s,this.manageTilePyramid(e,d,_,c,s,y,p,u.getPreload()),this.scheduleExpireCache(e,d),this.postRender(N,e),i.extent&&N.restore(),N.imageSmoothingEnabled=!0,F!==G.style.transform&&(G.style.transform=F),this.container}drawTileImage(e,t,i,r,s,o,a,l){const c=this.getTileImage(e);if(!c)return;const u=ht(this),d=t.layerStatesArray[t.layerIndex],f=d.opacity*(l?e.getAlpha(u,t.time):1),_=f!==this.context.globalAlpha;_&&(this.context.save(),this.context.globalAlpha=f),this.context.drawImage(c,a,a,c.width-2*a,c.height-2*a,i,r,s,o),_&&this.context.restore(),f!==d.opacity?t.animate=!0:l&&e.endTransition(u)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}scheduleExpireCache(e,t){if(t.canExpireCache()){const i=function(r,s,o){const a=ht(r);a in o.usedTiles&&r.expireCache(o.viewState.projection,o.usedTiles[a])}.bind(null,t);e.postRenderFunctions.push(i)}}updateUsedTiles(e,t,i){const r=ht(t);r in e||(e[r]={}),e[r][i.getKey()]=!0}manageTilePyramid(e,t,i,r,s,o,a,l,c){const u=ht(t);u in e.wantedTiles||(e.wantedTiles[u]={});const d=e.wantedTiles[u],f=e.tileQueue,_=i.getMinZoom(),p=e.viewState.rotation,m=p?cc(e.viewState.center,e.viewState.resolution,p,e.size):void 0;let y=0,v,w,x,E,O,L;for(L=_;L<=a;++L)for(w=i.getTileRangeForExtentAndZ(o,L,w),x=i.getResolution(L),E=w.minX;E<=w.maxX;++E)for(O=w.minY;O<=w.maxY;++O)p&&!i.tileCoordIntersectsViewport([L,E,O],m)||(a-L<=l?(++y,v=t.getTile(L,E,O,r,s),v.getState()==De.IDLE&&(d[v.getKey()]=!0,f.isKeyQueued(v.getKey())||f.enqueue([v,u,i.getTileCoordCenter(v.tileCoord),x])),c!==void 0&&c(v)):t.useTile(L,E,O,s));t.updateCacheSize(y,s)}}var ix=tx;class nx extends ex{constructor(e){super(e)}createRenderer(){return new ix(this)}}var Bn=nx;function Ug(n,e,t,i,r,s,o){let a,l;const c=(t-e)/i;if(c===1)a=e;else if(c===2)a=e,l=r;else if(c!==0){let u=n[e],d=n[e+1],f=0;const _=[0];for(let y=e+i;y<t;y+=i){const v=n[y],w=n[y+1];f+=Math.sqrt((v-u)*(v-u)+(w-d)*(w-d)),_.push(f),u=v,d=w}const p=r*f,m=qy(_,p);m<0?(l=(p-_[-m-2])/(_[-m-1]-_[-m-2]),a=e+(-m-2)*i):a=e+m*i}o=o>1?o:2,s=s||new Array(o);for(let u=0;u<o;++u)s[u]=a===void 0?NaN:l===void 0?n[a+u]:pi(n[a+u],n[a+i+u],l);return s}function Ac(n,e,t,i,r,s){if(t==e)return null;let o;if(r<n[e+i-1])return s?(o=n.slice(e,e+i),o[i-1]=r,o):null;if(n[t-1]<r)return s?(o=n.slice(t-i,t),o[i-1]=r,o):null;if(r==n[e+i-1])return n.slice(e,e+i);let a=e/i,l=t/i;for(;a<l;){const f=a+l>>1;r<n[(f+1)*i-1]?l=f:a=f+1}const c=n[a*i-1];if(r==c)return n.slice((a-1)*i,(a-1)*i+i);const u=n[(a+1)*i-1],d=(r-c)/(u-c);o=[];for(let f=0;f<i-1;++f)o.push(pi(n[(a-1)*i+f],n[a*i+f],d));return o.push(r),o}function rx(n,e,t,i,r,s,o){if(o)return Ac(n,e,t[t.length-1],i,r,s);let a;if(r<n[i-1])return s?(a=n.slice(0,i),a[i-1]=r,a):null;if(n[n.length-1]<r)return s?(a=n.slice(n.length-i),a[i-1]=r,a):null;for(let l=0,c=t.length;l<c;++l){const u=t[l];if(e!=u){if(r<n[e+i-1])return null;if(r<=n[u-1])return Ac(n,e,u,i,r,!1);e=u}}return null}function Wg(n,e,t,i){let r=n[e],s=n[e+1],o=0;for(let a=e+i;a<t;a+=i){const l=n[a],c=n[a+1];o+=Math.sqrt((l-r)*(l-r)+(c-s)*(c-s)),r=l,s=c}return o}class da extends pr{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){this.flatCoordinates?Pi(this.flatCoordinates,e):this.flatCoordinates=e.slice(),this.changed()}clone(){const e=new da(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<fr(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(eu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),iu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,i,r))}forEachSegment(e){return ug(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,Ac(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return Ln(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return Ug(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return Wg(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=su(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new da(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return Fa(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Pa(this.flatCoordinates,0,e,this.stride),this.changed()}}var fa=da;function Sd(n){return new Lt({fill:Xs(n,""),stroke:Hs(n,""),text:sx(n),image:ox(n)})}function Xs(n,e){const t=n[e+"fill-color"];if(!!t)return new Bt({color:t})}function Hs(n,e){const t=n[e+"stroke-width"],i=n[e+"stroke-color"];if(!(!t&&!i))return new oi({width:t,color:i,lineCap:n[e+"stroke-line-cap"],lineJoin:n[e+"stroke-line-join"],lineDash:n[e+"stroke-line-dash"],lineDashOffset:n[e+"stroke-line-dash-offset"],miterLimit:n[e+"stroke-miter-limit"]})}function sx(n){const e=n["text-value"];return e?new Jw({text:e,font:n["text-font"],maxAngle:n["text-max-angle"],offsetX:n["text-offset-x"],offsetY:n["text-offset-y"],overflow:n["text-overflow"],placement:n["text-placement"],repeat:n["text-repeat"],scale:n["text-scale"],rotateWithView:n["text-rotate-with-view"],rotation:n["text-rotation"],textAlign:n["text-align"],justify:n["text-justify"],textBaseline:n["text-baseline"],padding:n["text-padding"],fill:Xs(n,"text-"),backgroundFill:Xs(n,"text-background-"),stroke:Hs(n,"text-"),backgroundStroke:Hs(n,"text-background-")}):void 0}function ox(n){const e=n["icon-src"],t=n["icon-img"];if(e||t)return new Rg({src:e,img:t,imgSize:n["icon-img-size"],anchor:n["icon-anchor"],anchorOrigin:n["icon-anchor-origin"],anchorXUnits:n["icon-anchor-x-units"],anchorYUnits:n["icon-anchor-y-units"],color:n["icon-color"],crossOrigin:n["icon-cross-origin"],offset:n["icon-offset"],displacement:n["icon-displacement"],opacity:n["icon-opacity"],scale:n["icon-scale"],rotation:n["icon-rotation"],rotateWithView:n["icon-rotate-with-view"],size:n["icon-size"],declutterMode:n["icon-declutter-mode"]});const i=n["shape-points"];if(i){const s="shape-";return new Ig({points:i,fill:Xs(n,s),stroke:Hs(n,s),radius:n["shape-radius"],radius1:n["shape-radius1"],radius2:n["shape-radius2"],angle:n["shape-angle"],displacement:n["shape-displacement"],rotation:n["shape-rotation"],rotateWithView:n["shape-rotate-with-view"],scale:n["shape-scale"],declutterMode:n["shape-declutter-mode"]})}const r=n["circle-radius"];if(r){const s="circle-";return new Xt({radius:r,fill:Xs(n,s),stroke:Hs(n,s),displacement:n["circle-displacement"],scale:n["circle-scale"],rotation:n["circle-rotation"],rotateWithView:n["circle-rotate-with-view"],declutterMode:n["circle-declutter-mode"]})}}const Rd={RENDER_ORDER:"renderOrder"};class ax extends Da{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter!==void 0?e.declutter:!1,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(Rd.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e){e.declutterTree||(e.declutterTree=new zg(9)),this.getRenderer().renderDeclutter(e)}setRenderOrder(e){this.set(Rd.RENDER_ORDER,e)}setStyle(e){let t;if(e===void 0)t=$w;else if(e===null)t=null;else if(typeof e=="function")t=e;else if(e instanceof Lt)t=e;else if(Array.isArray(e)){const i=e.length,r=new Array(i);for(let s=0;s<i;++s){const o=e[s];o instanceof Lt?r[s]=o:r[s]=Sd(o)}t=r}else t=Sd(e);this.style_=t,this.styleFunction_=e===null?void 0:Zw(this.style_),this.changed()}}var lx=ax;const to={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Wo=[to.FILL],Mn=[to.STROKE],sr=[to.BEGIN_PATH],Td=[to.CLOSE_PATH];var Be=to;class cx{drawCustom(e,t,i,r){}drawGeometry(e){}setStyle(e){}drawCircle(e,t){}drawFeature(e,t){}drawGeometryCollection(e,t){}drawLineString(e,t){}drawMultiLineString(e,t){}drawMultiPoint(e,t){}drawMultiPolygon(e,t){}drawPoint(e,t){}drawPolygon(e,t){}drawText(e,t){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}var Yg=cx;class ux extends Yg{constructor(e,t,i,r){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(i){return i*t})}appendFlatPointCoordinates(e,t){const i=this.getBufferedMaxExtent(),r=this.tmpCoordinate_,s=this.coordinates;let o=s.length;for(let a=0,l=e.length;a<l;a+=t)r[0]=e[a],r[1]=e[a+1],Ra(i,r)&&(s[o++]=r[0],s[o++]=r[1]);return o}appendFlatLineCoordinates(e,t,i,r,s,o){const a=this.coordinates;let l=a.length;const c=this.getBufferedMaxExtent();o&&(t+=r);let u=e[t],d=e[t+1];const f=this.tmpCoordinate_;let _=!0,p,m,y;for(p=t+r;p<i;p+=r)f[0]=e[p],f[1]=e[p+1],y=oc(c,f),y!==m?(_&&(a[l++]=u,a[l++]=d,_=!1),a[l++]=f[0],a[l++]=f[1]):y===Ut.INTERSECTING?(a[l++]=f[0],a[l++]=f[1],_=!1):_=!0,u=f[0],d=f[1],m=y;return(s&&_||p===t+r)&&(a[l++]=u,a[l++]=d),l}drawCustomCoordinates_(e,t,i,r,s){for(let o=0,a=i.length;o<a;++o){const l=i[o],c=this.appendFlatLineCoordinates(e,t,l,r,!1,!1);s.push(c),t=l}return t}drawCustom(e,t,i,r){this.beginGeometry(e,t);const s=e.getType(),o=e.getStride(),a=this.coordinates.length;let l,c,u,d,f;switch(s){case"MultiPolygon":l=e.getOrientedFlatCoordinates(),d=[];const _=e.getEndss();f=0;for(let p=0,m=_.length;p<m;++p){const y=[];f=this.drawCustomCoordinates_(l,f,_[p],o,y),d.push(y)}this.instructions.push([Be.CUSTOM,a,d,e,i,fc]),this.hitDetectionInstructions.push([Be.CUSTOM,a,d,e,r||i,fc]);break;case"Polygon":case"MultiLineString":u=[],l=s=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),f=this.drawCustomCoordinates_(l,0,e.getEnds(),o,u),this.instructions.push([Be.CUSTOM,a,u,e,i,Bs]),this.hitDetectionInstructions.push([Be.CUSTOM,a,u,e,r||i,Bs]);break;case"LineString":case"Circle":l=e.getFlatCoordinates(),c=this.appendFlatLineCoordinates(l,0,l.length,o,!1,!1),this.instructions.push([Be.CUSTOM,a,c,e,i,Ln]),this.hitDetectionInstructions.push([Be.CUSTOM,a,c,e,r||i,Ln]);break;case"MultiPoint":l=e.getFlatCoordinates(),c=this.appendFlatPointCoordinates(l,o),c>a&&(this.instructions.push([Be.CUSTOM,a,c,e,i,Ln]),this.hitDetectionInstructions.push([Be.CUSTOM,a,c,e,r||i,Ln]));break;case"Point":l=e.getFlatCoordinates(),this.coordinates.push(l[0],l[1]),c=this.coordinates.length,this.instructions.push([Be.CUSTOM,a,c,e,i]),this.hitDetectionInstructions.push([Be.CUSTOM,a,c,e,r||i]);break}this.endGeometry(t)}beginGeometry(e,t){this.beginGeometryInstruction1_=[Be.BEGIN_GEOMETRY,t,0,e],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Be.BEGIN_GEOMETRY,t,0,e],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const i=e.length;let r,s,o=-1;for(t=0;t<i;++t)r=e[t],s=r[0],s==Be.END_GEOMETRY?o=t:s==Be.BEGIN_GEOMETRY&&(r[2]=t,Jy(this.hitDetectionInstructions,o,t),o=-1)}setFillStrokeStyle(e,t){const i=this.state;if(e){const r=e.getColor();i.fillStyle=$i(r||gn)}else i.fillStyle=void 0;if(t){const r=t.getColor();i.strokeStyle=$i(r||Us);const s=t.getLineCap();i.lineCap=s!==void 0?s:la;const o=t.getLineDash();i.lineDash=o?o.slice():Gs;const a=t.getLineDashOffset();i.lineDashOffset=a||zs;const l=t.getLineJoin();i.lineJoin=l!==void 0?l:is;const c=t.getWidth();i.lineWidth=c!==void 0?c:Ys;const u=t.getMiterLimit();i.miterLimit=u!==void 0?u:js,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0}createFill(e){const t=e.fillStyle,i=[Be.SET_FILL_STYLE,t];return typeof t!="string"&&i.push(!0),i}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[Be.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const i=e.fillStyle;(typeof i!="string"||e.currentFillStyle!=i)&&(i!==void 0&&this.instructions.push(t.call(this,e)),e.currentFillStyle=i)}updateStrokeStyle(e,t){const i=e.strokeStyle,r=e.lineCap,s=e.lineDash,o=e.lineDashOffset,a=e.lineJoin,l=e.lineWidth,c=e.miterLimit;(e.currentStrokeStyle!=i||e.currentLineCap!=r||s!=e.currentLineDash&&!kn(e.currentLineDash,s)||e.currentLineDashOffset!=o||e.currentLineJoin!=a||e.currentLineWidth!=l||e.currentMiterLimit!=c)&&(i!==void 0&&t.call(this,e),e.currentStrokeStyle=i,e.currentLineCap=r,e.currentLineDash=s,e.currentLineDashOffset=o,e.currentLineJoin=a,e.currentLineWidth=l,e.currentMiterLimit=c)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[Be.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Uf(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;zc(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}var io=ux;class hx extends io{constructor(e,t,i,r){super(e,t,i,r),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t){if(!this.image_)return;this.beginGeometry(e,t);const i=e.getFlatCoordinates(),r=e.getStride(),s=this.coordinates.length,o=this.appendFlatPointCoordinates(i,r);this.instructions.push([Be.DRAW_IMAGE,s,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Be.DRAW_IMAGE,s,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t){if(!this.image_)return;this.beginGeometry(e,t);const i=e.getFlatCoordinates(),r=e.getStride(),s=this.coordinates.length,o=this.appendFlatPointCoordinates(i,r);this.instructions.push([Be.DRAW_IMAGE,s,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Be.DRAW_IMAGE,s,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const i=e.getAnchor(),r=e.getSize(),s=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=r[1],this.opacity_=e.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=r[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}var dx=hx;class fx extends io{constructor(e,t,i,r){super(e,t,i,r)}drawFlatCoordinates_(e,t,i,r){const s=this.coordinates.length,o=this.appendFlatLineCoordinates(e,t,i,r,!1,!1),a=[Be.MOVE_TO_LINE_TO,s,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),i}drawLineString(e,t){const i=this.state,r=i.strokeStyle,s=i.lineWidth;if(r===void 0||s===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t),this.hitDetectionInstructions.push([Be.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Gs,zs],sr);const o=e.getFlatCoordinates(),a=e.getStride();this.drawFlatCoordinates_(o,0,o.length,a),this.hitDetectionInstructions.push(Mn),this.endGeometry(t)}drawMultiLineString(e,t){const i=this.state,r=i.strokeStyle,s=i.lineWidth;if(r===void 0||s===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t),this.hitDetectionInstructions.push([Be.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],sr);const o=e.getEnds(),a=e.getFlatCoordinates(),l=e.getStride();let c=0;for(let u=0,d=o.length;u<d;++u)c=this.drawFlatCoordinates_(a,c,o[u],l);this.hitDetectionInstructions.push(Mn),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(Mn),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(Mn),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(sr)}}var gx=fx;class px extends io{constructor(e,t,i,r){super(e,t,i,r)}drawFlatCoordinatess_(e,t,i,r){const s=this.state,o=s.fillStyle!==void 0,a=s.strokeStyle!==void 0,l=i.length;this.instructions.push(sr),this.hitDetectionInstructions.push(sr);for(let c=0;c<l;++c){const u=i[c],d=this.coordinates.length,f=this.appendFlatLineCoordinates(e,t,u,r,!0,!a),_=[Be.MOVE_TO_LINE_TO,d,f];this.instructions.push(_),this.hitDetectionInstructions.push(_),a&&(this.instructions.push(Td),this.hitDetectionInstructions.push(Td)),t=u}return o&&(this.instructions.push(Wo),this.hitDetectionInstructions.push(Wo)),a&&(this.instructions.push(Mn),this.hitDetectionInstructions.push(Mn)),t}drawCircle(e,t){const i=this.state,r=i.fillStyle,s=i.strokeStyle;if(r===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Be.SET_FILL_STYLE,gn]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Be.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const o=e.getFlatCoordinates(),a=e.getStride(),l=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,a,!1,!1);const c=[Be.CIRCLE,l];this.instructions.push(sr,c),this.hitDetectionInstructions.push(sr,c),i.fillStyle!==void 0&&(this.instructions.push(Wo),this.hitDetectionInstructions.push(Wo)),i.strokeStyle!==void 0&&(this.instructions.push(Mn),this.hitDetectionInstructions.push(Mn)),this.endGeometry(t)}drawPolygon(e,t){const i=this.state,r=i.fillStyle,s=i.strokeStyle;if(r===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Be.SET_FILL_STYLE,gn]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Be.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const o=e.getEnds(),a=e.getOrientedFlatCoordinates(),l=e.getStride();this.drawFlatCoordinatess_(a,0,o,l),this.endGeometry(t)}drawMultiPolygon(e,t){const i=this.state,r=i.fillStyle,s=i.strokeStyle;if(r===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Be.SET_FILL_STYLE,gn]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Be.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const o=e.getEndss(),a=e.getOrientedFlatCoordinates(),l=e.getStride();let c=0;for(let u=0,d=o.length;u<d;++u)c=this.drawFlatCoordinatess_(a,c,o[u],l);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let i=0,r=t.length;i<r;++i)t[i]=er(t[i],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;e.fillStyle!==void 0&&this.updateFillStyle(e,this.createFill),e.strokeStyle!==void 0&&this.updateStrokeStyle(e,this.applyStroke)}}var Ld=px;function mx(n,e,t,i,r){const s=[];let o=t,a=0,l=e.slice(t,2);for(;a<n&&o+r<i;){const[c,u]=l.slice(-2),d=e[o+r],f=e[o+r+1],_=Math.sqrt((d-c)*(d-c)+(f-u)*(f-u));if(a+=_,a>=n){const p=(n-a+_)/_,m=pi(c,d,p),y=pi(u,f,p);l.push(m,y),s.push(l),l=[m,y],a==n&&(o+=r),a=0}else if(a<n)l.push(e[o+r],e[o+r+1]),o+=r;else{const p=_-a,m=pi(c,d,p/_),y=pi(u,f,p/_);l.push(m,y),s.push(l),l=[m,y],a=0,o+=r}}return a>0&&s.push(l),s}function _x(n,e,t,i,r){let s=t,o=t,a=0,l=0,c=t,u,d,f,_,p,m,y,v,w,x;for(d=t;d<i;d+=r){const E=e[d],O=e[d+1];p!==void 0&&(w=E-p,x=O-m,_=Math.sqrt(w*w+x*x),y!==void 0&&(l+=f,u=Math.acos((y*w+v*x)/(f*_)),u>n&&(l>a&&(a=l,s=c,o=d),l=0,c=d-r)),f=_,y=w,v=x),p=E,m=O}return l+=_,l>a?[c,d]:[s,o]}const Os={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class yx extends io{constructor(e,t,i,r){super(e,t,i,r),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t){const i=this.textFillState_,r=this.textStrokeState_,s=this.textState_;if(this.text_===""||!s||!i&&!r)return;const o=this.coordinates;let a=o.length;const l=e.getType();let c=null,u=e.getStride();if(s.placement==="line"&&(l=="LineString"||l=="MultiLineString"||l=="Polygon"||l=="MultiPolygon")){if(!ci(this.getBufferedMaxExtent(),e.getExtent()))return;let d;if(c=e.getFlatCoordinates(),l=="LineString")d=[c.length];else if(l=="MultiLineString")d=e.getEnds();else if(l=="Polygon")d=e.getEnds().slice(0,1);else if(l=="MultiPolygon"){const m=e.getEndss();d=[];for(let y=0,v=m.length;y<v;++y)d.push(m[y][0])}this.beginGeometry(e,t);const f=s.repeat,_=f?void 0:s.textAlign;let p=0;for(let m=0,y=d.length;m<y;++m){let v;f?v=mx(f*this.resolution,c,p,d[m],u):v=[c.slice(p,d[m])];for(let w=0,x=v.length;w<x;++w){const E=v[w];let O=0,L=E.length;if(_==null){const S=_x(s.maxAngle,E,0,E.length,2);O=S[0],L=S[1]}for(let S=O;S<L;S+=u)o.push(E[S],E[S+1]);const R=o.length;p=d[m],this.drawChars_(a,R),a=R}}this.endGeometry(t)}else{let d=s.overflow?null:[];switch(l){case"Point":case"MultiPoint":c=e.getFlatCoordinates();break;case"LineString":c=e.getFlatMidpoint();break;case"Circle":c=e.getCenter();break;case"MultiLineString":c=e.getFlatMidpoints(),u=2;break;case"Polygon":c=e.getFlatInteriorPoint(),s.overflow||d.push(c[2]/this.resolution),u=3;break;case"MultiPolygon":const y=e.getFlatInteriorPoints();c=[];for(let v=0,w=y.length;v<w;v+=3)s.overflow||d.push(y[v+2]/this.resolution),c.push(y[v],y[v+1]);if(c.length===0)return;u=2;break}const f=this.appendFlatPointCoordinates(c,u);if(f===a)return;if(d&&(f-a)/2!==c.length/u){let y=a/2;d=d.filter((v,w)=>{const x=o[(y+w)*2]===c[w*u]&&o[(y+w)*2+1]===c[w*u+1];return x||--y,x})}this.saveTextStates_(),(s.backgroundFill||s.backgroundStroke)&&(this.setFillStrokeStyle(s.backgroundFill,s.backgroundStroke),s.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),s.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,t);let _=s.padding;if(_!=rr&&(s.scale[0]<0||s.scale[1]<0)){let y=s.padding[0],v=s.padding[1],w=s.padding[2],x=s.padding[3];s.scale[0]<0&&(v=-v,x=-x),s.scale[1]<0&&(y=-y,w=-w),_=[y,v,w,x]}const p=this.pixelRatio;this.instructions.push([Be.DRAW_IMAGE,a,f,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,_==rr?rr:_.map(function(y){return y*p}),!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,d]);const m=1/p;this.hitDetectionInstructions.push([Be.DRAW_IMAGE,a,f,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[m,m],NaN,void 0,this.declutterImageWithText_,_,!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,d]),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,i=this.textFillState_,r=this.strokeKey_;e&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:t.font,textAlign:t.textAlign||Ws,justify:t.justify,textBaseline:t.textBaseline||ca,scale:t.scale});const o=this.fillKey_;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))}drawChars_(e,t){const i=this.textStrokeState_,r=this.textState_,s=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();const l=this.pixelRatio,c=Os[r.textBaseline],u=this.textOffsetY_*l,d=this.text_,f=i?i.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([Be.DRAW_CHARS,e,t,c,r.overflow,a,r.maxAngle,l,u,s,f*l,d,o,1]),this.hitDetectionInstructions.push([Be.DRAW_CHARS,e,t,c,r.overflow,a,r.maxAngle,1,u,s,f,d,o,1/l])}setTextStyle(e,t){let i,r,s;if(!e)this.text_="";else{const o=e.getFill();o?(r=this.textFillState_,r||(r={},this.textFillState_=r),r.fillStyle=$i(o.getColor()||gn)):(r=null,this.textFillState_=r);const a=e.getStroke();if(!a)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const p=a.getLineDash(),m=a.getLineDashOffset(),y=a.getWidth(),v=a.getMiterLimit();s.lineCap=a.getLineCap()||la,s.lineDash=p?p.slice():Gs,s.lineDashOffset=m===void 0?zs:m,s.lineJoin=a.getLineJoin()||is,s.lineWidth=y===void 0?Ys:y,s.miterLimit=v===void 0?js:v,s.strokeStyle=$i(a.getColor()||Us)}i=this.textState_;const l=e.getFont()||_g;Uv(l);const c=e.getScaleArray();i.overflow=e.getOverflow(),i.font=l,i.maxAngle=e.getMaxAngle(),i.placement=e.getPlacement(),i.textAlign=e.getTextAlign(),i.repeat=e.getRepeat(),i.justify=e.getJustify(),i.textBaseline=e.getTextBaseline()||ca,i.backgroundFill=e.getBackgroundFill(),i.backgroundStroke=e.getBackgroundStroke(),i.padding=e.getPadding()||rr,i.scale=c===void 0?[1,1]:c;const u=e.getOffsetX(),d=e.getOffsetY(),f=e.getRotateWithView(),_=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=u===void 0?0:u,this.textOffsetY_=d===void 0?0:d,this.textRotateWithView_=f===void 0?!1:f,this.textRotation_=_===void 0?0:_,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:ht(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=r?typeof r.fillStyle=="string"?r.fillStyle:"|"+ht(r.fillStyle):""}this.declutterImageWithText_=t}}const vx={Circle:Ld,Default:io,Image:dx,LineString:gx,Polygon:Ld,Text:yx};class wx{constructor(e,t,i,r){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=r,this.resolution_=i,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const i=this.buildersByZIndex_[t];for(const r in i){const s=i[r].finish();e[t][r]=s}}return e}getBuilder(e,t){const i=e!==void 0?e.toString():"0";let r=this.buildersByZIndex_[i];r===void 0&&(r={},this.buildersByZIndex_[i]=r);let s=r[t];if(s===void 0){const o=vx[t];s=new o(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[t]=s}return s}}var Md=wx;function Ax(n,e,t,i,r,s,o,a,l,c,u,d){let f=n[e],_=n[e+1],p=0,m=0,y=0,v=0;function w(){p=f,m=_,e+=i,f=n[e],_=n[e+1],v+=y,y=Math.sqrt((f-p)*(f-p)+(_-m)*(_-m))}do w();while(e<t-i&&v+y<s);let x=y===0?0:(s-v)/y;const E=pi(p,f,x),O=pi(m,_,x),L=e-i,R=v,S=s+a*l(c,r,u);for(;e<t-i&&v+y<S;)w();x=y===0?0:(S-v)/y;const B=pi(p,f,x),U=pi(m,_,x);let j;if(d){const F=[E,O,B,U];rg(F,0,4,2,d,F,F),j=F[0]>F[2]}else j=E>B;const X=Math.PI,K=[],Ae=L+i===e;e=L,y=0,v=R,f=n[e],_=n[e+1];let ee;if(Ae){w(),ee=Math.atan2(_-m,f-p),j&&(ee+=ee>0?-X:X);const F=(B+E)/2,N=(U+O)/2;return K[0]=[F,N,(S-s)/2,ee,r],K}r=r.replace(/\n/g," ");for(let F=0,N=r.length;F<N;){w();let G=Math.atan2(_-m,f-p);if(j&&(G+=G>0?-X:X),ee!==void 0){let J=G-ee;if(J+=J>X?-2*X:J<-X?2*X:0,Math.abs(J)>o)return null}ee=G;const V=F;let H=0;for(;F<N;++F){const J=j?N-F-1:F,ne=a*l(c,r[J],u);if(e+i<t&&v+y<s+H+ne/2)break;H+=ne}if(F===V)continue;const q=j?r.substring(N-V,N-F):r.substring(V,F);x=y===0?0:(s+H/2-v)/y;const D=pi(p,f,x),ce=pi(m,_,x);K.push([D,ce,H/2,G,q]),s+=H}return K}const kr=Ei(),bn=[],an=[],ln=[],Cn=[];function Od(n){return n[3].declutterBox}const xx=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function Pd(n,e){return(e==="start"||e==="end")&&!xx.test(n)&&(e=e==="start"?"left":"right"),Os[e]}function Ex(n,e,t){return t>0&&n.push(`
`,""),n.push(e,""),n}class bx{constructor(e,t,i,r){this.overlaps=i,this.pixelRatio=t,this.resolution=e,this.alignFill_,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=qi(),this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={}}createLabel(e,t,i,r){const s=e+t+i+r;if(this.labels_[s])return this.labels_[s];const o=r?this.strokeStates[r]:null,a=i?this.fillStates[i]:null,l=this.textStates[t],c=this.pixelRatio,u=[l.scale[0]*c,l.scale[1]*c],d=Array.isArray(e),f=l.justify?Os[l.justify]:Pd(Array.isArray(e)?e[0]:e,l.textAlign||Ws),_=r&&o.lineWidth?o.lineWidth:0,p=d?e:e.split(`
`).reduce(Ex,[]),{width:m,height:y,widths:v,heights:w,lineWidths:x}=Yv(l,p),E=m+_,O=[],L=(E+2)*u[0],R=(y+_)*u[1],S={width:L<0?Math.floor(L):Math.ceil(L),height:R<0?Math.floor(R):Math.ceil(R),contextInstructions:O};(u[0]!=1||u[1]!=1)&&O.push("scale",u),r&&(O.push("strokeStyle",o.strokeStyle),O.push("lineWidth",_),O.push("lineCap",o.lineCap),O.push("lineJoin",o.lineJoin),O.push("miterLimit",o.miterLimit),O.push("setLineDash",[o.lineDash]),O.push("lineDashOffset",o.lineDashOffset)),i&&O.push("fillStyle",a.fillStyle),O.push("textBaseline","middle"),O.push("textAlign","center");const B=.5-f;let U=f*E+B*_;const j=[],X=[];let K=0,Ae=0,ee=0,F=0,N;for(let G=0,V=p.length;G<V;G+=2){const H=p[G];if(H===`
`){Ae+=K,K=0,U=f*E+B*_,++F;continue}const q=p[G+1]||l.font;q!==N&&(r&&j.push("font",q),i&&X.push("font",q),N=q),K=Math.max(K,w[ee]);const D=[H,U+B*v[ee]+f*(v[ee]-x[F]),.5*(_+K)+Ae];U+=v[ee],r&&j.push("strokeText",D),i&&X.push("fillText",D),++ee}return Array.prototype.push.apply(O,j),Array.prototype.push.apply(O,X),this.labels_[s]=S,S}replayTextBackground_(e,t,i,r,s,o,a){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,i),e.lineTo.apply(e,r),e.lineTo.apply(e,s),e.lineTo.apply(e,t),o&&(this.alignFill_=o[2],this.fill_(e)),a&&(this.setStrokeStyle_(e,a),e.stroke())}calculateImageOrLabelDimensions_(e,t,i,r,s,o,a,l,c,u,d,f,_,p,m,y){a*=f[0],l*=f[1];let v=i-a,w=r-l;const x=s+c>e?e-c:s,E=o+u>t?t-u:o,O=p[3]+x*f[0]+p[1],L=p[0]+E*f[1]+p[2],R=v-p[3],S=w-p[0];(m||d!==0)&&(bn[0]=R,Cn[0]=R,bn[1]=S,an[1]=S,an[0]=R+O,ln[0]=an[0],ln[1]=S+L,Cn[1]=ln[1]);let B;return d!==0?(B=Dn(qi(),i,r,1,1,d,-i,-r),Wt(B,bn),Wt(B,an),Wt(B,ln),Wt(B,Cn),mn(Math.min(bn[0],an[0],ln[0],Cn[0]),Math.min(bn[1],an[1],ln[1],Cn[1]),Math.max(bn[0],an[0],ln[0],Cn[0]),Math.max(bn[1],an[1],ln[1],Cn[1]),kr)):mn(Math.min(R,R+O),Math.min(S,S+L),Math.max(R,R+O),Math.max(S,S+L),kr),_&&(v=Math.round(v),w=Math.round(w)),{drawImageX:v,drawImageY:w,drawImageW:x,drawImageH:E,originX:c,originY:u,declutterBox:{minX:kr[0],minY:kr[1],maxX:kr[2],maxY:kr[3],value:y},canvasTransform:B,scale:f}}replayImageOrLabel_(e,t,i,r,s,o,a){const l=!!(o||a),c=r.declutterBox,u=e.canvas,d=a?a[2]*r.scale[0]/2:0;return c.minX-d<=u.width/t&&c.maxX+d>=0&&c.minY-d<=u.height/t&&c.maxY+d>=0&&(l&&this.replayTextBackground_(e,bn,an,ln,Cn,o,a),Xv(e,r.canvasTransform,s,i,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0}fill_(e){if(this.alignFill_){const t=Wt(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;e.save(),e.translate(t[0]%i,t[1]%i),e.rotate(this.viewRotation_)}e.fill(),this.alignFill_&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6])}drawLabelWithPointPlacement_(e,t,i,r){const s=this.textStates[t],o=this.createLabel(e,t,r,i),a=this.strokeStates[i],l=this.pixelRatio,c=Pd(Array.isArray(e)?e[0]:e,s.textAlign||Ws),u=Os[s.textBaseline||ca],d=a&&a.lineWidth?a.lineWidth:0,f=o.width/l-2*s.scale[0],_=c*f+2*(.5-c)*d,p=u*o.height/l+2*(.5-u)*d;return{label:o,anchorX:_,anchorY:p}}execute_(e,t,i,r,s,o,a,l){let c;this.pixelCoordinates_&&kn(i,this.renderedTransform_)?c=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),c=cr(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),p0(this.renderedTransform_,i));let u=0;const d=r.length;let f=0,_,p,m,y,v,w,x,E,O,L,R,S,B=0,U=0,j=null,X=null;const K=this.coordinateCache_,Ae=this.viewRotation_,ee=Math.round(Math.atan2(-i[1],i[0])*1e12)/1e12,F={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:Ae},N=this.instructions!=r||this.overlaps?0:200;let G,V,H,q;for(;u<d;){const D=r[u];switch(D[0]){case Be.BEGIN_GEOMETRY:G=D[1],q=D[3],G.getGeometry()?a!==void 0&&!ci(a,q.getExtent())?u=D[2]+1:++u:u=D[2];break;case Be.BEGIN_PATH:B>N&&(this.fill_(e),B=0),U>N&&(e.stroke(),U=0),!B&&!U&&(e.beginPath(),y=NaN,v=NaN),++u;break;case Be.CIRCLE:f=D[1];const J=c[f],ne=c[f+1],fe=c[f+2],Ne=c[f+3],le=fe-J,pe=Ne-ne,Le=Math.sqrt(le*le+pe*pe);e.moveTo(J+Le,ne),e.arc(J,ne,Le,0,2*Math.PI,!0),++u;break;case Be.CLOSE_PATH:e.closePath(),++u;break;case Be.CUSTOM:f=D[1],_=D[2];const We=D[3],Ie=D[4],be=D.length==6?D[5]:void 0;F.geometry=We,F.feature=G,u in K||(K[u]=[]);const _t=K[u];be?be(c,f,_,2,_t):(_t[0]=c[f],_t[1]=c[f+1],_t.length=2),Ie(_t,F),++u;break;case Be.DRAW_IMAGE:f=D[1],_=D[2],E=D[3],p=D[4],m=D[5];let lt=D[6];const xe=D[7],$=D[8],re=D[9],Se=D[10];let de=D[11];const rt=D[12];let ye=D[13];const se=D[14],ue=D[15];if(!E&&D.length>=20){O=D[19],L=D[20],R=D[21],S=D[22];const Qt=this.drawLabelWithPointPlacement_(O,L,R,S);E=Qt.label,D[3]=E;const zi=D[23];p=(Qt.anchorX-zi)*this.pixelRatio,D[4]=p;const Kt=D[24];m=(Qt.anchorY-Kt)*this.pixelRatio,D[5]=m,lt=E.height,D[6]=lt,ye=E.width,D[13]=ye}let Ee;D.length>25&&(Ee=D[25]);let Ye,Pe,st;D.length>17?(Ye=D[16],Pe=D[17],st=D[18]):(Ye=rr,Pe=!1,st=!1),Se&&ee?de+=Ae:!Se&&!ee&&(de-=Ae);let ct=0;for(;f<_;f+=2){if(Ee&&Ee[ct++]<ye/this.pixelRatio)continue;const Qt=this.calculateImageOrLabelDimensions_(E.width,E.height,c[f],c[f+1],ye,lt,p,m,$,re,de,rt,s,Ye,Pe||st,G),zi=[e,t,E,Qt,xe,Pe?j:null,st?X:null];if(l){if(se==="none")continue;if(se==="obstacle"){l.insert(Qt.declutterBox);continue}else{let Kt,di;if(ue){const Vt=_-f;if(!ue[Vt]){ue[Vt]=zi;continue}if(Kt=ue[Vt],delete ue[Vt],di=Od(Kt),l.collides(di))continue}if(l.collides(Qt.declutterBox))continue;Kt&&(l.insert(di),this.replayImageOrLabel_.apply(this,Kt)),l.insert(Qt.declutterBox)}}this.replayImageOrLabel_.apply(this,zi)}++u;break;case Be.DRAW_CHARS:const zt=D[1],dt=D[2],yi=D[3],zn=D[4];S=D[5];const nn=D[6],pt=D[7],rn=D[8];R=D[9];const bi=D[10];O=D[11],L=D[12];const mr=[D[13],D[13]],jn=this.textStates[L],Ci=jn.font,Bi=[jn.scale[0]*pt,jn.scale[1]*pt];let hi;Ci in this.widths_?hi=this.widths_[Ci]:(hi={},this.widths_[Ci]=hi);const vi=Wg(c,zt,dt,2),Gi=Math.abs(Bi[0])*gd(Ci,O,hi);if(zn||Gi<=vi){const Qt=this.textStates[L].textAlign,zi=(vi-Gi)*Os[Qt],Kt=Ax(c,zt,dt,2,O,zi,nn,Math.abs(Bi[0]),gd,Ci,hi,ee?0:this.viewRotation_);e:if(Kt){const di=[];let Vt,ji,sn,mt,C;if(R)for(Vt=0,ji=Kt.length;Vt<ji;++Vt){C=Kt[Vt],sn=C[4],mt=this.createLabel(sn,L,"",R),p=C[2]+(Bi[0]<0?-bi:bi),m=yi*mt.height+(.5-yi)*2*bi*Bi[1]/Bi[0]-rn;const P=this.calculateImageOrLabelDimensions_(mt.width,mt.height,C[0],C[1],mt.width,mt.height,p,m,0,0,C[3],mr,!1,rr,!1,G);if(l&&l.collides(P.declutterBox))break e;di.push([e,t,mt,P,1,null,null])}if(S)for(Vt=0,ji=Kt.length;Vt<ji;++Vt){C=Kt[Vt],sn=C[4],mt=this.createLabel(sn,L,S,""),p=C[2],m=yi*mt.height-rn;const P=this.calculateImageOrLabelDimensions_(mt.width,mt.height,C[0],C[1],mt.width,mt.height,p,m,0,0,C[3],mr,!1,rr,!1,G);if(l&&l.collides(P.declutterBox))break e;di.push([e,t,mt,P,1,null,null])}l&&l.load(di.map(Od));for(let P=0,Y=di.length;P<Y;++P)this.replayImageOrLabel_.apply(this,di[P])}}++u;break;case Be.END_GEOMETRY:if(o!==void 0){G=D[1];const Qt=o(G,q);if(Qt)return Qt}++u;break;case Be.FILL:N?B++:this.fill_(e),++u;break;case Be.MOVE_TO_LINE_TO:for(f=D[1],_=D[2],V=c[f],H=c[f+1],w=V+.5|0,x=H+.5|0,(w!==y||x!==v)&&(e.moveTo(V,H),y=w,v=x),f+=2;f<_;f+=2)V=c[f],H=c[f+1],w=V+.5|0,x=H+.5|0,(f==_-2||w!==y||x!==v)&&(e.lineTo(V,H),y=w,v=x);++u;break;case Be.SET_FILL_STYLE:j=D,this.alignFill_=D[2],B&&(this.fill_(e),B=0,U&&(e.stroke(),U=0)),e.fillStyle=D[1],++u;break;case Be.SET_STROKE_STYLE:X=D,U&&(e.stroke(),U=0),this.setStrokeStyle_(e,D),++u;break;case Be.STROKE:N?U++:e.stroke(),++u;break;default:++u;break}}B&&this.fill_(e),U&&e.stroke()}execute(e,t,i,r,s,o){this.viewRotation_=r,this.execute_(e,t,i,this.instructions,s,void 0,void 0,o)}executeHitDetection(e,t,i,r,s){return this.viewRotation_=i,this.execute_(e,1,t,this.hitDetectionInstructions,!0,r,s)}}var Cx=bx;const jl=["Polygon","Circle","LineString","Image","Text","Default"];class Ix{constructor(e,t,i,r,s,o){this.maxExtent_=e,this.overlaps_=r,this.pixelRatio_=i,this.resolution_=t,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=qi(),this.createExecutors_(s)}clip(e,t){const i=this.getClipCoords(t);e.beginPath(),e.moveTo(i[0],i[1]),e.lineTo(i[2],i[3]),e.lineTo(i[4],i[5]),e.lineTo(i[6],i[7]),e.clip()}createExecutors_(e){for(const t in e){let i=this.executorsByZIndex_[t];i===void 0&&(i={},this.executorsByZIndex_[t]=i);const r=e[t];for(const s in r){const o=r[s];i[s]=new Cx(this.resolution_,this.pixelRatio_,this.overlaps_,o)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const i=this.executorsByZIndex_[t];for(let r=0,s=e.length;r<s;++r)if(e[r]in i)return!0}return!1}forEachFeatureAtCoordinate(e,t,i,r,s,o){r=Math.round(r);const a=r*2+1,l=Dn(this.hitDetectionTransform_,r+.5,r+.5,1/t,-1/t,-i,-e[0],-e[1]),c=!this.hitDetectionContext_;c&&(this.hitDetectionContext_=ui(a,a,void 0,{willReadFrequently:!0}));const u=this.hitDetectionContext_;u.canvas.width!==a||u.canvas.height!==a?(u.canvas.width=a,u.canvas.height=a):c||u.clearRect(0,0,a,a);let d;this.renderBuffer_!==void 0&&(d=Ei(),Ls(d,e),zc(d,t*(this.renderBuffer_+r),d));const f=Sx(r);let _;function p(O,L){const R=u.getImageData(0,0,a,a).data;for(let S=0,B=f.length;S<B;S++)if(R[f[S]]>0){if(!o||_!=="Image"&&_!=="Text"||o.includes(O)){const U=(f[S]-3)/4,j=r-U%a,X=r-(U/a|0),K=s(O,L,j*j+X*X);if(K)return K}u.clearRect(0,0,a,a);break}}const m=Object.keys(this.executorsByZIndex_).map(Number);m.sort(ur);let y,v,w,x,E;for(y=m.length-1;y>=0;--y){const O=m[y].toString();for(w=this.executorsByZIndex_[O],v=jl.length-1;v>=0;--v)if(_=jl[v],x=w[_],x!==void 0&&(E=x.executeHitDetection(u,l,i,p,d),E))return E}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const i=t[0],r=t[1],s=t[2],o=t[3],a=[i,r,i,o,s,o,s,r];return cr(a,0,8,2,e,a),a}isEmpty(){return Jr(this.executorsByZIndex_)}execute(e,t,i,r,s,o,a){const l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(ur),this.maxExtent_&&(e.save(),this.clip(e,i)),o=o||jl;let c,u,d,f,_,p;for(a&&l.reverse(),c=0,u=l.length;c<u;++c){const m=l[c].toString();for(_=this.executorsByZIndex_[m],d=0,f=o.length;d<f;++d){const y=o[d];p=_[y],p!==void 0&&p.execute(e,t,i,r,s,a)}}this.maxExtent_&&e.restore()}}const Ul={};function Sx(n){if(Ul[n]!==void 0)return Ul[n];const e=n*2+1,t=n*n,i=new Array(t+1);for(let s=0;s<=n;++s)for(let o=0;o<=n;++o){const a=s*s+o*o;if(a>t)break;let l=i[a];l||(l=[],i[a]=l),l.push(((n+s)*e+(n+o))*4+3),s>0&&l.push(((n-s)*e+(n+o))*4+3),o>0&&(l.push(((n+s)*e+(n-o))*4+3),s>0&&l.push(((n-s)*e+(n-o))*4+3))}const r=[];for(let s=0,o=i.length;s<o;++s)i[s]&&r.push(...i[s]);return Ul[n]=r,r}var Fd=Ix;class Rx extends Yg{constructor(e,t,i,r,s,o,a){super(),this.context_=e,this.pixelRatio_=t,this.extent_=i,this.transform_=r,this.transformRotation_=r?Wc(Math.atan2(r[1],r[0]),10):0,this.viewRotation_=s,this.squaredTolerance_=o,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=qi()}drawImages_(e,t,i,r){if(!this.image_)return;const s=cr(e,t,i,r,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,l=o.globalAlpha;this.imageOpacity_!=1&&(o.globalAlpha=l*this.imageOpacity_);let c=this.imageRotation_;this.transformRotation_===0&&(c-=this.viewRotation_),this.imageRotateWithView_&&(c+=this.viewRotation_);for(let u=0,d=s.length;u<d;u+=2){const f=s[u]-this.imageAnchorX_,_=s[u+1]-this.imageAnchorY_;if(c!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const p=f+this.imageAnchorX_,m=_+this.imageAnchorY_;Dn(a,p,m,1,1,c,-p,-m),o.setTransform.apply(o,a),o.translate(p,m),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.setTransform(1,0,0,1,0,0)}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,f,_,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(o.globalAlpha=l)}drawText_(e,t,i,r){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=cr(e,t,i,r,this.transform_,this.pixelCoordinates_),o=this.context_;let a=this.textRotation_;for(this.transformRotation_===0&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);t<i;t+=r){const l=s[t]+this.textOffsetX_,c=s[t+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(o.translate(l-this.textOffsetX_,c-this.textOffsetY_),o.rotate(a),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.setTransform(1,0,0,1,0,0)):(this.textStrokeState_&&o.strokeText(this.text_,l,c),this.textFillState_&&o.fillText(this.text_,l,c))}}moveToLineTo_(e,t,i,r,s){const o=this.context_,a=cr(e,t,i,r,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);let l=a.length;s&&(l-=2);for(let c=2;c<l;c+=2)o.lineTo(a[c],a[c+1]);return s&&o.closePath(),i}drawRings_(e,t,i,r){for(let s=0,o=i.length;s<o;++s)t=this.moveToLineTo_(e,t,i[s],r,!0);return t}drawCircle(e){if(!!ci(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=dv(e,this.transform_,this.pixelCoordinates_),i=t[2]-t[0],r=t[3]-t[1],s=Math.sqrt(i*i+r*r),o=this.context_;o.beginPath(),o.arc(t[0],t[1],s,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const i=t.getGeometryFunction()(e);!i||!ci(this.extent_,i.getExtent())||(this.setStyle(t),this.drawGeometry(i))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let i=0,r=t.length;i<r;++i)this.drawGeometry(t[i])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),this.text_!==""&&this.drawText_(t,0,t.length,i)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),this.text_!==""&&this.drawText_(t,0,t.length,i)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ci(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(i,0,i.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(!!ci(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,r=e.getFlatCoordinates();let s=0;const o=e.getEnds(),a=e.getStride();i.beginPath();for(let l=0,c=o.length;l<c;++l)s=this.moveToLineTo_(r,s,o[l],a,!1);i.stroke()}if(this.text_!==""){const i=e.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ci(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ci(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getOrientedFlatCoordinates();let r=0;const s=e.getEndss(),o=e.getStride();t.beginPath();for(let a=0,l=s.length;a<l;++a){const c=s[a];r=this.drawRings_(i,r,c,o)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,i=this.contextFillState_;i?i.fillStyle!=e.fillStyle&&(i.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=e.lineCap&&(i.lineCap=e.lineCap,t.lineCap=e.lineCap),kn(i.lineDash,e.lineDash)||t.setLineDash(i.lineDash=e.lineDash),i.lineDashOffset!=e.lineDashOffset&&(i.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),i.lineJoin!=e.lineJoin&&(i.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),i.lineWidth!=e.lineWidth&&(i.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),i.miterLimit!=e.miterLimit&&(i.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),i.strokeStyle!=e.strokeStyle&&(i.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,i=this.contextTextState_,r=e.textAlign?e.textAlign:Ws;i?(i.font!=e.font&&(i.font=e.font,t.font=e.font),i.textAlign!=r&&(i.textAlign=r,t.textAlign=r),i.textBaseline!=e.textBaseline&&(i.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=r,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:r,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const i=e.getColor();this.fillState_={fillStyle:$i(i||gn)}}if(!t)this.strokeState_=null;else{const i=t.getColor(),r=t.getLineCap(),s=t.getLineDash(),o=t.getLineDashOffset(),a=t.getLineJoin(),l=t.getWidth(),c=t.getMiterLimit(),u=s||Gs;this.strokeState_={lineCap:r!==void 0?r:la,lineDash:this.pixelRatio_===1?u:u.map(d=>d*this.pixelRatio_),lineDashOffset:(o||zs)*this.pixelRatio_,lineJoin:a!==void 0?a:is,lineWidth:(l!==void 0?l:Ys)*this.pixelRatio_,miterLimit:c!==void 0?c:js,strokeStyle:$i(i||Us)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const i=e.getPixelRatio(this.pixelRatio_),r=e.getAnchor(),s=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*i,this.imageAnchorY_=r[1]*i,this.imageHeight_=t[1]*i,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const o=e.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/i,o[1]*this.pixelRatio_/i],this.imageWidth_=t[0]*i}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const _=t.getColor();this.textFillState_={fillStyle:$i(_||gn)}}const i=e.getStroke();if(!i)this.textStrokeState_=null;else{const _=i.getColor(),p=i.getLineCap(),m=i.getLineDash(),y=i.getLineDashOffset(),v=i.getLineJoin(),w=i.getWidth(),x=i.getMiterLimit();this.textStrokeState_={lineCap:p!==void 0?p:la,lineDash:m||Gs,lineDashOffset:y||zs,lineJoin:v!==void 0?v:is,lineWidth:w!==void 0?w:Ys,miterLimit:x!==void 0?x:js,strokeStyle:$i(_||Us)}}const r=e.getFont(),s=e.getOffsetX(),o=e.getOffsetY(),a=e.getRotateWithView(),l=e.getRotation(),c=e.getScaleArray(),u=e.getText(),d=e.getTextAlign(),f=e.getTextBaseline();this.textState_={font:r!==void 0?r:_g,textAlign:d!==void 0?d:Ws,textBaseline:f!==void 0?f:ca},this.text_=u!==void 0?Array.isArray(u)?u.reduce((_,p,m)=>_+=m%2?" ":p,""):u:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=o!==void 0?this.pixelRatio_*o:0,this.textRotateWithView_=a!==void 0?a:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*c[0],this.pixelRatio_*c[1]]}}}var Tx=Rx;const Vi=.5;function Lx(n,e,t,i,r,s,o){const a=n[0]*Vi,l=n[1]*Vi,c=ui(a,l);c.imageSmoothingEnabled=!1;const u=c.canvas,d=new Tx(c,Vi,r,null,o),f=t.length,_=Math.floor((256*256*256-1)/f),p={};for(let y=1;y<=f;++y){const v=t[y-1],w=v.getStyleFunction()||i;if(!i)continue;let x=w(v,s);if(!x)continue;Array.isArray(x)||(x=[x]);const O=(y*_).toString(16).padStart(7,"#00000");for(let L=0,R=x.length;L<R;++L){const S=x[L],B=S.getGeometryFunction()(v);if(!B||!ci(r,B.getExtent()))continue;const U=S.clone(),j=U.getFill();j&&j.setColor(O);const X=U.getStroke();X&&(X.setColor(O),X.setLineDash(null)),U.setText(void 0);const K=S.getImage();if(K&&K.getOpacity()!==0){const N=K.getImageSize();if(!N)continue;const G=ui(N[0],N[1],void 0,{alpha:!1}),V=G.canvas;G.fillStyle=O,G.fillRect(0,0,V.width,V.height),U.setImage(new Rg({img:V,imgSize:N,anchor:K.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:K.getOrigin(),opacity:1,size:K.getSize(),scale:K.getScale(),rotation:K.getRotation(),rotateWithView:K.getRotateWithView()}))}const Ae=U.getZIndex()||0;let ee=p[Ae];ee||(ee={},p[Ae]=ee,ee.Polygon=[],ee.Circle=[],ee.LineString=[],ee.Point=[]);const F=B.getType();if(F==="GeometryCollection"){const N=B.getGeometriesArrayRecursive();for(let G=0,V=N.length;G<V;++G){const H=N[G];ee[H.getType().replace("Multi","")].push(H,U)}}else ee[F.replace("Multi","")].push(B,U)}}const m=Object.keys(p).map(Number).sort(ur);for(let y=0,v=m.length;y<v;++y){const w=p[m[y]];for(const x in w){const E=w[x];for(let O=0,L=E.length;O<L;O+=2){d.setStyle(E[O+1]);for(let R=0,S=e.length;R<S;++R)d.setTransform(e[R]),d.drawGeometry(E[O])}}}return c.getImageData(0,0,u.width,u.height)}function Mx(n,e,t){const i=[];if(t){const r=Math.floor(Math.round(n[0])*Vi),s=Math.floor(Math.round(n[1])*Vi),o=(Pt(r,0,t.width-1)+Pt(s,0,t.height-1)*t.width)*4,a=t.data[o],l=t.data[o+1],u=t.data[o+2]+256*(l+256*a),d=Math.floor((256*256*256-1)/e.length);u&&u%d===0&&i.push(e[u/d-1])}return i}const Ox=.5,Xg={Point:jx,LineString:Bx,Polygon:Wx,MultiPoint:Ux,MultiLineString:Gx,MultiPolygon:zx,GeometryCollection:Nx,Circle:Dx};function Px(n,e){return parseInt(ht(n),10)-parseInt(ht(e),10)}function Fx(n,e){const t=xc(n,e);return t*t}function xc(n,e){return Ox*n/e}function Dx(n,e,t,i,r){const s=t.getFill(),o=t.getStroke();if(s||o){const l=n.getBuilder(t.getZIndex(),"Circle");l.setFillStrokeStyle(s,o),l.drawCircle(e,i)}const a=t.getText();if(a&&a.getText()){const l=(r||n).getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,i)}}function Dd(n,e,t,i,r,s,o){let a=!1;const l=t.getImage();if(l){const c=l.getImageState();c==Nt.LOADED||c==Nt.ERROR?l.unlistenImageChange(r):(c==Nt.IDLE&&l.load(),l.listenImageChange(r),a=!0)}return kx(n,e,t,i,s,o),a}function kx(n,e,t,i,r,s){const o=t.getGeometryFunction()(e);if(!o)return;const a=o.simplifyTransformed(i,r);if(t.getRenderer())Hg(n,a,t,e);else{const c=Xg[a.getType()];c(n,a,t,e,s)}}function Hg(n,e,t,i){if(e.getType()=="GeometryCollection"){const s=e.getGeometries();for(let o=0,a=s.length;o<a;++o)Hg(n,s[o],t,i);return}n.getBuilder(t.getZIndex(),"Default").drawCustom(e,i,t.getRenderer(),t.getHitDetectionRenderer())}function Nx(n,e,t,i,r){const s=e.getGeometriesArray();let o,a;for(o=0,a=s.length;o<a;++o){const l=Xg[s[o].getType()];l(n,s[o],t,i,r)}}function Bx(n,e,t,i,r){const s=t.getStroke();if(s){const a=n.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawLineString(e,i)}const o=t.getText();if(o&&o.getText()){const a=(r||n).getBuilder(t.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,i)}}function Gx(n,e,t,i,r){const s=t.getStroke();if(s){const a=n.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawMultiLineString(e,i)}const o=t.getText();if(o&&o.getText()){const a=(r||n).getBuilder(t.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,i)}}function zx(n,e,t,i,r){const s=t.getFill(),o=t.getStroke();if(o||s){const l=n.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawMultiPolygon(e,i)}const a=t.getText();if(a&&a.getText()){const l=(r||n).getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,i)}}function jx(n,e,t,i,r){const s=t.getImage(),o=t.getText();let a;if(s){if(s.getImageState()!=Nt.LOADED)return;let l=n;if(r){const u=s.getDeclutterMode();if(u!=="none")if(l=r,u==="obstacle"){const d=n.getBuilder(t.getZIndex(),"Image");d.setImageStyle(s,a),d.drawPoint(e,i)}else o&&o.getText()&&(a={})}const c=l.getBuilder(t.getZIndex(),"Image");c.setImageStyle(s,a),c.drawPoint(e,i)}if(o&&o.getText()){let l=n;r&&(l=r);const c=l.getBuilder(t.getZIndex(),"Text");c.setTextStyle(o,a),c.drawText(e,i)}}function Ux(n,e,t,i,r){const s=t.getImage(),o=t.getText();let a;if(s){if(s.getImageState()!=Nt.LOADED)return;let l=n;if(r){const u=s.getDeclutterMode();if(u!=="none")if(l=r,u==="obstacle"){const d=n.getBuilder(t.getZIndex(),"Image");d.setImageStyle(s,a),d.drawMultiPoint(e,i)}else o&&o.getText()&&(a={})}const c=l.getBuilder(t.getZIndex(),"Image");c.setImageStyle(s,a),c.drawMultiPoint(e,i)}if(o&&o.getText()){let l=n;r&&(l=r);const c=l.getBuilder(t.getZIndex(),"Text");c.setTextStyle(o,a),c.drawText(e,i)}}function Wx(n,e,t,i,r){const s=t.getFill(),o=t.getStroke();if(s||o){const l=n.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawPolygon(e,i)}const a=t.getText();if(a&&a.getText()){const l=(r||n).getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,i)}}class Yx extends jg{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Ei(),this.wrappedRenderedExtent_=Ei(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(e,t,i){const r=t.extent,s=t.viewState,o=s.center,a=s.resolution,l=s.projection,c=s.rotation,u=l.getExtent(),d=this.getLayer().getSource(),f=t.pixelRatio,_=t.viewHints,p=!(_[si.ANIMATING]||_[si.INTERACTING]),m=this.compositionContext_,y=Math.round(t.size[0]*f),v=Math.round(t.size[1]*f),w=d.getWrapX()&&l.canWrapX(),x=w?Et(u):null,E=w?Math.ceil((r[2]-u[2])/x)+1:1;let O=w?Math.floor((r[0]-u[0])/x):0;do{const L=this.getRenderTransform(o,a,c,f,y,v,O*x);e.execute(m,1,L,c,p,void 0,i)}while(++O<E)}setupCompositionContext_(){if(this.opacity_!==1){const e=ui(this.context.canvas.width,this.context.canvas.height,Id);this.compositionContext_=e}else this.compositionContext_=this.context}releaseCompositionContext_(){if(this.opacity_!==1){const e=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=e,ka(this.compositionContext_),Id.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(e){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,e,e.declutterTree),this.releaseCompositionContext_())}renderFrame(e,t){const i=e.pixelRatio,r=e.layerStatesArray[e.layerIndex];m0(this.pixelTransform,1/i,1/i),Gc(this.inversePixelTransform,this.pixelTransform);const s=jf(this.pixelTransform);this.useContainer(t,s,this.getBackground(e));const o=this.context,a=o.canvas,l=this.replayGroup_,c=this.declutterExecutorGroup;if((!l||l.isEmpty())&&(!c||c.isEmpty()))return null;const u=Math.round(e.size[0]*i),d=Math.round(e.size[1]*i);a.width!=u||a.height!=d?(a.width=u,a.height=d,a.style.transform!==s&&(a.style.transform=s)):this.containerReused||o.clearRect(0,0,u,d),this.preRender(o,e);const f=e.viewState;f.projection,this.opacity_=r.opacity,this.setupCompositionContext_();let _=!1,p=!0;if(r.extent&&this.clipping){const m=Tn(r.extent);p=ci(m,e.extent),_=p&&!Hr(m,e.extent),_&&this.clipUnrotated(this.compositionContext_,e,m)}return p&&this.renderWorlds(l,e),_&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(o,e),this.renderedRotation_!==f.rotation&&(this.renderedRotation_=f.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(e){return new Promise(t=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const i=[this.context.canvas.width,this.context.canvas.height];Wt(this.pixelTransform,i);const r=this.renderedCenter_,s=this.renderedResolution_,o=this.renderedRotation_,a=this.renderedProjection_,l=this.wrappedRenderedExtent_,c=this.getLayer(),u=[],d=i[0]*Vi,f=i[1]*Vi;u.push(this.getRenderTransform(r,s,o,Vi,d,f,0).slice());const _=c.getSource(),p=a.getExtent();if(_.getWrapX()&&a.canWrapX()&&!Hr(p,l)){let m=l[0];const y=Et(p);let v=0,w;for(;m<p[0];)--v,w=y*v,u.push(this.getRenderTransform(r,s,o,Vi,d,f,w).slice()),m+=y;for(v=0,m=l[2];m>p[2];)++v,w=y*v,u.push(this.getRenderTransform(r,s,o,Vi,d,f,w).slice()),m-=y}this.hitDetectionImageData_=Lx(i,u,this.renderedFeatures_,c.getStyleFunction(),l,s,o)}t(Mx(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,i,r,s){if(!this.replayGroup_)return;const o=t.viewState.resolution,a=t.viewState.rotation,l=this.getLayer(),c={},u=function(_,p,m){const y=ht(_),v=c[y];if(v){if(v!==!0&&m<v.distanceSq){if(m===0)return c[y]=!0,s.splice(s.lastIndexOf(v),1),r(_,l,p);v.geometry=p,v.distanceSq=m}}else{if(m===0)return c[y]=!0,r(_,l,p);s.push(c[y]={feature:_,layer:l,geometry:p,distanceSq:m,callback:r})}};let d;const f=[this.replayGroup_];return this.declutterExecutorGroup&&f.push(this.declutterExecutorGroup),f.some(_=>d=_.forEachFeatureAtCoordinate(e,o,a,i,u,_===this.declutterExecutorGroup&&t.declutterTree?t.declutterTree.all().map(p=>p.value):null)),d}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),i=t.getSource();if(!i)return!1;const r=e.viewHints[si.ANIMATING],s=e.viewHints[si.INTERACTING],o=t.getUpdateWhileAnimating(),a=t.getUpdateWhileInteracting();if(this.ready&&!o&&r||!a&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=e.extent,c=e.viewState,u=c.projection,d=c.resolution,f=e.pixelRatio,_=t.getRevision(),p=t.getRenderBuffer();let m=t.getRenderOrder();m===void 0&&(m=Px);const y=c.center.slice(),v=zc(l,p*d),w=v.slice(),x=[v.slice()],E=u.getExtent();if(i.getWrapX()&&u.canWrapX()&&!Hr(E,e.extent)){const ee=Et(E),F=Math.max(Et(v)/2,ee);v[0]=E[0]-F,v[2]=E[2]+F,qf(y,u);const N=Qf(x[0],u);N[0]<E[0]&&N[2]<E[2]?x.push([N[0]+ee,N[1],N[2]+ee,N[3]]):N[0]>E[0]&&N[2]>E[2]&&x.push([N[0]-ee,N[1],N[2]-ee,N[3]])}if(this.ready&&this.renderedResolution_==d&&this.renderedRevision_==_&&this.renderedRenderOrder_==m&&Hr(this.wrappedRenderedExtent_,v))return kn(this.renderedExtent_,w)||(this.hitDetectionImageData_=null,this.renderedExtent_=w),this.renderedCenter_=y,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const O=new Md(xc(d,f),v,d,f);let L;this.getLayer().getDeclutter()&&(L=new Md(xc(d,f),v,d,f));let R;for(let ee=0,F=x.length;ee<F;++ee)i.loadFeatures(x[ee],d,u);const S=Fx(d,f);let B=!0;const U=ee=>{let F;const N=ee.getStyleFunction()||t.getStyleFunction();if(N&&(F=N(ee,d)),F){const G=this.renderFeature(ee,S,F,O,R,L);B=B&&!G}},j=Zc(v),X=i.getFeaturesInExtent(j);m&&X.sort(m);for(let ee=0,F=X.length;ee<F;++ee)U(X[ee]);this.renderedFeatures_=X,this.ready=B;const K=O.finish(),Ae=new Fd(v,d,f,i.getOverlaps(),K,t.getRenderBuffer());return L&&(this.declutterExecutorGroup=new Fd(v,d,f,i.getOverlaps(),L.finish(),t.getRenderBuffer())),this.renderedResolution_=d,this.renderedRevision_=_,this.renderedRenderOrder_=m,this.renderedExtent_=w,this.wrappedRenderedExtent_=v,this.renderedCenter_=y,this.renderedProjection_=u,this.replayGroup_=Ae,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,i,r,s,o){if(!i)return!1;let a=!1;if(Array.isArray(i))for(let l=0,c=i.length;l<c;++l)a=Dd(r,e,i[l],t,this.boundHandleStyleImageChange_,s,o)||a;else a=Dd(r,e,i,t,this.boundHandleStyleImageChange_,s,o);return a}}var Xx=Yx;class Hx extends lx{constructor(e){super(e)}createRenderer(){return new Xx(this)}}var tn=Hx;class Qg{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let i=t.dataProjection?Tt(t.dataProjection):this.readProjection(e);t.extent&&i&&i.getUnits()==="tile-pixels"&&(i=Tt(i),i.setWorldExtent(t.extent)),t={dataProjection:i,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},e)}getType(){return Ge()}readFeature(e,t){return Ge()}readFeatures(e,t){return Ge()}readGeometry(e,t){return Ge()}readProjection(e){return Ge()}writeFeature(e,t){return Ge()}writeFeatures(e,t){return Ge()}writeGeometry(e,t){return Ge()}}function Gn(n,e,t){const i=t?Tt(t.featureProjection):null,r=t?Tt(t.dataProjection):null;let s;if(i&&r&&!tr(i,r)?s=(e?n.clone():n).transform(e?i:r,e?r:i):s=n,e&&t&&t.decimals!==void 0){const o=Math.pow(10,t.decimals),a=function(l){for(let c=0,u=l.length;c<u;++c)l[c]=Math.round(l[c]*o)/o;return l};s===n&&(s=n.clone()),s.applyTransform(a)}return s}class ga extends pr{constructor(e,t,i){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&i)this.setFlatCoordinates(t,e),this.ends_=i;else{let r=this.getLayout();const s=e,o=[],a=[];for(let l=0,c=s.length;l<c;++l){const u=s[l];l===0&&(r=u.getLayout()),Pi(o,u.getFlatCoordinates()),a.push(o.length)}this.setFlatCoordinates(r,o),this.ends_=a}}appendLineString(e){this.flatCoordinates?Pi(this.flatCoordinates,e.getFlatCoordinates().slice()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new ga(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<fr(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(tu(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),nu(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,i,r))}getCoordinateAtM(e,t,i){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,i=i!==void 0?i:!1,rx(this.flatCoordinates,0,this.ends_,this.stride,e,t,i))}getCoordinates(){return Bs(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new fa(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,i=this.layout,r=[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=t[o],c=new fa(e.slice(s,l),i);r.push(c),s=l}return r}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let i=0;const r=this.ends_,s=this.stride;for(let o=0,a=r.length;o<a;++o){const l=r[o],c=Ug(t,i,l,s,.5);Pi(e,c),i=l}return e}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=_v(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,i),new ga(t,"XY",i)}getType(){return"MultiLineString"}intersectsExtent(e){return bv(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=ru(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}var Kg=ga;class bu extends pr{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){this.flatCoordinates?Pi(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.changed()}clone(){const e=new bu(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){if(r<fr(this.getExtent(),e,t))return r;const s=this.flatCoordinates,o=this.stride;for(let a=0,l=s.length;a<l;a+=o){const c=or(e,t,s[a],s[a+1]);if(c<r){r=c;for(let u=0;u<o;++u)i[u]=s[a+u];i.length=o}}return r}getCoordinates(){return Ln(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return e<0||t<=e?null:new Fi(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,i=this.stride,r=[];for(let s=0,o=e.length;s<o;s+=i){const a=new Fi(e.slice(s,s+i),t);r.push(a)}return r}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,i=this.stride;for(let r=0,s=t.length;r<s;r+=i){const o=t[r],a=t[r+1];if(jc(e,o,a))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Pa(this.flatCoordinates,0,e,this.stride),this.changed()}}var Vg=bu;function Qx(n,e,t,i){const r=[];let s=Ei();for(let o=0,a=t.length;o<a;++o){const l=t[o];s=Wf(n,e,l[0],i),r.push((s[0]+s[2])/2,(s[1]+s[3])/2),e=l[l.length-1]}return r}class pa extends pr{constructor(e,t,i){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!i&&!Array.isArray(e[0])){let r=this.getLayout();const s=e,o=[],a=[];for(let l=0,c=s.length;l<c;++l){const u=s[l];l===0&&(r=u.getLayout());const d=o.length,f=u.getEnds();for(let _=0,p=f.length;_<p;++_)f[_]+=d;Pi(o,u.getFlatCoordinates()),a.push(f)}t=r,e=o,i=a}t!==void 0&&i?(this.setFlatCoordinates(t,e),this.endss_=i):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const i=this.flatCoordinates.length;Pi(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let r=0,s=t.length;r<s;++r)t[r]+=i}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let r=0;r<e;++r)t[r]=this.endss_[r].slice();const i=new pa(this.flatCoordinates.slice(),this.layout,t);return i.applyProperties(this),i}closestPointXY(e,t,i,r){return r<fr(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(fv(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),gv(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,i,r))}containsXY(e,t){return xv(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return wv(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),cd(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,fc(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=Qx(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=Ev(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new Vg(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;Sv(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=cd(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=vv(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,i),new pa(t,"XY",i)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const s=this.endss_[e-1];t=s[s.length-1]}const i=this.endss_[e].slice(),r=i[i.length-1];if(t!==0)for(let s=0,o=i.length;s<o;++s)i[s]-=t;return new aa(this.flatCoordinates.slice(t,r),this.layout,i)}getPolygons(){const e=this.layout,t=this.flatCoordinates,i=this.endss_,r=[];let s=0;for(let o=0,a=i.length;o<a;++o){const l=i[o].slice(),c=l[l.length-1];if(s!==0)for(let d=0,f=l.length;d<f;++d)l[d]-=s;const u=new aa(t.slice(s,c),e,l);r.push(u),s=c}return r}getType(){return"MultiPolygon"}intersectsExtent(e){return Cv(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const i=mv(this.flatCoordinates,0,e,this.stride,this.endss_);if(i.length===0)this.flatCoordinates.length=0;else{const r=i[i.length-1];this.flatCoordinates.length=r.length===0?0:r[r.length-1]}this.changed()}}var Kx=pa;class ma extends sg{constructor(e){super(),this.geometries_=e||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(bt),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(!!this.geometries_)for(let e=0,t=this.geometries_.length;e<t;++e)this.changeEventsKeys_.push(nt(this.geometries_[e],Ue.CHANGE,this.changed,this))}clone(){const e=new ma(null);return e.setGeometries(this.geometries_),e.applyProperties(this),e}closestPointXY(e,t,i,r){if(r<fr(this.getExtent(),e,t))return r;const s=this.geometries_;for(let o=0,a=s.length;o<a;++o)r=s[o].closestPointXY(e,t,i,r);return r}containsXY(e,t){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)if(i[r].containsXY(e,t))return!0;return!1}computeExtent(e){Vs(e);const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)Yf(e,t[i].getExtent());return e}getGeometries(){return kd(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)t[i].getType()===this.getType()?e=e.concat(t[i].getGeometriesArrayRecursive()):e.push(t[i]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],i=this.geometries_;let r=!1;for(let s=0,o=i.length;s<o;++s){const a=i[s],l=a.getSimplifiedGeometry(e);t.push(l),l!==a&&(r=!0)}if(r){const s=new ma(null);return s.setGeometriesArray(t),s}return this.simplifiedGeometryMaxMinSquaredTolerance=e,this}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)if(t[i].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)i[r].rotate(e,t);this.changed()}scale(e,t,i){i||(i=hr(this.getExtent()));const r=this.geometries_;for(let s=0,o=r.length;s<o;++s)r[s].scale(e,t,i);this.changed()}setGeometries(e){this.setGeometriesArray(kd(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)t[i].applyTransform(e);this.changed()}translate(e,t){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)i[r].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function kd(n){const e=[];for(let t=0,i=n.length;t<i;++t)e.push(n[t].clone());return e}var Vx=ma;class Zx extends Qg{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(Yo(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(Yo(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return Ge()}readFeaturesFromObject(e,t){return Ge()}readGeometry(e,t){return this.readGeometryFromObject(Yo(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return Ge()}readProjection(e){return this.readProjectionFromObject(Yo(e))}readProjectionFromObject(e){return Ge()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return Ge()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return Ge()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return Ge()}}function Yo(n){if(typeof n=="string"){const e=JSON.parse(n);return e||null}else if(n!==null)return n;return null}var $x=Zx;class qx extends $x{constructor(e){e=e||{},super(),this.dataProjection=Tt(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=Tt(e.featureProjection)),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let i=null;e.type==="Feature"?i=e:i={type:"Feature",geometry:e,properties:null};const r=Ec(i.geometry,t),s=new xi;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in i!==void 0&&s.setGeometryName(i.geometry_name),s.setGeometry(r),"id"in i&&s.setId(i.id),i.properties&&s.setProperties(i.properties,!0),s}readFeaturesFromObject(e,t){const i=e;let r=null;if(i.type==="FeatureCollection"){const s=e;r=[];const o=s.features;for(let a=0,l=o.length;a<l;++a)r.push(this.readFeatureFromObject(o[a],t))}else r=[this.readFeatureFromObject(e,t)];return r}readGeometryFromObject(e,t){return Ec(e,t)}readProjectionFromObject(e){const t=e.crs;let i;return t?t.type=="name"?i=Tt(t.properties.name):t.type==="EPSG"?i=Tt("EPSG:"+t.properties.code):Ve(!1,36):i=this.dataProjection,i}writeFeatureObject(e,t){t=this.adaptOptions(t);const i={type:"Feature",geometry:null,properties:null},r=e.getId();if(r!==void 0&&(i.id=r),!e.hasProperties())return i;const s=e.getProperties(),o=e.getGeometry();return o&&(i.geometry=bc(o,t),delete s[e.getGeometryName()]),Jr(s)||(i.properties=s),i}writeFeaturesObject(e,t){t=this.adaptOptions(t);const i=[];for(let r=0,s=e.length;r<s;++r)i.push(this.writeFeatureObject(e[r],t));return{type:"FeatureCollection",features:i}}writeGeometryObject(e,t){return bc(e,this.adaptOptions(t))}}function Ec(n,e){if(!n)return null;let t;switch(n.type){case"Point":{t=eE(n);break}case"LineString":{t=tE(n);break}case"Polygon":{t=sE(n);break}case"MultiPoint":{t=nE(n);break}case"MultiLineString":{t=iE(n);break}case"MultiPolygon":{t=rE(n);break}case"GeometryCollection":{t=Jx(n);break}default:throw new Error("Unsupported GeoJSON type: "+n.type)}return Gn(t,!1,e)}function Jx(n,e){const t=n.geometries.map(function(i){return Ec(i,e)});return new Vx(t)}function eE(n){return new Fi(n.coordinates)}function tE(n){return new fa(n.coordinates)}function iE(n){return new Kg(n.coordinates)}function nE(n){return new Vg(n.coordinates)}function rE(n){return new Kx(n.coordinates)}function sE(n){return new aa(n.coordinates)}function bc(n,e){n=Gn(n,!0,e);const t=n.getType();let i;switch(t){case"Point":{i=hE(n);break}case"LineString":{i=aE(n);break}case"Polygon":{i=dE(n,e);break}case"MultiPoint":{i=cE(n);break}case"MultiLineString":{i=lE(n);break}case"MultiPolygon":{i=uE(n,e);break}case"GeometryCollection":{i=oE(n,e);break}case"Circle":{i={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return i}function oE(n,e){e=Object.assign({},e),delete e.featureProjection;const t=n.getGeometriesArray().map(function(i){return bc(i,e)});return{type:"GeometryCollection",geometries:t}}function aE(n,e){return{type:"LineString",coordinates:n.getCoordinates()}}function lE(n,e){return{type:"MultiLineString",coordinates:n.getCoordinates()}}function cE(n,e){return{type:"MultiPoint",coordinates:n.getCoordinates()}}function uE(n,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:n.getCoordinates(t)}}function hE(n,e){return{type:"Point",coordinates:n.getCoordinates()}}function dE(n,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:n.getCoordinates(t)}}var rs=qx;const Wl="units",fE=[1,2,5],Cs=25.4/.28;class gE extends Ba{constructor(e){e=e||{};const t=document.createElement("div");t.style.pointerEvents="none",super({element:t,render:e.render,target:e.target}),this.on,this.once,this.un;const i=e.className!==void 0?e.className:e.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=i+"-inner",this.element.className=i+" "+$s,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=e.minWidth!==void 0?e.minWidth:64,this.maxWidth_=e.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(Wl,this.handleUnitsChanged_),this.setUnits(e.units||"metric"),this.scaleBar_=e.bar||!1,this.scaleBarSteps_=e.steps||4,this.scaleBarText_=e.text||!1,this.dpi_=e.dpi||void 0}getUnits(){return this.get(Wl)}handleUnitsChanged_(){this.updateElement_()}setUnits(e){this.set(Wl,e)}setDpi(e){this.dpi_=e}updateElement_(){const e=this.viewState_;if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=e.center,i=e.projection,r=this.getUnits(),s=r=="degrees"?"degrees":"m";let o=ra(i,e.resolution,t,s);const a=this.minWidth_*(this.dpi_||Cs)/Cs,l=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||Cs)/Cs:void 0;let c=a*o,u="";if(r=="degrees"){const x=es.degrees;c*=x,c<x/60?(u="\u2033",o*=3600):c<x?(u="\u2032",o*=60):u="\xB0"}else r=="imperial"?c<.9144?(u="in",o/=.0254):c<1609.344?(u="ft",o/=.3048):(u="mi",o/=1609.344):r=="nautical"?(o/=1852,u="NM"):r=="metric"?c<.001?(u="\u03BCm",o*=1e6):c<1?(u="mm",o*=1e3):c<1e3?u="m":(u="km",o/=1e3):r=="us"?c<.9144?(u="in",o*=39.37):c<1609.344?(u="ft",o/=.30480061):(u="mi",o/=1609.3472):Ve(!1,33);let d=3*Math.floor(Math.log(a*o)/Math.log(10)),f,_,p,m,y,v;for(;;){p=Math.floor(d/3);const x=Math.pow(10,p);if(f=fE[(d%3+3)%3]*x,_=Math.round(f/o),isNaN(_)){this.element.style.display="none",this.renderedVisible_=!1;return}if(l!==void 0&&_>=l){f=m,_=y,p=v;break}else if(_>=a)break;m=f,y=_,v=p,++d}const w=this.scaleBar_?this.createScaleBar(_,f,u):f.toFixed(p<0?-p:0)+" "+u;this.renderedHTML_!=w&&(this.innerElement_.innerHTML=w,this.renderedHTML_=w),this.renderedWidth_!=_&&(this.innerElement_.style.width=_+"px",this.renderedWidth_=_),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(e,t,i){const r=this.getScaleForResolution(),s=r<1?Math.round(1/r).toLocaleString()+" : 1":"1 : "+Math.round(r).toLocaleString(),o=this.scaleBarSteps_,a=e/o,l=[this.createMarker("absolute")];for(let u=0;u<o;++u){const d=u%2===0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";l.push(`<div><div class="ol-scale-singlebar ${d}" style="width: ${a}px;"></div>`+this.createMarker("relative")+(u%2===0||o===2?this.createStepText(u,e,!1,t,i):"")+"</div>")}return l.push(this.createStepText(o,e,!0,t,i)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${e}px;">`+s+"</div>":"")+l.join("")}createMarker(e){return`<div class="ol-scale-step-marker" style="position: ${e}; top: ${e==="absolute"?3:-10}px;"></div>`}createStepText(e,t,i,r,s){const a=(e===0?0:Math.round(r/this.scaleBarSteps_*e*100)/100)+(e===0?"":" "+s),l=e===0?-3:t/this.scaleBarSteps_*-1,c=e===0?0:t/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${l}px;text-align: ${e===0?"left":"center"};min-width: ${c}px;left: ${i?t+"px":"unset"};">`+a+"</div>"}getScaleForResolution(){const e=ra(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m"),t=this.dpi_||Cs,i=1e3/25.4;return e*i*t}render(e){const t=e.frameState;t?this.viewState_=t.viewState:this.viewState_=null,this.updateElement_()}}var Wa=gE;const Nd="http://www.w3.org/2001/XMLSchema-instance";function Cu(n,e){return no().createElementNS(n,e)}function Ya(n,e){return Zg(n,e,[]).join("")}function Zg(n,e,t){if(n.nodeType==Node.CDATA_SECTION_NODE||n.nodeType==Node.TEXT_NODE)e?t.push(String(n.nodeValue).replace(/(\r\n|\r|\n)/g,"")):t.push(n.nodeValue);else{let i;for(i=n.firstChild;i;i=i.nextSibling)Zg(i,e,t)}return t}function Xo(n){return"documentElement"in n}function Ho(n){return new DOMParser().parseFromString(n,"application/xml")}function Yl(n,e){return function(t,i){const r=n.call(e!==void 0?e:this,t,i);r!==void 0&&i[i.length-1].push(r)}}function et(n,e,t){return function(i,r){const s=n.call(t!==void 0?t:this,i,r);if(s!==void 0){const o=r[r.length-1],a=e!==void 0?e:i.localName;o[a]=s}}}function Xe(n,e){return function(t,i,r){n.call(e!==void 0?e:this,t,i,r),r[r.length-1].node.appendChild(t)}}function $g(n,e){let t,i;return function(r,s,o){if(t===void 0){t={};const a={};a[r.localName]=n,t[r.namespaceURI]=a,i=Iu(r.localName)}qg(t,i,s,o)}}function Iu(n,e){return function(t,i,r){const o=i[i.length-1].node;let a=n;a===void 0&&(a=r);const l=e!==void 0?e:o.namespaceURI;return Cu(l,a)}}const Xa=Iu();function Su(n,e){const t=e.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=n[e[r]];return i}function Ht(n,e,t){t=t!==void 0?t:{};let i,r;for(i=0,r=n.length;i<r;++i)t[n[i]]=e;return t}function Ru(n,e,t,i){let r;for(r=e.firstElementChild;r;r=r.nextElementSibling){const s=n[r.namespaceURI];if(s!==void 0){const o=s[r.localName];o!==void 0&&o.call(i,r,t)}}}function ss(n,e,t,i,r){return i.push(n),Ru(e,t,i,r),i.pop()}function qg(n,e,t,i,r,s){const o=(r!==void 0?r:t).length;let a,l;for(let c=0;c<o;++c)a=t[c],a!==void 0&&(l=e.call(s!==void 0?s:this,a,i,r!==void 0?r[c]:void 0),l!==void 0&&n[l.namespaceURI][l.localName].call(s,l,a,i))}function os(n,e,t,i,r,s,o){return r.push(n),qg(e,t,i,r,s,o),r.pop()}let Xl;function pE(){return Xl===void 0&&typeof XMLSerializer!="undefined"&&(Xl=new XMLSerializer),Xl}let Hl;function no(){return Hl===void 0&&typeof document!="undefined"&&(Hl=document.implementation.createDocument("","",null)),Hl}class mE extends Qg{constructor(){super(),this.xmlSerializer_=pE()}getType(){return"xml"}readFeature(e,t){if(e){if(typeof e=="string"){const i=Ho(e);return this.readFeatureFromDocument(i,t)}else if(Xo(e))return this.readFeatureFromDocument(e,t)}else return null;return this.readFeatureFromNode(e,t)}readFeatureFromDocument(e,t){const i=this.readFeaturesFromDocument(e,t);return i.length>0?i[0]:null}readFeatureFromNode(e,t){return null}readFeatures(e,t){if(e){if(typeof e=="string"){const i=Ho(e);return this.readFeaturesFromDocument(i,t)}else if(Xo(e))return this.readFeaturesFromDocument(e,t)}else return[];return this.readFeaturesFromNode(e,t)}readFeaturesFromDocument(e,t){const i=[];for(let r=e.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&Pi(i,this.readFeaturesFromNode(r,t));return i}readFeaturesFromNode(e,t){return Ge()}readGeometry(e,t){if(e){if(typeof e=="string"){const i=Ho(e);return this.readGeometryFromDocument(i,t)}else if(Xo(e))return this.readGeometryFromDocument(e,t)}else return null;return this.readGeometryFromNode(e,t)}readGeometryFromDocument(e,t){return null}readGeometryFromNode(e,t){return null}readProjection(e){if(e){if(typeof e=="string"){const t=Ho(e);return this.readProjectionFromDocument(t)}else if(Xo(e))return this.readProjectionFromDocument(e)}else return null;return this.readProjectionFromNode(e)}readProjectionFromDocument(e){return this.dataProjection}readProjectionFromNode(e){return this.dataProjection}writeFeature(e,t){const i=this.writeFeatureNode(e,t);return this.xmlSerializer_.serializeToString(i)}writeFeatureNode(e,t){return null}writeFeatures(e,t){const i=this.writeFeaturesNode(e,t);return this.xmlSerializer_.serializeToString(i)}writeFeaturesNode(e,t){return null}writeGeometry(e,t){const i=this.writeGeometryNode(e,t);return this.xmlSerializer_.serializeToString(i)}writeGeometryNode(e,t){return null}}var _E=mE;function Tu(n){const e=Ya(n,!1),t=Date.parse(e);return isNaN(t)?void 0:t/1e3}function hn(n){const e=Ya(n,!1);return yE(e)}function yE(n){const e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(n);if(e)return parseFloat(e[1])}function _a(n){const e=Ya(n,!1);return vE(e)}function vE(n){const e=/^\s*(\d+)\s*$/.exec(n);if(e)return parseInt(e[1],10)}function Dt(n){return Ya(n,!1).trim()}function wE(n,e){const t=new Date(e*1e3),i=t.getUTCFullYear()+"-"+xs(t.getUTCMonth()+1,2)+"-"+xs(t.getUTCDate(),2)+"T"+xs(t.getUTCHours(),2)+":"+xs(t.getUTCMinutes(),2)+":"+xs(t.getUTCSeconds(),2)+"Z";n.appendChild(no().createTextNode(i))}function Jn(n,e){const t=e.toPrecision();n.appendChild(no().createTextNode(t))}function ya(n,e){const t=e.toString();n.appendChild(no().createTextNode(t))}function kt(n,e){n.appendChild(no().createTextNode(e))}const Ft=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],AE="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd",xE={rte:Jg,trk:ep,wpt:tp},EE=Ht(Ft,{rte:Yl(Jg),trk:Yl(ep),wpt:Yl(tp)}),bE=Ht(Ft,{text:et(Dt,"linkText"),type:et(Dt,"linkType")}),CE=Ht(Ft,{rte:Xe(VE),trk:Xe(ZE),wpt:Xe(qE)});class IE extends _E{constructor(e){super(),e=e||{},this.dataProjection=Tt("EPSG:4326"),this.readExtensions_=e.readExtensions}handleReadExtensions_(e){e||(e=[]);for(let t=0,i=e.length;t<i;++t){const r=e[t];if(this.readExtensions_){const s=r.get("extensionsNode_")||null;this.readExtensions_(r,s)}r.set("extensionsNode_",void 0)}}readFeatureFromNode(e,t){if(!Ft.includes(e.namespaceURI))return null;const i=xE[e.localName];if(!i)return null;const r=i(e,[this.getReadOptions(e,t)]);return r?(this.handleReadExtensions_([r]),r):null}readFeaturesFromNode(e,t){if(!Ft.includes(e.namespaceURI))return[];if(e.localName=="gpx"){const i=ss([],EE,e,[this.getReadOptions(e,t)]);return i?(this.handleReadExtensions_(i),i):[]}return[]}writeFeaturesNode(e,t){t=this.adaptOptions(t);const i=Cu("http://www.topografix.com/GPX/1/1","gpx"),r="http://www.w3.org/2000/xmlns/";return i.setAttributeNS(r,"xmlns:xsi",Nd),i.setAttributeNS(Nd,"xsi:schemaLocation",AE),i.setAttribute("version","1.1"),i.setAttribute("creator","OpenLayers"),os({node:i},CE,XE,e,[t]),i}}const SE=Ht(Ft,{name:et(Dt),cmt:et(Dt),desc:et(Dt),src:et(Dt),link:Ou,number:et(_a),extensions:Pu,type:et(Dt),rtept:HE}),RE=Ht(Ft,{ele:et(hn),time:et(Tu)}),TE=Ht(Ft,{name:et(Dt),cmt:et(Dt),desc:et(Dt),src:et(Dt),link:Ou,number:et(_a),type:et(Dt),extensions:Pu,trkseg:KE}),LE=Ht(Ft,{trkpt:QE}),ME=Ht(Ft,{ele:et(hn),time:et(Tu)}),OE=Ht(Ft,{ele:et(hn),time:et(Tu),magvar:et(hn),geoidheight:et(hn),name:et(Dt),cmt:et(Dt),desc:et(Dt),src:et(Dt),link:Ou,sym:et(Dt),type:et(Dt),fix:et(Dt),sat:et(_a),hdop:et(hn),vdop:et(hn),pdop:et(hn),ageofdgpsdata:et(hn),dgpsid:et(_a),extensions:Pu}),PE=["text","type"],FE=Ht(Ft,{text:Xe(kt),type:Xe(kt)}),DE=Ht(Ft,["name","cmt","desc","src","link","number","type","rtept"]),kE=Ht(Ft,{name:Xe(kt),cmt:Xe(kt),desc:Xe(kt),src:Xe(kt),link:Xe(Fu),number:Xe(ya),type:Xe(kt),rtept:$g(Xe(Du))}),NE=Ht(Ft,["ele","time"]),BE=Ht(Ft,["name","cmt","desc","src","link","number","type","trkseg"]),GE=Ht(Ft,{name:Xe(kt),cmt:Xe(kt),desc:Xe(kt),src:Xe(kt),link:Xe(Fu),number:Xe(ya),type:Xe(kt),trkseg:$g(Xe($E))}),zE=Iu("trkpt"),jE=Ht(Ft,{trkpt:Xe(Du)}),UE=Ht(Ft,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),WE=Ht(Ft,{ele:Xe(Jn),time:Xe(wE),magvar:Xe(Jn),geoidheight:Xe(Jn),name:Xe(kt),cmt:Xe(kt),desc:Xe(kt),src:Xe(kt),link:Xe(Fu),sym:Xe(kt),type:Xe(kt),fix:Xe(kt),sat:Xe(ya),hdop:Xe(Jn),vdop:Xe(Jn),pdop:Xe(Jn),ageofdgpsdata:Xe(Jn),dgpsid:Xe(ya)}),YE={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function XE(n,e,t){const i=n.getGeometry();if(i){const r=YE[i.getType()];if(r){const s=e[e.length-1].node;return Cu(s.namespaceURI,r)}}}function Lu(n,e,t,i){return n.push(parseFloat(t.getAttribute("lon")),parseFloat(t.getAttribute("lat"))),"ele"in i?(n.push(i.ele),delete i.ele,e.hasZ=!0):n.push(0),"time"in i?(n.push(i.time),delete i.time,e.hasM=!0):n.push(0),n}function Mu(n,e,t){let i="XY",r=2;if(n.hasZ&&n.hasM?(i="XYZM",r=4):n.hasZ?(i="XYZ",r=3):n.hasM&&(i="XYM",r=3),r!==4){for(let s=0,o=e.length/4;s<o;s++)e[s*r]=e[s*4],e[s*r+1]=e[s*4+1],n.hasZ&&(e[s*r+2]=e[s*4+2]),n.hasM&&(e[s*r+2]=e[s*4+3]);if(e.length=e.length/4*r,t)for(let s=0,o=t.length;s<o;s++)t[s]=t[s]/4*r}return i}function Ou(n,e){const t=e[e.length-1],i=n.getAttribute("href");i!==null&&(t.link=i),Ru(bE,n,e)}function Pu(n,e){const t=e[e.length-1];t.extensionsNode_=n}function HE(n,e){const t=ss({},RE,n,e);if(t){const i=e[e.length-1],r=i.flatCoordinates,s=i.layoutOptions;Lu(r,s,n,t)}}function QE(n,e){const t=ss({},ME,n,e);if(t){const i=e[e.length-1],r=i.flatCoordinates,s=i.layoutOptions;Lu(r,s,n,t)}}function KE(n,e){const t=e[e.length-1];Ru(LE,n,e);const i=t.flatCoordinates;t.ends.push(i.length)}function Jg(n,e){const t=e[0],i=ss({flatCoordinates:[],layoutOptions:{}},SE,n,e);if(!i)return;const r=i.flatCoordinates;delete i.flatCoordinates;const s=i.layoutOptions;delete i.layoutOptions;const o=Mu(s,r),a=new fa(r,o);Gn(a,!1,t);const l=new xi(a);return l.setProperties(i,!0),l}function ep(n,e){const t=e[0],i=ss({flatCoordinates:[],ends:[],layoutOptions:{}},TE,n,e);if(!i)return;const r=i.flatCoordinates;delete i.flatCoordinates;const s=i.ends;delete i.ends;const o=i.layoutOptions;delete i.layoutOptions;const a=Mu(o,r,s),l=new Kg(r,a,s);Gn(l,!1,t);const c=new xi(l);return c.setProperties(i,!0),c}function tp(n,e){const t=e[0],i=ss({},OE,n,e);if(!i)return;const r={},s=Lu([],r,n,i),o=Mu(r,s),a=new Fi(s,o);Gn(a,!1,t);const l=new xi(a);return l.setProperties(i,!0),l}function Fu(n,e,t){n.setAttribute("href",e);const r=t[t.length-1].properties,s=[r.linkText,r.linkType];os({node:n},FE,Xa,s,t,PE)}function Du(n,e,t){const i=t[t.length-1],s=i.node.namespaceURI,o=i.properties;switch(n.setAttributeNS(null,"lat",String(e[1])),n.setAttributeNS(null,"lon",String(e[0])),i.geometryLayout){case"XYZM":e[3]!==0&&(o.time=e[3]);case"XYZ":e[2]!==0&&(o.ele=e[2]);break;case"XYM":e[2]!==0&&(o.time=e[2]);break}const l=n.nodeName=="rtept"?NE[s]:UE[s],c=Su(o,l);os({node:n,properties:o},WE,Xa,c,t,l)}function VE(n,e,t){const i=t[0],r=e.getProperties(),s={node:n};s.properties=r;const o=e.getGeometry();if(o.getType()=="LineString"){const u=Gn(o,!0,i);s.geometryLayout=u.getLayout(),r.rtept=u.getCoordinates()}const a=t[t.length-1].node,l=DE[a.namespaceURI],c=Su(r,l);os(s,kE,Xa,c,t,l)}function ZE(n,e,t){const i=t[0],r=e.getProperties(),s={node:n};s.properties=r;const o=e.getGeometry();if(o.getType()=="MultiLineString"){const u=Gn(o,!0,i);r.trkseg=u.getLineStrings()}const a=t[t.length-1].node,l=BE[a.namespaceURI],c=Su(r,l);os(s,GE,Xa,c,t,l)}function $E(n,e,t){const i={node:n};i.geometryLayout=e.getLayout(),i.properties={},os(i,jE,zE,e.getCoordinates(),t)}function qE(n,e,t){const i=t[0],r=t[t.length-1];r.properties=e.getProperties();const s=e.getGeometry();if(s.getType()=="Point"){const o=Gn(s,!0,i);r.geometryLayout=o.getLayout(),Du(n,o.getCoordinates(),t)}}var Cc=IE,li=63710088e-1,ip={centimeters:li*100,centimetres:li*100,degrees:li/111325,feet:li*3.28084,inches:li*39.37,kilometers:li/1e3,kilometres:li/1e3,meters:li,metres:li,miles:li/1609.344,millimeters:li*1e3,millimetres:li*1e3,nauticalmiles:li/1852,radians:1,yards:li*1.0936};function dr(n,e,t){t===void 0&&(t={});var i={type:"Feature"};return(t.id===0||t.id)&&(i.id=t.id),t.bbox&&(i.bbox=t.bbox),i.properties=e||{},i.geometry=n,i}function np(n,e,t){if(t===void 0&&(t={}),!n)throw new Error("coordinates is required");if(!Array.isArray(n))throw new Error("coordinates must be an Array");if(n.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Bd(n[0])||!Bd(n[1]))throw new Error("coordinates must contain numbers");var i={type:"Point",coordinates:n};return dr(i,e,t)}function ku(n,e,t){if(t===void 0&&(t={}),n.length<2)throw new Error("coordinates must be an array of two or more positions");var i={type:"LineString",coordinates:n};return dr(i,e,t)}function JE(n,e,t){t===void 0&&(t={});var i={type:"MultiLineString",coordinates:n};return dr(i,e,t)}function rp(n,e){e===void 0&&(e="kilometers");var t=ip[e];if(!t)throw new Error(e+" units is invalid");return n*t}function eb(n,e){e===void 0&&(e="kilometers");var t=ip[e];if(!t)throw new Error(e+" units is invalid");return n/t}function Qo(n){var e=n%360;return e*Math.PI/180}function sp(n,e,t){if(e===void 0&&(e="kilometers"),t===void 0&&(t="kilometers"),!(n>=0))throw new Error("length must be a positive number");return rp(eb(n,e),t)}function Bd(n){return!isNaN(n)&&n!==null&&!Array.isArray(n)}function op(n,e,t){if(n!==null)for(var i,r,s,o,a,l,c,u=0,d=0,f,_=n.type,p=_==="FeatureCollection",m=_==="Feature",y=p?n.features.length:1,v=0;v<y;v++){c=p?n.features[v].geometry:m?n.geometry:n,f=c?c.type==="GeometryCollection":!1,a=f?c.geometries.length:1;for(var w=0;w<a;w++){var x=0,E=0;if(o=f?c.geometries[w]:c,o!==null){l=o.coordinates;var O=o.type;switch(u=t&&(O==="Polygon"||O==="MultiPolygon")?1:0,O){case null:break;case"Point":if(e(l,d,v,x,E)===!1)return!1;d++,x++;break;case"LineString":case"MultiPoint":for(i=0;i<l.length;i++){if(e(l[i],d,v,x,E)===!1)return!1;d++,O==="MultiPoint"&&x++}O==="LineString"&&x++;break;case"Polygon":case"MultiLineString":for(i=0;i<l.length;i++){for(r=0;r<l[i].length-u;r++){if(e(l[i][r],d,v,x,E)===!1)return!1;d++}O==="MultiLineString"&&x++,O==="Polygon"&&E++}O==="Polygon"&&x++;break;case"MultiPolygon":for(i=0;i<l.length;i++){for(E=0,r=0;r<l[i].length;r++){for(s=0;s<l[i][r].length-u;s++){if(e(l[i][r][s],d,v,x,E)===!1)return!1;d++}E++}x++}break;case"GeometryCollection":for(i=0;i<o.geometries.length;i++)if(op(o.geometries[i],e,t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function tb(n,e){var t,i,r,s,o,a,l,c,u,d,f=0,_=n.type==="FeatureCollection",p=n.type==="Feature",m=_?n.features.length:1;for(t=0;t<m;t++){for(a=_?n.features[t].geometry:p?n.geometry:n,c=_?n.features[t].properties:p?n.properties:{},u=_?n.features[t].bbox:p?n.bbox:void 0,d=_?n.features[t].id:p?n.id:void 0,l=a?a.type==="GeometryCollection":!1,o=l?a.geometries.length:1,r=0;r<o;r++){if(s=l?a.geometries[r]:a,s===null){if(e(null,f,c,u,d)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(s,f,c,u,d)===!1)return!1;break}case"GeometryCollection":{for(i=0;i<s.geometries.length;i++)if(e(s.geometries[i],f,c,u,d)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}f++}}function ib(n,e){tb(n,function(t,i,r,s,o){var a=t===null?null:t.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return e(dr(t,r,{bbox:s,id:o}),i,0)===!1?!1:void 0}var l;switch(a){case"MultiPoint":l="Point";break;case"MultiLineString":l="LineString";break;case"MultiPolygon":l="Polygon";break}for(var c=0;c<t.coordinates.length;c++){var u=t.coordinates[c],d={type:l,coordinates:u};if(e(dr(d,r),i,c)===!1)return!1}})}function nb(n,e){ib(n,function(t,i,r){var s=0;if(!!t.geometry){var o=t.geometry.type;if(!(o==="Point"||o==="MultiPoint")){var a,l=0,c=0,u=0;if(op(t,function(d,f,_,p,m){if(a===void 0||i>l||p>c||m>u){a=d,l=i,c=p,u=m,s=0;return}var y=ku([a,d],t.properties);if(e(y,i,r,m,s)===!1)return!1;s++,a=d})===!1)return!1}}})}function va(n){if(!n)throw new Error("coord is required");if(!Array.isArray(n)){if(n.type==="Feature"&&n.geometry!==null&&n.geometry.type==="Point")return n.geometry.coordinates;if(n.type==="Point")return n.coordinates}if(Array.isArray(n)&&n.length>=2&&!Array.isArray(n[0])&&!Array.isArray(n[1]))return n;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Gd(n,e,t){if(!n)throw new Error("No feature passed");if(!t)throw new Error(".featureOf() requires a name");if(!n||n.type!=="Feature"||!n.geometry)throw new Error("Invalid input to "+t+", Feature with geometry required");if(!n.geometry||n.geometry.type!==e)throw new Error("Invalid input to "+t+": must be a "+e+", given "+n.geometry.type)}function rb(n,e,t){t===void 0&&(t={});var i=va(n),r=va(e),s=Qo(r[1]-i[1]),o=Qo(r[0]-i[0]),a=Qo(i[1]),l=Qo(r[1]),c=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(o/2),2)*Math.cos(a)*Math.cos(l);return rp(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),t.units)}function sb(n,e,t){t===void 0&&(t={});var i=va(n),r=va(e);r[0]+=r[0]-i[0]>180?-360:i[0]-r[0]>180?360:0;var s=ob(i,r),o=sp(s,"meters",t.units);return o}function ob(n,e,t){t=t===void 0?li:Number(t);var i=t,r=n[1]*Math.PI/180,s=e[1]*Math.PI/180,o=s-r,a=Math.abs(e[0]-n[0])*Math.PI/180;a>Math.PI&&(a-=2*Math.PI);var l=Math.log(Math.tan(s/2+Math.PI/4)/Math.tan(r/2+Math.PI/4)),c=Math.abs(l)>1e-11?o/l:Math.cos(r),u=Math.sqrt(o*o+c*c*a*a),d=u*i;return d}function ab(n,e,t){if(t===void 0&&(t={}),t.method||(t.method="geodesic"),t.units||(t.units="kilometers"),!n)throw new Error("pt is required");if(Array.isArray(n)?n=np(n):n.type==="Point"?n=dr(n):Gd(n,"Point","point"),!e)throw new Error("line is required");Array.isArray(e)?e=ku(e):e.type==="LineString"?e=dr(e):Gd(e,"LineString","line");var i=1/0,r=n.geometry.coordinates;return nb(e,function(s){var o=s.geometry.coordinates[0],a=s.geometry.coordinates[1],l=lb(r,o,a,t);l<i&&(i=l)}),sp(i,"degrees",t.units)}function lb(n,e,t,i){var r=[t[0]-e[0],t[1]-e[1]],s=[n[0]-e[0],n[1]-e[1]],o=zd(s,r);if(o<=0)return Ql(n,e,{method:i.method,units:"degrees"});var a=zd(r,r);if(a<=o)return Ql(n,t,{method:i.method,units:"degrees"});var l=o/a,c=[e[0]+l*r[0],e[1]+l*r[1]];return Ql(n,c,{method:i.method,units:"degrees"})}function zd(n,e){return n[0]*e[0]+n[1]*e[1]}function Ql(n,e,t){return t.method==="planar"?sb(n,e,t):rb(n,e,t)}var ap=n=>{if(!window.rodnikMap.filters.spring&&n.get("type")=="Spring"||!window.rodnikMap.filters.water_well&&n.get("type")=="Water well"||!window.rodnikMap.filters.water_tap&&n.get("type")=="Water tap"||!window.rodnikMap.filters.drinking_water&&n.get("type")=="Drinking water source"||!window.rodnikMap.filters.fountain&&n.get("type")=="Fountain"||!window.rodnikMap.filters.other&&n.get("type")=="Water source"||window.rodnikMap.filters.confirmed&&!n.get("waterConfirmed"))return!1;if(window.rodnikMap.trackLayer.getSource().getFeatures().length){var e=n.getGeometry().clone().transform("EPSG:3857","EPSG:4326").getCoordinates(),t=np(e);let i=1/0;if(window.turfMultiLineString.geometry.coordinates.forEach(r=>{const s=ku(r),o=ab(t,s,{units:"meters"});o<i&&(i=o)}),i>100)return!1}return!0};const It={ACCURACY:"accuracy",ACCURACY_GEOMETRY:"accuracyGeometry",ALTITUDE:"altitude",ALTITUDE_ACCURACY:"altitudeAccuracy",HEADING:"heading",POSITION:"position",PROJECTION:"projection",SPEED:"speed",TRACKING:"tracking",TRACKING_OPTIONS:"trackingOptions"},cb={ERROR:"error"};class ub extends en{constructor(e){super(cb.ERROR),this.code=e.code,this.message=e.message}}class hb extends ki{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.position_=null,this.transform_=Qc,this.watchId_=void 0,this.addChangeListener(It.PROJECTION,this.handleProjectionChanged_),this.addChangeListener(It.TRACKING,this.handleTrackingChanged_),e.projection!==void 0&&this.setProjection(e.projection),e.trackingOptions!==void 0&&this.setTrackingOptions(e.trackingOptions),this.setTracking(e.tracking!==void 0?e.tracking:!1)}disposeInternal(){this.setTracking(!1),super.disposeInternal()}handleProjectionChanged_(){const e=this.getProjection();e&&(this.transform_=Oa(Tt("EPSG:4326"),e),this.position_&&this.set(It.POSITION,this.transform_(this.position_)))}handleTrackingChanged_(){if("geolocation"in navigator){const e=this.getTracking();e&&this.watchId_===void 0?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):!e&&this.watchId_!==void 0&&(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}}positionChange_(e){const t=e.coords;this.set(It.ACCURACY,t.accuracy),this.set(It.ALTITUDE,t.altitude===null?void 0:t.altitude),this.set(It.ALTITUDE_ACCURACY,t.altitudeAccuracy===null?void 0:t.altitudeAccuracy),this.set(It.HEADING,t.heading===null?void 0:ar(t.heading)),this.position_?(this.position_[0]=t.longitude,this.position_[1]=t.latitude):this.position_=[t.longitude,t.latitude];const i=this.transform_(this.position_);this.set(It.POSITION,i.slice()),this.set(It.SPEED,t.speed===null?void 0:t.speed);const r=Rv(this.position_,t.accuracy);r.applyTransform(this.transform_),this.set(It.ACCURACY_GEOMETRY,r),this.changed()}positionError_(e){this.dispatchEvent(new ub(e))}getAccuracy(){return this.get(It.ACCURACY)}getAccuracyGeometry(){return this.get(It.ACCURACY_GEOMETRY)||null}getAltitude(){return this.get(It.ALTITUDE)}getAltitudeAccuracy(){return this.get(It.ALTITUDE_ACCURACY)}getHeading(){return this.get(It.HEADING)}getPosition(){return this.get(It.POSITION)}getProjection(){return this.get(It.PROJECTION)}getSpeed(){return this.get(It.SPEED)}getTracking(){return this.get(It.TRACKING)}getTrackingOptions(){return this.get(It.TRACKING_OPTIONS)}setProjection(e){this.set(It.PROJECTION,Tt(e))}setTracking(e){this.set(It.TRACKING,e)}setTrackingOptions(e){this.set(It.TRACKING_OPTIONS,e)}}var lp=hb;class Ha extends Bn{constructor(){super({source:new KA,zIndex:1})}}class db extends Bn{constructor(){super({source:new Nn({url:"https://{a-c}.tile.opentopomap.org/{z}/{x}/{y}.png"}),zIndex:1})}}class cp extends Bn{constructor(){super({source:new Nn({url:"https://mapserver.mapy.cz/turist-m/retina/{z}-{x}-{y}",tilePixelRatio:2}),zIndex:1})}}class up extends Bn{constructor(){super({source:new Nn({url:"https://{a-c}.tile.thunderforest.com/outdoors/{z}/{x}/{y}.png"}),zIndex:1})}}class hp extends Bn{constructor(){super({source:new Nn({url:"https://mt0.google.com/vt/lyrs=p&hl=en&x={x}&y={y}&z={z}"}),zIndex:1})}}class dp extends Bn{constructor(){super({source:new Nn({url:"https://mt{0-3}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}"}),zIndex:1})}}let fb=12,gb=1,pb=new Lt({image:new Xt({radius:fb,fill:new Bt({color:[51,169,255,.125]}),stroke:new oi({color:"#33A9FF",width:gb,lineDash:[6]})})}),mb=new Lt({}),_b=new Lt({image:new Xt({radius:12,fill:new Bt({color:[51,169,255,.1]}),stroke:new oi({color:"#33A9FF",width:1})}),zIndex:5});window.color=[255,102,51,1];let yb=new Lt({image:new Xt({radius:12,fill:new Bt({color:[255,211,0,.25]}),stroke:new oi({color:window.color,width:1})}),zIndex:10});var Ps=(n,e)=>ap(n)?n.get("hasReports")>0?yb:n.get("intermittent")=="yes"?pb:_b:mb,fp={exports:{}};(function(n,e){var t=function(){var i={},r=Math.PI/180,s=180/Math.PI,o=6378137,a=20037508342789244e-9;function l(u){return Number(u)===u&&u%1!==0}function c(u){if(u=u||{},this.size=u.size||256,this.expansion=u.antimeridian===!0?2:1,!i[this.size]){var d=this.size,f=i[this.size]={};f.Bc=[],f.Cc=[],f.zc=[],f.Ac=[];for(var _=0;_<30;_++)f.Bc.push(d/360),f.Cc.push(d/(2*Math.PI)),f.zc.push(d/2),f.Ac.push(d),d*=2}this.Bc=i[this.size].Bc,this.Cc=i[this.size].Cc,this.zc=i[this.size].zc,this.Ac=i[this.size].Ac}return c.prototype.px=function(u,d){if(l(d)){var f=this.size*Math.pow(2,d),_=f/2,p=f/360,m=f/(2*Math.PI),y=f,v=Math.min(Math.max(Math.sin(r*u[1]),-.9999),.9999),w=_+u[0]*p,x=_+.5*Math.log((1+v)/(1-v))*-m;return w>y*this.expansion&&(w=y*this.expansion),x>y&&(x=y),[w,x]}else{var _=this.zc[d],v=Math.min(Math.max(Math.sin(r*u[1]),-.9999),.9999),w=Math.round(_+u[0]*this.Bc[d]),x=Math.round(_+.5*Math.log((1+v)/(1-v))*-this.Cc[d]);return w>this.Ac[d]*this.expansion&&(w=this.Ac[d]*this.expansion),x>this.Ac[d]&&(x=this.Ac[d]),[w,x]}},c.prototype.ll=function(u,d){if(l(d)){var f=this.size*Math.pow(2,d),_=f/360,p=f/(2*Math.PI),m=f/2,y=(u[1]-m)/-p,v=(u[0]-m)/_,w=s*(2*Math.atan(Math.exp(y))-.5*Math.PI);return[v,w]}else{var y=(u[1]-this.zc[d])/-this.Cc[d],v=(u[0]-this.zc[d])/this.Bc[d],w=s*(2*Math.atan(Math.exp(y))-.5*Math.PI);return[v,w]}},c.prototype.bbox=function(u,d,f,_,p){_&&(d=Math.pow(2,f)-1-d);var m=[u*this.size,(+d+1)*this.size],y=[(+u+1)*this.size,d*this.size],v=this.ll(m,f).concat(this.ll(y,f));return p==="900913"?this.convert(v,"900913"):v},c.prototype.xyz=function(u,d,f,_){_==="900913"&&(u=this.convert(u,"WGS84"));var p=[u[0],u[1]],m=[u[2],u[3]],y=this.px(p,d),v=this.px(m,d),w=[Math.floor(y[0]/this.size),Math.floor((v[0]-1)/this.size)],x=[Math.floor(v[1]/this.size),Math.floor((y[1]-1)/this.size)],E={minX:Math.min.apply(Math,w)<0?0:Math.min.apply(Math,w),minY:Math.min.apply(Math,x)<0?0:Math.min.apply(Math,x),maxX:Math.max.apply(Math,w),maxY:Math.max.apply(Math,x)};if(f){var O={minY:Math.pow(2,d)-1-E.maxY,maxY:Math.pow(2,d)-1-E.minY};E.minY=O.minY,E.maxY=O.maxY}return E},c.prototype.convert=function(u,d){return d==="900913"?this.forward(u.slice(0,2)).concat(this.forward(u.slice(2,4))):this.inverse(u.slice(0,2)).concat(this.inverse(u.slice(2,4)))},c.prototype.forward=function(u){var d=[o*u[0]*r,o*Math.log(Math.tan(Math.PI*.25+.5*u[1]*r))];return d[0]>a&&(d[0]=a),d[0]<-a&&(d[0]=-a),d[1]>a&&(d[1]=a),d[1]<-a&&(d[1]=-a),d},c.prototype.inverse=function(u){return[u[0]*s/o,(Math.PI*.5-2*Math.atan(Math.exp(-u[1]/o)))*s]},c}();n.exports=t})(fp);var as=fp.exports;let vb=new as({antimeridian:!1}),jd=8;class Ud extends Ni{constructor(){super({format:new rs,strategy:Eu(Ua({maxZoom:8,minZoom:8})),url:(e,t,i)=>{let r=fn([e[0],e[1]]),s=fn([e[2],e[3]]),o=vb.xyz([r[0],r[1],s[0],s[1]],jd);return"/tiles/"+jd+"/"+o.minX+"/"+o.minY+".json"}}),this.on("featuresloadend",e=>{window.rodnikMap.featuresLoadEnd()})}}new as({antimeridian:!1});class Wd extends tn{constructor(){super({minZoom:9,style:Ps,zIndex:500,opacity:.8})}updateStyle(){this.setStyle(Ps)}}let wb=new Lt({image:new Xt({radius:30,fill:new Bt({color:[51,169,255,.33]})})}),Ab=new Lt({image:new Xt({radius:20,fill:new Bt({color:[255,180,0,.5]})})});var gp=(n,e)=>n.get("hasReports")>0?Ab:wb,xb=new as({antimeridian:!1}),Ko=5;class Eb extends tn{constructor(){super({minZoom:6,maxZoom:9,source:new Ni({format:new rs,strategy:Eu(Ua({maxZoom:Ko,minZoom:Ko})),url:(e,t,i)=>{let r=fn([e[0],e[1]]),s=fn([e[2],e[3]]),o=xb.xyz([r[0],r[1],s[0],s[1]],Ko);return"/tiles/"+Ko+"/"+o.minX+"/"+o.minY+".json"}}),style:gp,zIndex:300,opacity:.6})}}let bb=new Lt({image:new Xt({radius:40,fill:new Bt({color:[51,169,255,.33]})})}),Cb=new Lt({image:new Xt({radius:30,fill:new Bt({color:[255,180,0,.5]})})});var pp=(n,e)=>n.get("hasReports")>0?Cb:bb;new as({antimeridian:!1});class Ib extends tn{constructor(){super({minZoom:0,maxZoom:6,source:new Ni({format:new rs,url:"/tiles/0/0/0.json"}),style:pp,zIndex:100,opacity:.6})}}var Sb=new as({antimeridian:!1}),Vo=5;class Rb extends tn{constructor(){super({minZoom:6,maxZoom:9,source:new Ni({format:new rs,strategy:Eu(Ua({maxZoom:Vo,minZoom:Vo})),url:(e,t,i)=>{let r=fn([e[0],e[1]]),s=fn([e[2],e[3]]),o=Sb.xyz([r[0],r[1],s[0],s[1]],Vo);return"/watered-tiles/"+Vo+"/"+o.minX+"/"+o.minY+".json"}}),style:gp,zIndex:400,opacity:.6})}}new as({antimeridian:!1});class Tb extends tn{constructor(){super({minZoom:0,maxZoom:6,source:new Ni({format:new rs,url:"/watered-tiles/0/0/0.json"}),style:pp,zIndex:200,opacity:.6})}}var Lb=new Lt({stroke:new oi({color:"#ff0000",width:2}),image:new Xt({radius:3,fill:new Bt({color:"#ff0000"})})});class Mb extends Ni{constructor(){super({format:new Cc})}setFromGPXString(e){this.clear();const t=this.createFeatures(e);if(t.length){this.addFeatures(t);var i=window.rodnikMap.trackLayer.getSource().getFeatures()[0].getGeometry().clone().transform("EPSG:3857","EPSG:4326").getCoordinates();window.turfMultiLineString=JE(i)}else alert("Please upload a GPX file")}createFeatures(e){return new Cc().readFeatures(e,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"})}}class Ob extends tn{constructor(){super({style:Lb,source:new Mb,zIndex:400})}}class Pb extends Bn{constructor(){super({source:new Nn({maxZoom:12,url:"https://heatmap-external-{a-c}.strava.com/tiles/all/hot/{z}/{x}/{y}.png?px=256"}),zIndex:10})}}class Fb extends Bn{constructor(){super({source:new Nn({url:"https://gps-{a-c}.tile.openstreetmap.org/lines/{z}/{x}/{y}.png"}),zIndex:10})}}let mp=12,Db=1;new Lt({image:new Xt({radius:mp,fill:new Bt({color:[67,191,225,.125]}),stroke:new oi({color:"#67BFFF",width:Db,lineDash:[6]})})});let kb=new Lt({image:new Xt({radius:mp,fill:new Bt({color:[255,255,255,0]}),stroke:new oi({color:"#cc0000",width:2})})});function _p(){let n=parseFloat(localStorage.getItem("centerLatitude")),e=parseFloat(localStorage.getItem("centerLongitude"));return isNaN(e)||isNaN(n)?Ai([19.748,49.213]):[e,n]}function yp(){let n=parseFloat(localStorage.getItem("zoom"));return isNaN(n)?3:n}function Nu(){let n=localStorage.getItem("source");return n||"osm"}function Ic(n){localStorage.setItem("centerLongitude",n[0]),localStorage.setItem("centerLatitude",n[1])}function Sc(n){localStorage.setItem("zoom",n)}function vp(n){localStorage.setItem("source",n)}class wp extends tn{constructor(e,t){super({source:new Ni({features:[e,t]}),zIndex:1e3})}}class Nb extends Ni{constructor(){super({format:new rs}),this.userId=null,this.on("featuresloadend",e=>{window.rodnikMap.featuresLoadEnd(),window.rodnikMap.locateWorld()})}getUser(){return this.userId}setUser(e){this.userId=e;const t="/users/"+parseInt(e)+"/springs.json";this.getUrl()!==t&&(this.setUrl(t),this.refresh())}}class Bb{constructor(e){this.finalZoom=9,this.approximatedZoom=6,this.elementId=e,this.filters={all:!0,spring:!0,water_well:!0,water_tap:!0,drinking_water:!0,fountain:!0,other:!0,confirmed:!1},this.overlays={stravaPublic:!1,osmTraces:!1},this.currentOverlays={...this.overlays},this.osmLayer=new Ha,this.mapyLayer=new cp,this.outdoorsLayer=new up,this.openTopoMapLayer=new db,this.googleTerrainLayer=new hp,this.googleSatelliteLayer=new dp,this.stravaPublicLayer=new Pb,this.osmTracesLayer=new Fb,this.currentLayer=this.osmLayer,this.springsFinalLayer=new Wd,this.springsApproximatedLayer=new Eb,this.springsDistantLayer=new Ib,this.wateredSpringsApproximatedLayer=new Rb,this.wateredSpringsDistantLayer=new Tb,this.springsFinalSource=new Ud,this.springsUserSource=new Nb,this.trackLayer=new Ob,this.featureToBeSelected=null,this.selectedFeature=null,this.featureIdToBeSelected=null,this.view=new mi({center:_p(),zoom:yp(),enableRotation:!1}),this.geolocation=new lp({trackingOptions:{enableHighAccuracy:!0},projection:this.view.getProjection()}),this.scaleControl=new Wa({units:"metric",bar:!1,steps:4,text:!0,minWidth:100}),this.map=new Ga({controls:qs().extend([this.scaleControl]),target:this.elementId,layers:[this.wateredSpringsDistantLayer,this.wateredSpringsApproximatedLayer,this.springsDistantLayer,this.springsApproximatedLayer,this.springsFinalLayer,this.trackLayer],view:this.view,moveTolerance:5}),this.source(Nu()),this.map.on("moveend",t=>{Ic(this.map.getView().getCenter()),Sc(this.map.getView().getZoom())}),this.map.on("click",t=>{let i=this.map.getFeaturesAtPixel(t.pixel,{hitTolerance:2,layerFilter:function(r){return r instanceof Wd}});i.length>0?this.selectFeature(i[0]):this.deselectFeature()})}featuresLoadEnd(){let e=this.featureIdToBeSelected;e&&(this.featureIdToBeSelected=null,this.highlightFeatureById(e))}locateMe(){this.geolocation.getPosition()?this.view.animate({center:this.geolocation.getPosition(),zoom:18,duration:250}):navigator.geolocation.getCurrentPosition(e=>{this.view.animate({center:Ai([e.coords.longitude,e.coords.latitude]),zoom:18,duration:250}),this.watchMe()},e=>{console.log(e)})}watchMe(){this.geolocation.setTracking(!0);const e=new xi;this.geolocation.on("change:accuracyGeometry",()=>{e.setGeometry(this.geolocation.getAccuracyGeometry())}),this.geolocation.on("error",function(i){console.log(i)});const t=new xi;t.setStyle(new Lt({image:new Xt({radius:6,fill:new Bt({color:"#000000"}),stroke:new oi({color:"#fff",width:2})})})),e.setStyle(new Lt({fill:new Bt({color:[255,255,255,.5]}),stroke:new oi({color:"#00000",width:2})})),this.geolocation.on("change:position",()=>{const i=this.geolocation.getPosition();t.setGeometry(i?new Fi(i):null)}),this.geolocationLayer=new wp(e,t),this.map.addLayer(this.geolocationLayer)}download(){if(this.view.getZoom()<9&&this.springsFinalLayer.getSource()instanceof Ud)return alert("Please zoom in to export GPX"),!1;const e=this.map.getView().calculateExtent(this.map.getSize()),t=this.springsFinalLayer.getSource().getFeaturesInExtent(e);t.map(c=>(c.getProperties().name||c.setProperties({name:c.getProperties().type}),c));const i=t.filter(c=>ap(c)),s=new Cc().writeFeatures(i,{dataProjection:"EPSG:4326",featureProjection:this.map.getView().getProjection()}),o=new Blob([s],{type:"application/gpx+xml;charset=utf-8;"}),a=URL.createObjectURL(o),l=document.createElement("a");l.href=a,l.download="rodnik.today.gpx",document.body.appendChild(l),l.click(),document.body.removeChild(l)}upload(e){if(e){const t=new FileReader;t.readAsText(e),t.onload=i=>{const r=i.target.result;this.trackLayer.getSource().setFromGPXString(r),this.trackLayer.getSource().getFeatures().length&&(this.view.fit(this.trackLayer.getSource().getExtent()),this.view.setZoom(this.view.getZoom()-.5),window.rodnikMap.springsFinalLayer.updateStyle())}}}source(e){switch(e){case"osm":this.map.removeLayer(this.currentLayer),this.currentLayer=this.osmLayer,this.map.addLayer(this.currentLayer);break;case"mapy":this.map.removeLayer(this.currentLayer),this.currentLayer=this.mapyLayer,this.map.addLayer(this.currentLayer);break;case"outdoors":this.map.removeLayer(this.currentLayer),this.currentLayer=this.outdoorsLayer,this.map.addLayer(this.currentLayer);break;case"openTopoMap":this.map.removeLayer(this.currentLayer),this.currentLayer=this.openTopoMapLayer,this.map.addLayer(this.currentLayer);break;case"terrain":this.map.removeLayer(this.currentLayer),this.currentLayer=this.googleTerrainLayer,this.map.addLayer(this.currentLayer);break;case"satellite":this.map.removeLayer(this.currentLayer),this.currentLayer=this.googleSatelliteLayer,this.map.addLayer(this.currentLayer);break}vp(e)}updateOverlays(){this.overlays.stravaPublic?this.currentOverlays.stravaPublic||(this.map.addLayer(this.stravaPublicLayer),this.currentOverlays.stravaPublic=!0):this.currentOverlays.stravaPublic&&(this.map.removeLayer(this.stravaPublicLayer),this.currentOverlays.stravaPublic=!1),this.overlays.osmTraces?this.currentOverlays.osmTraces||(this.map.addLayer(this.osmTracesLayer),this.currentOverlays.osmTraces=!0):this.currentOverlays.osmTraces&&(this.map.removeLayer(this.osmTracesLayer),this.currentOverlays.osmTraces=!1)}highlightFeatureById(e){let t=window.rodnikMap.springsFinalLayer.getSource().getFeatureById(e);t?(this.locateFeature(t),this.highlightFeature(t)):this.featureIdToBeSelected=e}locateFeature(e){this.view.animate({center:e.getGeometry().flatCoordinates,duration:250})}locate(e){this.view.animate({center:Ai(e),zoom:14,duration:250})}locateWorld(){this.view.fit(this.springsFinalLayer.getSource().getExtent()),this.view.setZoom(Math.floor(this.view.getZoom()-1))}highlightFeature(e){if(this.previouslyHighlightedFeature){if(e.get("id")==this.previouslyHighlightedFeature.get("id"))return!1;this.previouslyHighlightedFeature.setStyle(Ps)}this.dehighlightPreviousFeature(),this.previouslyHighlightedFeature=e,e.setStyle(kb),this.fullscreen&&(this.setFullscreen(!1),this.locateFeature(e))}selectFeature(e){this.highlightFeature(e);let t=e.get("id");const i=new CustomEvent("spring-selected-on-map",{detail:{id:t,feature:e}});window.dispatchEvent(i)}dehighlightFeature(){this.previouslyHighlightedFeature&&(this.previouslyHighlightedFeature.setStyle(Ps),this.previouslyHighlightedFeature=null)}deselectFeature(){if(this.previouslyHighlightedFeature){this.dehighlightFeature();const e=new CustomEvent("spring-deselected-on-map");window.dispatchEvent(e)}}dehighlightPreviousFeature(){this.previouslyHighlightedFeature&&this.previouslyHighlightedFeature.setStyle(Ps),this.previouslyHighlightedFeature=null}springsSource(e){e?(this.mode="user",this.springsFinalLayer.setMinZoom(0),this.springsApproximatedLayer.setVisible(!1),this.springsDistantLayer.setVisible(!1),this.wateredSpringsApproximatedLayer.setVisible(!1),this.wateredSpringsDistantLayer.setVisible(!1),this.springsUserSource.getUser()==e?(this.springsFinalLayer.setSource(this.springsUserSource),this.locateWorld()):(this.springsUserSource.setUser(e),this.springsFinalLayer.setSource(this.springsUserSource))):(this.mode="global",this.springsFinalLayer.setMinZoom(9),this.springsApproximatedLayer.setVisible(!0),this.springsDistantLayer.setVisible(!0),this.wateredSpringsApproximatedLayer.setVisible(!0),this.wateredSpringsDistantLayer.setVisible(!0),this.springsFinalLayer.setSource(this.springsFinalSource))}setFullscreen(e){this.fullscreen=e}}class Gb{constructor(e,t){this.osmLayer=new Ha,this.springLayer=new tn({source:new Ni({features:[new xi({geometry:new Fi(Ai(t))})]}),style:new Lt({image:new Xt({radius:12,fill:new Bt({color:[0,0,0,.1]}),stroke:new oi({color:[0,0,0,1],width:.5})})}),zIndex:500}),this.view=new mi({center:Ai(t),zoom:18,enableRotation:!1}),this.scaleControl=new Wa({units:"metric",bar:!1,steps:4,text:!0,minWidth:100}),this.map=new Ga({controls:qs().extend([this.scaleControl]),target:e,layers:[this.osmLayer,this.springLayer],view:this.view})}}class zb{constructor(e,t){this.osmLayer=new Ha,this.mapyLayer=new cp,this.outdoorsLayer=new up,this.googleTerrainLayer=new hp,this.googleSatelliteLayer=new dp;let i=!!t.length,r=i?Ai(t):_p();i&&(this.springLayer=new tn({source:new Ni({features:[new xi({geometry:new Fi(Ai(t))})]}),style:new Lt({image:new Xt({radius:12,fill:new Bt({color:[0,0,0,0]}),stroke:new oi({color:[0,0,0,.33],width:2})})}),zIndex:500})),this.view=new mi({center:r,zoom:yp(),enableRotation:!1}),this.geolocation=new lp({trackingOptions:{enableHighAccuracy:!0},projection:this.view.getProjection()}),this.scaleControl=new Wa({units:"metric",bar:!1,steps:4,text:!0,minWidth:100}),this.map=new Ga({controls:qs().extend([this.scaleControl]),target:e,view:this.view}),this.source(Nu()),i&&this.map.addLayer(this.springLayer),this.map.on("moveend",s=>{let o=fn(this.view.getCenter());o[0]=o[0].toFixed(6),o[1]=o[1].toFixed(6),o=o.reverse().join(", "),this.mapMoved(o),Ic(this.map.getView().getCenter()),Sc(this.map.getView().getZoom())}),this.map.on("pointerdrag",s=>{let o=fn(this.view.getCenter());o[0]=o[0].toFixed(6),o[1]=o[1].toFixed(6),o=o.reverse().join(", "),this.mapMoved(o)}),this.map.on("click",s=>{let o=this.map.getEventPixel(s.originalEvent),a=fn(this.map.getCoordinateFromPixel(o));this.updateCoordinates(a)})}updateCoordinates(e){let t=this.view.getZoom();Ic(e),Sc(t),this.view.animate({center:Ai(e),zoom:t,duration:100})}source(e){switch(e){case"osm":this.map.removeLayer(this.currentLayer),this.currentLayer=this.osmLayer,this.map.addLayer(this.currentLayer);break;case"mapy":this.map.removeLayer(this.currentLayer),this.currentLayer=this.mapyLayer,this.map.addLayer(this.currentLayer);break;case"outdoors":this.map.removeLayer(this.currentLayer),this.currentLayer=this.outdoorsLayer,this.map.addLayer(this.currentLayer);break;case"terrain":this.map.removeLayer(this.currentLayer),this.currentLayer=this.googleTerrainLayer,this.map.addLayer(this.currentLayer);break;case"satellite":this.map.removeLayer(this.currentLayer),this.currentLayer=this.googleSatelliteLayer,this.map.addLayer(this.currentLayer);break}vp(e)}mapMoved(e){const t=new CustomEvent("map-moved",{detail:{coordinates:e}});window.dispatchEvent(t)}locateMe(){this.geolocation.getPosition()?this.view.animate({center:this.geolocation.getPosition(),zoom:18,duration:250}):navigator.geolocation.getCurrentPosition(e=>{this.view.animate({center:Ai([e.coords.longitude,e.coords.latitude]),zoom:18,duration:250}),this.watchMe()},e=>{console.log(e)})}watchMe(){this.geolocation.setTracking(!0);const e=new xi;this.geolocation.on("change:accuracyGeometry",()=>{e.setGeometry(this.geolocation.getAccuracyGeometry())}),this.geolocation.on("error",function(i){console.log(i)});const t=new xi;t.setStyle(new Lt({image:new Xt({radius:6,fill:new Bt({color:"#000000"}),stroke:new oi({color:"#fff",width:2})})})),e.setStyle(new Lt({fill:new Bt({color:[255,255,255,.5]}),stroke:new oi({color:"#00000",width:2})})),this.geolocation.on("change:position",()=>{const i=this.geolocation.getPosition();t.setGeometry(i?new Fi(i):null)}),this.geolocationLayer=new wp(e,t),this.map.addLayer(this.geolocationLayer)}}class jb{constructor(e,t,i){this.osmLayer=new Ha,this.springLayer=new tn({source:new Ni({features:[new xi({geometry:new Fi(Ai(t)),type:"old"}),new xi({geometry:new Fi(Ai(i)),type:"new"})]}),style:r=>{if(r.get("type")=="old")return new Lt({image:new Xt({radius:12,stroke:new oi({color:[0,0,0,.33],width:2})})});if(r.get("type")=="new")return new Lt({image:new Xt({radius:12,stroke:new oi({color:[0,0,0,1],width:2})})})},zIndex:500}),this.view=new mi({center:Ai(i),zoom:18,enableRotation:!1}),this.view.fit(this.springLayer.getSource().getExtent()),this.scaleControl=new Wa({units:"metric",bar:!1,steps:4,text:!0,minWidth:100}),this.map=new Ga({controls:qs().extend([this.scaleControl]),target:e,layers:[this.osmLayer,this.springLayer],view:this.view})}}/*!
  * PhotoSwipe Lightbox 5.3.2 - https://photoswipe.com
  * (c) 2022 Dmytro Semenov
  */function Rs(n,e,t){const i=document.createElement(e||"div");return n&&(i.className=n),t&&t.appendChild(i),i}function Ub(n,e,t){let i="translate3d("+n+"px,"+(e||0)+"px,0)";return t!==void 0&&(i+=" scale3d("+t+","+t+",1)"),i}function Rc(n,e,t){n.style.width=typeof e=="number"?e+"px":e,n.style.height=typeof t=="number"?t+"px":t}const wi={IDLE:"idle",LOADING:"loading",LOADED:"loaded",ERROR:"error"};function Wb(n){if(n.which===2||n.ctrlKey||n.metaKey||n.altKey||n.shiftKey)return!0}function $o(n,e,t=document){let i=[];if(n instanceof Element)i=[n];else if(n instanceof NodeList||Array.isArray(n))i=Array.from(n);else{const r=typeof n=="string"?n:e;r&&(i=Array.from(t.querySelectorAll(r)))}return i}function Yb(n){return typeof n=="function"&&n.prototype&&n.prototype.goTo}function Yd(){return!!(navigator.vendor&&navigator.vendor.match(/apple/i))}class Xb{constructor(e,t){this.type=e,t&&Object.assign(this,t)}preventDefault(){this.defaultPrevented=!0}}class Hb{constructor(){this._listeners={},this._filters={},this.pswp=void 0,this.options=void 0}addFilter(e,t,i=100){this._filters[e]||(this._filters[e]=[]),this._filters[e].push({fn:t,priority:i}),this._filters[e].sort((r,s)=>r.priority-s.priority),this.pswp&&this.pswp.addFilter(e,t,i)}removeFilter(e,t){this._filters[e]&&(this._filters[e]=this._filters[e].filter(i=>i.fn!==t)),this.pswp&&this.pswp.removeFilter(e,t)}applyFilters(e,...t){return this._filters[e]&&this._filters[e].forEach(i=>{t[0]=i.fn.apply(this,t)}),t[0]}on(e,t){this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t),this.pswp&&this.pswp.on(e,t)}off(e,t){this._listeners[e]&&(this._listeners[e]=this._listeners[e].filter(i=>t!==i)),this.pswp&&this.pswp.off(e,t)}dispatch(e,t){if(this.pswp)return this.pswp.dispatch(e,t);const i=new Xb(e,t);return this._listeners&&this._listeners[e]&&this._listeners[e].forEach(r=>{r.call(this,i)}),i}}class Qb{constructor(e,t){this.element=Rs("pswp__img pswp__img--placeholder",e?"img":"",t),e&&(this.element.decoding="async",this.element.alt="",this.element.src=e,this.element.setAttribute("role","presentation")),this.element.setAttribute("aria-hiden","true")}setDisplayedSize(e,t){!this.element||(this.element.tagName==="IMG"?(Rc(this.element,250,"auto"),this.element.style.transformOrigin="0 0",this.element.style.transform=Ub(0,0,e/250)):Rc(this.element,e,t))}destroy(){this.element.parentNode&&this.element.remove(),this.element=null}}class Kb{constructor(e,t,i){this.instance=t,this.data=e,this.index=i,this.element=void 0,this.displayedImageWidth=0,this.displayedImageHeight=0,this.width=Number(this.data.w)||Number(this.data.width)||0,this.height=Number(this.data.h)||Number(this.data.height)||0,this.isAttached=!1,this.hasSlide=!1,this.state=wi.IDLE,this.data.type?this.type=this.data.type:this.data.src?this.type="image":this.type="html",this.instance.dispatch("contentInit",{content:this})}removePlaceholder(){this.placeholder&&!this.keepPlaceholder()&&setTimeout(()=>{this.placeholder&&(this.placeholder.destroy(),this.placeholder=null)},1e3)}load(e,t){if(this.slide&&this.usePlaceholder())if(this.placeholder){const i=this.placeholder.element;i&&!i.parentElement&&this.slide.container.prepend(i)}else{const i=this.instance.applyFilters("placeholderSrc",this.data.msrc&&this.slide.isFirstSlide?this.data.msrc:!1,this);this.placeholder=new Qb(i,this.slide.container)}this.element&&!t||this.instance.dispatch("contentLoad",{content:this,isLazy:e}).defaultPrevented||(this.isImageContent()?(this.element=Rs("pswp__img","img"),this.displayedImageWidth&&this.loadImage(e)):(this.element=Rs("pswp__content"),this.element.innerHTML=this.data.html||""),t&&this.slide&&this.slide.updateContentSize(!0))}loadImage(e){const t=this.element;this.instance.dispatch("contentLoadImage",{content:this,isLazy:e}).defaultPrevented||(this.updateSrcsetSizes(),this.data.srcset&&(t.srcset=this.data.srcset),t.src=this.data.src,t.alt=this.data.alt||"",this.state=wi.LOADING,t.complete?this.onLoaded():(t.onload=()=>{this.onLoaded()},t.onerror=()=>{this.onError()}))}setSlide(e){this.slide=e,this.hasSlide=!0,this.instance=e.pswp}onLoaded(){this.state=wi.LOADED,this.slide&&(this.instance.dispatch("loadComplete",{slide:this.slide,content:this}),this.slide.isActive&&this.slide.heavyAppended&&!this.element.parentNode&&(this.append(),this.slide.updateContentSize(!0)),(this.state===wi.LOADED||this.state===wi.ERROR)&&this.removePlaceholder())}onError(){this.state=wi.ERROR,this.slide&&(this.displayError(),this.instance.dispatch("loadComplete",{slide:this.slide,isError:!0,content:this}),this.instance.dispatch("loadError",{slide:this.slide,content:this}))}isLoading(){return this.instance.applyFilters("isContentLoading",this.state===wi.LOADING,this)}isError(){return this.state===wi.ERROR}isImageContent(){return this.type==="image"}setDisplayedSize(e,t){if(!!this.element&&(this.placeholder&&this.placeholder.setDisplayedSize(e,t),!this.instance.dispatch("contentResize",{content:this,width:e,height:t}).defaultPrevented&&(Rc(this.element,e,t),this.isImageContent()&&!this.isError()))){const i=!this.displayedImageWidth&&e;this.displayedImageWidth=e,this.displayedImageHeight=t,i?this.loadImage(!1):this.updateSrcsetSizes(),this.slide&&this.instance.dispatch("imageSizeChange",{slide:this.slide,width:e,height:t,content:this})}}isZoomable(){return this.instance.applyFilters("isContentZoomable",this.isImageContent()&&this.state!==wi.ERROR,this)}updateSrcsetSizes(){if(this.data.srcset){const e=this.element,t=this.instance.applyFilters("srcsetSizesWidth",this.displayedImageWidth,this);(!e.dataset.largestUsedSize||t>parseInt(e.dataset.largestUsedSize,10))&&(e.sizes=t+"px",e.dataset.largestUsedSize=String(t))}}usePlaceholder(){return this.instance.applyFilters("useContentPlaceholder",this.isImageContent(),this)}lazyLoad(){this.instance.dispatch("contentLazyLoad",{content:this}).defaultPrevented||this.load(!0)}keepPlaceholder(){return this.instance.applyFilters("isKeepingPlaceholder",this.isLoading(),this)}destroy(){this.hasSlide=!1,this.slide=null,!this.instance.dispatch("contentDestroy",{content:this}).defaultPrevented&&(this.remove(),this.placeholder&&(this.placeholder.destroy(),this.placeholder=null),this.isImageContent()&&this.element&&(this.element.onload=null,this.element.onerror=null,this.element=null))}displayError(){if(this.slide){let e=Rs("pswp__error-msg");e.innerText=this.instance.options.errorMsg,e=this.instance.applyFilters("contentErrorElement",e,this),this.element=Rs("pswp__content pswp__error-msg-container"),this.element.appendChild(e),this.slide.container.innerText="",this.slide.container.appendChild(this.element),this.slide.updateContentSize(!0),this.removePlaceholder()}}append(){if(this.isAttached)return;if(this.isAttached=!0,this.state===wi.ERROR){this.displayError();return}if(this.instance.dispatch("contentAppend",{content:this}).defaultPrevented)return;const e="decode"in this.element;this.isImageContent()?e&&this.slide&&(!this.slide.isActive||Yd())?(this.isDecoding=!0,this.element.decode().finally(()=>{this.isDecoding=!1,this.appendImage()})):this.appendImage():this.element&&!this.element.parentNode&&this.slide.container.appendChild(this.element)}activate(){this.instance.dispatch("contentActivate",{content:this}).defaultPrevented||this.slide&&(this.isImageContent()&&this.isDecoding&&!Yd()?this.appendImage():this.isError()&&this.load(!1,!0))}deactivate(){this.instance.dispatch("contentDeactivate",{content:this})}remove(){this.isAttached=!1,!this.instance.dispatch("contentRemove",{content:this}).defaultPrevented&&(this.element&&this.element.parentNode&&this.element.remove(),this.placeholder&&this.placeholder.element&&this.placeholder.element.remove())}appendImage(){!this.isAttached||this.instance.dispatch("contentAppendImage",{content:this}).defaultPrevented||(this.slide&&this.element&&!this.element.parentNode&&this.slide.container.appendChild(this.element),(this.state===wi.LOADED||this.state===wi.ERROR)&&this.removePlaceholder())}}function Vb(n,e){if(n.getViewportSizeFn){const t=n.getViewportSizeFn(n,e);if(t)return t}return{x:document.documentElement.clientWidth,y:window.innerHeight}}function Zo(n,e,t,i,r){let s;if(e.paddingFn)s=e.paddingFn(t,i,r)[n];else if(e.padding)s=e.padding[n];else{const o="padding"+n[0].toUpperCase()+n.slice(1);e[o]&&(s=e[o])}return s||0}function Zb(n,e,t,i){return{x:e.x-Zo("left",n,e,t,i)-Zo("right",n,e,t,i),y:e.y-Zo("top",n,e,t,i)-Zo("bottom",n,e,t,i)}}const Xd=4e3;class $b{constructor(e,t,i,r){this.pswp=r,this.options=e,this.itemData=t,this.index=i}update(e,t,i){this.elementSize={x:e,y:t},this.panAreaSize=i;const r=this.panAreaSize.x/this.elementSize.x,s=this.panAreaSize.y/this.elementSize.y;this.fit=Math.min(1,r<s?r:s),this.fill=Math.min(1,r>s?r:s),this.vFill=Math.min(1,s),this.initial=this._getInitial(),this.secondary=this._getSecondary(),this.max=Math.max(this.initial,this.secondary,this._getMax()),this.min=Math.min(this.fit,this.initial,this.secondary),this.pswp&&this.pswp.dispatch("zoomLevelsUpdate",{zoomLevels:this,slideData:this.itemData})}_parseZoomLevelOption(e){const t=e+"ZoomLevel",i=this.options[t];if(!!i)return typeof i=="function"?i(this):i==="fill"?this.fill:i==="fit"?this.fit:Number(i)}_getSecondary(){let e=this._parseZoomLevelOption("secondary");return e||(e=Math.min(1,this.fit*3),e*this.elementSize.x>Xd&&(e=Xd/this.elementSize.x),e)}_getInitial(){return this._parseZoomLevelOption("initial")||this.fit}_getMax(){const e=this._parseZoomLevelOption("max");return e||Math.max(1,this.fit*4)}}function Ap(n,e,t){const i=e.createContentFromData(n,t);if(!i||!i.lazyLoad)return;const{options:r}=e,s=e.viewportSize||Vb(r,e),o=Zb(r,s,n,t),a=new $b(r,n,-1);return a.update(i.width,i.height,o),i.lazyLoad(),i.setDisplayedSize(Math.ceil(i.width*a.initial),Math.ceil(i.height*a.initial)),i}function qb(n,e){const t=e.getItemData(n);if(!e.dispatch("lazyLoadSlide",{index:n,itemData:t}).defaultPrevented)return Ap(t,e,n)}class Jb extends Hb{getNumItems(){let e;const{dataSource:t}=this.options;t?"length"in t?e=t.length:"gallery"in t&&(t.items||(t.items=this._getGalleryDOMElements(t.gallery)),t.items&&(e=t.items.length)):e=0;const i=this.dispatch("numItems",{dataSource:t,numItems:e});return this.applyFilters("numItems",i.numItems,t)}createContentFromData(e,t){return new Kb(e,this,t)}getItemData(e){const{dataSource:t}=this.options;let i;Array.isArray(t)?i=t[e]:t&&t.gallery&&(t.items||(t.items=this._getGalleryDOMElements(t.gallery)),i=t.items[e]);let r=i;r instanceof Element&&(r=this._domElementToItemData(r));const s=this.dispatch("itemData",{itemData:r||{},index:e});return this.applyFilters("itemData",s.itemData,e)}_getGalleryDOMElements(e){return this.options.children||this.options.childSelector?$o(this.options.children,this.options.childSelector,e)||[]:[e]}_domElementToItemData(e){const t={element:e},i=e.tagName==="A"?e:e.querySelector("a");if(i){t.src=i.dataset.pswpSrc||i.href,i.dataset.pswpSrcset&&(t.srcset=i.dataset.pswpSrcset),t.width=parseInt(i.dataset.pswpWidth,10),t.height=parseInt(i.dataset.pswpHeight,10),t.w=t.width,t.h=t.height,i.dataset.pswpType&&(t.type=i.dataset.pswpType);const r=e.querySelector("img");r&&(t.msrc=r.currentSrc||r.src,t.alt=r.getAttribute("alt")),(i.dataset.pswpCropped||i.dataset.cropped)&&(t.thumbCropped=!0)}return this.applyFilters("domItemData",t,e,i)}lazyLoadData(e,t){return Ap(e,this,t)}}class eC extends Jb{constructor(e){super(),this.options=e||{},this._uid=0}init(){this.onThumbnailsClick=this.onThumbnailsClick.bind(this),$o(this.options.gallery,this.options.gallerySelector).forEach(e=>{e.addEventListener("click",this.onThumbnailsClick,!1)})}onThumbnailsClick(e){if(Wb(e)||window.pswp||window.navigator.onLine===!1)return;let t={x:e.clientX,y:e.clientY};!t.x&&!t.y&&(t=null);let i=this.getClickedIndex(e);i=this.applyFilters("clickedIndex",i,e,this);const r={gallery:e.currentTarget};i>=0&&(e.preventDefault(),this.loadAndOpen(i,r,t))}getClickedIndex(e){if(this.options.getClickedIndexFn)return this.options.getClickedIndexFn.call(this,e);const t=e.target,r=$o(this.options.children,this.options.childSelector,e.currentTarget).findIndex(s=>s===t||s.contains(t));return r!==-1?r:this.options.children||this.options.childSelector?-1:0}loadAndOpen(e,t,i){return window.pswp?!1:(this.options.index=e,this.options.initialPointerPos=i,this.shouldOpen=!0,this.preload(e,t),!0)}preload(e,t){const{options:i}=this;t&&(i.dataSource=t);const r=[],s=typeof i.pswpModule;if(Yb(i.pswpModule))r.push(Promise.resolve(i.pswpModule));else{if(s==="string")throw new Error("pswpModule as string is no longer supported");if(s==="function")r.push(i.pswpModule());else throw new Error("pswpModule is not valid")}typeof i.openPromise=="function"&&r.push(i.openPromise()),i.preloadFirstSlide!==!1&&e>=0&&(this._preloadedContent=qb(e,this));const o=++this._uid;Promise.all(r).then(a=>{if(this.shouldOpen){const l=a[0];this._openPhotoswipe(l,o)}})}_openPhotoswipe(e,t){if(t!==this._uid&&this.shouldOpen||(this.shouldOpen=!1,window.pswp))return;const i=typeof e=="object"?new e.default(this.options):new e(this.options);this.pswp=i,window.pswp=i,Object.keys(this._listeners).forEach(r=>{this._listeners[r].forEach(s=>{i.on(r,s)})}),Object.keys(this._filters).forEach(r=>{this._filters[r].forEach(s=>{i.addFilter(r,s.fn,s.priority)})}),this._preloadedContent&&(i.contentLoader.addToCache(this._preloadedContent),this._preloadedContent=null),i.on("destroy",()=>{this.pswp=null,window.pswp=null}),i.init()}destroy(){this.pswp&&this.pswp.destroy(),this.shouldOpen=!1,this._listeners=null,$o(this.options.gallery,this.options.gallerySelector).forEach(e=>{e.removeEventListener("click",this.onThumbnailsClick,!1)})}}var xp;xp=class{isValid(e){var t;t=!0;try{return this.validate(e),t}catch{return t=!1,t}}validate(e){return this.checkContainsNoLetters(e),this.checkValidOrientation(e),this.checkNumbers(e)}checkContainsNoLetters(e){var t;if(t=/(?![neswd])[a-z]/i.test(e),t)throw new Error("Coordinate contains invalid alphanumeric characters.")}checkValidOrientation(e){var t;if(t=/^[^nsew]*[ns]?[^nsew]*[ew]?[^nsew]*$/i.test(e),!t)throw new Error("Invalid cardinal direction.")}checkNumbers(e){var t;return t=e.match(/-?\d+(\.\d+)?/g),this.checkAnyCoordinateNumbers(t),this.checkEvenCoordinateNumbers(t),this.checkMaximumCoordinateNumbers(t)}checkAnyCoordinateNumbers(e){if(e.length===0)throw new Error("Could not find any coordinate number")}checkEvenCoordinateNumbers(e){var t;if(t=e.length%2,t)throw new Error("Uneven count of latitude/longitude numbers")}checkMaximumCoordinateNumbers(e){if(e.length>6)throw new Error("Too many coordinate numbers")}};var tC=xp,Ep;Ep=class{constructor(e){e=this.normalizeCoordinateNumbers(e),this.sign=this.normalizedSignOf(e[0]),[this.degrees,this.minutes,this.seconds,this.milliseconds]=e.map(Math.abs)}normalizeCoordinateNumbers(e){var t,i,r,s,o;for(o=[0,0,0,0],i=r=0,s=e.length;r<s;i=++r)t=e[i],o[i]=parseFloat(t);return o}normalizedSignOf(e){return e>=0?1:-1}detectSpecialFormats(){if(this.degreesCanBeSpecial()){if(this.degreesCanBeMilliseconds())return this.degreesAsMilliseconds();if(this.degreesCanBeDegreesMinutesAndSeconds())return this.degreesAsDegreesMinutesAndSeconds();if(this.degreesCanBeDegreesAndMinutes())return this.degreesAsDegreesAndMinutes()}}degreesCanBeSpecial(){var e;return e=!1,!this.minutes&&!this.seconds&&(e=!0),e}degreesCanBeMilliseconds(){var e;return this.degrees>909090?e=!0:e=!1,e}degreesAsMilliseconds(){return this.milliseconds=this.degrees,this.degrees=0}degreesCanBeDegreesMinutesAndSeconds(){var e;return this.degrees>9090?e=!0:e=!1,e}degreesAsDegreesMinutesAndSeconds(){var e;return e=Math.floor(this.degrees/1e4),this.minutes=Math.floor((this.degrees-e*1e4)/100),this.seconds=Math.floor(this.degrees-e*1e4-this.minutes*100),this.degrees=e}degreesCanBeDegreesAndMinutes(){var e;return this.degrees>360?e=!0:e=!1,e}degreesAsDegreesAndMinutes(){var e;return e=Math.floor(this.degrees/100),this.minutes=this.degrees-e*100,this.degrees=e}toDecimal(){var e;return e=this.sign*(this.degrees+this.minutes/60+this.seconds/3600+this.milliseconds/36e5),e}};var iC=Ep,bp,Cp,Ip;Ip=tC;bp=iC;Cp=class{constructor(e){this.coordinates=e,this.latitudeNumbers=null,this.longitudeNumbers=null,this.validate(),this.parse()}validate(){var e;return e=new Ip,e.validate(this.coordinates)}parse(){return this.groupCoordinateNumbers(),this.latitude=this.extractLatitude(),this.longitude=this.extractLongitude()}groupCoordinateNumbers(){var e,t;return e=this.extractCoordinateNumbers(this.coordinates),t=e.length/2,this.latitudeNumbers=e.slice(0,t),this.longitudeNumbers=e.slice(0-t)}extractCoordinateNumbers(e){return e.match(/-?\d+(\.\d+)?/g)}extractLatitude(){var e;return e=this.coordinateNumbersToDecimal(this.latitudeNumbers),this.latitudeIsNegative()&&(e=e*-1),e}extractLongitude(){var e;return e=this.coordinateNumbersToDecimal(this.longitudeNumbers),this.longitudeIsNegative()&&(e=e*-1),e}coordinateNumbersToDecimal(e){var t,i;return t=new bp(e),t.detectSpecialFormats(),i=t.toDecimal(),i}latitudeIsNegative(){var e;return e=this.coordinates.match(/s/i),e}longitudeIsNegative(){var e;return e=this.coordinates.match(/w/i),e}getLatitude(){return this.latitude}getLongitude(){return this.longitude}};var nC=Cp;Rf.plugin(sc);window.Alpine=Rf;window.ImageBlobReduce=new Wy;window.uuidv1=Vy;window.getInitialSourceName=Nu;window.rodnikConfig={zoomLevels:{approximated:6,final:9}};window.initOpenLayers=function(n){window.rodnikMap=new Bb(n)};window.initOpenHelper=function(n,e){window.rodnikHelper=new Gb(n,e)};window.initOpenPicker=function(n,e){window.rodnikPicker=new zb(n,e)};window.parseCoordinates=function(n){return new nC(n)};window.initOpenDiffer=function(n,e,t){window.rodnikDiffer=new jb(n,e,t)};window.openedPhotoswipe=null;window.initPhotoSwipe=function(n){const e=new eC({gallery:n,children:".photoswipeImage",pswpModule:()=>Mm(()=>import("./photoswipe.esm.382b1873.js"),[]),loop:!1});e.init(),e.on("beforeOpen",()=>{window.openedPhotoswipe=e.pswp}),e.on("destroy",()=>{window.openedPhotoswipe=null})};Fc.start();window.ymCode=90143259;
