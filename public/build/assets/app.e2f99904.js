const Rg="modulepreload",nh={},Tg="/build/",Og=function(e,t){return!t||t.length===0?e():Promise.all(t.map(i=>{if(i=`${Tg}${i}`,i in nh)return;nh[i]=!0;const r=i.endsWith(".css"),s=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${s}`))return;const a=document.createElement("link");if(a.rel=r?"stylesheet":Rg,r||(a.as="script",a.crossOrigin=""),a.href=i,document.head.appendChild(a),r)return new Promise((o,l)=>{a.addEventListener("load",o),a.addEventListener("error",()=>l(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e())};var Mg=Object.create,vd=Object.defineProperty,Lg=Object.getOwnPropertyDescriptor,Ad=Object.getOwnPropertyNames,Pg=Object.getPrototypeOf,Fg=Object.prototype.hasOwnProperty,nn=(n,e)=>function(){return e||(0,n[Ad(n)[0]])((e={exports:{}}).exports,e),e.exports},Dg=(n,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of Ad(e))!Fg.call(n,r)&&r!==t&&vd(n,r,{get:()=>e[r],enumerable:!(i=Lg(e,r))||i.enumerable});return n},at=(n,e,t)=>(t=n!=null?Mg(Pg(n)):{},Dg(e||!n||!n.__esModule?vd(t,"default",{value:n,enumerable:!0}):t,n)),Xt=nn({"../alpine/packages/alpinejs/dist/module.cjs.js"(n,e){var t=Object.create,i=Object.defineProperty,r=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,a=Object.getPrototypeOf,o=Object.prototype.hasOwnProperty,l=(u,g)=>function(){return g||(0,u[s(u)[0]])((g={exports:{}}).exports,g),g.exports},c=(u,g)=>{for(var A in g)i(u,A,{get:g[A],enumerable:!0})},h=(u,g,A,R)=>{if(g&&typeof g=="object"||typeof g=="function")for(let F of s(g))!o.call(u,F)&&F!==A&&i(u,F,{get:()=>g[F],enumerable:!(R=r(g,F))||R.enumerable});return u},d=(u,g,A)=>(A=u!=null?t(a(u)):{},h(g||!u||!u.__esModule?i(A,"default",{value:u,enumerable:!0}):A,u)),f=u=>h(i({},"__esModule",{value:!0}),u),p=l({"node_modules/@vue/shared/dist/shared.cjs.js"(u){Object.defineProperty(u,"__esModule",{value:!0});function g(K,de){const Ae=Object.create(null),Ee=K.split(",");for(let He=0;He<Ee.length;He++)Ae[Ee[He]]=!0;return de?He=>!!Ae[He.toLowerCase()]:He=>!!Ae[He]}var A={[1]:"TEXT",[2]:"CLASS",[4]:"STYLE",[8]:"PROPS",[16]:"FULL_PROPS",[32]:"HYDRATE_EVENTS",[64]:"STABLE_FRAGMENT",[128]:"KEYED_FRAGMENT",[256]:"UNKEYED_FRAGMENT",[512]:"NEED_PATCH",[1024]:"DYNAMIC_SLOTS",[2048]:"DEV_ROOT_FRAGMENT",[-1]:"HOISTED",[-2]:"BAIL"},R={[1]:"STABLE",[2]:"DYNAMIC",[3]:"FORWARDED"},F="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt",L=g(F),k=2;function H(K,de=0,Ae=K.length){let Ee=K.split(/(\r?\n)/);const He=Ee.filter((kt,wt)=>wt%2===1);Ee=Ee.filter((kt,wt)=>wt%2===0);let nt=0;const Dt=[];for(let kt=0;kt<Ee.length;kt++)if(nt+=Ee[kt].length+(He[kt]&&He[kt].length||0),nt>=de){for(let wt=kt-k;wt<=kt+k||Ae>nt;wt++){if(wt<0||wt>=Ee.length)continue;const Xs=wt+1;Dt.push(`${Xs}${" ".repeat(Math.max(3-String(Xs).length,0))}|  ${Ee[wt]}`);const Gr=Ee[wt].length,po=He[wt]&&He[wt].length||0;if(wt===kt){const jr=de-(nt-(Gr+po)),sc=Math.max(1,Ae>nt?Gr-jr:Ae-de);Dt.push("   |  "+" ".repeat(jr)+"^".repeat(sc))}else if(wt>kt){if(Ae>nt){const jr=Math.max(Math.min(Ae-nt,Gr),1);Dt.push("   |  "+"^".repeat(jr))}nt+=Gr+po}}break}return Dt.join(`
`)}var oe="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",he=g(oe),Se=g(oe+",async,autofocus,autoplay,controls,default,defer,disabled,hidden,loop,open,required,reversed,scoped,seamless,checked,muted,multiple,selected"),it=/[>/="'\u0009\u000a\u000c\u0020]/,ze={};function tt(K){if(ze.hasOwnProperty(K))return ze[K];const de=it.test(K);return de&&console.error(`unsafe attribute name: ${K}`),ze[K]=!de}var qt={acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},Si=g("animation-iteration-count,border-image-outset,border-image-slice,border-image-width,box-flex,box-flex-group,box-ordinal-group,column-count,columns,flex,flex-grow,flex-positive,flex-shrink,flex-negative,flex-order,grid-row,grid-row-end,grid-row-span,grid-row-start,grid-column,grid-column-end,grid-column-span,grid-column-start,font-weight,line-clamp,line-height,opacity,order,orphans,tab-size,widows,z-index,zoom,fill-opacity,flood-opacity,stop-opacity,stroke-dasharray,stroke-dashoffset,stroke-miterlimit,stroke-opacity,stroke-width"),Te=g("accept,accept-charset,accesskey,action,align,allow,alt,async,autocapitalize,autocomplete,autofocus,autoplay,background,bgcolor,border,buffered,capture,challenge,charset,checked,cite,class,code,codebase,color,cols,colspan,content,contenteditable,contextmenu,controls,coords,crossorigin,csp,data,datetime,decoding,default,defer,dir,dirname,disabled,download,draggable,dropzone,enctype,enterkeyhint,for,form,formaction,formenctype,formmethod,formnovalidate,formtarget,headers,height,hidden,high,href,hreflang,http-equiv,icon,id,importance,integrity,ismap,itemprop,keytype,kind,label,lang,language,loading,list,loop,low,manifest,max,maxlength,minlength,media,min,multiple,muted,name,novalidate,open,optimum,pattern,ping,placeholder,poster,preload,radiogroup,readonly,referrerpolicy,rel,required,reversed,rows,rowspan,sandbox,scope,scoped,selected,shape,size,sizes,slot,span,spellcheck,src,srcdoc,srclang,srcset,start,step,style,summary,tabindex,target,title,translate,type,usemap,value,width,wrap");function Xe(K){if(pi(K)){const de={};for(let Ae=0;Ae<K.length;Ae++){const Ee=K[Ae],He=Xe(kn(Ee)?Ft(Ee):Ee);if(He)for(const nt in He)de[nt]=He[nt]}return de}else if(Ti(K))return K}var Be=/;(?![^(]*\))/g,Ke=/:(.+)/;function Ft(K){const de={};return K.split(Be).forEach(Ae=>{if(Ae){const Ee=Ae.split(Ke);Ee.length>1&&(de[Ee[0].trim()]=Ee[1].trim())}}),de}function gi(K){let de="";if(!K)return de;for(const Ae in K){const Ee=K[Ae],He=Ae.startsWith("--")?Ae:fo(Ae);(kn(Ee)||typeof Ee=="number"&&Si(He))&&(de+=`${He}:${Ee};`)}return de}function Ri(K){let de="";if(kn(K))de=K;else if(pi(K))for(let Ae=0;Ae<K.length;Ae++){const Ee=Ri(K[Ae]);Ee&&(de+=Ee+" ")}else if(Ti(K))for(const Ae in K)K[Ae]&&(de+=Ae+" ");return de.trim()}var Sr="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",Ns="svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistanceLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view",Bs="area,base,br,col,embed,hr,img,input,link,meta,param,source,track,wbr",Rr=g(Sr),Ql=g(Ns),Tr=g(Bs),Kl=/["'&<>]/;function Vl(K){const de=""+K,Ae=Kl.exec(de);if(!Ae)return de;let Ee="",He,nt,Dt=0;for(nt=Ae.index;nt<de.length;nt++){switch(de.charCodeAt(nt)){case 34:He="&quot;";break;case 38:He="&amp;";break;case 39:He="&#39;";break;case 60:He="&lt;";break;case 62:He="&gt;";break;default:continue}Dt!==nt&&(Ee+=de.substring(Dt,nt)),Dt=nt+1,Ee+=He}return Dt!==nt?Ee+de.substring(Dt,nt):Ee}var Ja=/^-?>|<!--|-->|--!>|<!-$/g;function $l(K){return K.replace(Ja,"")}function Zl(K,de){if(K.length!==de.length)return!1;let Ae=!0;for(let Ee=0;Ae&&Ee<K.length;Ee++)Ae=Or(K[Ee],de[Ee]);return Ae}function Or(K,de){if(K===de)return!0;let Ae=Us(K),Ee=Us(de);if(Ae||Ee)return Ae&&Ee?K.getTime()===de.getTime():!1;if(Ae=pi(K),Ee=pi(de),Ae||Ee)return Ae&&Ee?Zl(K,de):!1;if(Ae=Ti(K),Ee=Ti(de),Ae||Ee){if(!Ae||!Ee)return!1;const He=Object.keys(K).length,nt=Object.keys(de).length;if(He!==nt)return!1;for(const Dt in K){const kt=K.hasOwnProperty(Dt),wt=de.hasOwnProperty(Dt);if(kt&&!wt||!kt&&wt||!Or(K[Dt],de[Dt]))return!1}}return String(K)===String(de)}function eo(K,de){return K.findIndex(Ae=>Or(Ae,de))}var to=K=>K==null?"":Ti(K)?JSON.stringify(K,ql,2):String(K),ql=(K,de)=>Dn(de)?{[`Map(${de.size})`]:[...de.entries()].reduce((Ae,[Ee,He])=>(Ae[`${Ee} =>`]=He,Ae),{})}:_i(de)?{[`Set(${de.size})`]:[...de.values()]}:Ti(de)&&!pi(de)&&!oo(de)?String(de):de,Jl=["bigInt","optionalChaining","nullishCoalescingOperator"],Gs=Object.freeze({}),js=Object.freeze([]),zs=()=>{},Mr=()=>!1,Lr=/^on[^a-z]/,Pr=K=>Lr.test(K),Fr=K=>K.startsWith("onUpdate:"),io=Object.assign,no=(K,de)=>{const Ae=K.indexOf(de);Ae>-1&&K.splice(Ae,1)},ro=Object.prototype.hasOwnProperty,so=(K,de)=>ro.call(K,de),pi=Array.isArray,Dn=K=>Nn(K)==="[object Map]",_i=K=>Nn(K)==="[object Set]",Us=K=>K instanceof Date,Ws=K=>typeof K=="function",kn=K=>typeof K=="string",ec=K=>typeof K=="symbol",Ti=K=>K!==null&&typeof K=="object",Dr=K=>Ti(K)&&Ws(K.then)&&Ws(K.catch),ao=Object.prototype.toString,Nn=K=>ao.call(K),tc=K=>Nn(K).slice(8,-1),oo=K=>Nn(K)==="[object Object]",lo=K=>kn(K)&&K!=="NaN"&&K[0]!=="-"&&""+parseInt(K,10)===K,co=g(",key,ref,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Bn=K=>{const de=Object.create(null);return Ae=>de[Ae]||(de[Ae]=K(Ae))},uo=/-(\w)/g,ho=Bn(K=>K.replace(uo,(de,Ae)=>Ae?Ae.toUpperCase():"")),ic=/\B([A-Z])/g,fo=Bn(K=>K.replace(ic,"-$1").toLowerCase()),Gn=Bn(K=>K.charAt(0).toUpperCase()+K.slice(1)),nc=Bn(K=>K?`on${Gn(K)}`:""),Ys=(K,de)=>K!==de&&(K===K||de===de),rc=(K,de)=>{for(let Ae=0;Ae<K.length;Ae++)K[Ae](de)},kr=(K,de,Ae)=>{Object.defineProperty(K,de,{configurable:!0,enumerable:!1,value:Ae})},Nr=K=>{const de=parseFloat(K);return isNaN(de)?K:de},Br,go=()=>Br||(Br=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});u.EMPTY_ARR=js,u.EMPTY_OBJ=Gs,u.NO=Mr,u.NOOP=zs,u.PatchFlagNames=A,u.babelParserDefaultPlugins=Jl,u.camelize=ho,u.capitalize=Gn,u.def=kr,u.escapeHtml=Vl,u.escapeHtmlComment=$l,u.extend=io,u.generateCodeFrame=H,u.getGlobalThis=go,u.hasChanged=Ys,u.hasOwn=so,u.hyphenate=fo,u.invokeArrayFns=rc,u.isArray=pi,u.isBooleanAttr=Se,u.isDate=Us,u.isFunction=Ws,u.isGloballyWhitelisted=L,u.isHTMLTag=Rr,u.isIntegerKey=lo,u.isKnownAttr=Te,u.isMap=Dn,u.isModelListener=Fr,u.isNoUnitNumericStyleProp=Si,u.isObject=Ti,u.isOn=Pr,u.isPlainObject=oo,u.isPromise=Dr,u.isReservedProp=co,u.isSSRSafeAttrName=tt,u.isSVGTag=Ql,u.isSet=_i,u.isSpecialBooleanAttr=he,u.isString=kn,u.isSymbol=ec,u.isVoidTag=Tr,u.looseEqual=Or,u.looseIndexOf=eo,u.makeMap=g,u.normalizeClass=Ri,u.normalizeStyle=Xe,u.objectToString=ao,u.parseStringStyle=Ft,u.propsToAttrMap=qt,u.remove=no,u.slotFlagsText=R,u.stringifyStyle=gi,u.toDisplayString=to,u.toHandlerKey=nc,u.toNumber=Nr,u.toRawType=tc,u.toTypeString=Nn}}),m=l({"node_modules/@vue/shared/index.js"(u,g){g.exports=p()}}),y=l({"node_modules/@vue/reactivity/dist/reactivity.cjs.js"(u){Object.defineProperty(u,"__esModule",{value:!0});var g=m(),A=new WeakMap,R=[],F,L=Symbol("iterate"),k=Symbol("Map key iterate");function H(S){return S&&S._isEffect===!0}function oe(S,Z=g.EMPTY_OBJ){H(S)&&(S=S.raw);const ae=it(S,Z);return Z.lazy||ae(),ae}function he(S){S.active&&(ze(S),S.options.onStop&&S.options.onStop(),S.active=!1)}var Se=0;function it(S,Z){const ae=function(){if(!ae.active)return S();if(!R.includes(ae)){ze(ae);try{return Te(),R.push(ae),F=ae,S()}finally{R.pop(),Xe(),F=R[R.length-1]}}};return ae.id=Se++,ae.allowRecurse=!!Z.allowRecurse,ae._isEffect=!0,ae.active=!0,ae.raw=S,ae.deps=[],ae.options=Z,ae}function ze(S){const{deps:Z}=S;if(Z.length){for(let ae=0;ae<Z.length;ae++)Z[ae].delete(S);Z.length=0}}var tt=!0,qt=[];function Si(){qt.push(tt),tt=!1}function Te(){qt.push(tt),tt=!0}function Xe(){const S=qt.pop();tt=S===void 0?!0:S}function Be(S,Z,ae){if(!tt||F===void 0)return;let we=A.get(S);we||A.set(S,we=new Map);let ge=we.get(ae);ge||we.set(ae,ge=new Set),ge.has(F)||(ge.add(F),F.deps.push(ge),F.options.onTrack&&F.options.onTrack({effect:F,target:S,type:Z,key:ae}))}function Ke(S,Z,ae,we,ge,Ce){const ke=A.get(S);if(!ke)return;const ot=new Set,Nt=It=>{It&&It.forEach(mi=>{(mi!==F||mi.allowRecurse)&&ot.add(mi)})};if(Z==="clear")ke.forEach(Nt);else if(ae==="length"&&g.isArray(S))ke.forEach((It,mi)=>{(mi==="length"||mi>=we)&&Nt(It)});else switch(ae!==void 0&&Nt(ke.get(ae)),Z){case"add":g.isArray(S)?g.isIntegerKey(ae)&&Nt(ke.get("length")):(Nt(ke.get(L)),g.isMap(S)&&Nt(ke.get(k)));break;case"delete":g.isArray(S)||(Nt(ke.get(L)),g.isMap(S)&&Nt(ke.get(k)));break;case"set":g.isMap(S)&&Nt(ke.get(L));break}const Hs=It=>{It.options.onTrigger&&It.options.onTrigger({effect:It,target:S,key:ae,type:Z,newValue:we,oldValue:ge,oldTarget:Ce}),It.options.scheduler?It.options.scheduler(It):It()};ot.forEach(Hs)}var Ft=g.makeMap("__proto__,__v_isRef,__isVue"),gi=new Set(Object.getOwnPropertyNames(Symbol).map(S=>Symbol[S]).filter(g.isSymbol)),Ri=Tr(),Sr=Tr(!1,!0),Ns=Tr(!0),Bs=Tr(!0,!0),Rr=Ql();function Ql(){const S={};return["includes","indexOf","lastIndexOf"].forEach(Z=>{S[Z]=function(...ae){const we=K(this);for(let Ce=0,ke=this.length;Ce<ke;Ce++)Be(we,"get",Ce+"");const ge=we[Z](...ae);return ge===-1||ge===!1?we[Z](...ae.map(K)):ge}}),["push","pop","shift","unshift","splice"].forEach(Z=>{S[Z]=function(...ae){Si();const we=K(this)[Z].apply(this,ae);return Xe(),we}}),S}function Tr(S=!1,Z=!1){return function(we,ge,Ce){if(ge==="__v_isReactive")return!S;if(ge==="__v_isReadonly")return S;if(ge==="__v_raw"&&Ce===(S?Z?ho:uo:Z?Bn:co).get(we))return we;const ke=g.isArray(we);if(!S&&ke&&g.hasOwn(Rr,ge))return Reflect.get(Rr,ge,Ce);const ot=Reflect.get(we,ge,Ce);return(g.isSymbol(ge)?gi.has(ge):Ft(ge))||(S||Be(we,"get",ge),Z)?ot:Ee(ot)?!ke||!g.isIntegerKey(ge)?ot.value:ot:g.isObject(ot)?S?Ys(ot):Gn(ot):ot}}var Kl=Ja(),Vl=Ja(!0);function Ja(S=!1){return function(ae,we,ge,Ce){let ke=ae[we];if(!S&&(ge=K(ge),ke=K(ke),!g.isArray(ae)&&Ee(ke)&&!Ee(ge)))return ke.value=ge,!0;const ot=g.isArray(ae)&&g.isIntegerKey(we)?Number(we)<ae.length:g.hasOwn(ae,we),Nt=Reflect.set(ae,we,ge,Ce);return ae===K(Ce)&&(ot?g.hasChanged(ge,ke)&&Ke(ae,"set",we,ge,ke):Ke(ae,"add",we,ge)),Nt}}function $l(S,Z){const ae=g.hasOwn(S,Z),we=S[Z],ge=Reflect.deleteProperty(S,Z);return ge&&ae&&Ke(S,"delete",Z,void 0,we),ge}function Zl(S,Z){const ae=Reflect.has(S,Z);return(!g.isSymbol(Z)||!gi.has(Z))&&Be(S,"has",Z),ae}function Or(S){return Be(S,"iterate",g.isArray(S)?"length":L),Reflect.ownKeys(S)}var eo={get:Ri,set:Kl,deleteProperty:$l,has:Zl,ownKeys:Or},to={get:Ns,set(S,Z){return console.warn(`Set operation on key "${String(Z)}" failed: target is readonly.`,S),!0},deleteProperty(S,Z){return console.warn(`Delete operation on key "${String(Z)}" failed: target is readonly.`,S),!0}},ql=g.extend({},eo,{get:Sr,set:Vl}),Jl=g.extend({},to,{get:Bs}),Gs=S=>g.isObject(S)?Gn(S):S,js=S=>g.isObject(S)?Ys(S):S,zs=S=>S,Mr=S=>Reflect.getPrototypeOf(S);function Lr(S,Z,ae=!1,we=!1){S=S.__v_raw;const ge=K(S),Ce=K(Z);Z!==Ce&&!ae&&Be(ge,"get",Z),!ae&&Be(ge,"get",Ce);const{has:ke}=Mr(ge),ot=we?zs:ae?js:Gs;if(ke.call(ge,Z))return ot(S.get(Z));if(ke.call(ge,Ce))return ot(S.get(Ce));S!==ge&&S.get(Z)}function Pr(S,Z=!1){const ae=this.__v_raw,we=K(ae),ge=K(S);return S!==ge&&!Z&&Be(we,"has",S),!Z&&Be(we,"has",ge),S===ge?ae.has(S):ae.has(S)||ae.has(ge)}function Fr(S,Z=!1){return S=S.__v_raw,!Z&&Be(K(S),"iterate",L),Reflect.get(S,"size",S)}function io(S){S=K(S);const Z=K(this);return Mr(Z).has.call(Z,S)||(Z.add(S),Ke(Z,"add",S,S)),this}function no(S,Z){Z=K(Z);const ae=K(this),{has:we,get:ge}=Mr(ae);let Ce=we.call(ae,S);Ce?lo(ae,we,S):(S=K(S),Ce=we.call(ae,S));const ke=ge.call(ae,S);return ae.set(S,Z),Ce?g.hasChanged(Z,ke)&&Ke(ae,"set",S,Z,ke):Ke(ae,"add",S,Z),this}function ro(S){const Z=K(this),{has:ae,get:we}=Mr(Z);let ge=ae.call(Z,S);ge?lo(Z,ae,S):(S=K(S),ge=ae.call(Z,S));const Ce=we?we.call(Z,S):void 0,ke=Z.delete(S);return ge&&Ke(Z,"delete",S,void 0,Ce),ke}function so(){const S=K(this),Z=S.size!==0,ae=g.isMap(S)?new Map(S):new Set(S),we=S.clear();return Z&&Ke(S,"clear",void 0,void 0,ae),we}function pi(S,Z){return function(we,ge){const Ce=this,ke=Ce.__v_raw,ot=K(ke),Nt=Z?zs:S?js:Gs;return!S&&Be(ot,"iterate",L),ke.forEach((Hs,It)=>we.call(ge,Nt(Hs),Nt(It),Ce))}}function Dn(S,Z,ae){return function(...we){const ge=this.__v_raw,Ce=K(ge),ke=g.isMap(Ce),ot=S==="entries"||S===Symbol.iterator&&ke,Nt=S==="keys"&&ke,Hs=ge[S](...we),It=ae?zs:Z?js:Gs;return!Z&&Be(Ce,"iterate",Nt?k:L),{next(){const{value:mi,done:ac}=Hs.next();return ac?{value:mi,done:ac}:{value:ot?[It(mi[0]),It(mi[1])]:It(mi),done:ac}},[Symbol.iterator](){return this}}}}function _i(S){return function(...Z){{const ae=Z[0]?`on key "${Z[0]}" `:"";console.warn(`${g.capitalize(S)} operation ${ae}failed: target is readonly.`,K(this))}return S==="delete"?!1:this}}function Us(){const S={get(Ce){return Lr(this,Ce)},get size(){return Fr(this)},has:Pr,add:io,set:no,delete:ro,clear:so,forEach:pi(!1,!1)},Z={get(Ce){return Lr(this,Ce,!1,!0)},get size(){return Fr(this)},has:Pr,add:io,set:no,delete:ro,clear:so,forEach:pi(!1,!0)},ae={get(Ce){return Lr(this,Ce,!0)},get size(){return Fr(this,!0)},has(Ce){return Pr.call(this,Ce,!0)},add:_i("add"),set:_i("set"),delete:_i("delete"),clear:_i("clear"),forEach:pi(!0,!1)},we={get(Ce){return Lr(this,Ce,!0,!0)},get size(){return Fr(this,!0)},has(Ce){return Pr.call(this,Ce,!0)},add:_i("add"),set:_i("set"),delete:_i("delete"),clear:_i("clear"),forEach:pi(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(Ce=>{S[Ce]=Dn(Ce,!1,!1),ae[Ce]=Dn(Ce,!0,!1),Z[Ce]=Dn(Ce,!1,!0),we[Ce]=Dn(Ce,!0,!0)}),[S,ae,Z,we]}var[Ws,kn,ec,Ti]=Us();function Dr(S,Z){const ae=Z?S?Ti:ec:S?kn:Ws;return(we,ge,Ce)=>ge==="__v_isReactive"?!S:ge==="__v_isReadonly"?S:ge==="__v_raw"?we:Reflect.get(g.hasOwn(ae,ge)&&ge in we?ae:we,ge,Ce)}var ao={get:Dr(!1,!1)},Nn={get:Dr(!1,!0)},tc={get:Dr(!0,!1)},oo={get:Dr(!0,!0)};function lo(S,Z,ae){const we=K(ae);if(we!==ae&&Z.call(S,we)){const ge=g.toRawType(S);console.warn(`Reactive ${ge} contains both the raw and reactive versions of the same object${ge==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}var co=new WeakMap,Bn=new WeakMap,uo=new WeakMap,ho=new WeakMap;function ic(S){switch(S){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function fo(S){return S.__v_skip||!Object.isExtensible(S)?0:ic(g.toRawType(S))}function Gn(S){return S&&S.__v_isReadonly?S:kr(S,!1,eo,ao,co)}function nc(S){return kr(S,!1,ql,Nn,Bn)}function Ys(S){return kr(S,!0,to,tc,uo)}function rc(S){return kr(S,!0,Jl,oo,ho)}function kr(S,Z,ae,we,ge){if(!g.isObject(S))return console.warn(`value cannot be made reactive: ${String(S)}`),S;if(S.__v_raw&&!(Z&&S.__v_isReactive))return S;const Ce=ge.get(S);if(Ce)return Ce;const ke=fo(S);if(ke===0)return S;const ot=new Proxy(S,ke===2?we:ae);return ge.set(S,ot),ot}function Nr(S){return Br(S)?Nr(S.__v_raw):!!(S&&S.__v_isReactive)}function Br(S){return!!(S&&S.__v_isReadonly)}function go(S){return Nr(S)||Br(S)}function K(S){return S&&K(S.__v_raw)||S}function de(S){return g.def(S,"__v_skip",!0),S}var Ae=S=>g.isObject(S)?Gn(S):S;function Ee(S){return Boolean(S&&S.__v_isRef===!0)}function He(S){return kt(S)}function nt(S){return kt(S,!0)}var Dt=class{constructor(S,Z=!1){this._shallow=Z,this.__v_isRef=!0,this._rawValue=Z?S:K(S),this._value=Z?S:Ae(S)}get value(){return Be(K(this),"get","value"),this._value}set value(S){S=this._shallow?S:K(S),g.hasChanged(S,this._rawValue)&&(this._rawValue=S,this._value=this._shallow?S:Ae(S),Ke(K(this),"set","value",S))}};function kt(S,Z=!1){return Ee(S)?S:new Dt(S,Z)}function wt(S){Ke(K(S),"set","value",S.value)}function Xs(S){return Ee(S)?S.value:S}var Gr={get:(S,Z,ae)=>Xs(Reflect.get(S,Z,ae)),set:(S,Z,ae,we)=>{const ge=S[Z];return Ee(ge)&&!Ee(ae)?(ge.value=ae,!0):Reflect.set(S,Z,ae,we)}};function po(S){return Nr(S)?S:new Proxy(S,Gr)}var jr=class{constructor(S){this.__v_isRef=!0;const{get:Z,set:ae}=S(()=>Be(this,"get","value"),()=>Ke(this,"set","value"));this._get=Z,this._set=ae}get value(){return this._get()}set value(S){this._set(S)}};function sc(S){return new jr(S)}function bg(S){go(S)||console.warn("toRefs() expects a reactive object but received a plain one.");const Z=g.isArray(S)?new Array(S.length):{};for(const ae in S)Z[ae]=ih(S,ae);return Z}var Cg=class{constructor(S,Z){this._object=S,this._key=Z,this.__v_isRef=!0}get value(){return this._object[this._key]}set value(S){this._object[this._key]=S}};function ih(S,Z){return Ee(S[Z])?S[Z]:new Cg(S,Z)}var Ig=class{constructor(S,Z,ae){this._setter=Z,this._dirty=!0,this.__v_isRef=!0,this.effect=oe(S,{lazy:!0,scheduler:()=>{this._dirty||(this._dirty=!0,Ke(K(this),"set","value"))}}),this.__v_isReadonly=ae}get value(){const S=K(this);return S._dirty&&(S._value=this.effect(),S._dirty=!1),Be(S,"get","value"),S._value}set value(S){this._setter(S)}};function Sg(S){let Z,ae;return g.isFunction(S)?(Z=S,ae=()=>{console.warn("Write operation failed: computed value is readonly")}):(Z=S.get,ae=S.set),new Ig(Z,ae,g.isFunction(S)||!S.set)}u.ITERATE_KEY=L,u.computed=Sg,u.customRef=sc,u.effect=oe,u.enableTracking=Te,u.isProxy=go,u.isReactive=Nr,u.isReadonly=Br,u.isRef=Ee,u.markRaw=de,u.pauseTracking=Si,u.proxyRefs=po,u.reactive=Gn,u.readonly=Ys,u.ref=He,u.resetTracking=Xe,u.shallowReactive=nc,u.shallowReadonly=rc,u.shallowRef=nt,u.stop=he,u.toRaw=K,u.toRef=ih,u.toRefs=bg,u.track=Be,u.trigger=Ke,u.triggerRef=wt,u.unref=Xs}}),v=l({"node_modules/@vue/reactivity/index.js"(u,g){g.exports=y()}}),x={};c(x,{default:()=>Fn}),e.exports=f(x);var b=!1,E=!1,I=[],C=-1;function M(u){D(u)}function D(u){I.includes(u)||I.push(u),z()}function P(u){let g=I.indexOf(u);g!==-1&&g>C&&I.splice(g,1)}function z(){!E&&!b&&(b=!0,queueMicrotask(j))}function j(){b=!1,E=!0;for(let u=0;u<I.length;u++)I[u](),C=u;I.length=0,C=-1,E=!1}var Q,q,J,ye,$=!0;function N(u){$=!1,u(),$=!0}function G(u){Q=u.reactive,J=u.release,q=g=>u.effect(g,{scheduler:A=>{$?M(A):A()}}),ye=u.raw}function B(u){q=u}function W(u){let g=()=>{};return[R=>{let F=q(R);return u._x_effects||(u._x_effects=new Set,u._x_runEffects=()=>{u._x_effects.forEach(L=>L())}),u._x_effects.add(F),g=()=>{F!==void 0&&(u._x_effects.delete(F),J(F))},F},()=>{g()}]}var X=[],ie=[],U=[];function re(u){U.push(u)}function ce(u,g){typeof g=="function"?(u._x_cleanups||(u._x_cleanups=[]),u._x_cleanups.push(g)):(g=u,ie.push(g))}function me(u){X.push(u)}function Ue(u,g,A){u._x_attributeCleanups||(u._x_attributeCleanups={}),u._x_attributeCleanups[g]||(u._x_attributeCleanups[g]=[]),u._x_attributeCleanups[g].push(A)}function se(u,g){!u._x_attributeCleanups||Object.entries(u._x_attributeCleanups).forEach(([A,R])=>{(g===void 0||g.includes(A))&&(R.forEach(F=>F()),delete u._x_attributeCleanups[A])})}var fe=new MutationObserver(xe),ve=!1;function ee(){fe.observe(document,{subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0}),ve=!0}function le(){Je(),fe.disconnect(),ve=!1}var pe=[],_e=!1;function Je(){pe=pe.concat(fe.takeRecords()),pe.length&&!_e&&(_e=!0,queueMicrotask(()=>{Ge(),_e=!1}))}function Ge(){xe(pe),pe.length=0}function Ie(u){if(!ve)return u();le();let g=u();return ee(),g}var ht=!1,lt=[];function Qe(){ht=!0}function ne(){ht=!1,xe(lt),lt=[]}function xe(u){if(ht){lt=lt.concat(u);return}let g=[],A=[],R=new Map,F=new Map;for(let L=0;L<u.length;L++)if(!u[L].target._x_ignoreMutationObserver&&(u[L].type==="childList"&&(u[L].addedNodes.forEach(k=>k.nodeType===1&&g.push(k)),u[L].removedNodes.forEach(k=>k.nodeType===1&&A.push(k))),u[L].type==="attributes")){let k=u[L].target,H=u[L].attributeName,oe=u[L].oldValue,he=()=>{R.has(k)||R.set(k,[]),R.get(k).push({name:H,value:k.getAttribute(H)})},Se=()=>{F.has(k)||F.set(k,[]),F.get(k).push(H)};k.hasAttribute(H)&&oe===null?he():k.hasAttribute(H)?(Se(),he()):Se()}F.forEach((L,k)=>{se(k,L)}),R.forEach((L,k)=>{X.forEach(H=>H(k,L))});for(let L of A)if(!g.includes(L)&&(ie.forEach(k=>k(L)),L._x_cleanups))for(;L._x_cleanups.length;)L._x_cleanups.pop()();g.forEach(L=>{L._x_ignoreSelf=!0,L._x_ignore=!0});for(let L of g)A.includes(L)||!L.isConnected||(delete L._x_ignoreSelf,delete L._x_ignore,U.forEach(k=>k(L)),L._x_ignore=!0,L._x_ignoreSelf=!0);g.forEach(L=>{delete L._x_ignoreSelf,delete L._x_ignore}),g=null,A=null,R=null,F=null}function be(u){return qe(Me(u))}function De(u,g,A){return u._x_dataStack=[g,...Me(A||u)],()=>{u._x_dataStack=u._x_dataStack.filter(R=>R!==g)}}function Me(u){return u._x_dataStack?u._x_dataStack:typeof ShadowRoot=="function"&&u instanceof ShadowRoot?Me(u.host):u.parentNode?Me(u.parentNode):[]}function qe(u){let g=new Proxy({},{ownKeys:()=>Array.from(new Set(u.flatMap(A=>Object.keys(A)))),has:(A,R)=>u.some(F=>F.hasOwnProperty(R)),get:(A,R)=>(u.find(F=>{if(F.hasOwnProperty(R)){let L=Object.getOwnPropertyDescriptor(F,R);if(L.get&&L.get._x_alreadyBound||L.set&&L.set._x_alreadyBound)return!0;if((L.get||L.set)&&L.enumerable){let k=L.get,H=L.set,oe=L;k=k&&k.bind(g),H=H&&H.bind(g),k&&(k._x_alreadyBound=!0),H&&(H._x_alreadyBound=!0),Object.defineProperty(F,R,{...oe,get:k,set:H})}return!0}return!1})||{})[R],set:(A,R,F)=>{let L=u.find(k=>k.hasOwnProperty(R));return L?L[R]=F:u[u.length-1][R]=F,!0}});return g}function At(u){let g=R=>typeof R=="object"&&!Array.isArray(R)&&R!==null,A=(R,F="")=>{Object.entries(Object.getOwnPropertyDescriptors(R)).forEach(([L,{value:k,enumerable:H}])=>{if(H===!1||k===void 0)return;let oe=F===""?L:`${F}.${L}`;typeof k=="object"&&k!==null&&k._x_interceptor?R[L]=k.initialize(u,oe,L):g(k)&&k!==R&&!(k instanceof Element)&&A(k,oe)})};return A(u)}function $t(u,g=()=>{}){let A={initialValue:void 0,_x_interceptor:!0,initialize(R,F,L){return u(this.initialValue,()=>Zt(R,F),k=>dt(R,F,k),F,L)}};return g(A),R=>{if(typeof R=="object"&&R!==null&&R._x_interceptor){let F=A.initialize.bind(A);A.initialize=(L,k,H)=>{let oe=R.initialize(L,k,H);return A.initialValue=oe,F(L,k,H)}}else A.initialValue=R;return A}}function Zt(u,g){return g.split(".").reduce((A,R)=>A[R],u)}function dt(u,g,A){if(typeof g=="string"&&(g=g.split(".")),g.length===1)u[g[0]]=A;else{if(g.length===0)throw error;return u[g[0]]||(u[g[0]]={}),dt(u[g[0]],g.slice(1),A)}}var Mt={};function Ye(u,g){Mt[u]=g}function ji(u,g){return Object.entries(Mt).forEach(([A,R])=>{let F=null;function L(){if(F)return F;{let[k,H]=Ca(g);return F={interceptor:$t,...k},ce(g,H),F}}Object.defineProperty(u,`$${A}`,{get(){return R(g,L())},enumerable:!1})}),u}function ms(u,g,A,...R){try{return A(...R)}catch(F){hi(F,u,g)}}function hi(u,g,A=void 0){Object.assign(u,{el:g,expression:A}),console.warn(`Alpine Expression Error: ${u.message}

${A?'Expression: "'+A+`"

`:""}`,g),setTimeout(()=>{throw u},0)}var zi=!0;function In(u){let g=zi;zi=!1;let A=u();return zi=g,A}function bt(u,g,A={}){let R;return ct(u,g)(F=>R=F,A),R}function ct(...u){return sn(...u)}var sn=xi;function wi(u){sn=u}function xi(u,g){let A={};ji(A,u);let R=[A,...Me(u)],F=typeof g=="function"?di(R,g):Lt(R,g,u);return ms.bind(null,u,g,F)}function di(u,g){return(A=()=>{},{scope:R={},params:F=[]}={})=>{let L=g.apply(qe([R,...u]),F);ei(A,L)}}var Ui={};function or(u,g){if(Ui[u])return Ui[u];let A=Object.getPrototypeOf(async function(){}).constructor,R=/^[\n\s]*if.*\(.*\)/.test(u.trim())||/^(let|const)\s/.test(u.trim())?`(async()=>{ ${u} })()`:u,L=(()=>{try{return new A(["__self","scope"],`with (scope) { __self.result = ${R} }; __self.finished = true; return __self.result;`)}catch(k){return hi(k,g,u),Promise.resolve()}})();return Ui[u]=L,L}function Lt(u,g,A){let R=or(g,A);return(F=()=>{},{scope:L={},params:k=[]}={})=>{R.result=void 0,R.finished=!1;let H=qe([L,...u]);if(typeof R=="function"){let oe=R(R,H).catch(he=>hi(he,A,g));R.finished?(ei(F,R.result,H,k,A),R.result=void 0):oe.then(he=>{ei(F,he,H,k,A)}).catch(he=>hi(he,A,g)).finally(()=>R.result=void 0)}}}function ei(u,g,A,R,F){if(zi&&typeof g=="function"){let L=g.apply(A,R);L instanceof Promise?L.then(k=>ei(u,k,A,R)).catch(k=>hi(k,F,g)):u(L)}else typeof g=="object"&&g instanceof Promise?g.then(L=>u(L)):u(g)}var ft="x-";function _t(u=""){return ft+u}function Ct(u){ft=u}var ti={};function $e(u,g){return ti[u]=g,{before(A){if(!ti[A]){console.warn("Cannot find directive `${directive}`. `${name}` will use the default order of execution");return}const R=Ei.indexOf(A);Ei.splice(R>=0?R:Ei.indexOf("DEFAULT"),0,u)}}}function mt(u,g,A){if(g=Array.from(g),u._x_virtualDirectives){let L=Object.entries(u._x_virtualDirectives).map(([H,oe])=>({name:H,value:oe})),k=Pt(L);L=L.map(H=>k.find(oe=>oe.name===H.name)?{name:`x-bind:${H.name}`,value:`"${H.value}"`}:H),g=g.concat(L)}let R={};return g.map(Ia((L,k)=>R[L]=k)).filter(fr).map(As(R,A)).sort(bl).map(L=>cr(u,L))}function Pt(u){return Array.from(u).map(Ia()).filter(g=>!fr(g))}var Ht=!1,Wi=new Map,lr=Symbol();function El(u){Ht=!0;let g=Symbol();lr=g,Wi.set(g,[]);let A=()=>{for(;Wi.get(g).length;)Wi.get(g).shift()();Wi.delete(g)},R=()=>{Ht=!1,A()};u(A),R()}function Ca(u){let g=[],A=H=>g.push(H),[R,F]=W(u);return g.push(F),[{Alpine:Pn,effect:R,cleanup:A,evaluateLater:ct.bind(ct,u),evaluate:bt.bind(bt,u)},()=>g.forEach(H=>H())]}function cr(u,g){let A=()=>{},R=ti[g.type]||A,[F,L]=Ca(u);Ue(u,g.original,L);let k=()=>{u._x_ignore||u._x_ignoreSelf||(R.inline&&R.inline(u,g,F),R=R.bind(R,u,g,F),Ht?Wi.get(lr).push(R):R())};return k.runCleanups=L,k}var ur=(u,g)=>({name:A,value:R})=>(A.startsWith(u)&&(A=A.replace(u,g)),{name:A,value:R}),ys=u=>u;function Ia(u=()=>{}){return({name:g,value:A})=>{let{name:R,value:F}=hr.reduce((L,k)=>k(L),{name:g,value:A});return R!==g&&u(R,g),{name:R,value:F}}}var hr=[];function dr(u){hr.push(u)}function fr({name:u}){return vs().test(u)}var vs=()=>new RegExp(`^${ft}([^:^.]+)\\b`);function As(u,g){return({name:A,value:R})=>{let F=A.match(vs()),L=A.match(/:([a-zA-Z0-9\-:]+)/),k=A.match(/\.[^.\]]+(?=[^\]]*$)/g)||[],H=g||u[A]||A;return{type:F?F[1]:null,value:L?L[1]:null,modifiers:k.map(oe=>oe.replace(".","")),expression:R,original:H}}}var Yi="DEFAULT",Ei=["ignore","ref","data","id","bind","init","for","model","modelable","transition","show","if",Yi,"teleport"];function bl(u,g){let A=Ei.indexOf(u.type)===-1?Yi:u.type,R=Ei.indexOf(g.type)===-1?Yi:g.type;return Ei.indexOf(A)-Ei.indexOf(R)}function an(u,g,A={}){u.dispatchEvent(new CustomEvent(g,{detail:A,bubbles:!0,composed:!0,cancelable:!0}))}function bi(u,g){if(typeof ShadowRoot=="function"&&u instanceof ShadowRoot){Array.from(u.children).forEach(F=>bi(F,g));return}let A=!1;if(g(u,()=>A=!0),A)return;let R=u.firstElementChild;for(;R;)bi(R,g),R=R.nextElementSibling}function fi(u,...g){console.warn(`Alpine Warning: ${u}`,...g)}var ws=!1;function Cl(){ws&&fi("Alpine has already been initialized on this page. Calling Alpine.start() more than once can cause problems."),ws=!0,document.body||fi("Unable to initialize. Trying to load Alpine before `<body>` is available. Did you forget to add `defer` in Alpine's `<script>` tag?"),an(document,"alpine:init"),an(document,"alpine:initializing"),ee(),re(g=>ai(g,bi)),ce(g=>bs(g)),me((g,A)=>{mt(g,A).forEach(R=>R())});let u=g=>!on(g.parentElement,!0);Array.from(document.querySelectorAll(pr())).filter(u).forEach(g=>{ai(g)}),an(document,"alpine:initialized")}var gr=[],xs=[];function Sa(){return gr.map(u=>u())}function pr(){return gr.concat(xs).map(u=>u())}function Ci(u){gr.push(u)}function Ra(u){xs.push(u)}function on(u,g=!1){return si(u,A=>{if((g?pr():Sa()).some(F=>A.matches(F)))return!0})}function si(u,g){if(!!u){if(g(u))return u;if(u._x_teleportBack&&(u=u._x_teleportBack),!!u.parentElement)return si(u.parentElement,g)}}function Ta(u){return Sa().some(g=>u.matches(g))}var Es=[];function Il(u){Es.push(u)}function ai(u,g=bi,A=()=>{}){El(()=>{g(u,(R,F)=>{A(R,F),Es.forEach(L=>L(R,F)),mt(R,R.attributes).forEach(L=>L()),R._x_ignore&&F()})})}function bs(u){bi(u,g=>se(g))}var _r=[],mr=!1;function Cs(u=()=>{}){return queueMicrotask(()=>{mr||setTimeout(()=>{Is()})}),new Promise(g=>{_r.push(()=>{u(),g()})})}function Is(){for(mr=!1;_r.length;)_r.shift()()}function Oa(){mr=!0}function Sn(u,g){return Array.isArray(g)?Ma(u,g.join(" ")):typeof g=="object"&&g!==null?La(u,g):typeof g=="function"?Sn(u,g()):Ma(u,g)}function Ma(u,g){let A=F=>F.split(" ").filter(L=>!u.classList.contains(L)).filter(Boolean),R=F=>(u.classList.add(...F),()=>{u.classList.remove(...F)});return g=g===!0?g="":g||"",R(A(g))}function La(u,g){let A=H=>H.split(" ").filter(Boolean),R=Object.entries(g).flatMap(([H,oe])=>oe?A(H):!1).filter(Boolean),F=Object.entries(g).flatMap(([H,oe])=>oe?!1:A(H)).filter(Boolean),L=[],k=[];return F.forEach(H=>{u.classList.contains(H)&&(u.classList.remove(H),k.push(H))}),R.forEach(H=>{u.classList.contains(H)||(u.classList.add(H),L.push(H))}),()=>{k.forEach(H=>u.classList.add(H)),L.forEach(H=>u.classList.remove(H))}}function yr(u,g){return typeof g=="object"&&g!==null?vr(u,g):Pa(u,g)}function vr(u,g){let A={};return Object.entries(g).forEach(([R,F])=>{A[R]=u.style[R],R.startsWith("--")||(R=Ss(R)),u.style.setProperty(R,F)}),setTimeout(()=>{u.style.length===0&&u.removeAttribute("style")}),()=>{yr(u,A)}}function Pa(u,g){let A=u.getAttribute("style",g);return u.setAttribute("style",g),()=>{u.setAttribute("style",A||"")}}function Ss(u){return u.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Rn(u,g=()=>{}){let A=!1;return function(){A?g.apply(this,arguments):(A=!0,u.apply(this,arguments))}}$e("transition",(u,{value:g,modifiers:A,expression:R},{evaluate:F})=>{typeof R=="function"&&(R=F(R)),R!==!1&&(!R||typeof R=="boolean"?Rs(u,A,g):Sl(u,R,g))});function Sl(u,g,A){Fa(u,Sn,""),{enter:F=>{u._x_transition.enter.during=F},"enter-start":F=>{u._x_transition.enter.start=F},"enter-end":F=>{u._x_transition.enter.end=F},leave:F=>{u._x_transition.leave.during=F},"leave-start":F=>{u._x_transition.leave.start=F},"leave-end":F=>{u._x_transition.leave.end=F}}[A](g)}function Rs(u,g,A){Fa(u,yr);let R=!g.includes("in")&&!g.includes("out")&&!A,F=R||g.includes("in")||["enter"].includes(A),L=R||g.includes("out")||["leave"].includes(A);g.includes("in")&&!R&&(g=g.filter((Xe,Be)=>Be<g.indexOf("out"))),g.includes("out")&&!R&&(g=g.filter((Xe,Be)=>Be>g.indexOf("out")));let k=!g.includes("opacity")&&!g.includes("scale"),H=k||g.includes("opacity"),oe=k||g.includes("scale"),he=H?0:1,Se=oe?Xi(g,"scale",95)/100:1,it=Xi(g,"delay",0)/1e3,ze=Xi(g,"origin","center"),tt="opacity, transform",qt=Xi(g,"duration",150)/1e3,Si=Xi(g,"duration",75)/1e3,Te="cubic-bezier(0.4, 0.0, 0.2, 1)";F&&(u._x_transition.enter.during={transformOrigin:ze,transitionDelay:`${it}s`,transitionProperty:tt,transitionDuration:`${qt}s`,transitionTimingFunction:Te},u._x_transition.enter.start={opacity:he,transform:`scale(${Se})`},u._x_transition.enter.end={opacity:1,transform:"scale(1)"}),L&&(u._x_transition.leave.during={transformOrigin:ze,transitionDelay:`${it}s`,transitionProperty:tt,transitionDuration:`${Si}s`,transitionTimingFunction:Te},u._x_transition.leave.start={opacity:1,transform:"scale(1)"},u._x_transition.leave.end={opacity:he,transform:`scale(${Se})`})}function Fa(u,g,A={}){u._x_transition||(u._x_transition={enter:{during:A,start:A,end:A},leave:{during:A,start:A,end:A},in(R=()=>{},F=()=>{}){Ar(u,g,{during:this.enter.during,start:this.enter.start,end:this.enter.end},R,F)},out(R=()=>{},F=()=>{}){Ar(u,g,{during:this.leave.during,start:this.leave.start,end:this.leave.end},R,F)}})}window.Element.prototype._x_toggleAndCascadeWithTransitions=function(u,g,A,R){const F=document.visibilityState==="visible"?requestAnimationFrame:setTimeout;let L=()=>F(A);if(g){u._x_transition&&(u._x_transition.enter||u._x_transition.leave)?u._x_transition.enter&&(Object.entries(u._x_transition.enter.during).length||Object.entries(u._x_transition.enter.start).length||Object.entries(u._x_transition.enter.end).length)?u._x_transition.in(A):L():u._x_transition?u._x_transition.in(A):L();return}u._x_hidePromise=u._x_transition?new Promise((k,H)=>{u._x_transition.out(()=>{},()=>k(R)),u._x_transitioning.beforeCancel(()=>H({isFromCancelledTransition:!0}))}):Promise.resolve(R),queueMicrotask(()=>{let k=Ts(u);k?(k._x_hideChildren||(k._x_hideChildren=[]),k._x_hideChildren.push(u)):F(()=>{let H=oe=>{let he=Promise.all([oe._x_hidePromise,...(oe._x_hideChildren||[]).map(H)]).then(([Se])=>Se());return delete oe._x_hidePromise,delete oe._x_hideChildren,he};H(u).catch(oe=>{if(!oe.isFromCancelledTransition)throw oe})})})};function Ts(u){let g=u.parentNode;if(!!g)return g._x_hidePromise?g:Ts(g)}function Ar(u,g,{during:A,start:R,end:F}={},L=()=>{},k=()=>{}){if(u._x_transitioning&&u._x_transitioning.cancel(),Object.keys(A).length===0&&Object.keys(R).length===0&&Object.keys(F).length===0){L(),k();return}let H,oe,he;Rl(u,{start(){H=g(u,R)},during(){oe=g(u,A)},before:L,end(){H(),he=g(u,F)},after:k,cleanup(){oe(),he()}})}function Rl(u,g){let A,R,F,L=Rn(()=>{Ie(()=>{A=!0,R||g.before(),F||(g.end(),Is()),g.after(),u.isConnected&&g.cleanup(),delete u._x_transitioning})});u._x_transitioning={beforeCancels:[],beforeCancel(k){this.beforeCancels.push(k)},cancel:Rn(function(){for(;this.beforeCancels.length;)this.beforeCancels.shift()();L()}),finish:L},Ie(()=>{g.start(),g.during()}),Oa(),requestAnimationFrame(()=>{if(A)return;let k=Number(getComputedStyle(u).transitionDuration.replace(/,.*/,"").replace("s",""))*1e3,H=Number(getComputedStyle(u).transitionDelay.replace(/,.*/,"").replace("s",""))*1e3;k===0&&(k=Number(getComputedStyle(u).animationDuration.replace("s",""))*1e3),Ie(()=>{g.before()}),R=!0,requestAnimationFrame(()=>{A||(Ie(()=>{g.end()}),Is(),setTimeout(u._x_transitioning.finish,k+H),F=!0)})})}function Xi(u,g,A){if(u.indexOf(g)===-1)return A;const R=u[u.indexOf(g)+1];if(!R||g==="scale"&&isNaN(R))return A;if(g==="duration"||g==="delay"){let F=R.match(/([0-9]+)ms/);if(F)return F[1]}return g==="origin"&&["top","right","left","center","bottom"].includes(u[u.indexOf(g)+2])?[R,u[u.indexOf(g)+2]].join(" "):R}var ln=!1;function wr(u,g=()=>{}){return(...A)=>ln?g(...A):u(...A)}function Tl(u){return(...g)=>ln&&u(...g)}function Da(u,g){g._x_dataStack||(g._x_dataStack=u._x_dataStack),ln=!0,Ml(()=>{Ol(g)}),ln=!1}function Ol(u){let g=!1;ai(u,(R,F)=>{bi(R,(L,k)=>{if(g&&Ta(L))return k();g=!0,F(L,k)})})}function Ml(u){let g=q;B((A,R)=>{let F=g(A);return J(F),()=>{}}),u(),B(g)}function Os(u,g,A,R=[]){switch(u._x_bindings||(u._x_bindings=Q({})),u._x_bindings[g]=A,g=R.includes("camel")?kl(g):g,g){case"value":ka(u,A);break;case"style":Ll(u,A);break;case"class":Ms(u,A);break;case"selected":case"checked":Tn(u,g,A);break;default:On(u,g,A);break}}function ka(u,g){if(u.type==="radio")u.attributes.value===void 0&&(u.value=g),window.fromModel&&(u.checked=Na(u.value,g));else if(u.type==="checkbox")Number.isInteger(g)?u.value=g:!Array.isArray(g)&&typeof g!="boolean"&&![null,void 0].includes(g)?u.value=String(g):Array.isArray(g)?u.checked=g.some(A=>Na(A,u.value)):u.checked=!!g;else if(u.tagName==="SELECT")Dl(u,g);else{if(u.value===g)return;u.value=g===void 0?"":g}}function Ms(u,g){u._x_undoAddedClasses&&u._x_undoAddedClasses(),u._x_undoAddedClasses=Sn(u,g)}function Ll(u,g){u._x_undoAddedStyles&&u._x_undoAddedStyles(),u._x_undoAddedStyles=yr(u,g)}function Tn(u,g,A){On(u,g,A),Fl(u,g,A)}function On(u,g,A){[null,void 0,!1].includes(A)&&Nl(g)?u.removeAttribute(g):(Ba(g)&&(A=g),Pl(u,g,A))}function Pl(u,g,A){u.getAttribute(g)!=A&&u.setAttribute(g,A)}function Fl(u,g,A){u[g]!==A&&(u[g]=A)}function Dl(u,g){const A=[].concat(g).map(R=>R+"");Array.from(u.options).forEach(R=>{R.selected=A.includes(R.value)})}function kl(u){return u.toLowerCase().replace(/-(\w)/g,(g,A)=>A.toUpperCase())}function Na(u,g){return u==g}function Ba(u){return["disabled","checked","required","readonly","hidden","open","selected","autofocus","itemscope","multiple","novalidate","allowfullscreen","allowpaymentrequest","formnovalidate","autoplay","controls","loop","muted","playsinline","default","ismap","reversed","async","defer","nomodule"].includes(u)}function Nl(u){return!["aria-pressed","aria-checked","aria-expanded","aria-selected"].includes(u)}function Bl(u,g,A){return u._x_bindings&&u._x_bindings[g]!==void 0?u._x_bindings[g]:ja(u,g,A)}function Ga(u,g,A,R=!0){if(u._x_bindings&&u._x_bindings[g]!==void 0)return u._x_bindings[g];if(u._x_inlineBindings&&u._x_inlineBindings[g]!==void 0){let F=u._x_inlineBindings[g];return F.extract=R,In(()=>bt(u,F.expression))}return ja(u,g,A)}function ja(u,g,A){let R=u.getAttribute(g);return R===null?typeof A=="function"?A():A:R===""?!0:Ba(g)?!![g,"true"].includes(R):R}function za(u,g){var A;return function(){var R=this,F=arguments,L=function(){A=null,u.apply(R,F)};clearTimeout(A),A=setTimeout(L,g)}}function Ua(u,g){let A;return function(){let R=this,F=arguments;A||(u.apply(R,F),A=!0,setTimeout(()=>A=!1,g))}}function Wa({get:u,set:g},{get:A,set:R}){let F=!0,L,k,H,oe=q(()=>{let he,Se;F?(he=u(),R(JSON.parse(JSON.stringify(he))),Se=A(),F=!1):(he=u(),Se=A(),k=JSON.stringify(he),H=JSON.stringify(Se),k!==L?(Se=A(),R(he),Se=he):(g(JSON.parse(H!=null?H:null)),he=Se)),L=JSON.stringify(he),JSON.stringify(Se)});return()=>{J(oe)}}function cn(u){(Array.isArray(u)?u:[u]).forEach(A=>A(Pn))}var Ii={},Ya=!1;function Gl(u,g){if(Ya||(Ii=Q(Ii),Ya=!0),g===void 0)return Ii[u];Ii[u]=g,typeof g=="object"&&g!==null&&g.hasOwnProperty("init")&&typeof g.init=="function"&&Ii[u].init(),At(Ii[u])}function jl(){return Ii}var Xa={};function zl(u,g){let A=typeof g!="function"?()=>g:g;return u instanceof Element?xr(u,A()):(Xa[u]=A,()=>{})}function Mn(u){return Object.entries(Xa).forEach(([g,A])=>{Object.defineProperty(u,g,{get(){return(...R)=>A(...R)}})}),u}function xr(u,g,A){let R=[];for(;R.length;)R.pop()();let F=Object.entries(g).map(([k,H])=>({name:k,value:H})),L=Pt(F);return F=F.map(k=>L.find(H=>H.name===k.name)?{name:`x-bind:${k.name}`,value:`"${k.value}"`}:k),mt(u,F,A).map(k=>{R.push(k.runCleanups),k()}),()=>{for(;R.length;)R.pop()()}}var Ls={};function Ha(u,g){Ls[u]=g}function Ln(u,g){return Object.entries(Ls).forEach(([A,R])=>{Object.defineProperty(u,A,{get(){return(...F)=>R.bind(g)(...F)},enumerable:!1})}),u}var Ps={get reactive(){return Q},get release(){return J},get effect(){return q},get raw(){return ye},version:"3.12.3",flushAndStopDeferringMutations:ne,dontAutoEvaluateFunctions:In,disableEffectScheduling:N,startObservingMutations:ee,stopObservingMutations:le,setReactivityEngine:G,onAttributeRemoved:Ue,onAttributesAdded:me,closestDataStack:Me,skipDuringClone:wr,onlyDuringClone:Tl,addRootSelector:Ci,addInitSelector:Ra,addScopeToNode:De,deferMutations:Qe,mapAttributes:dr,evaluateLater:ct,interceptInit:Il,setEvaluator:wi,mergeProxies:qe,extractProp:Ga,findClosest:si,onElRemoved:ce,closestRoot:on,destroyTree:bs,interceptor:$t,transition:Ar,setStyles:yr,mutateDom:Ie,directive:$e,entangle:Wa,throttle:Ua,debounce:za,evaluate:bt,initTree:ai,nextTick:Cs,prefixed:_t,prefix:Ct,plugin:cn,magic:Ye,store:Gl,start:Cl,clone:Da,bound:Bl,$data:be,walk:bi,data:Ha,bind:zl},Pn=Ps,Er=d(v());Ye("nextTick",()=>Cs),Ye("dispatch",u=>an.bind(an,u)),Ye("watch",(u,{evaluateLater:g,effect:A})=>(R,F)=>{let L=g(R),k=!0,H,oe=A(()=>L(he=>{JSON.stringify(he),k?H=he:queueMicrotask(()=>{F(he,H),H=he}),k=!1}));u._x_effects.delete(oe)}),Ye("store",jl),Ye("data",u=>be(u)),Ye("root",u=>on(u)),Ye("refs",u=>(u._x_refs_proxy||(u._x_refs_proxy=qe(Ul(u))),u._x_refs_proxy));function Ul(u){let g=[],A=u;for(;A;)A._x_refs&&g.push(A._x_refs),A=A.parentNode;return g}var br={};function Qa(u){return br[u]||(br[u]=0),++br[u]}function Wl(u,g){return si(u,A=>{if(A._x_ids&&A._x_ids[g])return!0})}function Ka(u,g){u._x_ids||(u._x_ids={}),u._x_ids[g]||(u._x_ids[g]=Qa(g))}Ye("id",u=>(g,A=null)=>{let R=Wl(u,g),F=R?R._x_ids[g]:Qa(g);return A?`${g}-${F}-${A}`:`${g}-${F}`}),Ye("el",u=>u),Va("Focus","focus","focus"),Va("Persist","persist","persist");function Va(u,g,A){Ye(g,R=>fi(`You can't use [$${directiveName}] without first installing the "${u}" plugin here: https://alpinejs.dev/plugins/${A}`,R))}$e("modelable",(u,{expression:g},{effect:A,evaluateLater:R,cleanup:F})=>{let L=R(g),k=()=>{let Se;return L(it=>Se=it),Se},H=R(`${g} = __placeholder`),oe=Se=>H(()=>{},{scope:{__placeholder:Se}}),he=k();oe(he),queueMicrotask(()=>{if(!u._x_model)return;u._x_removeModelListeners.default();let Se=u._x_model.get,it=u._x_model.set,ze=Wa({get(){return Se()},set(tt){it(tt)}},{get(){return k()},set(tt){oe(tt)}});F(ze)})});var $a=document.createElement("div");$e("teleport",(u,{modifiers:g,expression:A},{cleanup:R})=>{u.tagName.toLowerCase()!=="template"&&fi("x-teleport can only be used on a <template> tag",u);let F=wr(()=>document.querySelector(A),()=>$a)();F||fi(`Cannot find x-teleport element for selector: "${A}"`);let L=u.content.cloneNode(!0).firstElementChild;u._x_teleport=L,L._x_teleportBack=u,u._x_forwardEvents&&u._x_forwardEvents.forEach(k=>{L.addEventListener(k,H=>{H.stopPropagation(),u.dispatchEvent(new H.constructor(H.type,H))})}),De(L,{},u),Ie(()=>{g.includes("prepend")?F.parentNode.insertBefore(L,F):g.includes("append")?F.parentNode.insertBefore(L,F.nextSibling):F.appendChild(L),ai(L),L._x_ignore=!0}),R(()=>L.remove())});var Za=()=>{};Za.inline=(u,{modifiers:g},{cleanup:A})=>{g.includes("self")?u._x_ignoreSelf=!0:u._x_ignore=!0,A(()=>{g.includes("self")?delete u._x_ignoreSelf:delete u._x_ignore})},$e("ignore",Za),$e("effect",(u,{expression:g},{effect:A})=>A(ct(u,g)));function Cr(u,g,A,R){let F=u,L=oe=>R(oe),k={},H=(oe,he)=>Se=>he(oe,Se);if(A.includes("dot")&&(g=Yl(g)),A.includes("camel")&&(g=Fs(g)),A.includes("passive")&&(k.passive=!0),A.includes("capture")&&(k.capture=!0),A.includes("window")&&(F=window),A.includes("document")&&(F=document),A.includes("debounce")){let oe=A[A.indexOf("debounce")+1]||"invalid-wait",he=Ir(oe.split("ms")[0])?Number(oe.split("ms")[0]):250;L=za(L,he)}if(A.includes("throttle")){let oe=A[A.indexOf("throttle")+1]||"invalid-wait",he=Ir(oe.split("ms")[0])?Number(oe.split("ms")[0]):250;L=Ua(L,he)}return A.includes("prevent")&&(L=H(L,(oe,he)=>{he.preventDefault(),oe(he)})),A.includes("stop")&&(L=H(L,(oe,he)=>{he.stopPropagation(),oe(he)})),A.includes("self")&&(L=H(L,(oe,he)=>{he.target===u&&oe(he)})),(A.includes("away")||A.includes("outside"))&&(F=document,L=H(L,(oe,he)=>{u.contains(he.target)||he.target.isConnected!==!1&&(u.offsetWidth<1&&u.offsetHeight<1||u._x_isShown!==!1&&oe(he))})),A.includes("once")&&(L=H(L,(oe,he)=>{oe(he),F.removeEventListener(g,L,k)})),L=H(L,(oe,he)=>{qa(g)&&Ds(he,A)||oe(he)}),F.addEventListener(g,L,k),()=>{F.removeEventListener(g,L,k)}}function Yl(u){return u.replace(/-/g,".")}function Fs(u){return u.toLowerCase().replace(/-(\w)/g,(g,A)=>A.toUpperCase())}function Ir(u){return!Array.isArray(u)&&!isNaN(u)}function Xl(u){return[" ","_"].includes(u)?u:u.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[_\s]/,"-").toLowerCase()}function qa(u){return["keydown","keyup"].includes(u)}function Ds(u,g){let A=g.filter(L=>!["window","document","prevent","stop","once","capture"].includes(L));if(A.includes("debounce")){let L=A.indexOf("debounce");A.splice(L,Ir((A[L+1]||"invalid-wait").split("ms")[0])?2:1)}if(A.includes("throttle")){let L=A.indexOf("throttle");A.splice(L,Ir((A[L+1]||"invalid-wait").split("ms")[0])?2:1)}if(A.length===0||A.length===1&&ks(u.key).includes(A[0]))return!1;const F=["ctrl","shift","alt","meta","cmd","super"].filter(L=>A.includes(L));return A=A.filter(L=>!F.includes(L)),!(F.length>0&&F.filter(k=>((k==="cmd"||k==="super")&&(k="meta"),u[`${k}Key`])).length===F.length&&ks(u.key).includes(A[0]))}function ks(u){if(!u)return[];u=Xl(u);let g={ctrl:"control",slash:"/",space:" ",spacebar:" ",cmd:"meta",esc:"escape",up:"arrow-up",down:"arrow-down",left:"arrow-left",right:"arrow-right",period:".",equal:"=",minus:"-",underscore:"_"};return g[u]=u,Object.keys(g).map(A=>{if(g[A]===u)return A}).filter(A=>A)}$e("model",(u,{modifiers:g,expression:A},{effect:R,cleanup:F})=>{let L=u;g.includes("parent")&&(L=u.parentNode);let k=ct(L,A),H;typeof A=="string"?H=ct(L,`${A} = __placeholder`):typeof A=="function"&&typeof A()=="string"?H=ct(L,`${A()} = __placeholder`):H=()=>{};let oe=()=>{let ze;return k(tt=>ze=tt),O(ze)?ze.get():ze},he=ze=>{let tt;k(qt=>tt=qt),O(tt)?tt.set(ze):H(()=>{},{scope:{__placeholder:ze}})};typeof A=="string"&&u.type==="radio"&&Ie(()=>{u.hasAttribute("name")||u.setAttribute("name",A)});var Se=u.tagName.toLowerCase()==="select"||["checkbox","radio"].includes(u.type)||g.includes("lazy")?"change":"input";let it=ln?()=>{}:Cr(u,Se,g,ze=>{he(Hl(u,g,ze,oe()))});if(g.includes("fill")&&([null,""].includes(oe())||u.type==="checkbox"&&Array.isArray(oe()))&&u.dispatchEvent(new Event(Se,{})),u._x_removeModelListeners||(u._x_removeModelListeners={}),u._x_removeModelListeners.default=it,F(()=>u._x_removeModelListeners.default()),u.form){let ze=Cr(u.form,"reset",[],tt=>{Cs(()=>u._x_model&&u._x_model.set(u.value))});F(()=>ze())}u._x_model={get(){return oe()},set(ze){he(ze)}},u._x_forceModelUpdate=ze=>{ze===void 0&&typeof A=="string"&&A.match(/\./)&&(ze=""),window.fromModel=!0,Ie(()=>Os(u,"value",ze)),delete window.fromModel},R(()=>{let ze=oe();g.includes("unintrusive")&&document.activeElement.isSameNode(u)||u._x_forceModelUpdate(ze)})});function Hl(u,g,A,R){return Ie(()=>{var F;if(A instanceof CustomEvent&&A.detail!==void 0)return(F=A.detail)!=null?F:A.target.value;if(u.type==="checkbox")if(Array.isArray(R)){let L=g.includes("number")?_(A.target.value):A.target.value;return A.target.checked?R.concat([L]):R.filter(k=>!w(k,L))}else return A.target.checked;else{if(u.tagName.toLowerCase()==="select"&&u.multiple)return g.includes("number")?Array.from(A.target.selectedOptions).map(L=>{let k=L.value||L.text;return _(k)}):Array.from(A.target.selectedOptions).map(L=>L.value||L.text);{let L=A.target.value;return g.includes("number")?_(L):g.includes("trim")?L.trim():L}}})}function _(u){let g=u?parseFloat(u):null;return T(g)?g:u}function w(u,g){return u==g}function T(u){return!Array.isArray(u)&&!isNaN(u)}function O(u){return u!==null&&typeof u=="object"&&typeof u.get=="function"&&typeof u.set=="function"}$e("cloak",u=>queueMicrotask(()=>Ie(()=>u.removeAttribute(_t("cloak"))))),Ra(()=>`[${_t("init")}]`),$e("init",wr((u,{expression:g},{evaluate:A})=>typeof g=="string"?!!g.trim()&&A(g,{},!1):A(g,{},!1))),$e("text",(u,{expression:g},{effect:A,evaluateLater:R})=>{let F=R(g);A(()=>{F(L=>{Ie(()=>{u.textContent=L})})})}),$e("html",(u,{expression:g},{effect:A,evaluateLater:R})=>{let F=R(g);A(()=>{F(L=>{Ie(()=>{u.innerHTML=L,u._x_ignoreSelf=!0,ai(u),delete u._x_ignoreSelf})})})}),dr(ur(":",ys(_t("bind:"))));var Y=(u,{value:g,modifiers:A,expression:R,original:F},{effect:L})=>{if(!g){let H={};Mn(H),ct(u,R)(he=>{xr(u,he,F)},{scope:H});return}if(g==="key")return V(u,R);if(u._x_inlineBindings&&u._x_inlineBindings[g]&&u._x_inlineBindings[g].extract)return;let k=ct(u,R);L(()=>k(H=>{H===void 0&&typeof R=="string"&&R.match(/\./)&&(H=""),Ie(()=>Os(u,g,H,A))}))};Y.inline=(u,{value:g,modifiers:A,expression:R})=>{!g||(u._x_inlineBindings||(u._x_inlineBindings={}),u._x_inlineBindings[g]={expression:R,extract:!1})},$e("bind",Y);function V(u,g){u._x_keyExpression=g}Ci(()=>`[${_t("data")}]`),$e("data",(u,{expression:g},{cleanup:A})=>{if(ln&&u._x_dataStack)return;g=g===""?"{}":g;let R={};ji(R,u);let F={};Ln(F,R);let L=bt(u,g,{scope:F});(L===void 0||L===!0)&&(L={}),ji(L,u);let k=Q(L);At(k);let H=De(u,k);k.init&&bt(u,k.init),A(()=>{k.destroy&&bt(u,k.destroy),H()})}),$e("show",(u,{modifiers:g,expression:A},{effect:R})=>{let F=ct(u,A);u._x_doHide||(u._x_doHide=()=>{Ie(()=>{u.style.setProperty("display","none",g.includes("important")?"important":void 0)})}),u._x_doShow||(u._x_doShow=()=>{Ie(()=>{u.style.length===1&&u.style.display==="none"?u.removeAttribute("style"):u.style.removeProperty("display")})});let L=()=>{u._x_doHide(),u._x_isShown=!1},k=()=>{u._x_doShow(),u._x_isShown=!0},H=()=>setTimeout(k),oe=Rn(it=>it?k():L(),it=>{typeof u._x_toggleAndCascadeWithTransitions=="function"?u._x_toggleAndCascadeWithTransitions(u,it,k,L):it?H():L()}),he,Se=!0;R(()=>F(it=>{!Se&&it===he||(g.includes("immediate")&&(it?H():L()),oe(it),he=it,Se=!1)}))}),$e("for",(u,{expression:g},{effect:A,cleanup:R})=>{let F=ue(g),L=ct(u,F.items),k=ct(u,u._x_keyExpression||"index");u._x_prevKeys=[],u._x_lookup={},A(()=>te(u,F,L,k)),R(()=>{Object.values(u._x_lookup).forEach(H=>H.remove()),delete u._x_prevKeys,delete u._x_lookup})});function te(u,g,A,R){let F=k=>typeof k=="object"&&!Array.isArray(k),L=u;A(k=>{je(k)&&k>=0&&(k=Array.from(Array(k).keys(),Te=>Te+1)),k===void 0&&(k=[]);let H=u._x_lookup,oe=u._x_prevKeys,he=[],Se=[];if(F(k))k=Object.entries(k).map(([Te,Xe])=>{let Be=Pe(g,Xe,Te,k);R(Ke=>Se.push(Ke),{scope:{index:Te,...Be}}),he.push(Be)});else for(let Te=0;Te<k.length;Te++){let Xe=Pe(g,k[Te],Te,k);R(Be=>Se.push(Be),{scope:{index:Te,...Xe}}),he.push(Xe)}let it=[],ze=[],tt=[],qt=[];for(let Te=0;Te<oe.length;Te++){let Xe=oe[Te];Se.indexOf(Xe)===-1&&tt.push(Xe)}oe=oe.filter(Te=>!tt.includes(Te));let Si="template";for(let Te=0;Te<Se.length;Te++){let Xe=Se[Te],Be=oe.indexOf(Xe);if(Be===-1)oe.splice(Te,0,Xe),it.push([Si,Te]);else if(Be!==Te){let Ke=oe.splice(Te,1)[0],Ft=oe.splice(Be-1,1)[0];oe.splice(Te,0,Ft),oe.splice(Be,0,Ke),ze.push([Ke,Ft])}else qt.push(Xe);Si=Xe}for(let Te=0;Te<tt.length;Te++){let Xe=tt[Te];H[Xe]._x_effects&&H[Xe]._x_effects.forEach(P),H[Xe].remove(),H[Xe]=null,delete H[Xe]}for(let Te=0;Te<ze.length;Te++){let[Xe,Be]=ze[Te],Ke=H[Xe],Ft=H[Be],gi=document.createElement("div");Ie(()=>{Ft||fi('x-for ":key" is undefined or invalid',L),Ft.after(gi),Ke.after(Ft),Ft._x_currentIfEl&&Ft.after(Ft._x_currentIfEl),gi.before(Ke),Ke._x_currentIfEl&&Ke.after(Ke._x_currentIfEl),gi.remove()}),Ft._x_refreshXForScope(he[Se.indexOf(Be)])}for(let Te=0;Te<it.length;Te++){let[Xe,Be]=it[Te],Ke=Xe==="template"?L:H[Xe];Ke._x_currentIfEl&&(Ke=Ke._x_currentIfEl);let Ft=he[Be],gi=Se[Be],Ri=document.importNode(L.content,!0).firstElementChild,Sr=Q(Ft);De(Ri,Sr,L),Ri._x_refreshXForScope=Ns=>{Object.entries(Ns).forEach(([Bs,Rr])=>{Sr[Bs]=Rr})},Ie(()=>{Ke.after(Ri),ai(Ri)}),typeof gi=="object"&&fi("x-for key cannot be an object, it must be a string or an integer",L),H[gi]=Ri}for(let Te=0;Te<qt.length;Te++)H[qt[Te]]._x_refreshXForScope(he[Se.indexOf(qt[Te])]);L._x_prevKeys=Se})}function ue(u){let g=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,A=/^\s*\(|\)\s*$/g,R=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,F=u.match(R);if(!F)return;let L={};L.items=F[2].trim();let k=F[1].replace(A,"").trim(),H=k.match(g);return H?(L.item=k.replace(g,"").trim(),L.index=H[1].trim(),H[2]&&(L.collection=H[2].trim())):L.item=k,L}function Pe(u,g,A,R){let F={};return/^\[.*\]$/.test(u.item)&&Array.isArray(g)?u.item.replace("[","").replace("]","").split(",").map(k=>k.trim()).forEach((k,H)=>{F[k]=g[H]}):/^\{.*\}$/.test(u.item)&&!Array.isArray(g)&&typeof g=="object"?u.item.replace("{","").replace("}","").split(",").map(k=>k.trim()).forEach(k=>{F[k]=g[k]}):F[u.item]=g,u.index&&(F[u.index]=A),u.collection&&(F[u.collection]=R),F}function je(u){return!Array.isArray(u)&&!isNaN(u)}function et(){}et.inline=(u,{expression:g},{cleanup:A})=>{let R=on(u);R._x_refs||(R._x_refs={}),R._x_refs[g]=u,A(()=>delete R._x_refs[g])},$e("ref",et),$e("if",(u,{expression:g},{effect:A,cleanup:R})=>{let F=ct(u,g),L=()=>{if(u._x_currentIfEl)return u._x_currentIfEl;let H=u.content.cloneNode(!0).firstElementChild;return De(H,{},u),Ie(()=>{u.after(H),ai(H)}),u._x_currentIfEl=H,u._x_undoIf=()=>{bi(H,oe=>{oe._x_effects&&oe._x_effects.forEach(P)}),H.remove(),delete u._x_currentIfEl},H},k=()=>{!u._x_undoIf||(u._x_undoIf(),delete u._x_undoIf)};A(()=>F(H=>{H?L():k()})),R(()=>u._x_undoIf&&u._x_undoIf())}),$e("id",(u,{expression:g},{evaluate:A})=>{A(g).forEach(F=>Ka(u,F))}),dr(ur("@",ys(_t("on:")))),$e("on",wr((u,{value:g,modifiers:A,expression:R},{cleanup:F})=>{let L=R?ct(u,R):()=>{};u.tagName.toLowerCase()==="template"&&(u._x_forwardEvents||(u._x_forwardEvents=[]),u._x_forwardEvents.includes(g)||u._x_forwardEvents.push(g));let k=Cr(u,g,A,H=>{L(()=>{},{scope:{$event:H},params:[H]})});F(()=>k())})),oi("Collapse","collapse","collapse"),oi("Intersect","intersect","intersect"),oi("Focus","trap","focus"),oi("Mask","mask","mask");function oi(u,g,A){$e(g,R=>fi(`You can't use [x-${g}] without first installing the "${u}" plugin here: https://alpinejs.dev/plugins/${A}`,R))}Pn.setEvaluator(xi),Pn.setReactivityEngine({reactive:Er.reactive,effect:Er.effect,release:Er.stop,raw:Er.toRaw});var un=Pn,Fn=un}}),kg=nn({"../alpine/packages/collapse/dist/module.cjs.js"(n,e){var t=Object.defineProperty,i=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,a=(p,m)=>{for(var y in m)t(p,y,{get:m[y],enumerable:!0})},o=(p,m,y,v)=>{if(m&&typeof m=="object"||typeof m=="function")for(let x of r(m))!s.call(p,x)&&x!==y&&t(p,x,{get:()=>m[x],enumerable:!(v=i(m,x))||v.enumerable});return p},l=p=>o(t({},"__esModule",{value:!0}),p),c={};a(c,{default:()=>f}),e.exports=l(c);function h(p){p.directive("collapse",m),m.inline=(y,{modifiers:v})=>{!v.includes("min")||(y._x_doShow=()=>{},y._x_doHide=()=>{})};function m(y,{modifiers:v}){let x=d(v,"duration",250)/1e3,b=d(v,"min",0),E=!v.includes("min");y._x_isShown||(y.style.height=`${b}px`),!y._x_isShown&&E&&(y.hidden=!0),y._x_isShown||(y.style.overflow="hidden");let I=(M,D)=>{let P=p.setStyles(M,D);return D.height?()=>{}:P},C={transitionProperty:"height",transitionDuration:`${x}s`,transitionTimingFunction:"cubic-bezier(0.4, 0.0, 0.2, 1)"};y._x_transition={in(M=()=>{},D=()=>{}){E&&(y.hidden=!1),E&&(y.style.display=null);let P=y.getBoundingClientRect().height;y.style.height="auto";let z=y.getBoundingClientRect().height;P===z&&(P=b),p.transition(y,p.setStyles,{during:C,start:{height:P+"px"},end:{height:z+"px"}},()=>y._x_isShown=!0,()=>{y.getBoundingClientRect().height==z&&(y.style.overflow=null)})},out(M=()=>{},D=()=>{}){let P=y.getBoundingClientRect().height;p.transition(y,I,{during:C,start:{height:P+"px"},end:{height:b+"px"}},()=>y.style.overflow="hidden",()=>{y._x_isShown=!1,y.style.height==`${b}px`&&E&&(y.style.display="none",y.hidden=!0)})}}}}function d(p,m,y){if(p.indexOf(m)===-1)return y;const v=p[p.indexOf(m)+1];if(!v)return y;if(m==="duration"){let x=v.match(/([0-9]+)ms/);if(x)return x[1]}if(m==="min"){let x=v.match(/([0-9]+)px/);if(x)return x[1]}return v}var f=h}}),Ng=nn({"../../../../usr/local/lib/node_modules/@alpinejs/focus/dist/module.cjs.js"(n){var e=Object.create,t=Object.defineProperty,i=Object.getPrototypeOf,r=Object.prototype.hasOwnProperty,s=Object.getOwnPropertyNames,a=Object.getOwnPropertyDescriptor,o=C=>t(C,"__esModule",{value:!0}),l=(C,M)=>()=>(M||(M={exports:{}},C(M.exports,M)),M.exports),c=(C,M)=>{for(var D in M)t(C,D,{get:M[D],enumerable:!0})},h=(C,M,D)=>{if(M&&typeof M=="object"||typeof M=="function")for(let P of s(M))!r.call(C,P)&&P!=="default"&&t(C,P,{get:()=>M[P],enumerable:!(D=a(M,P))||D.enumerable});return C},d=C=>h(o(t(C!=null?e(i(C)):{},"default",C&&C.__esModule&&"default"in C?{get:()=>C.default,enumerable:!0}:{value:C,enumerable:!0})),C),f=l(C=>{Object.defineProperty(C,"__esModule",{value:!0});var M=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"],D=M.join(","),P=typeof Element=="undefined"?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,z=function(ee,le,pe){var _e=Array.prototype.slice.apply(ee.querySelectorAll(D));return le&&P.call(ee,D)&&_e.unshift(ee),_e=_e.filter(pe),_e},j=function(ee){return ee.contentEditable==="true"},Q=function(ee){var le=parseInt(ee.getAttribute("tabindex"),10);return isNaN(le)?j(ee)||(ee.nodeName==="AUDIO"||ee.nodeName==="VIDEO"||ee.nodeName==="DETAILS")&&ee.getAttribute("tabindex")===null?0:ee.tabIndex:le},q=function(ee,le){return ee.tabIndex===le.tabIndex?ee.documentOrder-le.documentOrder:ee.tabIndex-le.tabIndex},J=function(ee){return ee.tagName==="INPUT"},ye=function(ee){return J(ee)&&ee.type==="hidden"},$=function(ee){var le=ee.tagName==="DETAILS"&&Array.prototype.slice.apply(ee.children).some(function(pe){return pe.tagName==="SUMMARY"});return le},N=function(ee,le){for(var pe=0;pe<ee.length;pe++)if(ee[pe].checked&&ee[pe].form===le)return ee[pe]},G=function(ee){if(!ee.name)return!0;var le=ee.form||ee.ownerDocument,pe=function(Ie){return le.querySelectorAll('input[type="radio"][name="'+Ie+'"]')},_e;if(typeof window!="undefined"&&typeof window.CSS!="undefined"&&typeof window.CSS.escape=="function")_e=pe(window.CSS.escape(ee.name));else try{_e=pe(ee.name)}catch(Ge){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",Ge.message),!1}var Je=N(_e,ee.form);return!Je||Je===ee},B=function(ee){return J(ee)&&ee.type==="radio"},W=function(ee){return B(ee)&&!G(ee)},X=function(ee,le){if(getComputedStyle(ee).visibility==="hidden")return!0;var pe=P.call(ee,"details>summary:first-of-type"),_e=pe?ee.parentElement:ee;if(P.call(_e,"details:not([open]) *"))return!0;if(!le||le==="full")for(;ee;){if(getComputedStyle(ee).display==="none")return!0;ee=ee.parentElement}else if(le==="non-zero-area"){var Je=ee.getBoundingClientRect(),Ge=Je.width,Ie=Je.height;return Ge===0&&Ie===0}return!1},ie=function(ee){if(J(ee)||ee.tagName==="SELECT"||ee.tagName==="TEXTAREA"||ee.tagName==="BUTTON")for(var le=ee.parentElement;le;){if(le.tagName==="FIELDSET"&&le.disabled){for(var pe=0;pe<le.children.length;pe++){var _e=le.children.item(pe);if(_e.tagName==="LEGEND")return!_e.contains(ee)}return!0}le=le.parentElement}return!1},U=function(ee,le){return!(le.disabled||ye(le)||X(le,ee.displayCheck)||$(le)||ie(le))},re=function(ee,le){return!(!U(ee,le)||W(le)||Q(le)<0)},ce=function(ee,le){le=le||{};var pe=[],_e=[],Je=z(ee,le.includeContainer,re.bind(null,le));Je.forEach(function(Ie,ht){var lt=Q(Ie);lt===0?pe.push(Ie):_e.push({documentOrder:ht,tabIndex:lt,node:Ie})});var Ge=_e.sort(q).map(function(Ie){return Ie.node}).concat(pe);return Ge},me=function(ee,le){le=le||{};var pe=z(ee,le.includeContainer,U.bind(null,le));return pe},Ue=function(ee,le){if(le=le||{},!ee)throw new Error("No node provided");return P.call(ee,D)===!1?!1:re(le,ee)},se=M.concat("iframe").join(","),fe=function(ee,le){if(le=le||{},!ee)throw new Error("No node provided");return P.call(ee,se)===!1?!1:U(le,ee)};C.focusable=me,C.isFocusable=fe,C.isTabbable=Ue,C.tabbable=ce}),p=l(C=>{Object.defineProperty(C,"__esModule",{value:!0});var M=f();function D(B,W){var X=Object.keys(B);if(Object.getOwnPropertySymbols){var ie=Object.getOwnPropertySymbols(B);W&&(ie=ie.filter(function(U){return Object.getOwnPropertyDescriptor(B,U).enumerable})),X.push.apply(X,ie)}return X}function P(B){for(var W=1;W<arguments.length;W++){var X=arguments[W]!=null?arguments[W]:{};W%2?D(Object(X),!0).forEach(function(ie){z(B,ie,X[ie])}):Object.getOwnPropertyDescriptors?Object.defineProperties(B,Object.getOwnPropertyDescriptors(X)):D(Object(X)).forEach(function(ie){Object.defineProperty(B,ie,Object.getOwnPropertyDescriptor(X,ie))})}return B}function z(B,W,X){return W in B?Object.defineProperty(B,W,{value:X,enumerable:!0,configurable:!0,writable:!0}):B[W]=X,B}var j=function(){var B=[];return{activateTrap:function(X){if(B.length>0){var ie=B[B.length-1];ie!==X&&ie.pause()}var U=B.indexOf(X);U===-1||B.splice(U,1),B.push(X)},deactivateTrap:function(X){var ie=B.indexOf(X);ie!==-1&&B.splice(ie,1),B.length>0&&B[B.length-1].unpause()}}}(),Q=function(W){return W.tagName&&W.tagName.toLowerCase()==="input"&&typeof W.select=="function"},q=function(W){return W.key==="Escape"||W.key==="Esc"||W.keyCode===27},J=function(W){return W.key==="Tab"||W.keyCode===9},ye=function(W){return setTimeout(W,0)},$=function(W,X){var ie=-1;return W.every(function(U,re){return X(U)?(ie=re,!1):!0}),ie},N=function(W){for(var X=arguments.length,ie=new Array(X>1?X-1:0),U=1;U<X;U++)ie[U-1]=arguments[U];return typeof W=="function"?W.apply(void 0,ie):W},G=function(W,X){var ie=document,U=P({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0},X),re={containers:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0},ce,me=function(ne,xe,be){return ne&&ne[xe]!==void 0?ne[xe]:U[be||xe]},Ue=function(ne){return re.containers.some(function(xe){return xe.contains(ne)})},se=function(ne){var xe=U[ne];if(!xe)return null;var be=xe;if(typeof xe=="string"&&(be=ie.querySelector(xe),!be))throw new Error("`".concat(ne,"` refers to no known node"));if(typeof xe=="function"&&(be=xe(),!be))throw new Error("`".concat(ne,"` did not return a node"));return be},fe=function(){var ne;if(me({},"initialFocus")===!1)return!1;if(se("initialFocus")!==null)ne=se("initialFocus");else if(Ue(ie.activeElement))ne=ie.activeElement;else{var xe=re.tabbableGroups[0],be=xe&&xe.firstTabbableNode;ne=be||se("fallbackFocus")}if(!ne)throw new Error("Your focus-trap needs to have at least one focusable element");return ne},ve=function(){if(re.tabbableGroups=re.containers.map(function(ne){var xe=M.tabbable(ne);if(xe.length>0)return{container:ne,firstTabbableNode:xe[0],lastTabbableNode:xe[xe.length-1]}}).filter(function(ne){return!!ne}),re.tabbableGroups.length<=0&&!se("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},ee=function Qe(ne){if(ne!==!1&&ne!==ie.activeElement){if(!ne||!ne.focus){Qe(fe());return}ne.focus({preventScroll:!!U.preventScroll}),re.mostRecentlyFocusedNode=ne,Q(ne)&&ne.select()}},le=function(ne){var xe=se("setReturnFocus");return xe||ne},pe=function(ne){if(!Ue(ne.target)){if(N(U.clickOutsideDeactivates,ne)){ce.deactivate({returnFocus:U.returnFocusOnDeactivate&&!M.isFocusable(ne.target)});return}N(U.allowOutsideClick,ne)||ne.preventDefault()}},_e=function(ne){var xe=Ue(ne.target);xe||ne.target instanceof Document?xe&&(re.mostRecentlyFocusedNode=ne.target):(ne.stopImmediatePropagation(),ee(re.mostRecentlyFocusedNode||fe()))},Je=function(ne){ve();var xe=null;if(re.tabbableGroups.length>0){var be=$(re.tabbableGroups,function(dt){var Mt=dt.container;return Mt.contains(ne.target)});if(be<0)ne.shiftKey?xe=re.tabbableGroups[re.tabbableGroups.length-1].lastTabbableNode:xe=re.tabbableGroups[0].firstTabbableNode;else if(ne.shiftKey){var De=$(re.tabbableGroups,function(dt){var Mt=dt.firstTabbableNode;return ne.target===Mt});if(De<0&&re.tabbableGroups[be].container===ne.target&&(De=be),De>=0){var Me=De===0?re.tabbableGroups.length-1:De-1,qe=re.tabbableGroups[Me];xe=qe.lastTabbableNode}}else{var At=$(re.tabbableGroups,function(dt){var Mt=dt.lastTabbableNode;return ne.target===Mt});if(At<0&&re.tabbableGroups[be].container===ne.target&&(At=be),At>=0){var $t=At===re.tabbableGroups.length-1?0:At+1,Zt=re.tabbableGroups[$t];xe=Zt.firstTabbableNode}}}else xe=se("fallbackFocus");xe&&(ne.preventDefault(),ee(xe))},Ge=function(ne){if(q(ne)&&N(U.escapeDeactivates)!==!1){ne.preventDefault(),ce.deactivate();return}if(J(ne)){Je(ne);return}},Ie=function(ne){N(U.clickOutsideDeactivates,ne)||Ue(ne.target)||N(U.allowOutsideClick,ne)||(ne.preventDefault(),ne.stopImmediatePropagation())},ht=function(){if(!!re.active)return j.activateTrap(ce),re.delayInitialFocusTimer=U.delayInitialFocus?ye(function(){ee(fe())}):ee(fe()),ie.addEventListener("focusin",_e,!0),ie.addEventListener("mousedown",pe,{capture:!0,passive:!1}),ie.addEventListener("touchstart",pe,{capture:!0,passive:!1}),ie.addEventListener("click",Ie,{capture:!0,passive:!1}),ie.addEventListener("keydown",Ge,{capture:!0,passive:!1}),ce},lt=function(){if(!!re.active)return ie.removeEventListener("focusin",_e,!0),ie.removeEventListener("mousedown",pe,!0),ie.removeEventListener("touchstart",pe,!0),ie.removeEventListener("click",Ie,!0),ie.removeEventListener("keydown",Ge,!0),ce};return ce={activate:function(ne){if(re.active)return this;var xe=me(ne,"onActivate"),be=me(ne,"onPostActivate"),De=me(ne,"checkCanFocusTrap");De||ve(),re.active=!0,re.paused=!1,re.nodeFocusedBeforeActivation=ie.activeElement,xe&&xe();var Me=function(){De&&ve(),ht(),be&&be()};return De?(De(re.containers.concat()).then(Me,Me),this):(Me(),this)},deactivate:function(ne){if(!re.active)return this;clearTimeout(re.delayInitialFocusTimer),re.delayInitialFocusTimer=void 0,lt(),re.active=!1,re.paused=!1,j.deactivateTrap(ce);var xe=me(ne,"onDeactivate"),be=me(ne,"onPostDeactivate"),De=me(ne,"checkCanReturnFocus");xe&&xe();var Me=me(ne,"returnFocus","returnFocusOnDeactivate"),qe=function(){ye(function(){Me&&ee(le(re.nodeFocusedBeforeActivation)),be&&be()})};return Me&&De?(De(le(re.nodeFocusedBeforeActivation)).then(qe,qe),this):(qe(),this)},pause:function(){return re.paused||!re.active?this:(re.paused=!0,lt(),this)},unpause:function(){return!re.paused||!re.active?this:(re.paused=!1,ve(),ht(),this)},updateContainerElements:function(ne){var xe=[].concat(ne).filter(Boolean);return re.containers=xe.map(function(be){return typeof be=="string"?ie.querySelector(be):be}),re.active&&ve(),this}},ce.updateContainerElements(W),ce};C.createFocusTrap=G});o(n),c(n,{default:()=>I});var m=d(p()),y=d(f());function v(C){let M,D;window.addEventListener("focusin",()=>{M=D,D=document.activeElement}),C.magic("focus",P=>{let z=P;return{__noscroll:!1,__wrapAround:!1,within(j){return z=j,this},withoutScrolling(){return this.__noscroll=!0,this},noscroll(){return this.__noscroll=!0,this},withWrapAround(){return this.__wrapAround=!0,this},wrap(){return this.withWrapAround()},focusable(j){return(0,y.isFocusable)(j)},previouslyFocused(){return M},lastFocused(){return M},focused(){return D},focusables(){return Array.isArray(z)?z:(0,y.focusable)(z,{displayCheck:"none"})},all(){return this.focusables()},isFirst(j){let Q=this.all();return Q[0]&&Q[0].isSameNode(j)},isLast(j){let Q=this.all();return Q.length&&Q.slice(-1)[0].isSameNode(j)},getFirst(){return this.all()[0]},getLast(){return this.all().slice(-1)[0]},getNext(){let j=this.all(),Q=document.activeElement;if(j.indexOf(Q)!==-1)return this.__wrapAround&&j.indexOf(Q)===j.length-1?j[0]:j[j.indexOf(Q)+1]},getPrevious(){let j=this.all(),Q=document.activeElement;if(j.indexOf(Q)!==-1)return this.__wrapAround&&j.indexOf(Q)===0?j.slice(-1)[0]:j[j.indexOf(Q)-1]},first(){this.focus(this.getFirst())},last(){this.focus(this.getLast())},next(){this.focus(this.getNext())},previous(){this.focus(this.getPrevious())},prev(){return this.previous()},focus(j){!j||setTimeout(()=>{j.hasAttribute("tabindex")||j.setAttribute("tabindex","0"),j.focus({preventScroll:this._noscroll})})}}}),C.directive("trap",C.skipDuringClone((P,{expression:z,modifiers:j},{effect:Q,evaluateLater:q,cleanup:J})=>{let ye=q(z),$=!1,N={escapeDeactivates:!1,allowOutsideClick:!0,fallbackFocus:()=>P},G=P.querySelector("[autofocus]");G&&(N.initialFocus=G);let B=(0,m.createFocusTrap)(P,N),W=()=>{},X=()=>{};const ie=()=>{W(),W=()=>{},X(),X=()=>{},B.deactivate({returnFocus:!j.includes("noreturn")})};Q(()=>ye(U=>{$!==U&&(U&&!$&&setTimeout(()=>{j.includes("inert")&&(W=x(P)),j.includes("noscroll")&&(X=E()),B.activate()}),!U&&$&&ie(),$=!!U)})),J(ie)},(P,{expression:z,modifiers:j},{evaluate:Q})=>{j.includes("inert")&&Q(z)&&x(P)}))}function x(C){let M=[];return b(C,D=>{let P=D.hasAttribute("aria-hidden");D.setAttribute("aria-hidden","true"),M.push(()=>P||D.removeAttribute("aria-hidden"))}),()=>{for(;M.length;)M.pop()()}}function b(C,M){C.isSameNode(document.body)||!C.parentNode||Array.from(C.parentNode.children).forEach(D=>{D.isSameNode(C)?b(C.parentNode,M):M(D)})}function E(){let C=document.documentElement.style.overflow,M=document.documentElement.style.paddingRight,D=window.innerWidth-document.documentElement.clientWidth;return document.documentElement.style.overflow="hidden",document.documentElement.style.paddingRight=`${D}px`,()=>{document.documentElement.style.overflow=C,document.documentElement.style.paddingRight=M}}var I=v}}),Bg=nn({"../../../../usr/local/lib/node_modules/@alpinejs/persist/dist/module.cjs.js"(n){var e=Object.defineProperty,t=c=>e(c,"__esModule",{value:!0}),i=(c,h)=>{for(var d in h)e(c,d,{get:h[d],enumerable:!0})};t(n),i(n,{default:()=>l});function r(c){let h=()=>{let d,f=localStorage;return c.interceptor((p,m,y,v,x)=>{let b=d||`_x_${v}`,E=s(b,f)?a(b,f):p;return y(E),c.effect(()=>{let I=m();o(b,I,f),y(I)}),E},p=>{p.as=m=>(d=m,p),p.using=m=>(f=m,p)})};Object.defineProperty(c,"$persist",{get:()=>h()}),c.magic("persist",h),c.persist=(d,{get:f,set:p},m=localStorage)=>{let y=s(d,m)?a(d,m):f();p(y),c.effect(()=>{let v=f();o(d,v,m),p(v)})}}function s(c,h){return h.getItem(c)!==null}function a(c,h){return JSON.parse(h.getItem(c,h))}function o(c,h,d){d.setItem(c,JSON.stringify(h))}var l=r}}),Gg=nn({"../alpine/packages/intersect/dist/module.cjs.js"(n,e){var t=Object.defineProperty,i=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,a=(y,v)=>{for(var x in v)t(y,x,{get:v[x],enumerable:!0})},o=(y,v,x,b)=>{if(v&&typeof v=="object"||typeof v=="function")for(let E of r(v))!s.call(y,E)&&E!==x&&t(y,E,{get:()=>v[E],enumerable:!(b=i(v,E))||b.enumerable});return y},l=y=>o(t({},"__esModule",{value:!0}),y),c={};a(c,{default:()=>m}),e.exports=l(c);function h(y){y.directive("intersect",(v,{value:x,expression:b,modifiers:E},{evaluateLater:I,cleanup:C})=>{let M=I(b),D={rootMargin:p(E),threshold:d(E)},P=new IntersectionObserver(z=>{z.forEach(j=>{j.isIntersecting!==(x==="leave")&&(M(),E.includes("once")&&P.disconnect())})},D);P.observe(v),C(()=>{P.disconnect()})})}function d(y){if(y.includes("full"))return .99;if(y.includes("half"))return .5;if(!y.includes("threshold"))return 0;let v=y[y.indexOf("threshold")+1];return v==="100"?1:v==="0"?0:Number(`.${v}`)}function f(y){let v=y.match(/^(-?[0-9]+)(px|%)?$/);return v?v[1]+(v[2]||"px"):void 0}function p(y){const v="margin",x="0px 0px 0px 0px",b=y.indexOf(v);if(b===-1)return x;let E=[];for(let I=1;I<5;I++)E.push(f(y[b+I]||""));return E=E.filter(I=>I!==void 0),E.length?E.join(" ").trim():x}var m=h}}),jg=nn({"../alpine/packages/navigate/dist/module.cjs.js"(n,e){var t=Object.create,i=Object.defineProperty,r=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,a=Object.getPrototypeOf,o=Object.prototype.hasOwnProperty,l=(_,w)=>function(){return w||(0,_[s(_)[0]])((w={exports:{}}).exports,w),w.exports},c=(_,w)=>{for(var T in w)i(_,T,{get:w[T],enumerable:!0})},h=(_,w,T,O)=>{if(w&&typeof w=="object"||typeof w=="function")for(let Y of s(w))!o.call(_,Y)&&Y!==T&&i(_,Y,{get:()=>w[Y],enumerable:!(O=r(w,Y))||O.enumerable});return _},d=(_,w,T)=>(T=_!=null?t(a(_)):{},h(w||!_||!_.__esModule?i(T,"default",{value:_,enumerable:!0}):T,_)),f=_=>h(i({},"__esModule",{value:!0}),_),p=l({"node_modules/nprogress/nprogress.js"(_,w){(function(T,O){typeof define=="function"&&define.amd?define(O):typeof _=="object"?w.exports=O():T.NProgress=O()})(_,function(){var T={};T.version="0.2.0";var O=T.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};T.configure=function(u){var g,A;for(g in u)A=u[g],A!==void 0&&u.hasOwnProperty(g)&&(O[g]=A);return this},T.status=null,T.set=function(u){var g=T.isStarted();u=Y(u,O.minimum,1),T.status=u===1?null:u;var A=T.render(!g),R=A.querySelector(O.barSelector),F=O.speed,L=O.easing;return A.offsetWidth,ue(function(k){O.positionUsing===""&&(O.positionUsing=T.getPositioningCSS()),Pe(R,te(u,F,L)),u===1?(Pe(A,{transition:"none",opacity:1}),A.offsetWidth,setTimeout(function(){Pe(A,{transition:"all "+F+"ms linear",opacity:0}),setTimeout(function(){T.remove(),k()},F)},F)):setTimeout(k,F)}),this},T.isStarted=function(){return typeof T.status=="number"},T.start=function(){T.status||T.set(0);var u=function(){setTimeout(function(){!T.status||(T.trickle(),u())},O.trickleSpeed)};return O.trickle&&u(),this},T.done=function(u){return!u&&!T.status?this:T.inc(.3+.5*Math.random()).set(1)},T.inc=function(u){var g=T.status;return g?(typeof u!="number"&&(u=(1-g)*Y(Math.random()*g,.1,.95)),g=Y(g+u,0,.994),T.set(g)):T.start()},T.trickle=function(){return T.inc(Math.random()*O.trickleRate)},function(){var u=0,g=0;T.promise=function(A){return!A||A.state()==="resolved"?this:(g===0&&T.start(),u++,g++,A.always(function(){g--,g===0?(u=0,T.done()):T.set((u-g)/u)}),this)}}(),T.render=function(u){if(T.isRendered())return document.getElementById("nprogress");et(document.documentElement,"nprogress-busy");var g=document.createElement("div");g.id="nprogress",g.innerHTML=O.template;var A=g.querySelector(O.barSelector),R=u?"-100":V(T.status||0),F=document.querySelector(O.parent),L;return Pe(A,{transition:"all 0 linear",transform:"translate3d("+R+"%,0,0)"}),O.showSpinner||(L=g.querySelector(O.spinnerSelector),L&&Fn(L)),F!=document.body&&et(F,"nprogress-custom-parent"),F.appendChild(g),g},T.remove=function(){oi(document.documentElement,"nprogress-busy"),oi(document.querySelector(O.parent),"nprogress-custom-parent");var u=document.getElementById("nprogress");u&&Fn(u)},T.isRendered=function(){return!!document.getElementById("nprogress")},T.getPositioningCSS=function(){var u=document.body.style,g="WebkitTransform"in u?"Webkit":"MozTransform"in u?"Moz":"msTransform"in u?"ms":"OTransform"in u?"O":"";return g+"Perspective"in u?"translate3d":g+"Transform"in u?"translate":"margin"};function Y(u,g,A){return u<g?g:u>A?A:u}function V(u){return(-1+u)*100}function te(u,g,A){var R;return O.positionUsing==="translate3d"?R={transform:"translate3d("+V(u)+"%,0,0)"}:O.positionUsing==="translate"?R={transform:"translate("+V(u)+"%,0)"}:R={"margin-left":V(u)+"%"},R.transition="all "+g+"ms "+A,R}var ue=function(){var u=[];function g(){var A=u.shift();A&&A(g)}return function(A){u.push(A),u.length==1&&g()}}(),Pe=function(){var u=["Webkit","O","Moz","ms"],g={};function A(k){return k.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(H,oe){return oe.toUpperCase()})}function R(k){var H=document.body.style;if(k in H)return k;for(var oe=u.length,he=k.charAt(0).toUpperCase()+k.slice(1),Se;oe--;)if(Se=u[oe]+he,Se in H)return Se;return k}function F(k){return k=A(k),g[k]||(g[k]=R(k))}function L(k,H,oe){H=F(H),k.style[H]=oe}return function(k,H){var oe=arguments,he,Se;if(oe.length==2)for(he in H)Se=H[he],Se!==void 0&&H.hasOwnProperty(he)&&L(k,he,Se);else L(k,oe[1],oe[2])}}();function je(u,g){var A=typeof u=="string"?u:un(u);return A.indexOf(" "+g+" ")>=0}function et(u,g){var A=un(u),R=A+g;je(A,g)||(u.className=R.substring(1))}function oi(u,g){var A=un(u),R;!je(u,g)||(R=A.replace(" "+g+" "," "),u.className=R.substring(1,R.length-1))}function un(u){return(" "+(u.className||"")+" ").replace(/\s+/gi," ")}function Fn(u){u&&u.parentNode&&u.parentNode.removeChild(u)}return T})}}),m={};c(m,{default:()=>Hl}),e.exports=f(m);function y(){let _=new URL(window.location.href,document.baseURI);E(_,document.documentElement.outerHTML)}function v(_){window.addEventListener("popstate",w=>{let O=(w.state||{}).alpine||{};if(!O._html)return;let Y=C(O._html);_(Y)})}function x(_,w){b(w,_)}function b(_,w){I("pushState",_,w)}function E(_,w){I("replaceState",_,w)}function I(_,w,T){let O=new Date().getTime();M(O,T);let Y=history.state||{};Y.alpine||(Y.alpine={}),Y.alpine._html=O,history[_](Y,document.title,w)}function C(_){return JSON.parse(sessionStorage.getItem("alpine:"+_))}function M(_,w){try{sessionStorage.setItem("alpine:"+_,JSON.stringify(w))}catch(T){if(![22,1,2,3,4,5,6,7,8,9,10,11,12,13,14].includes(T.code))return;let O=Object.keys(sessionStorage).map(Y=>Number(Y.replace("alpine:",""))).sort().shift();if(!O)return;sessionStorage.removeItem("alpine:"+O),M(_,w)}}var D={};function P(_,w){let T=_.pathname;D[T]||(D[T]={finished:!1,html:null,whenFinished:()=>{}},fetch(T).then(O=>O.text()).then(O=>{w(O)}))}function z(_,w){let T=D[w.pathname];T.html=_,T.finished=!0,T.whenFinished()}function j(_,w,T){let O=_.pathname+_.search;if(!D[O])return T();if(D[O].finished){let Y=D[O].html;return delete D[O],w(Y)}else D[O].whenFinished=()=>{let Y=D[O].html;delete D[O],w(Y)}}function Q(_,w){_.addEventListener("click",T=>T.preventDefault()),_.addEventListener("mousedown",T=>{T.preventDefault(),w(O=>{let Y=V=>{V.preventDefault(),O(),_.removeEventListener("mouseup",Y)};_.addEventListener("mouseup",Y)})})}function q(_,w=60,T){_.addEventListener("mouseenter",O=>{setTimeout(()=>{},w);let Y=()=>{clear,_.removeEventListener("mouseleave",Y)};_.addEventListener("mouseleave",Y),T(O)})}function J(_){return ye(_.getAttribute("href"))}function ye(_){return new URL(_,document.baseURI)}function $(){document.body.setAttribute("data-scroll-x",document.body.scrollLeft),document.body.setAttribute("data-scroll-y",document.body.scrollTop),document.querySelectorAll(["[x-navigate\\:scroll]","[wire\\:scroll]"]).forEach(_=>{_.setAttribute("data-scroll-x",_.scrollLeft),_.setAttribute("data-scroll-y",_.scrollTop)})}function N(){let _=w=>{w.scrollTo(Number(w.getAttribute("data-scroll-x")),Number(w.getAttribute("data-scroll-y"))),w.removeAttribute("data-scroll-x"),w.removeAttribute("data-scroll-y")};queueMicrotask(()=>{_(document.body),document.querySelectorAll(["[x-navigate\\:scroll]","[wire\\:scroll]"]).forEach(_)})}var G=!1,B=!1,W=[];function X(_){ie(_)}function ie(_){W.includes(_)||W.push(_),U()}function U(){!B&&!G&&(G=!0,queueMicrotask(re))}function re(){G=!1,B=!0;for(let _=0;_<W.length;_++)W[_]();W.length=0,B=!1}var ce,me,Ue,se,fe=!0;function ve(_){fe=!1,_(),fe=!0}function ee(_){ce=_.reactive,Ue=_.release,me=w=>_.effect(w,{scheduler:T=>{fe?X(T):T()}}),se=_.raw}function le(_){me=_}function pe(_){let w=()=>{};return[O=>{let Y=me(O);return _._x_effects||(_._x_effects=new Set,_._x_runEffects=()=>{_._x_effects.forEach(V=>V())}),_._x_effects.add(Y),w=()=>{Y!==void 0&&(_._x_effects.delete(Y),Ue(Y))},Y},()=>{w()}]}var _e=[],Je=[],Ge=[];function Ie(_){Ge.push(_)}function ht(_,w){typeof w=="function"?(_._x_cleanups||(_._x_cleanups=[]),_._x_cleanups.push(w)):(w=_,Je.push(w))}function lt(_){_e.push(_)}function Qe(_,w,T){_._x_attributeCleanups||(_._x_attributeCleanups={}),_._x_attributeCleanups[w]||(_._x_attributeCleanups[w]=[]),_._x_attributeCleanups[w].push(T)}function ne(_,w){!_._x_attributeCleanups||Object.entries(_._x_attributeCleanups).forEach(([T,O])=>{(w===void 0||w.includes(T))&&(O.forEach(Y=>Y()),delete _._x_attributeCleanups[T])})}var xe=new MutationObserver(hi),be=!1;function De(){xe.observe(document,{subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0}),be=!0}function Me(){$t(),xe.disconnect(),be=!1}var qe=[],At=!1;function $t(){qe=qe.concat(xe.takeRecords()),qe.length&&!At&&(At=!0,queueMicrotask(()=>{Zt(),At=!1}))}function Zt(){hi(qe),qe.length=0}function dt(_){if(!be)return _();Me();let w=_();return De(),w}var Mt=!1,Ye=[];function ji(){Mt=!0}function ms(){Mt=!1,hi(Ye),Ye=[]}function hi(_){if(Mt){Ye=Ye.concat(_);return}let w=[],T=[],O=new Map,Y=new Map;for(let V=0;V<_.length;V++)if(!_[V].target._x_ignoreMutationObserver&&(_[V].type==="childList"&&(_[V].addedNodes.forEach(te=>te.nodeType===1&&w.push(te)),_[V].removedNodes.forEach(te=>te.nodeType===1&&T.push(te))),_[V].type==="attributes")){let te=_[V].target,ue=_[V].attributeName,Pe=_[V].oldValue,je=()=>{O.has(te)||O.set(te,[]),O.get(te).push({name:ue,value:te.getAttribute(ue)})},et=()=>{Y.has(te)||Y.set(te,[]),Y.get(te).push(ue)};te.hasAttribute(ue)&&Pe===null?je():te.hasAttribute(ue)?(et(),je()):et()}Y.forEach((V,te)=>{ne(te,V)}),O.forEach((V,te)=>{_e.forEach(ue=>ue(te,V))});for(let V of T)if(!w.includes(V)&&(Je.forEach(te=>te(V)),V._x_cleanups))for(;V._x_cleanups.length;)V._x_cleanups.pop()();w.forEach(V=>{V._x_ignoreSelf=!0,V._x_ignore=!0});for(let V of w)T.includes(V)||!V.isConnected||(delete V._x_ignoreSelf,delete V._x_ignore,Ge.forEach(te=>te(V)),V._x_ignore=!0,V._x_ignoreSelf=!0);w.forEach(V=>{delete V._x_ignoreSelf,delete V._x_ignore}),w=null,T=null,O=null,Y=null}function zi(_){return ct(bt(_))}function In(_,w,T){return _._x_dataStack=[w,...bt(T||_)],()=>{_._x_dataStack=_._x_dataStack.filter(O=>O!==w)}}function bt(_){return _._x_dataStack?_._x_dataStack:typeof ShadowRoot=="function"&&_ instanceof ShadowRoot?bt(_.host):_.parentNode?bt(_.parentNode):[]}function ct(_){let w=new Proxy({},{ownKeys:()=>Array.from(new Set(_.flatMap(T=>Object.keys(T)))),has:(T,O)=>_.some(Y=>Y.hasOwnProperty(O)),get:(T,O)=>(_.find(Y=>{if(Y.hasOwnProperty(O)){let V=Object.getOwnPropertyDescriptor(Y,O);if(V.get&&V.get._x_alreadyBound||V.set&&V.set._x_alreadyBound)return!0;if((V.get||V.set)&&V.enumerable){let te=V.get,ue=V.set,Pe=V;te=te&&te.bind(w),ue=ue&&ue.bind(w),te&&(te._x_alreadyBound=!0),ue&&(ue._x_alreadyBound=!0),Object.defineProperty(Y,O,{...Pe,get:te,set:ue})}return!0}return!1})||{})[O],set:(T,O,Y)=>{let V=_.find(te=>te.hasOwnProperty(O));return V?V[O]=Y:_[_.length-1][O]=Y,!0}});return w}function sn(_){let w=O=>typeof O=="object"&&!Array.isArray(O)&&O!==null,T=(O,Y="")=>{Object.entries(Object.getOwnPropertyDescriptors(O)).forEach(([V,{value:te,enumerable:ue}])=>{if(ue===!1||te===void 0)return;let Pe=Y===""?V:`${Y}.${V}`;typeof te=="object"&&te!==null&&te._x_interceptor?O[V]=te.initialize(_,Pe,V):w(te)&&te!==O&&!(te instanceof Element)&&T(te,Pe)})};return T(_)}function wi(_,w=()=>{}){let T={initialValue:void 0,_x_interceptor:!0,initialize(O,Y,V){return _(this.initialValue,()=>xi(O,Y),te=>di(O,Y,te),Y,V)}};return w(T),O=>{if(typeof O=="object"&&O!==null&&O._x_interceptor){let Y=T.initialize.bind(T);T.initialize=(V,te,ue)=>{let Pe=O.initialize(V,te,ue);return T.initialValue=Pe,Y(V,te,ue)}}else T.initialValue=O;return T}}function xi(_,w){return w.split(".").reduce((T,O)=>T[O],_)}function di(_,w,T){if(typeof w=="string"&&(w=w.split(".")),w.length===1)_[w[0]]=T;else{if(w.length===0)throw error;return _[w[0]]||(_[w[0]]={}),di(_[w[0]],w.slice(1),T)}}var Ui={};function or(_,w){Ui[_]=w}function Lt(_,w){return Object.entries(Ui).forEach(([T,O])=>{let Y=null;function V(){if(Y)return Y;{let[te,ue]=an(w);return Y={interceptor:wi,...te},ht(w,ue),Y}}Object.defineProperty(_,`$${T}`,{get(){return O(w,V())},enumerable:!1})}),_}function ei(_,w,T,...O){try{return T(...O)}catch(Y){ft(Y,_,w)}}function ft(_,w,T=void 0){Object.assign(_,{el:w,expression:T}),console.warn(`Alpine Expression Error: ${_.message}

${T?'Expression: "'+T+`"

`:""}`,w),setTimeout(()=>{throw _},0)}var _t=!0;function Ct(_){let w=_t;_t=!1;let T=_();return _t=w,T}function ti(_,w,T={}){let O;return $e(_,w)(Y=>O=Y,T),O}function $e(..._){return mt(..._)}var mt=Ht;function Pt(_){mt=_}function Ht(_,w){let T={};Lt(T,_);let O=[T,...bt(_)],Y=typeof w=="function"?Wi(O,w):Ca(O,w,_);return ei.bind(null,_,w,Y)}function Wi(_,w){return(T=()=>{},{scope:O={},params:Y=[]}={})=>{let V=w.apply(ct([O,..._]),Y);cr(T,V)}}var lr={};function El(_,w){if(lr[_])return lr[_];let T=Object.getPrototypeOf(async function(){}).constructor,O=/^[\n\s]*if.*\(.*\)/.test(_.trim())||/^(let|const)\s/.test(_.trim())?`(async()=>{ ${_} })()`:_,V=(()=>{try{return new T(["__self","scope"],`with (scope) { __self.result = ${O} }; __self.finished = true; return __self.result;`)}catch(te){return ft(te,w,_),Promise.resolve()}})();return lr[_]=V,V}function Ca(_,w,T){let O=El(w,T);return(Y=()=>{},{scope:V={},params:te=[]}={})=>{O.result=void 0,O.finished=!1;let ue=ct([V,..._]);if(typeof O=="function"){let Pe=O(O,ue).catch(je=>ft(je,T,w));O.finished?(cr(Y,O.result,ue,te,T),O.result=void 0):Pe.then(je=>{cr(Y,je,ue,te,T)}).catch(je=>ft(je,T,w)).finally(()=>O.result=void 0)}}}function cr(_,w,T,O,Y){if(_t&&typeof w=="function"){let V=w.apply(T,O);V instanceof Promise?V.then(te=>cr(_,te,T,O)).catch(te=>ft(te,Y,w)):_(V)}else typeof w=="object"&&w instanceof Promise?w.then(V=>_(V)):_(w)}var ur="x-";function ys(_=""){return ur+_}function Ia(_){ur=_}var hr={};function dr(_,w){return hr[_]=w,{before(T){if(!hr[T]){console.warn("Cannot find directive `${directive}`. `${name}` will use the default order of execution");return}const O=Ci.indexOf(T);Ci.splice(O>=0?O:Ci.indexOf("DEFAULT"),0,_)}}}function fr(_,w,T){if(w=Array.from(w),_._x_virtualDirectives){let V=Object.entries(_._x_virtualDirectives).map(([ue,Pe])=>({name:ue,value:Pe})),te=vs(V);V=V.map(ue=>te.find(Pe=>Pe.name===ue.name)?{name:`x-bind:${ue.name}`,value:`"${ue.value}"`}:ue),w=w.concat(V)}let O={};return w.map(fi((V,te)=>O[V]=te)).filter(gr).map(Sa(O,T)).sort(Ra).map(V=>bi(_,V))}function vs(_){return Array.from(_).map(fi()).filter(w=>!gr(w))}var As=!1,Yi=new Map,Ei=Symbol();function bl(_){As=!0;let w=Symbol();Ei=w,Yi.set(w,[]);let T=()=>{for(;Yi.get(w).length;)Yi.get(w).shift()();Yi.delete(w)},O=()=>{As=!1,T()};_(T),O()}function an(_){let w=[],T=ue=>w.push(ue),[O,Y]=pe(_);return w.push(Y),[{Alpine:Mn,effect:O,cleanup:T,evaluateLater:$e.bind($e,_),evaluate:ti.bind(ti,_)},()=>w.forEach(ue=>ue())]}function bi(_,w){let T=()=>{},O=hr[w.type]||T,[Y,V]=an(_);Qe(_,w.original,V);let te=()=>{_._x_ignore||_._x_ignoreSelf||(O.inline&&O.inline(_,w,Y),O=O.bind(O,_,w,Y),As?Yi.get(Ei).push(O):O())};return te.runCleanups=V,te}function fi(_=()=>{}){return({name:w,value:T})=>{let{name:O,value:Y}=ws.reduce((V,te)=>te(V),{name:w,value:T});return O!==w&&_(O,w),{name:O,value:Y}}}var ws=[];function Cl(_){ws.push(_)}function gr({name:_}){return xs().test(_)}var xs=()=>new RegExp(`^${ur}([^:^.]+)\\b`);function Sa(_,w){return({name:T,value:O})=>{let Y=T.match(xs()),V=T.match(/:([a-zA-Z0-9\-:]+)/),te=T.match(/\.[^.\]]+(?=[^\]]*$)/g)||[],ue=w||_[T]||T;return{type:Y?Y[1]:null,value:V?V[1]:null,modifiers:te.map(Pe=>Pe.replace(".","")),expression:O,original:ue}}}var pr="DEFAULT",Ci=["ignore","ref","data","id","bind","init","for","model","modelable","transition","show","if",pr,"teleport"];function Ra(_,w){let T=Ci.indexOf(_.type)===-1?pr:_.type,O=Ci.indexOf(w.type)===-1?pr:w.type;return Ci.indexOf(T)-Ci.indexOf(O)}function on(_,w,T={}){_.dispatchEvent(new CustomEvent(w,{detail:T,bubbles:!0,composed:!0,cancelable:!0}))}function si(_,w){if(typeof ShadowRoot=="function"&&_ instanceof ShadowRoot){Array.from(_.children).forEach(Y=>si(Y,w));return}let T=!1;if(w(_,()=>T=!0),T)return;let O=_.firstElementChild;for(;O;)si(O,w),O=O.nextElementSibling}function Ta(_,...w){console.warn(`Alpine Warning: ${_}`,...w)}var Es=!1;function Il(){Es&&Ta("Alpine has already been initialized on this page. Calling Alpine.start() more than once can cause problems."),Es=!0,document.body||Ta("Unable to initialize. Trying to load Alpine before `<body>` is available. Did you forget to add `defer` in Alpine's `<script>` tag?"),on(document,"alpine:init"),on(document,"alpine:initializing"),De(),Ie(w=>vr(w,si)),ht(w=>Pa(w)),lt((w,T)=>{fr(w,T).forEach(O=>O())});let _=w=>!Oa(w.parentElement,!0);Array.from(document.querySelectorAll(mr())).filter(_).forEach(w=>{vr(w)}),on(document,"alpine:initialized")}var ai=[],bs=[];function _r(){return ai.map(_=>_())}function mr(){return ai.concat(bs).map(_=>_())}function Cs(_){ai.push(_)}function Is(_){bs.push(_)}function Oa(_,w=!1){return Sn(_,T=>{if((w?mr():_r()).some(Y=>T.matches(Y)))return!0})}function Sn(_,w){if(!!_){if(w(_))return _;if(_._x_teleportBack&&(_=_._x_teleportBack),!!_.parentElement)return Sn(_.parentElement,w)}}function Ma(_){return _r().some(w=>_.matches(w))}var La=[];function yr(_){La.push(_)}function vr(_,w=si,T=()=>{}){bl(()=>{w(_,(O,Y)=>{T(O,Y),La.forEach(V=>V(O,Y)),fr(O,O.attributes).forEach(V=>V()),O._x_ignore&&Y()})})}function Pa(_){si(_,w=>ne(w))}var Ss=[],Rn=!1;function Sl(_=()=>{}){return queueMicrotask(()=>{Rn||setTimeout(()=>{Rs()})}),new Promise(w=>{Ss.push(()=>{_(),w()})})}function Rs(){for(Rn=!1;Ss.length;)Ss.shift()()}function Fa(){Rn=!0}function Ts(_,w){return Array.isArray(w)?Ar(_,w.join(" ")):typeof w=="object"&&w!==null?Rl(_,w):typeof w=="function"?Ts(_,w()):Ar(_,w)}function Ar(_,w){let T=Y=>Y.split(" ").filter(V=>!_.classList.contains(V)).filter(Boolean),O=Y=>(_.classList.add(...Y),()=>{_.classList.remove(...Y)});return w=w===!0?w="":w||"",O(T(w))}function Rl(_,w){let T=ue=>ue.split(" ").filter(Boolean),O=Object.entries(w).flatMap(([ue,Pe])=>Pe?T(ue):!1).filter(Boolean),Y=Object.entries(w).flatMap(([ue,Pe])=>Pe?!1:T(ue)).filter(Boolean),V=[],te=[];return Y.forEach(ue=>{_.classList.contains(ue)&&(_.classList.remove(ue),te.push(ue))}),O.forEach(ue=>{_.classList.contains(ue)||(_.classList.add(ue),V.push(ue))}),()=>{te.forEach(ue=>_.classList.add(ue)),V.forEach(ue=>_.classList.remove(ue))}}function Xi(_,w){return typeof w=="object"&&w!==null?ln(_,w):wr(_,w)}function ln(_,w){let T={};return Object.entries(w).forEach(([O,Y])=>{T[O]=_.style[O],O.startsWith("--")||(O=Tl(O)),_.style.setProperty(O,Y)}),setTimeout(()=>{_.style.length===0&&_.removeAttribute("style")}),()=>{Xi(_,T)}}function wr(_,w){let T=_.getAttribute("style",w);return _.setAttribute("style",w),()=>{_.setAttribute("style",T||"")}}function Tl(_){return _.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Da(_,w=()=>{}){let T=!1;return function(){T?w.apply(this,arguments):(T=!0,_.apply(this,arguments))}}dr("transition",(_,{value:w,modifiers:T,expression:O},{evaluate:Y})=>{typeof O=="function"&&(O=Y(O)),O!==!1&&(!O||typeof O=="boolean"?Ml(_,T,w):Ol(_,O,w))});function Ol(_,w,T){Os(_,Ts,""),{enter:Y=>{_._x_transition.enter.during=Y},"enter-start":Y=>{_._x_transition.enter.start=Y},"enter-end":Y=>{_._x_transition.enter.end=Y},leave:Y=>{_._x_transition.leave.during=Y},"leave-start":Y=>{_._x_transition.leave.start=Y},"leave-end":Y=>{_._x_transition.leave.end=Y}}[T](w)}function Ml(_,w,T){Os(_,Xi);let O=!w.includes("in")&&!w.includes("out")&&!T,Y=O||w.includes("in")||["enter"].includes(T),V=O||w.includes("out")||["leave"].includes(T);w.includes("in")&&!O&&(w=w.filter((R,F)=>F<w.indexOf("out"))),w.includes("out")&&!O&&(w=w.filter((R,F)=>F>w.indexOf("out")));let te=!w.includes("opacity")&&!w.includes("scale"),ue=te||w.includes("opacity"),Pe=te||w.includes("scale"),je=ue?0:1,et=Pe?Tn(w,"scale",95)/100:1,oi=Tn(w,"delay",0)/1e3,un=Tn(w,"origin","center"),Fn="opacity, transform",u=Tn(w,"duration",150)/1e3,g=Tn(w,"duration",75)/1e3,A="cubic-bezier(0.4, 0.0, 0.2, 1)";Y&&(_._x_transition.enter.during={transformOrigin:un,transitionDelay:`${oi}s`,transitionProperty:Fn,transitionDuration:`${u}s`,transitionTimingFunction:A},_._x_transition.enter.start={opacity:je,transform:`scale(${et})`},_._x_transition.enter.end={opacity:1,transform:"scale(1)"}),V&&(_._x_transition.leave.during={transformOrigin:un,transitionDelay:`${oi}s`,transitionProperty:Fn,transitionDuration:`${g}s`,transitionTimingFunction:A},_._x_transition.leave.start={opacity:1,transform:"scale(1)"},_._x_transition.leave.end={opacity:je,transform:`scale(${et})`})}function Os(_,w,T={}){_._x_transition||(_._x_transition={enter:{during:T,start:T,end:T},leave:{during:T,start:T,end:T},in(O=()=>{},Y=()=>{}){Ms(_,w,{during:this.enter.during,start:this.enter.start,end:this.enter.end},O,Y)},out(O=()=>{},Y=()=>{}){Ms(_,w,{during:this.leave.during,start:this.leave.start,end:this.leave.end},O,Y)}})}window.Element.prototype._x_toggleAndCascadeWithTransitions=function(_,w,T,O){const Y=document.visibilityState==="visible"?requestAnimationFrame:setTimeout;let V=()=>Y(T);if(w){_._x_transition&&(_._x_transition.enter||_._x_transition.leave)?_._x_transition.enter&&(Object.entries(_._x_transition.enter.during).length||Object.entries(_._x_transition.enter.start).length||Object.entries(_._x_transition.enter.end).length)?_._x_transition.in(T):V():_._x_transition?_._x_transition.in(T):V();return}_._x_hidePromise=_._x_transition?new Promise((te,ue)=>{_._x_transition.out(()=>{},()=>te(O)),_._x_transitioning.beforeCancel(()=>ue({isFromCancelledTransition:!0}))}):Promise.resolve(O),queueMicrotask(()=>{let te=ka(_);te?(te._x_hideChildren||(te._x_hideChildren=[]),te._x_hideChildren.push(_)):Y(()=>{let ue=Pe=>{let je=Promise.all([Pe._x_hidePromise,...(Pe._x_hideChildren||[]).map(ue)]).then(([et])=>et());return delete Pe._x_hidePromise,delete Pe._x_hideChildren,je};ue(_).catch(Pe=>{if(!Pe.isFromCancelledTransition)throw Pe})})})};function ka(_){let w=_.parentNode;if(!!w)return w._x_hidePromise?w:ka(w)}function Ms(_,w,{during:T,start:O,end:Y}={},V=()=>{},te=()=>{}){if(_._x_transitioning&&_._x_transitioning.cancel(),Object.keys(T).length===0&&Object.keys(O).length===0&&Object.keys(Y).length===0){V(),te();return}let ue,Pe,je;Ll(_,{start(){ue=w(_,O)},during(){Pe=w(_,T)},before:V,end(){ue(),je=w(_,Y)},after:te,cleanup(){Pe(),je()}})}function Ll(_,w){let T,O,Y,V=Da(()=>{dt(()=>{T=!0,O||w.before(),Y||(w.end(),Rs()),w.after(),_.isConnected&&w.cleanup(),delete _._x_transitioning})});_._x_transitioning={beforeCancels:[],beforeCancel(te){this.beforeCancels.push(te)},cancel:Da(function(){for(;this.beforeCancels.length;)this.beforeCancels.shift()();V()}),finish:V},dt(()=>{w.start(),w.during()}),Fa(),requestAnimationFrame(()=>{if(T)return;let te=Number(getComputedStyle(_).transitionDuration.replace(/,.*/,"").replace("s",""))*1e3,ue=Number(getComputedStyle(_).transitionDelay.replace(/,.*/,"").replace("s",""))*1e3;te===0&&(te=Number(getComputedStyle(_).animationDuration.replace("s",""))*1e3),dt(()=>{w.before()}),O=!0,requestAnimationFrame(()=>{T||(dt(()=>{w.end()}),Rs(),setTimeout(_._x_transitioning.finish,te+ue),Y=!0)})})}function Tn(_,w,T){if(_.indexOf(w)===-1)return T;const O=_[_.indexOf(w)+1];if(!O||w==="scale"&&isNaN(O))return T;if(w==="duration"||w==="delay"){let Y=O.match(/([0-9]+)ms/);if(Y)return Y[1]}return w==="origin"&&["top","right","left","center","bottom"].includes(_[_.indexOf(w)+2])?[O,_[_.indexOf(w)+2]].join(" "):O}var On=!1;function Pl(_,w=()=>{}){return(...T)=>On?w(...T):_(...T)}function Fl(_){return(...w)=>On&&_(...w)}function Dl(_,w){w._x_dataStack||(w._x_dataStack=_._x_dataStack),On=!0,Na(()=>{kl(w)}),On=!1}function kl(_){let w=!1;vr(_,(O,Y)=>{si(O,(V,te)=>{if(w&&Ma(V))return te();w=!0,Y(V,te)})})}function Na(_){let w=me;le((T,O)=>{let Y=w(T);return Ue(Y),()=>{}}),_(),le(w)}function Ba(_){return["disabled","checked","required","readonly","hidden","open","selected","autofocus","itemscope","multiple","novalidate","allowfullscreen","allowpaymentrequest","formnovalidate","autoplay","controls","loop","muted","playsinline","default","ismap","reversed","async","defer","nomodule"].includes(_)}function Nl(_,w,T){return _._x_bindings&&_._x_bindings[w]!==void 0?_._x_bindings[w]:Ga(_,w,T)}function Bl(_,w,T,O=!0){if(_._x_bindings&&_._x_bindings[w]!==void 0)return _._x_bindings[w];if(_._x_inlineBindings&&_._x_inlineBindings[w]!==void 0){let Y=_._x_inlineBindings[w];return Y.extract=O,Ct(()=>ti(_,Y.expression))}return Ga(_,w,T)}function Ga(_,w,T){let O=_.getAttribute(w);return O===null?typeof T=="function"?T():T:O===""?!0:Ba(w)?!![w,"true"].includes(O):O}function ja(_,w){var T;return function(){var O=this,Y=arguments,V=function(){T=null,_.apply(O,Y)};clearTimeout(T),T=setTimeout(V,w)}}function za(_,w){let T;return function(){let O=this,Y=arguments;T||(_.apply(O,Y),T=!0,setTimeout(()=>T=!1,w))}}function Ua({get:_,set:w},{get:T,set:O}){let Y=!0,V,te,ue,Pe=me(()=>{let je,et;Y?(je=_(),O(JSON.parse(JSON.stringify(je))),et=T(),Y=!1):(je=_(),et=T(),te=JSON.stringify(je),ue=JSON.stringify(et),te!==V?(et=T(),O(je),et=je):(w(JSON.parse(ue!=null?ue:null)),je=et)),V=JSON.stringify(je),JSON.stringify(et)});return()=>{Ue(Pe)}}function Wa(_){(Array.isArray(_)?_:[_]).forEach(T=>T(Mn))}var cn={},Ii=!1;function Ya(_,w){if(Ii||(cn=ce(cn),Ii=!0),w===void 0)return cn[_];cn[_]=w,typeof w=="object"&&w!==null&&w.hasOwnProperty("init")&&typeof w.init=="function"&&cn[_].init(),sn(cn[_])}function Gl(_,w){let T=typeof w!="function"?()=>w:w;return _ instanceof Element?jl(_,T()):()=>{}}function jl(_,w,T){let O=[];for(;O.length;)O.pop()();let Y=Object.entries(w).map(([te,ue])=>({name:te,value:ue})),V=vs(Y);return Y=Y.map(te=>V.find(ue=>ue.name===te.name)?{name:`x-bind:${te.name}`,value:`"${te.value}"`}:te),fr(_,Y,T).map(te=>{O.push(te.runCleanups),te()}),()=>{for(;O.length;)O.pop()()}}function Xa(_,w){}var zl={get reactive(){return ce},get release(){return Ue},get effect(){return me},get raw(){return se},version:"3.12.3",flushAndStopDeferringMutations:ms,dontAutoEvaluateFunctions:Ct,disableEffectScheduling:ve,startObservingMutations:De,stopObservingMutations:Me,setReactivityEngine:ee,onAttributeRemoved:Qe,onAttributesAdded:lt,closestDataStack:bt,skipDuringClone:Pl,onlyDuringClone:Fl,addRootSelector:Cs,addInitSelector:Is,addScopeToNode:In,deferMutations:ji,mapAttributes:Cl,evaluateLater:$e,interceptInit:yr,setEvaluator:Pt,mergeProxies:ct,extractProp:Bl,findClosest:Sn,onElRemoved:ht,closestRoot:Oa,destroyTree:Pa,interceptor:wi,transition:Ms,setStyles:Xi,mutateDom:dt,directive:dr,entangle:Ua,throttle:za,debounce:ja,evaluate:ti,initTree:vr,nextTick:Sl,prefixed:ys,prefix:Ia,plugin:Wa,magic:or,store:Ya,start:Il,clone:Dl,bound:Nl,$data:zi,walk:si,data:Xa,bind:Gl},Mn=zl,xr={};function Ls(){xr={},document.querySelectorAll("[x-persist]").forEach(_=>{xr[_.getAttribute("x-persist")]=_,Mn.mutateDom(()=>{_.remove()})})}function Ha(){document.querySelectorAll("[x-persist]").forEach(_=>{let w=xr[_.getAttribute("x-persist")];!w||(w._x_wasPersisted=!0,Mn.mutateDom(()=>{_.replaceWith(w)}))})}var Ln=d(p());Ln.default.configure({minimum:.1}),Ln.default.configure({trickleSpeed:200}),Ul();var Ps=!1;function Pn(){Ps=!0,setTimeout(()=>{!Ps||Ln.default.start()},150)}function Er(){Ps=!1,Ln.default.done(),Ln.default.remove()}function Ul(){let _=document.createElement("style");_.innerHTML=`/* Make clicks pass-through */
    #nprogress {
      pointer-events: none;
    }

    #nprogress .bar {
    //   background: #FC70A9;
      background: #29d;

      position: fixed;
      z-index: 1031;
      top: 0;
      left: 0;

      width: 100%;
      height: 2px;
    }

    /* Fancy blur effect */
    #nprogress .peg {
      display: block;
      position: absolute;
      right: 0px;
      width: 100px;
      height: 100%;
      box-shadow: 0 0 10px #29d, 0 0 5px #29d;
      opacity: 1.0;

      -webkit-transform: rotate(3deg) translate(0px, -4px);
          -ms-transform: rotate(3deg) translate(0px, -4px);
              transform: rotate(3deg) translate(0px, -4px);
    }

    /* Remove these to get rid of the spinner */
    #nprogress .spinner {
      display: block;
      position: fixed;
      z-index: 1031;
      top: 15px;
      right: 15px;
    }

    #nprogress .spinner-icon {
      width: 18px;
      height: 18px;
      box-sizing: border-box;

      border: solid 2px transparent;
      border-top-color: #29d;
      border-left-color: #29d;
      border-radius: 50%;

      -webkit-animation: nprogress-spinner 400ms linear infinite;
              animation: nprogress-spinner 400ms linear infinite;
    }

    .nprogress-custom-parent {
      overflow: hidden;
      position: relative;
    }

    .nprogress-custom-parent #nprogress .spinner,
    .nprogress-custom-parent #nprogress .bar {
      position: absolute;
    }

    @-webkit-keyframes nprogress-spinner {
      0%   { -webkit-transform: rotate(0deg); }
      100% { -webkit-transform: rotate(360deg); }
    }
    @keyframes nprogress-spinner {
      0%   { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    `,document.head.appendChild(_)}function br(_,w){let T=new DOMParser().parseFromString(_,"text/html"),O=document.adoptNode(T.body),Y=document.adoptNode(T.head),V=Array.from(document.body.querySelectorAll("script")).map(ue=>Cr(ue.outerHTML));Wl(Y),Qa(O,V);let te=document.body;document.body.replaceWith(O),Mn.destroyTree(te),w()}function Qa(_,w){_.querySelectorAll("script").forEach(T=>{if(T.hasAttribute("data-navigate-once")){let O=Cr(T.outerHTML);if(w.includes(O))return}T.replaceWith(Ka(T))})}function Wl(_){let w=Array.from(document.head.children).map(O=>O.outerHTML),T=document.createDocumentFragment();for(let O of Array.from(_.children))if($a(O))if(w.includes(O.outerHTML))T.appendChild(O);else{if(Va(O)){setTimeout(()=>window.location.reload());return}Za(O)?document.head.appendChild(Ka(O)):document.head.appendChild(O)}for(let O of Array.from(document.head.children))$a(O)||O.remove();for(let O of Array.from(_.children))document.head.appendChild(O)}function Ka(_){let w=document.createElement("script");w.textContent=_.textContent,w.async=_.async;for(attr of _.attributes)w.setAttribute(attr.name,attr.value);return w}function Va(_){return _.hasAttribute("data-navigate-track")}function $a(_){return _.tagName.toLowerCase()==="link"&&_.getAttribute("rel").toLowerCase()==="stylesheet"||_.tagName.toLowerCase()==="style"||_.tagName.toLowerCase()==="script"}function Za(_){return _.tagName.toLowerCase()==="script"}function Cr(_){return _.split("").reduce((w,T)=>(w=(w<<5)-w+T.charCodeAt(0),w&w),0)}function Yl(_,w){let T=_.pathname+_.search;fetch(T).then(O=>O.text()).then(O=>{w(O)})}var Fs=!0;function Ir(_){_.navigate=T=>{w(ye(T))},_.navigate.disableProgressBar=()=>{Fs=!1},_.addInitSelector(()=>`[${ys("navigate")}]`),_.directive("navigate",(T,{value:O,expression:Y,modifiers:V},{evaluateLater:te,cleanup:ue})=>{V.includes("hover")&&q(T,60,()=>{let je=J(T);P(je,et=>{z(et,je)})}),Q(T,je=>{let et=J(T);P(et,oi=>{z(oi,et)}),je(()=>{w(et)})})});function w(T){Fs&&Pn(),Xl(T,O=>{$(),Fs&&Er(),y(),qa(_,Y=>{Ls(),br(O,()=>{Ha(),N(),Ds(),x(O,T),Y(()=>{ks(_)})})})})}v(T=>{$(),qa(_,O=>{Ls(),br(T,Y=>{Ha(),N(),Ds(),O(()=>{ks(_)})})})}),setTimeout(()=>{Ds(!0)})}function Xl(_,w){j(_,w,()=>{Yl(_,w)})}function qa(_,w){_.stopObservingMutations(),w(T=>{_.startObservingMutations(),setTimeout(()=>{T()})})}function Ds(_=!1){document.dispatchEvent(new CustomEvent("alpine:navigated",{bubbles:!0,detail:{init:_}}))}function ks(_){_.initTree(document.body,void 0,(w,T)=>{w._x_wasPersisted&&T()})}var Hl=Ir}}),wd=nn({"../alpine/packages/history/dist/module.cjs.js"(n,e){var t=Object.defineProperty,i=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,a=(E,I)=>{for(var C in I)t(E,C,{get:I[C],enumerable:!0})},o=(E,I,C,M)=>{if(I&&typeof I=="object"||typeof I=="function")for(let D of r(I))!s.call(E,D)&&D!==C&&t(E,D,{get:()=>I[D],enumerable:!(M=i(I,D))||M.enumerable});return E},l=E=>o(t({},"__esModule",{value:!0}),E),c={};a(c,{default:()=>b,track:()=>d}),e.exports=l(c);function h(E){E.magic("queryString",(I,{interceptor:C})=>{let M,D=!1,P=!1;return C((z,j,Q,q,J)=>{let ye=M||q,{initial:$,replace:N,push:G,pop:B}=d(ye,z,D);return Q($),P?(E.effect(()=>G(j())),B(async W=>{Q(W),await(()=>Promise.resolve())()})):(console.log(j()),E.effect(()=>N(j()))),$},z=>{z.alwaysShow=()=>(D=!0,z),z.usePush=()=>(P=!0,z),z.as=j=>(M=j,z)})}),E.history={track:d}}function d(E,I,C=!1){let{has:M,get:D,set:P,remove:z}=y(),j=new URL(window.location.href),Q=M(j,E),q=Q?D(j,E):I,J=JSON.stringify(q),ye=G=>JSON.stringify(G)===J;C&&(j=P(j,E,q)),f(j,E,{value:q});let $=!1,N=(G,B)=>{if($)return;let W=new URL(window.location.href);!C&&!Q&&ye(B)?W=z(W,E):W=P(W,E,B),G(W,E,{value:B})};return{initial:q,replace(G){N(f,G)},push(G){N(p,G)},pop(G){window.addEventListener("popstate",B=>{!B.state||!B.state.alpine||Object.entries(B.state.alpine).forEach(([W,{value:X}])=>{if(W!==E)return;$=!0;let ie=G(X);ie instanceof Promise?ie.finally(()=>$=!1):$=!1})})}}}function f(E,I,C){let M=window.history.state||{};M.alpine||(M.alpine={}),M.alpine[I]=m(C),window.history.replaceState(M,"",E.toString())}function p(E,I,C){let M={alpine:{...window.history.state.alpine,[I]:m(C)}};window.history.pushState(M,"",E.toString())}function m(E){return JSON.parse(JSON.stringify(E))}function y(){return{has(E,I){let C=E.search;if(!C)return!1;let M=x(C);return Object.keys(M).includes(I)},get(E,I){let C=E.search;return C?x(C)[I]:!1},set(E,I,C){let M=x(E.search);return M[I]=C,E.search=v(M),E},remove(E,I){let C=x(E.search);return delete C[I],E.search=v(C),E}}}function v(E){let I=D=>typeof D=="object"&&D!==null,C=(D,P={},z="")=>(Object.entries(D).forEach(([j,Q])=>{let q=z===""?j:`${z}[${j}]`;I(Q)?P={...P,...C(Q,P,q)}:P[q]=encodeURIComponent(Q).replaceAll("%20","+")}),P),M=C(E);return Object.entries(M).map(([D,P])=>`${D}=${P}`).join("&")}function x(E){if(E=E.replace("?",""),E==="")return{};let I=(D,P,z)=>{let[j,Q,...q]=D.split(".");if(!Q)return z[D]=P;z[j]===void 0&&(z[j]=isNaN(Q)?{}:[]),I([Q,...q].join("."),P,z[j])},C=E.split("&").map(D=>D.split("=")),M={};return C.forEach(([D,P])=>{if(!!P)if(P=decodeURIComponent(P.replaceAll("+","%20")),!D.includes("["))M[D]=P;else{let z=D.replaceAll("[",".").replaceAll("]","");I(z,P,M)}}),M}var b=h}}),zg=nn({"../alpine/packages/morph/dist/module.cjs.js"(n,e){var t=Object.defineProperty,i=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,a=(C,M)=>{for(var D in M)t(C,D,{get:M[D],enumerable:!0})},o=(C,M,D,P)=>{if(M&&typeof M=="object"||typeof M=="function")for(let z of r(M))!s.call(C,z)&&z!==D&&t(C,z,{get:()=>M[z],enumerable:!(P=i(M,z))||P.enumerable});return C},l=C=>o(t({},"__esModule",{value:!0}),C),c={};a(c,{default:()=>I,morph:()=>m}),e.exports=l(c);function h(C){const M=document.createElement("template");return M.innerHTML=C,M.content.firstElementChild}function d(C){return C.nodeType===3||C.nodeType===8}var f={replace(C,M,D){let P=C.indexOf(M),z=C.indexOf(D);if(P===-1)throw"Cant find element in children";return M.replaceWith(D),C[P]=D,z&&C.splice(z,1),C},before(C,M,D){let P=C.indexOf(M);if(P===-1)throw"Cant find element in children";return M.before(D),C.splice(P,0,D),C},append(C,M,D){return C[C.length-1],D(M),C.push(M),C},remove(C,M){if(C.indexOf(M)===-1)throw"Cant find element in children";return M.remove(),C.filter(P=>P!==M)},first(C){return this.teleportTo(C[0])},next(C,M){let D=C.indexOf(M);if(D!==-1)return this.teleportTo(this.teleportBack(C[D+1]))},teleportTo(C){return C&&(C._x_teleport?C._x_teleport:C)},teleportBack(C){return C&&(C._x_teleportBack?C._x_teleportBack:C)}},p=()=>{};function m(C,M,D){b();let P,z,j,Q,q,J,ye,$,N;function G(se={}){let fe=ee=>ee.getAttribute("key"),ve=()=>{};Q=se.updating||ve,q=se.updated||ve,J=se.removing||ve,ye=se.removed||ve,$=se.adding||ve,N=se.added||ve,z=se.key||fe,j=se.lookahead||!1}function B(se,fe){if(W(se,fe))return X(se,fe);let ve=!1;if(!y(Q,se,fe,()=>ve=!0)){if(window.Alpine&&v(se,fe),d(fe)){ie(se,fe),q(se,fe);return}ve||U(se,fe),q(se,fe),re(Array.from(se.childNodes),Array.from(fe.childNodes),ee=>{se.appendChild(ee)})}}function W(se,fe){return se.nodeType!=fe.nodeType||se.nodeName!=fe.nodeName||ce(se)!=ce(fe)}function X(se,fe){if(y(J,se))return;let ve=fe.cloneNode(!0);y($,ve)||(f.replace([se],se,ve),ye(se),N(ve))}function ie(se,fe){let ve=fe.nodeValue;se.nodeValue!==ve&&(se.nodeValue=ve)}function U(se,fe){if(se._x_transitioning||se._x_isShown&&!fe._x_isShown||!se._x_isShown&&fe._x_isShown)return;let ve=Array.from(se.attributes),ee=Array.from(fe.attributes);for(let le=ve.length-1;le>=0;le--){let pe=ve[le].name;fe.hasAttribute(pe)||se.removeAttribute(pe)}for(let le=ee.length-1;le>=0;le--){let pe=ee[le].name,_e=ee[le].value;se.getAttribute(pe)!==_e&&se.setAttribute(pe,_e)}}function re(se,fe,ve){let ee=me(se),le={},pe=f.first(fe),_e=f.first(se);for(;pe;){let Ge=ce(pe),Ie=ce(_e);if(!_e)if(Ge&&le[Ge]){let ne=le[Ge];se=f.append(se,ne,ve),_e=ne}else{if(!y($,pe)){let ne=pe.cloneNode(!0);se=f.append(se,ne,ve),N(ne)}pe=f.next(fe,pe);continue}let ht=ne=>ne&&ne.nodeType===8&&ne.textContent===" __BLOCK__ ",lt=ne=>ne&&ne.nodeType===8&&ne.textContent===" __ENDBLOCK__ ";if(ht(pe)&&ht(_e)){let ne=[],xe,be=0;for(;_e;){let Me=f.next(se,_e);if(ht(Me))be++;else if(lt(Me)&&be>0)be--;else if(lt(Me)&&be===0){_e=f.next(se,Me),xe=Me;break}ne.push(Me),_e=Me}let De=[];for(be=0;pe;){let Me=f.next(fe,pe);if(ht(Me))be++;else if(lt(Me)&&be>0)be--;else if(lt(Me)&&be===0){pe=f.next(fe,Me);break}De.push(Me),pe=Me}re(ne,De,Me=>xe.before(Me));continue}if(_e.nodeType===1&&j&&!_e.isEqualNode(pe)){let ne=f.next(fe,pe),xe=!1;for(;!xe&&ne;)ne.nodeType===1&&_e.isEqualNode(ne)&&(xe=!0,[se,_e]=Ue(se,pe,_e),Ie=ce(_e)),ne=f.next(fe,ne)}if(Ge!==Ie){if(!Ge&&Ie){le[Ie]=_e,[se,_e]=Ue(se,pe,_e),se=f.remove(se,le[Ie]),_e=f.next(se,_e),pe=f.next(fe,pe);continue}if(Ge&&!Ie&&ee[Ge]&&(se=f.replace(se,_e,ee[Ge]),_e=ee[Ge]),Ge&&Ie){let ne=ee[Ge];if(ne)le[Ie]=_e,se=f.replace(se,_e,ne),_e=ne;else{le[Ie]=_e,[se,_e]=Ue(se,pe,_e),se=f.remove(se,le[Ie]),_e=f.next(se,_e),pe=f.next(fe,pe);continue}}}let Qe=_e&&f.next(se,_e);B(_e,pe),pe=pe&&f.next(fe,pe),_e=Qe}let Je=[];for(;_e;)y(J,_e)||Je.push(_e),_e=f.next(se,_e);for(;Je.length;){let Ge=Je.shift();Ge.remove(),ye(Ge)}}function ce(se){return se&&se.nodeType===1&&z(se)}function me(se){let fe={};return se.forEach(ve=>{let ee=ce(ve);ee&&(fe[ee]=ve)}),fe}function Ue(se,fe,ve){if(!y($,fe)){let ee=fe.cloneNode(!0);return se=f.before(se,ve,ee),N(ee),[se,ee]}return[se,fe]}return G(D),P=typeof M=="string"?h(M):M,window.Alpine&&window.Alpine.closestDataStack&&!C._x_dataStack&&(P._x_dataStack=window.Alpine.closestDataStack(C),P._x_dataStack&&window.Alpine.clone(C,P)),B(C,P),P=void 0,C}m.step=()=>p(),m.log=C=>{};function y(C,...M){let D=!1;return C(...M,()=>D=!0),D}function v(C,M,D){C.nodeType===1&&C._x_dataStack&&window.Alpine.clone(C,M)}var x=!1;function b(){if(x)return;x=!0;let C=Element.prototype.setAttribute,M=document.createElement("div");Element.prototype.setAttribute=function(P,z){if(!P.includes("@"))return C.call(this,P,z);M.innerHTML=`<span ${P}="${z}"></span>`;let j=M.firstElementChild.getAttributeNode(P);M.firstElementChild.removeAttributeNode(j),this.setAttributeNode(j)}}function E(C){C.morph=m}var I=E}}),Ug=nn({"../alpine/packages/mask/dist/module.cjs.js"(n,e){var t=Object.defineProperty,i=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,a=(v,x)=>{for(var b in x)t(v,b,{get:x[b],enumerable:!0})},o=(v,x,b,E)=>{if(x&&typeof x=="object"||typeof x=="function")for(let I of r(x))!s.call(v,I)&&I!==b&&t(v,I,{get:()=>x[I],enumerable:!(E=i(x,I))||E.enumerable});return v},l=v=>o(t({},"__esModule",{value:!0}),v),c={};a(c,{default:()=>y,stripDown:()=>f}),e.exports=l(c);function h(v){v.directive("mask",(x,{value:b,expression:E},{effect:I,evaluateLater:C})=>{let M=()=>E,D="";queueMicrotask(()=>{if(["function","dynamic"].includes(b)){let j=C(E);I(()=>{M=Q=>{let q;return v.dontAutoEvaluateFunctions(()=>{j(J=>{q=typeof J=="function"?J(Q):J},{scope:{$input:Q,$money:m.bind({el:x})}})}),q},P(x,!1)})}else P(x,!1);x._x_model&&x._x_model.set(x.value)}),x.addEventListener("input",()=>P(x)),x.addEventListener("blur",()=>P(x,!1));function P(j,Q=!0){let q=j.value,J=M(q);if(!J||J==="false")return!1;if(D.length-j.value.length===1)return D=j.value;let ye=()=>{D=j.value=z(q,J)};Q?d(j,J,()=>{ye()}):ye()}function z(j,Q){if(j==="")return"";let q=f(Q,j);return p(Q,q)}}).before("model")}function d(v,x,b){let E=v.selectionStart,I=v.value;b();let C=I.slice(0,E),M=p(x,f(x,C)).length;v.setSelectionRange(M,M)}function f(v,x){let b=x,E="",I={9:/[0-9]/,a:/[a-zA-Z]/,"*":/[a-zA-Z0-9]/},C="";for(let M=0;M<v.length;M++){if(["9","a","*"].includes(v[M])){C+=v[M];continue}for(let D=0;D<b.length;D++)if(b[D]===v[M]){b=b.slice(0,D)+b.slice(D+1);break}}for(let M=0;M<C.length;M++){let D=!1;for(let P=0;P<b.length;P++)if(I[C[M]].test(b[P])){E+=b[P],b=b.slice(0,P)+b.slice(P+1),D=!0;break}if(!D)break}return E}function p(v,x){let b=Array.from(x),E="";for(let I=0;I<v.length;I++){if(!["9","a","*"].includes(v[I])){E+=v[I];continue}if(b.length===0)break;E+=b.shift()}return E}function m(v,x=".",b,E=2){if(v==="-")return"-";if(/^\D+$/.test(v))return"9";b=b!=null?b:x===","?".":",";let I=(P,z)=>{let j="",Q=0;for(let q=P.length-1;q>=0;q--)P[q]!==z&&(Q===3?(j=P[q]+z+j,Q=0):j=P[q]+j,Q++);return j},C=v.startsWith("-")?"-":"",M=v.replaceAll(new RegExp(`[^0-9\\${x}]`,"g"),""),D=Array.from({length:M.split(x)[0].length}).fill("9").join("");return D=`${C}${I(D,b)}`,E>0&&v.includes(x)&&(D+=`${x}`+"9".repeat(E)),queueMicrotask(()=>{this.el.value.endsWith(x)||this.el.value[this.el.selectionStart-1]===x&&this.el.setSelectionRange(this.el.selectionStart-1,this.el.selectionStart-1)}),D}var y=h}}),xd=class{constructor(){this.arrays=new WeakMap}add(n,e){this.arrays.has(n)||this.arrays.set(n,[]),this.arrays.get(n).push(e)}get(n){return this.arrays.has(n)?this.arrays.get(n):[]}each(n,e){return this.get(n).forEach(e)}};function oc(n,e,t={},i=!0){n.dispatchEvent(new CustomEvent(e,{detail:t,bubbles:i,composed:!0,cancelable:!0}))}function Ed(n){return typeof n=="object"&&n!==null}function rh(n){return Ed(n)&&!Oc(n)}function Oc(n){return Array.isArray(n)}function Wg(n){return typeof n=="function"}function sh(n){return typeof n!="object"||n===null}function zr(n){return JSON.parse(JSON.stringify(n))}function $i(n,e){return e===""?n:e.split(".").reduce((t,i)=>{if(t!==void 0)return t[i]},n)}function qo(n,e,t){let i=e.split(".");if(i.length===1)return n[e]=t;let r=i.shift(),s=i.join(".");n[r]===void 0&&(n[r]={}),qo(n[r],s,t)}function ou(n,e,t={},i=""){if(n===e)return t;if(typeof n!=typeof e||rh(n)&&Oc(e)||Oc(n)&&rh(e)||sh(n)||sh(e))return t[i]=e,t;let r=Object.keys(n);return Object.entries(e).forEach(([s,a])=>{t={...t,...ou(n[s],e[s],t,i===""?s:`${i}.${s}`)},r=r.filter(o=>o!==s)}),r.forEach(s=>{t[`${i}.${s}`]="__rm__"}),t}function Kr(n){let e=ah(n)?n[0]:n;return ah(n)&&n[1],Ed(e)&&Object.entries(e).forEach(([t,i])=>{e[t]=Kr(i)}),e}function ah(n){return Array.isArray(n)&&n.length===2&&typeof n[1]=="object"&&Object.keys(n[1]).includes("s")}function bd(){var n;if(document.querySelector("[data-csrf]"))return document.querySelector("[data-csrf]").getAttribute("data-csrf");if((n=window.livewireScriptConfig.csrf)!=null&&n)return window.livewireScriptConfig.csrf;throw"Livewire: No CSRF token detected"}function Cd(n){return!!n.match(/<script>Sfdump\(".+"\)<\/script>/)}function Yg(n){let e=n.match(/.*<script>Sfdump\(".+"\)<\/script>/s);return[e,n.replace(e,"")]}function Id(n){let e=document.createElement("html");e.innerHTML=n,e.querySelectorAll("a").forEach(r=>r.setAttribute("target","_top"));let t=document.getElementById("livewire-error");typeof t!="undefined"&&t!=null?t.innerHTML="":(t=document.createElement("div"),t.id="livewire-error",t.style.position="fixed",t.style.width="100vw",t.style.height="100vh",t.style.padding="50px",t.style.backgroundColor="rgba(0, 0, 0, .6)",t.style.zIndex=2e5);let i=document.createElement("iframe");i.style.backgroundColor="#17161A",i.style.borderRadius="5px",i.style.width="100%",i.style.height="100%",t.appendChild(i),document.body.prepend(t),document.body.style.overflow="hidden",i.contentWindow.document.open(),i.contentWindow.document.write(e.outerHTML),i.contentWindow.document.close(),t.addEventListener("click",()=>oh(t)),t.setAttribute("tabindex",0),t.addEventListener("keydown",r=>{r.key==="Escape"&&oh(t)}),t.focus()}function oh(n){n.outerHTML="",document.body.style.overflow="visible"}var Vr=[];function pt(n,e){return Vr[n]||(Vr[n]=[]),Vr[n].push(e),()=>{Vr[n]=Vr[n].filter(t=>t!==e)}}function Tt(n,...e){let t=Vr[n]||[],i=[];for(let r=0;r<t.length;r++){let s=t[r](...e);Wg(s)&&i.push(s)}return r=>{let s=r;for(let a=0;a<i.length;a++){let o=i[a](s);o!==void 0&&(s=o)}return s}}var _d,md,yd,lh=(yd=(md=(_d=document.querySelector("[data-uri]"))==null?void 0:_d.getAttribute("data-uri"))!=null?md:window.livewireScriptConfig.uri)!=null?yd:null;function Sd(){Xg(()=>{Hg()})}var lc;function Xg(n){lc||(lc=setTimeout(()=>{n(),lc=void 0},5))}async function Hg(){Qg(),await Zg(async()=>{let[n,e,t]=Kg(),i={method:"POST",body:JSON.stringify({_token:bd(),components:n}),headers:{"Content-type":"application/json","X-Livewire":""}},r=[],s=[],a=[],o=y=>r.forEach(v=>v(y)),l=y=>s.forEach(v=>v(y)),c=y=>a.forEach(v=>v(y)),h=Tt("request.profile",i);Tt("request",{url:lh,options:i,payload:i.body,respond:y=>a.push(y),succeed:y=>r.push(y),fail:y=>s.push(y)});let d=await fetch(lh,i),f={status:d.status,response:d};c(f),d=f.response;let p=await d.text();if(!d.ok){h({content:"{}",failed:!0});let y=!1;return t(),l({status:d.status,content:p,preventDefault:()=>y=!0}),y?void 0:(d.status===419&&Vg(),$g(p))}d.redirected&&(window.location.href=d.url),Cd(p)?([dump,p]=Yg(p),Id(dump),h({content:"{}",failed:!0})):h({content:p,failed:!1});let{components:m}=JSON.parse(p);e(m),o({status:d.status,json:JSON.parse(p)})})}function Qg(){qg().forEach(e=>e.prepare())}function Kg(){let n=[],e=[],t=[];return Jg(s=>{let[a,o,l]=s.toRequestPayload();n.push(a),e.push(o),t.push(l)}),[n,s=>e.forEach(a=>a(s.shift())),()=>t.forEach(s=>s())]}function Vg(){confirm(`This page has expired.
Would you like to refresh the page?`)&&window.location.reload()}function $g(n){Id(n)}var Mc=!1,Lc=[];async function Rd(n){return new Promise(e=>{Mc?Lc.push(()=>e(n())):e(n())})}async function Zg(n){for(Mc=!0,await n(),Mc=!1;Lc.length>0;)Lc.shift()()}var na=[];function qg(){return na}function Jg(n){for(;na.length>0;)n(na.shift())}function Td(n){let e=na.find(t=>t.component.id===n.id);return e||na.push(e=new tp(n)),e}async function Od(n){return await Rd(()=>{let e=Td(n);return Sd(),new Promise((t,i)=>{e.addResolver(t)})})}async function ep(n,e,t){return await Rd(()=>{let i=Td(n);return Sd(),new Promise((r,s)=>{i.addCall(e,t,a=>r(a))})})}var tp=class{constructor(n){this.component=n,this.calls=[],this.receivers=[],this.resolvers=[]}addResolver(n){this.resolvers.push(n)}addCall(n,e,t){this.calls.push({path:"",method:n,params:e,handleReturn(i){t(i)}})}prepare(){Tt("commit.prepare",{component:this.component})}toRequestPayload(){let n=ou(this.component.canonical,this.component.ephemeral),e={snapshot:this.component.snapshotEncoded,updates:n,calls:this.calls.map(d=>({path:d.path,method:d.method,params:d.params}))},t=[],i=[],r=[],s=d=>t.forEach(f=>f(d)),a=()=>i.forEach(d=>d()),o=()=>r.forEach(d=>d()),l=Tt("commit",{component:this.component,commit:e,succeed:d=>{t.push(d)},fail:d=>{i.push(d)},respond:d=>{r.push(d)}});return[e,d=>{let{snapshot:f,effects:p}=d;if(o(),this.component.mergeNewSnapshot(f,p,n),Pc(this.component,this.component.effects),p.returns){let y=p.returns;this.calls.map(({handleReturn:x})=>x).forEach((x,b)=>{x(y[b])})}let m=JSON.parse(f);l({snapshot:m,effects:p}),this.resolvers.forEach(y=>y()),s(d)},()=>{o(),a()}]}};function Pc(n,e){Tt("effects",n,e)}var ch=at(Xt());function ip(n){return(e,t)=>{let i=t,r=e,s=n.$wire,a=s.get(r);return ch.default.interceptor((l,c,h,d,f)=>{if(typeof a=="undefined"){console.error(`Livewire Entangle Error: Livewire property '${r}' cannot be found`);return}return queueMicrotask(()=>{ch.default.entangle({get(){return s.get(e)},set(p){s.set(e,p,i)}},{get(){return c()},set(p){h(p)}})}),s.get(e)},l=>{Object.defineProperty(l,"live",{get(){return i=!0,l}})})(a)}}var Md=at(Xt()),cc=new WeakMap;function Jo(n){if(!cc.has(n)){let e=new rp(n);cc.set(n,e),e.registerListeners()}return cc.get(n)}function np(n,e,t,i){let r=Jo(t),s=()=>n.dispatchEvent(new CustomEvent("livewire-upload-start",{bubbles:!0,detail:{id:t.id,property:e}})),a=()=>n.dispatchEvent(new CustomEvent("livewire-upload-finish",{bubbles:!0,detail:{id:t.id,property:e}})),o=()=>n.dispatchEvent(new CustomEvent("livewire-upload-error",{bubbles:!0,detail:{id:t.id,property:e}})),l=d=>{var f=Math.round(d.loaded*100/d.total);n.dispatchEvent(new CustomEvent("livewire-upload-progress",{bubbles:!0,detail:{progress:f}}))},c=d=>{d.target.files.length!==0&&(s(),d.target.multiple?r.uploadMultiple(e,d.target.files,a,o,l):r.upload(e,d.target.files[0],a,o,l))};n.addEventListener("change",c);let h=()=>{n.value=null};n.addEventListener("click",h),i(()=>{n.removeEventListener("change",c),n.removeEventListener("click",h)})}var rp=class{constructor(n){this.component=n,this.uploadBag=new uh,this.removeBag=new uh}registerListeners(){this.component.$wire.$on("upload:generatedSignedUrl",({name:n,url:e})=>{this.component,this.handleSignedUrl(n,e)}),this.component.$wire.$on("upload:generatedSignedUrlForS3",({name:n,payload:e})=>{this.component,this.handleS3PreSignedUrl(n,e)}),this.component.$wire.$on("upload:finished",({name:n,tmpFilenames:e})=>this.markUploadFinished(n,e)),this.component.$wire.$on("upload:errored",({name:n})=>this.markUploadErrored(n)),this.component.$wire.$on("upload:removed",({name:n,tmpFilename:e})=>this.removeBag.shift(n).finishCallback(e))}upload(n,e,t,i,r){this.setUpload(n,{files:[e],multiple:!1,finishCallback:t,errorCallback:i,progressCallback:r})}uploadMultiple(n,e,t,i,r){this.setUpload(n,{files:Array.from(e),multiple:!0,finishCallback:t,errorCallback:i,progressCallback:r})}removeUpload(n,e,t){this.removeBag.push(n,{tmpFilename:e,finishCallback:t}),this.component.$wire.call("removeUpload",n,e)}setUpload(n,e){this.uploadBag.add(n,e),this.uploadBag.get(n).length===1&&this.startUpload(n,e)}handleSignedUrl(n,e){let t=new FormData;Array.from(this.uploadBag.first(n).files).forEach(s=>t.append("files[]",s,s.name));let i={Accept:"application/json"},r=bd();r&&(i["X-CSRF-TOKEN"]=r),this.makeRequest(n,t,"post",e,i,s=>s.paths)}handleS3PreSignedUrl(n,e){let t=this.uploadBag.first(n).files[0],i=e.headers;"Host"in i&&delete i.Host;let r=e.url;this.makeRequest(n,t,"put",r,i,s=>[e.path])}makeRequest(n,e,t,i,r,s){let a=new XMLHttpRequest;a.open(t,i),Object.entries(r).forEach(([o,l])=>{a.setRequestHeader(o,l)}),a.upload.addEventListener("progress",o=>{o.detail={},o.detail.progress=Math.round(o.loaded*100/o.total),this.uploadBag.first(n).progressCallback(o)}),a.addEventListener("load",()=>{if((a.status+"")[0]==="2"){let l=s(a.response&&JSON.parse(a.response));this.component.$wire.call("finishUpload",n,l,this.uploadBag.first(n).multiple);return}let o=null;a.status===422&&(o=a.response),this.component.$wire.call("uploadErrored",n,o,this.uploadBag.first(n).multiple)}),a.send(e)}startUpload(n,e){let t=e.files.map(i=>({name:i.name,size:i.size,type:i.type}));this.component.$wire.call("startUpload",n,t,e.multiple),this.component}markUploadFinished(n,e){this.component;let t=this.uploadBag.shift(n);t.finishCallback(t.multiple?e:e[0]),this.uploadBag.get(n).length>0&&this.startUpload(n,this.uploadBag.last(n))}markUploadErrored(n){this.component,this.uploadBag.shift(n).errorCallback(),this.uploadBag.get(n).length>0&&this.startUpload(n,this.uploadBag.last(n))}},uh=class{constructor(){this.bag={}}add(n,e){this.bag[n]||(this.bag[n]=[]),this.bag[n].push(e)}push(n,e){this.add(n,e)}first(n){return this.bag[n]?this.bag[n][0]:null}last(n){return this.bag[n].slice(-1)[0]}get(n){return this.bag[n]}shift(n){return this.bag[n].shift()}call(n,...e){(this.listeners[n]||[]).forEach(t=>{t(...e)})}has(n){return Object.keys(this.listeners).includes(n)}};function sp(n,e,t,i=()=>{},r=()=>{},s=()=>{}){Jo(n).upload(e,t,i,r,s)}function ap(n,e,t,i=()=>{},r=()=>{},s=()=>{}){Jo(n).uploadMultiple(e,t,i,r,s)}function op(n,e,t,i=()=>{},r=()=>{}){Jo(n).removeUpload(e,t,i,r)}var lu={},Ld;function jt(n,e,t=null){lu[n]=e}function lp(n){Ld=n}var hh={get:"$get",set:"$set",call:"$call",commit:"$commit",watch:"$watch",entangle:"$entangle",dispatch:"$dispatch",dispatchTo:"$dispatchTo",dispatchSelf:"$dispatchSelf",upload:"$upload",uploadMultiple:"$uploadMultiple",removeUpload:"$removeUpload"};function cp(n,e){return new Proxy({},{get(t,i){if(i==="__instance")return n;if(i in hh)return dh(n,hh[i]);if(i in lu)return dh(n,i);if(i in e)return e[i];if(!["then"].includes(i))return up(n)(i)},set(t,i,r){return i in e&&(e[i]=r),!0}})}function dh(n,e){return lu[e](n)}function up(n){return Ld(n)}Md.default.magic("wire",n=>Jn(n).$wire);jt("__instance",n=>n);jt("$get",n=>(e,t=!0)=>$i(t?n.reactive:n.ephemeral,e));jt("$set",n=>async(e,t,i=!0)=>(qo(n.reactive,e,t),i?await Od(n):Promise.resolve()));jt("$call",n=>async(e,...t)=>await n.$wire[e](...t));jt("$entangle",n=>(e,t=!1)=>ip(n)(e,t));jt("$toggle",n=>e=>n.$wire.set(e,!n.$wire.get(e)));jt("$watch",n=>(e,t)=>{let i=!0,r;Md.default.effect(()=>{let s=$i(n.reactive,e);JSON.stringify(s),i?r=s:queueMicrotask(()=>{t(s,r),r=s}),i=!1})});jt("$refresh",n=>n.$wire.$commit);jt("$commit",n=>async()=>await Od(n));jt("$on",n=>(...e)=>Ep(n,...e));jt("$dispatch",n=>(...e)=>Fd(n,...e));jt("$dispatchSelf",n=>(...e)=>ts(n,...e));jt("$dispatchTo",n=>(...e)=>cu(n,...e));jt("$upload",n=>(...e)=>sp(n,...e));jt("$uploadMultiple",n=>(...e)=>ap(n,...e));jt("$removeUpload",n=>(...e)=>op(n,...e));var uc;jt("$parent",n=>{if(uc)return uc.$wire;let e=Jn(n.el.parentElement);return uc=e,e.$wire});var es=new WeakMap;function hp(n,e,t){es.has(n)||es.set(n,{});let i=es.get(n);i[e]=t,es.set(n,i)}lp(n=>e=>async(...t)=>{if(t.length===1&&t[0]instanceof Event&&(t=[]),es.has(n)){let i=es.get(n);if(typeof i[e]=="function")return i[e](t)}return await ep(n,e,t)});var dp=class{constructor(n){if(n.__livewire)throw"Component already initialized";if(n.__livewire=this,this.el=n,this.id=n.getAttribute("wire:id"),this.__livewireId=this.id,this.snapshotEncoded=n.getAttribute("wire:snapshot"),this.snapshot=JSON.parse(this.snapshotEncoded),!this.snapshot)throw new"Snapshot missing on Livewire component with id: "+this.id;this.name=this.snapshot.memo.name,this.effects=JSON.parse(n.getAttribute("wire:effects")),this.canonical=Kr(zr(this.snapshot.data)),this.ephemeral=Kr(zr(this.snapshot.data)),this.reactive=Alpine.reactive(this.ephemeral),this.$wire=cp(this,this.reactive),Pc(this,this.effects)}mergeNewSnapshot(n,e,t={}){let i=JSON.parse(n),r=zr(this.canonical),s=this.applyUpdates(r,t),a=Kr(zr(i.data)),o=ou(s,a);this.snapshotEncoded=n,this.snapshot=i,this.effects=e,this.canonical=Kr(zr(i.data));let l=Kr(zr(i.data));return Object.entries(o).forEach(([c,h])=>{let d=c.split(".")[0];this.reactive[d]=l[d]}),o}applyUpdates(n,e){for(let t in e)qo(n,t,e[t]);return n}replayUpdate(n,e){let t={...this.effects,html:e};this.mergeNewSnapshot(JSON.stringify(n),t),Pc(this,{html:e})}get children(){let n=this.snapshot.memo;return Object.values(n.children).map(t=>t[1]).map(t=>pp(t))}},en={};function fp(n){let e=new dp(n);if(en[e.id])throw"Component already registered";return Tt("component.init",{component:e}),en[e.id]=e,e}function gp(n){!en[n]||delete en[n]}function pp(n){let e=en[n];if(!e)throw"Component not found: ".id;return e}function Jn(n,e=!0){let t=Alpine.findClosest(n,i=>i.__livewire);if(!t){if(e)throw"Could not find Livewire component in DOM tree";return}return t.__livewire}function Pd(n){return Object.values(en).filter(e=>n==e.name)}function _p(n){return Pd(n).map(e=>e.$wire)}function mp(n){let e=en[n];return e&&e.$wire}function yp(){return Object.values(en)[0].$wire}function vp(){return Object.values(en)}at(Xt());pt("effects",(n,e)=>{Ap(n,e.listeners||[]),wp(n,e.dispatches||[])});function Ap(n,e){e.forEach(t=>{window.addEventListener(t,i=>{i.__livewire&&i.__livewire.receivedBy.push(n),n.$wire.call("__dispatch",t,i.detail||{})}),n.el.addEventListener(t,i=>{i.__livewire&&i.bubbles||(i.__livewire&&i.__livewire.receivedBy.push(n.id),n.$wire.call("__dispatch",t,i.detail||{}))})})}function wp(n,e){e.forEach(({name:t,params:i={},self:r=!1,to:s})=>{r?ts(n,t,i):s?cu(n,s,t,i):Fd(n,t,i)})}function el(n,e,t,i=!0){let r=new CustomEvent(e,{bubbles:i,detail:t});r.__livewire={name:e,params:t,receivedBy:[]},n.dispatchEvent(r)}function Fd(n,e,t){el(n.el,e,t)}function xp(n,e){el(window,n,e)}function ts(n,e,t){el(n.el,e,t,!1)}function cu(n,e,t,i){Pd(e).forEach(s=>{el(s.el,t,i,!1)})}function Ep(n,e,t){n.el.addEventListener(e,i=>{t(i.detail)})}function bp(n,e){window.addEventListener(n,t=>{!t.__livewire||e(t.detail)})}at(Xt());function Fc(n){return n.match(new RegExp("wire:"))}function fh(n,e){let[t,...i]=e.replace(new RegExp("wire:"),"").split(".");return new Dd(t,i,e,n)}function Ni(n,e){pt("directive.init",({el:t,component:i,directive:r,cleanup:s})=>{r.value===n&&e({el:t,directive:r,component:i,cleanup:s})})}function tl(n){return new Cp(n)}var Cp=class{constructor(n){this.el=n,this.directives=this.extractTypeModifiersAndValue()}all(){return this.directives}has(n){return this.directives.map(e=>e.value).includes(n)}missing(n){return!this.has(n)}get(n){return this.directives.find(e=>e.value===n)}extractTypeModifiersAndValue(){return Array.from(this.el.getAttributeNames().filter(n=>Fc(n)).map(n=>{const[e,...t]=n.replace(new RegExp("wire:"),"").split(".");return new Dd(e,t,n,this.el)}))}},Dd=class{constructor(n,e,t,i){this.rawName=this.raw=t,this.el=i,this.eventContext,this.value=n,this.modifiers=e,this.expression=this.el.getAttribute(this.rawName)}get method(){const{method:n}=this.parseOutMethodAndParams(this.expression);return n}get params(){const{params:n}=this.parseOutMethodAndParams(this.expression);return n}parseOutMethodAndParams(n){let e=n,t=[];const i=e.match(/(.*?)\((.*)\)/s);return i&&(e=i[1],t=new Function("$event",`return (function () {
                for (var l=arguments.length, p=new Array(l), k=0; k<l; k++) {
                    p[k] = arguments[k];
                }
                return [].concat(p);
            })(${i[2]})`)(this.eventContext)),{method:e,params:t}}},Ip=at(kg()),Sp=at(Ng()),Rp=at(Bg()),Tp=at(Gg()),Op=at(jg()),Mp=at(wd()),Lp=at(zg()),Pp=at(Ug()),zt=at(Xt());function Fp(){oc(document,"livewire:init"),oc(document,"livewire:initializing"),zt.default.plugin(Lp.default),zt.default.plugin(Mp.default),zt.default.plugin(Tp.default),zt.default.plugin(Ip.default),zt.default.plugin(Sp.default),zt.default.plugin(Rp.default),zt.default.plugin(Op.default),zt.default.plugin(Pp.default),zt.default.addRootSelector(()=>"[wire\\:id]"),zt.default.onAttributesAdded((n,e)=>{let t=Jn(n,!1);!t||e.forEach(i=>{if(!Fc(i.name))return;let r=fh(n,i.name);Tt("directive.init",{el:n,component:t,directive:r,cleanup:s=>{zt.default.onAttributeRemoved(n,r.raw,s)}})})}),zt.default.interceptInit(zt.default.skipDuringClone(n=>{if(n.hasAttribute("wire:id")){let t=fp(n);zt.default.onAttributeRemoved(n,"wire:id",()=>{gp(t.id)})}let e=Jn(n,!1);e&&(Tt("element.init",{el:n,component:e}),Array.from(n.getAttributeNames()).filter(i=>Fc(i)).map(i=>fh(n,i)).forEach(i=>{Tt("directive.init",{el:n,component:e,directive:i,cleanup:r=>{zt.default.onAttributeRemoved(n,i.raw,r)}})}))})),zt.default.start(),setTimeout(()=>window.Livewire.initialRenderIsFinished=!0),oc(document,"livewire:initialized")}function Dp(){}function kp(){}var kd=at(Xt());pt("commit.prepare",({component:n})=>{n.children.forEach(e=>{e.snapshot.memo.bindings&&e.$wire.$commit()})});var Np=at(Xt()),ss={};pt("element.init",({el:n,component:e})=>{tl(n).missing("submit")||n.addEventListener("submit",()=>{ss[e.id]=[],Np.default.walk(e.el,(i,r)=>{if(!!n.contains(i)){if(i.hasAttribute("wire:ignore"))return r();i.tagName.toLowerCase()==="button"&&i.type==="submit"||i.tagName.toLowerCase()==="select"||i.tagName.toLowerCase()==="input"&&(i.type==="checkbox"||i.type==="radio")?(i.disabled||ss[e.id].push(()=>i.disabled=!1),i.disabled=!0):(i.tagName.toLowerCase()==="input"||i.tagName.toLowerCase()==="textarea")&&(i.readOnly||ss[e.id].push(()=>i.readOnly=!1),i.readOnly=!0)}})})});pt("commit",({component:n,respond:e})=>{e(()=>{Bp(n)})});function Bp(n){if(!!ss[n.id])for(;ss[n.id].length>0;)ss[n.id].shift()()}pt("commit",({component:n,succeed:e})=>{e(({effects:t})=>{let i=t.download;if(!i)return;let r=window.webkitURL||window.URL,s=r.createObjectURL(Gp(i.content,i.contentType)),a=document.createElement("a");a.style.display="none",a.href=s,a.download=i.name,document.body.appendChild(a),a.click(),setTimeout(function(){r.revokeObjectURL(s)},0)})});function Gp(n,e="",t=512){const i=atob(n),r=[];e===null&&(e="");for(let s=0;s<i.length;s+=t){let a=i.slice(s,s+t),o=new Array(a.length);for(let c=0;c<a.length;c++)o[c]=a.charCodeAt(c);let l=new Uint8Array(o);r.push(l)}return new Blob(r,{type:e})}var gh=at(Xt());pt("effects",(n,e)=>{let t=e.js,i=e.xjs;t&&Object.entries(t).forEach(([r,s])=>{hp(n,r,()=>{gh.default.evaluate(n.el,s)})}),i&&i.forEach(r=>{gh.default.evaluate(n.el,r)})});var jp=at(Xt()),zp=at(wd());pt("component.init",({component:n})=>{let t=n.effects.url;!t||Object.entries(t).forEach(([i,r])=>{let{name:s,as:a,use:o,alwaysShow:l}=Up(i,r);a||(a=s);let c=$i(n.ephemeral,s),{initial:h,replace:d,push:f,pop:p}=(0,zp.track)(a,c,l);o==="replace"?jp.default.effect(()=>{d($i(n.reactive,s))}):o==="push"&&(pt("commit",({component:m,succeed:y})=>{let v=$i(m.canonical,s);y(()=>{let x=$i(m.canonical,s);JSON.stringify(v)!==JSON.stringify(x)&&f(x)})}),p(async m=>{await n.$wire.set(s,m),document.querySelectorAll("input").forEach(y=>{y._x_forceModelUpdate&&y._x_forceModelUpdate(y._x_model.get())})}))})});function Up(n,e){let t={use:"replace",alwaysShow:!1};return typeof e=="string"?{...t,name:e,as:e}:{...{...t,name:n,as:n},...e}}pt("effects",(n,e)=>{(e.listeners||[]).forEach(i=>{if(i.startsWith("echo")){if(typeof window.Echo=="undefined"){console.warn("Laravel Echo cannot be found");return}let r=i.split(/(echo:|echo-)|:|,/);r[1]=="echo:"&&r.splice(2,0,"channel",void 0),r[2]=="notification"&&r.push(void 0,void 0);let[s,a,o,l,c,h,d]=r;["channel","private","encryptedPrivate"].includes(o)?window.Echo[o](c).listen(d,f=>{ts(n,i,f)}):o=="presence"?["here","joining","leaving"].includes(d)?window.Echo.join(c)[d](f=>{ts(n,i,f)}):window.Echo.join(c).listen(d,f=>{ts(n,i,f)}):o=="notification"?window.Echo.private(c).notification(f=>{ts(n,i,f)}):console.warn("Echo channel type not yet supported")}})});var Nd=!1;Yp()&&Alpine.navigate.disableProgressBar();document.addEventListener("alpine:navigated",n=>{n.detail&&n.detail.init||(Nd=!0,document.dispatchEvent(new CustomEvent("livewire:navigated",{bubbles:!0})))});function Wp(n,e,t){n.redirectUsingNavigate||Nd?Alpine.navigate(e):t()}function Yp(){return!!(document.querySelector("[data-no-progress-bar]")||window.livewireScriptConfig&&window.livewireScriptConfig.progressBar===!1)}pt("effects",(n,e)=>{if(!e.redirect)return;let t=e.redirect;Wp(e,t,()=>{window.location.href=t})});var Xp=at(Xt());function Hp(n,e,t){let i=document.createElement("div");i.innerHTML=t;let r;try{r=Jn(e.parentElement)}catch{}r&&(i.__livewire=r);let s=i.firstElementChild;s.__livewire=n,Tt("morph",{el:e,toEl:s,component:n}),Xp.default.morph(e,s,{updating:(a,o,l,c)=>{if(!Ur(a)){if(Tt("morph.updating",{el:a,toEl:o,component:n,skip:c,childrenOnly:l}),a.__livewire_ignore===!0||(a.__livewire_ignore_self===!0&&l(),hc(a)&&a.getAttribute("wire:id")!==n.id))return c();hc(a)&&(o.__livewire=n)}},updated:(a,o)=>{Ur(a)||Tt("morph.updated",{el:a,component:n})},removing:(a,o)=>{Ur(a)||Tt("morph.removing",{el:a,component:n,skip:o})},removed:a=>{Ur(a)||Tt("morph.removed",{el:a,component:n})},adding:a=>{Tt("morph.adding",{el:a,component:n})},added:a=>{if(Ur(a))return;Tt("morph.added",a);const o=Jn(a).id;o===n.id||hc(a)&&(message.fingerprint&&o==message.fingerprint.id&&(message.fingerprint,message.response.serverMemo,message.response.effects),a.skipAddingChildren=!0)},key:a=>{if(!Ur(a))return a.hasAttribute("wire:key")?a.getAttribute("wire:key"):a.hasAttribute("wire:id")?a.getAttribute("wire:id"):a.id},lookahead:!0})}function Ur(n){return typeof n.hasAttribute!="function"}function hc(n){return n.hasAttribute("wire:id")}pt("effects",(n,e)=>{let t=e.html;!t||queueMicrotask(()=>{Hp(n,n.el,t)})});pt("commit.prepare",({component:n})=>{n.children.forEach(e=>{e.snapshot.memo.props&&e.$wire.$commit()})});var ph=at(Xt());pt("morph.added",n=>{n.__addedByMorph=!0});Ni("transition",({el:n,directive:e,component:t,cleanup:i})=>{let r=ph.default.reactive({state:!1});ph.default.bind(n,{[e.rawName.replace("wire:","x-")]:"","x-show"(){return r.state}}),n.__addedByMorph&&setTimeout(()=>r.state=!0);let s=[];s.push(pt("morph.removing",({el:a,skip:o})=>{o(),a.addEventListener("transitionend",()=>{a.remove()}),r.state=!1,s.push(pt("morph",({component:l})=>{l===t&&(a.remove(),s.forEach(c=>c()))}))})),i(()=>s.forEach(a=>a()))});var Qp=new xd;function Kp(n,e){Qp.each(n,t=>{t.callback(),t.callback=()=>{}}),e()}var _h=at(Xt());pt("directive.init",({el:n,directive:e,cleanup:t,component:i})=>{if(["snapshot","effects","model","init","loading","poll","ignore","id","data","key","target","dirty"].includes(e.value))return;let r=e.rawName.replace("wire:","x-on:");e.value==="submit"&&!e.modifiers.includes("prevent")&&(r=r+".prevent");let s=_h.default.bind(n,{[r](a){Kp(i,()=>{_h.default.evaluate(n,"$wire."+e.expression,{scope:{$event:a}})})}});t(s)});var is=at(Xt());is.default.addInitSelector(()=>"[wire\\:navigate]");is.default.addInitSelector(()=>"[wire\\:navigate\\.hover]");is.default.interceptInit(is.default.skipDuringClone(n=>{n.hasAttribute("wire:navigate")?is.default.bind(n,{["x-navigate"]:!0}):n.hasAttribute("wire:navigate.hover")&&is.default.bind(n,{["x-navigate.hover"]:!0})}));function yn(n,e,t){if(t=e.modifiers.includes("remove")?!t:t,e.modifiers.includes("class")){let i=e.expression.split(" ");t?n.classList.add(...i):n.classList.remove(...i)}else if(e.modifiers.includes("attr"))t?n.setAttribute(e.expression,!0):n.removeAttribute(e.expression);else{let i=window.getComputedStyle(n,null).getPropertyValue("display"),r=["inline","block","table","flex","grid","inline-flex"].filter(s=>e.modifiers.includes(s))[0]||"inline-block";r=e.modifiers.includes("remove")?i:r,n.style.display=t?r:"none"}}var Dc=new Set,kc=new Set;window.addEventListener("offline",()=>Dc.forEach(n=>n()));window.addEventListener("online",()=>kc.forEach(n=>n()));Ni("offline",({el:n,directive:e,cleanup:t})=>{let i=()=>yn(n,e,!0),r=()=>yn(n,e,!1);Dc.add(i),kc.add(r),t(()=>{Dc.delete(i),kc.delete(r)})});Ni("loading",({el:n,directive:e,component:t})=>{let i=Jp(n),[r,s]=Vp(e);yn(n,e,!1),$p(t,i,[()=>r(()=>yn(n,e,!0)),()=>s(()=>yn(n,e,!1))]),Zp(t,i,[()=>r(()=>yn(n,e,!0)),()=>s(()=>yn(n,e,!1))])});function Vp(n){if(!n.modifiers.includes("delay"))return[s=>s(),s=>s()];let e=200,t={shortest:50,shorter:100,short:150,long:300,longer:500,longest:1e3};Object.keys(t).some(s=>{if(n.modifiers.includes(s))return e=t[s],!0});let i,r=!1;return[s=>{i=setTimeout(()=>{s(),r=!0},e)},s=>{r?s():clearTimeout(i)}]}function $p(n,e,[t,i]){pt("commit",({component:r,commit:s,respond:a})=>{r===n&&(e.length>0&&!qp(s,e)||(t(),a(()=>{i()})))})}function Zp(n,e,[t,i]){let r=s=>{let{id:a,property:o}=s.detail;return a!==n.id||e.length>0&&!e.map(l=>l.target).includes(o)};window.addEventListener("livewire-upload-start",s=>{r(s)||t()}),window.addEventListener("livewire-upload-finish",s=>{r(s)||i()}),window.addEventListener("livewire-upload-error",s=>{r(s)||i()})}function qp(n,e){let{updates:t,calls:i}=n;return e.some(({target:r,params:s})=>{if(s)return i.some(({method:a,params:o})=>r===a&&s===Bd(JSON.stringify(o)));if(Object.keys(t).map(a=>a.split(".")[0]).includes(r)||i.map(a=>a.method).includes(r))return!0})}function Jp(n){let e=tl(n),t=[];if(e.has("target")){let i=e.get("target"),r=i.expression;r.includes("(")&&r.includes(")")?t.push({target:i.method,params:Bd(JSON.stringify(i.params))}):r.includes(",")?r.split(",").map(s=>s.trim()).forEach(s=>{t.push({target:s})}):t.push({target:r})}else{let i=["init","dirty","offline","target","loading","poll","ignore","key","id"];e.all().filter(r=>!i.includes(r.value)).map(r=>r.expression.split("(")[0]).forEach(r=>t.push({target:r}))}return t}function Bd(n){return btoa(encodeURIComponent(n))}Ni("stream",({el:n,directive:e,component:t,cleanup:i})=>{let{expression:r,modifiers:s}=e,a=pt("stream",({name:o,content:l,replace:c})=>{o===r&&(s.includes("replace")||c?n.innerHTML=l:n.innerHTML=n.innerHTML+l)});i(a)});pt("request",({respond:n})=>{n(e=>{let t=e.response;!t.headers.has("X-Livewire-Stream")||(e.response={ok:!0,redirected:!1,status:200,async text(){let i=await e_(t,r=>{Tt("stream",r)});return Cd(i)&&(this.ok=!1),i}})})});async function e_(n,e){let t=n.body.getReader(),i="";for(;;){let{done:r,value:s}=await t.read(),o=new TextDecoder().decode(s),[l,c]=t_(o);if(l.forEach(h=>{e(h)}),i=i+c,r)return i}}function t_(n){let e=/({"stream":true.*?"endStream":true})/g,t=n.match(e),i=[];if(t)for(let s=0;s<t.length;s++)i.push(JSON.parse(t[s]).body);let r=n.replace(e,"");return[i,r]}Ni("ignore",({el:n,directive:e})=>{e.modifiers.includes("self")?n.__livewire_ignore_self=!0:n.__livewire_ignore=!0});var Gd=new xd;pt("commit",({component:n,respond:e})=>{e(()=>{setTimeout(()=>{Gd.each(n,t=>t(!1))})})});Ni("dirty",({el:n,directive:e,component:t})=>{let i=i_(n);Alpine.reactive({state:!1});let r=!1,s=a=>{yn(n,e,a),r=a};Gd.add(t,s),Alpine.effect(()=>{let a=!1;if(i.length===0)a=JSON.stringify(t.canonical)!==JSON.stringify(t.reactive);else for(let o=0;o<i.length&&!a;o++){let l=i[o];a=JSON.stringify($i(t.canonical,l))!==JSON.stringify($i(t.reactive,l))}r!==a&&s(a),r=a})});function i_(n){let e=tl(n),t=[];return e.has("model")&&t.push(e.get("model").expression),e.has("target")&&(t=t.concat(e.get("target").expression.split(",").map(i=>i.trim()))),t}var n_=at(Xt());function r_(n,e){var t;return function(){var i=this,r=arguments,s=function(){t=null,n.apply(i,r)};clearTimeout(t),t=setTimeout(s,e)}}Ni("model",({el:n,directive:e,component:t,cleanup:i})=>{let{expression:r,modifiers:s}=e;if(!r)return console.warn("Livewire: [wire:model] is missing a value.",n);if(jd(t,r))return console.warn('Livewire: [wire:model="'+r+'"] property does not exist on component: ['+t.name+"]",n);if(n.type&&n.type.toLowerCase()==="file")return np(n,r,t,i);let a=s.includes("live"),o=s.includes("lazy"),l=s.includes("blur"),c=s.includes("debounce"),h=()=>t.$wire.$commit(),d=a_(n)&&!c&&a?r_(h,150):h;n_.default.bind(n,{["@change"](){o&&h()},["@blur"](){l&&h()},["x-model"+s_(s)](){return{get(){return $i(t.$wire,r)},set(f){qo(t.$wire,r,f),a&&!o&&!l&&d()}}}})});function s_(n){return n=n.filter(e=>!["lazy","defer"].includes(e)),n.length===0?"":"."+n.join(".")}function a_(n){return["INPUT","TEXTAREA"].includes(n.tagName.toUpperCase())&&!["checkbox","radio"].includes(n.type)}function jd(n,e){if(e.startsWith("$parent")){let i=Jn(n.el.parentElement,!1);return i?jd(i,e.split("$parent.")[1]):!0}let t=e.split(".")[0];return!Object.keys(n.canonical).includes(t)}var o_=at(Xt());Ni("init",({el:n,directive:e})=>{var i;let t=(i=e.expression)!=null?i:"$refresh";o_.default.evaluate(n,`$wire.${t}`)});var l_=at(Xt());Ni("poll",({el:n,directive:e,component:t})=>{let i=v_(e.modifiers,2e3),{start:r,pauseWhile:s,throttleWhile:a,stopWhen:o}=u_(()=>{c_(n,e)},i);r(),a(()=>f_()&&p_(e)),s(()=>__(e)&&m_(n)),s(()=>g_(n)),s(()=>d_()),o(()=>y_(n))});function c_(n,e){l_.default.evaluate(n,e.expression?"$wire."+e.expression:"$wire.$commit()")}function u_(n,e=2e3){let t=[],i=[],r=[];return{start(){let s=h_(e,()=>{if(r.some(a=>a()))return s();t.some(a=>a())||i.some(a=>a())&&Math.random()<.95||n()})},pauseWhile(s){t.push(s)},throttleWhile(s){i.push(s)},stopWhen(s){r.push(s)}}}var jn=[];function h_(n,e){if(!jn[n]){let t={timer:setInterval(()=>t.callbacks.forEach(i=>i()),n),callbacks:new Set};jn[n]=t}return jn[n].callbacks.add(e),()=>{jn[n].callbacks.delete(e),jn[n].callbacks.size===0&&(clearInterval(jn[n].timer),delete jn[n])}}var uu=!1;window.addEventListener("offline",()=>uu=!0);window.addEventListener("online",()=>uu=!1);function d_(){return uu}var zd=!1;document.addEventListener("visibilitychange",()=>{zd=document.hidden},!1);function f_(){return zd}function g_(n){return!tl(n).has("poll")}function p_(n){return!n.modifiers.includes("keep-alive")}function __(n){return n.modifiers.includes("visible")}function m_(n){let e=n.getBoundingClientRect();return!(e.top<(window.innerHeight||document.documentElement.clientHeight)&&e.left<(window.innerWidth||document.documentElement.clientWidth)&&e.bottom>0&&e.right>0)}function y_(n){return n.isConnected===!1}function v_(n,e){let t,i=n.find(s=>s.match(/([0-9]+)ms/)),r=n.find(s=>s.match(/([0-9]+)s/));return i?t=Number(i.replace("ms","")):r&&(t=Number(r.replace("s",""))*1e3),t||e}var hu={directive:Ni,dispatchTo:cu,start:Fp,stop:Dp,rescan:kp,first:yp,find:mp,getByName:_p,all:vp,hook:pt,trigger:Tt,dispatch:xp,on:bp};window.Livewire&&console.warn("Detected multiple instances of Livewire running");window.Alpine&&console.warn("Detected multiple instances of Alpine running");window.Livewire=hu;window.Alpine=kd.default;window.livewireScriptConfig===void 0&&document.addEventListener("DOMContentLoaded",()=>{hu.start()});var Ud=kd.default;/*!
* focus-trap 6.6.1
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*//*!
* tabbable 5.2.1
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*//*! Bundled license information:

nprogress/nprogress.js:
  (* NProgress, (c) 2013, 2014 Rico Sta. Cruz - http://ricostacruz.com/nprogress
   * @license MIT *)
*/let Wd=()=>{};const mh=n=>(typeof n=="function"&&(n=n()),typeof n=="object"&&(n=JSON.stringify(n)),window.navigator.clipboard.writeText(n).then(Wd));function Nc(n){n.magic("clipboard",()=>mh),n.directive("clipboard",(e,{modifiers:t,expression:i},{evaluateLater:r,cleanup:s})=>{const a=t.includes("raw")?l=>l(i):r(i),o=()=>a(mh);e.addEventListener("click",o),s(()=>{e.removeEventListener("click",o)})})}Nc.configure=n=>(n.hasOwnProperty("onCopy")&&typeof n.onCopy=="function"&&(Wd=n.onCopy),Nc);/*! image-blob-reduce 4.1.0 https://github.com/nodeca/image-blob-reduce @license MIT */function _o(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var il={};il.assign=function(e){for(var t,i=1;i<arguments.length;i++){t=Object(arguments[i]);for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e};function Yd(n,e){var t={};return e.forEach(function(i){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}),t}function A_(n){return Yd(n,["alpha","unsharpAmount","unsharpRadius","unsharpThreshold","cancelToken"])}il.pick=Yd;il.pick_pica_resize_options=A_;var Xd={exports:{}};/*!

pica
https://github.com/nodeca/pica

*/(function(n,e){(function(t){n.exports=t()})(function(){return function(){function t(i,r,s){function a(c,h){if(!r[c]){if(!i[c]){var d=typeof _o=="function"&&_o;if(!h&&d)return d(c,!0);if(o)return o(c,!0);var f=new Error("Cannot find module '"+c+"'");throw f.code="MODULE_NOT_FOUND",f}var p=r[c]={exports:{}};i[c][0].call(p.exports,function(m){var y=i[c][1][m];return a(y||m)},p,p.exports,t,i,r,s)}return r[c].exports}for(var o=typeof _o=="function"&&_o,l=0;l<s.length;l++)a(s[l]);return a}return t}()({1:[function(t,i,r){var s=t("multimath"),a=t("./mm_unsharp_mask"),o=t("./mm_resize");function l(c){var h=c||[],d={js:h.indexOf("js")>=0,wasm:h.indexOf("wasm")>=0};s.call(this,d),this.features={js:d.js,wasm:d.wasm&&this.has_wasm()},this.use(a),this.use(o)}l.prototype=Object.create(s.prototype),l.prototype.constructor=l,l.prototype.resizeAndUnsharp=function(h,d){var f=this.resize(h,d);return h.unsharpAmount&&this.unsharp_mask(f,h.toWidth,h.toHeight,h.unsharpAmount,h.unsharpRadius,h.unsharpThreshold),f},i.exports=l},{"./mm_resize":4,"./mm_unsharp_mask":9,multimath:19}],2:[function(t,i,r){function s(d){return d<0?0:d>255?255:d}function a(d){return d>=0?d:0}function o(d,f,p,m,y,v){var x,b,E,I,C,M,D,P,z,j,Q,q=0,J=0;for(z=0;z<m;z++){for(C=0,j=0;j<y;j++){for(M=v[C++],D=v[C++],P=q+M*4|0,x=b=E=I=0;D>0;D--)Q=v[C++],I=I+Q*d[P+3]|0,E=E+Q*d[P+2]|0,b=b+Q*d[P+1]|0,x=x+Q*d[P]|0,P=P+4|0;f[J+3]=a(I>>7),f[J+2]=a(E>>7),f[J+1]=a(b>>7),f[J]=a(x>>7),J=J+m*4|0}J=(z+1)*4|0,q=(z+1)*p*4|0}}function l(d,f,p,m,y,v){var x,b,E,I,C,M,D,P,z,j,Q,q=0,J=0;for(z=0;z<m;z++){for(C=0,j=0;j<y;j++){for(M=v[C++],D=v[C++],P=q+M*4|0,x=b=E=I=0;D>0;D--)Q=v[C++],I=I+Q*d[P+3]|0,E=E+Q*d[P+2]|0,b=b+Q*d[P+1]|0,x=x+Q*d[P]|0,P=P+4|0;x>>=7,b>>=7,E>>=7,I>>=7,f[J+3]=s(I+(1<<13)>>14),f[J+2]=s(E+(1<<13)>>14),f[J+1]=s(b+(1<<13)>>14),f[J]=s(x+(1<<13)>>14),J=J+m*4|0}J=(z+1)*4|0,q=(z+1)*p*4|0}}function c(d,f,p,m,y,v){var x,b,E,I,C,M,D,P,z,j,Q,q,J=0,ye=0;for(j=0;j<m;j++){for(M=0,Q=0;Q<y;Q++){for(D=v[M++],P=v[M++],z=J+D*4|0,x=b=E=I=0;P>0;P--)q=v[M++],C=d[z+3],I=I+q*C|0,E=E+q*d[z+2]*C|0,b=b+q*d[z+1]*C|0,x=x+q*d[z]*C|0,z=z+4|0;E=E/255|0,b=b/255|0,x=x/255|0,f[ye+3]=a(I>>7),f[ye+2]=a(E>>7),f[ye+1]=a(b>>7),f[ye]=a(x>>7),ye=ye+m*4|0}ye=(j+1)*4|0,J=(j+1)*p*4|0}}function h(d,f,p,m,y,v){var x,b,E,I,C,M,D,P,z,j,Q,q=0,J=0;for(z=0;z<m;z++){for(C=0,j=0;j<y;j++){for(M=v[C++],D=v[C++],P=q+M*4|0,x=b=E=I=0;D>0;D--)Q=v[C++],I=I+Q*d[P+3]|0,E=E+Q*d[P+2]|0,b=b+Q*d[P+1]|0,x=x+Q*d[P]|0,P=P+4|0;x>>=7,b>>=7,E>>=7,I>>=7,I=s(I+(1<<13)>>14),I>0&&(x=x*255/I|0,b=b*255/I|0,E=E*255/I|0),f[J+3]=I,f[J+2]=s(E+(1<<13)>>14),f[J+1]=s(b+(1<<13)>>14),f[J]=s(x+(1<<13)>>14),J=J+m*4|0}J=(z+1)*4|0,q=(z+1)*p*4|0}}i.exports={convolveHor:o,convolveVert:l,convolveHorWithPre:c,convolveVertWithPre:h}},{}],3:[function(t,i,r){i.exports="AGFzbQEAAAAADAZkeWxpbmsAAAAAAAEYA2AGf39/f39/AGAAAGAIf39/f39/f38AAg8BA2VudgZtZW1vcnkCAAADBwYBAAAAAAIGBgF/AEEACweUAQgRX193YXNtX2NhbGxfY3RvcnMAAAtjb252b2x2ZUhvcgABDGNvbnZvbHZlVmVydAACEmNvbnZvbHZlSG9yV2l0aFByZQADE2NvbnZvbHZlVmVydFdpdGhQcmUABApjb252b2x2ZUhWAAUMX19kc29faGFuZGxlAwAYX193YXNtX2FwcGx5X2RhdGFfcmVsb2NzAAAKyA4GAwABC4wDARB/AkAgA0UNACAERQ0AIANBAnQhFQNAQQAhE0EAIQsDQCALQQJqIQcCfyALQQF0IAVqIgYuAQIiC0UEQEEAIQhBACEGQQAhCUEAIQogBwwBCyASIAYuAQBqIQhBACEJQQAhCiALIRRBACEOIAchBkEAIQ8DQCAFIAZBAXRqLgEAIhAgACAIQQJ0aigCACIRQRh2bCAPaiEPIBFB/wFxIBBsIAlqIQkgEUEQdkH/AXEgEGwgDmohDiARQQh2Qf8BcSAQbCAKaiEKIAhBAWohCCAGQQFqIQYgFEEBayIUDQALIAlBB3UhCCAKQQd1IQYgDkEHdSEJIA9BB3UhCiAHIAtqCyELIAEgDEEBdCIHaiAIQQAgCEEAShs7AQAgASAHQQJyaiAGQQAgBkEAShs7AQAgASAHQQRyaiAJQQAgCUEAShs7AQAgASAHQQZyaiAKQQAgCkEAShs7AQAgDCAVaiEMIBNBAWoiEyAERw0ACyANQQFqIg0gAmwhEiANQQJ0IQwgAyANRw0ACwsL2gMBD38CQCADRQ0AIARFDQAgAkECdCEUA0AgCyEMQQAhE0EAIQIDQCACQQJqIQYCfyACQQF0IAVqIgcuAQIiAkUEQEEAIQhBACEHQQAhCkEAIQkgBgwBCyAHLgEAQQJ0IBJqIQhBACEJIAIhCkEAIQ0gBiEHQQAhDkEAIQ8DQCAFIAdBAXRqLgEAIhAgACAIQQF0IhFqLwEAbCAJaiEJIAAgEUEGcmovAQAgEGwgDmohDiAAIBFBBHJqLwEAIBBsIA9qIQ8gACARQQJyai8BACAQbCANaiENIAhBBGohCCAHQQFqIQcgCkEBayIKDQALIAlBB3UhCCANQQd1IQcgDkEHdSEKIA9BB3UhCSACIAZqCyECIAEgDEECdGogB0GAQGtBDnUiBkH/ASAGQf8BSBsiBkEAIAZBAEobQQh0QYD+A3EgCUGAQGtBDnUiBkH/ASAGQf8BSBsiBkEAIAZBAEobQRB0QYCA/AdxIApBgEBrQQ51IgZB/wEgBkH/AUgbIgZBACAGQQBKG0EYdHJyIAhBgEBrQQ51IgZB/wEgBkH/AUgbIgZBACAGQQBKG3I2AgAgAyAMaiEMIBNBAWoiEyAERw0ACyAUIAtBAWoiC2whEiADIAtHDQALCwuSAwEQfwJAIANFDQAgBEUNACADQQJ0IRUDQEEAIRNBACEGA0AgBkECaiEIAn8gBkEBdCAFaiIGLgECIgdFBEBBACEJQQAhDEEAIQ1BACEOIAgMAQsgEiAGLgEAaiEJQQAhDkEAIQ1BACEMIAchFEEAIQ8gCCEGA0AgBSAGQQF0ai4BACAAIAlBAnRqKAIAIhBBGHZsIhEgD2ohDyARIBBBEHZB/wFxbCAMaiEMIBEgEEEIdkH/AXFsIA1qIQ0gESAQQf8BcWwgDmohDiAJQQFqIQkgBkEBaiEGIBRBAWsiFA0ACyAPQQd1IQkgByAIagshBiABIApBAXQiCGogDkH/AW1BB3UiB0EAIAdBAEobOwEAIAEgCEECcmogDUH/AW1BB3UiB0EAIAdBAEobOwEAIAEgCEEEcmogDEH/AW1BB3UiB0EAIAdBAEobOwEAIAEgCEEGcmogCUEAIAlBAEobOwEAIAogFWohCiATQQFqIhMgBEcNAAsgC0EBaiILIAJsIRIgC0ECdCEKIAMgC0cNAAsLC4IEAQ9/AkAgA0UNACAERQ0AIAJBAnQhFANAIAshDEEAIRJBACEHA0AgB0ECaiEKAn8gB0EBdCAFaiICLgECIhNFBEBBACEIQQAhCUEAIQYgCiEHQQAMAQsgAi4BAEECdCARaiEJQQAhByATIQJBACENIAohBkEAIQ5BACEPA0AgBSAGQQF0ai4BACIIIAAgCUEBdCIQai8BAGwgB2ohByAAIBBBBnJqLwEAIAhsIA5qIQ4gACAQQQRyai8BACAIbCAPaiEPIAAgEEECcmovAQAgCGwgDWohDSAJQQRqIQkgBkEBaiEGIAJBAWsiAg0ACyAHQQd1IQggDUEHdSEJIA9BB3UhBiAKIBNqIQcgDkEHdQtBgEBrQQ51IgJB/wEgAkH/AUgbIgJBACACQQBKGyIKQf8BcQRAIAlB/wFsIAJtIQkgCEH/AWwgAm0hCCAGQf8BbCACbSEGCyABIAxBAnRqIAlBgEBrQQ51IgJB/wEgAkH/AUgbIgJBACACQQBKG0EIdEGA/gNxIAZBgEBrQQ51IgJB/wEgAkH/AUgbIgJBACACQQBKG0EQdEGAgPwHcSAKQRh0ciAIQYBAa0EOdSICQf8BIAJB/wFIGyICQQAgAkEAShtycjYCACADIAxqIQwgEkEBaiISIARHDQALIBQgC0EBaiILbCERIAMgC0cNAAsLC0AAIAcEQEEAIAIgAyAEIAUgABADIAJBACAEIAUgBiABEAQPC0EAIAIgAyAEIAUgABABIAJBACAEIAUgBiABEAIL"},{}],4:[function(t,i,r){i.exports={name:"resize",fn:t("./resize"),wasm_fn:t("./resize_wasm"),wasm_src:t("./convolve_wasm_base64")}},{"./convolve_wasm_base64":3,"./resize":5,"./resize_wasm":8}],5:[function(t,i,r){var s=t("./resize_filter_gen"),a=t("./convolve"),o=a.convolveHor,l=a.convolveVert,c=a.convolveHorWithPre,h=a.convolveVertWithPre;function d(p,m,y){for(var v=3,x=m*y*4|0;v<x;){if(p[v]!==255)return!0;v=v+4|0}return!1}function f(p,m,y){for(var v=3,x=m*y*4|0;v<x;)p[v]=255,v=v+4|0}i.exports=function(m){var y=m.src,v=m.width,x=m.height,b=m.toWidth,E=m.toHeight,I=m.scaleX||m.toWidth/m.width,C=m.scaleY||m.toHeight/m.height,M=m.offsetX||0,D=m.offsetY||0,P=m.dest||new Uint8Array(b*E*4),z=typeof m.filter=="undefined"?"mks2013":m.filter,j=s(z,v,b,I,M),Q=s(z,x,E,C,D),q=new Uint16Array(b*x*4);return d(y,v,x)?(c(y,q,v,x,b,j),h(q,P,x,b,E,Q)):(o(y,q,v,x,b,j),l(q,P,x,b,E,Q),f(P,b,E)),P}},{"./convolve":2,"./resize_filter_gen":6}],6:[function(t,i,r){var s=t("./resize_filter_info"),a=14;function o(l){return Math.round(l*((1<<a)-1))}i.exports=function(c,h,d,f,p){var m=s.filter[c].fn,y=1/f,v=Math.min(1,f),x=s.filter[c].win/v,b,E,I,C,M,D,P,z,j,Q,q,J,ye,$,N,G,B,W=Math.floor((x+1)*2),X=new Int16Array((W+2)*d),ie=0,U=!X.subarray||!X.set;for(b=0;b<d;b++){for(E=(b+.5)*y+p,I=Math.max(0,Math.floor(E-x)),C=Math.min(h-1,Math.ceil(E+x)),M=C-I+1,D=new Float32Array(M),P=new Int16Array(M),z=0,j=I,Q=0;j<=C;j++,Q++)q=m((j+.5-E)*v),z+=q,D[Q]=q;for(J=0,Q=0;Q<D.length;Q++)ye=D[Q]/z,J+=ye,P[Q]=o(ye);for(P[d>>1]+=o(1-J),$=0;$<P.length&&P[$]===0;)$++;if($<P.length){for(N=P.length-1;N>0&&P[N]===0;)N--;if(G=I+$,B=N-$+1,X[ie++]=G,X[ie++]=B,!U)X.set(P.subarray($,N+1),ie),ie+=B;else for(Q=$;Q<=N;Q++)X[ie++]=P[Q]}else X[ie++]=0,X[ie++]=0}return X}},{"./resize_filter_info":7}],7:[function(t,i,r){var s={box:{win:.5,fn:function(o){return o<0&&(o=-o),o<.5?1:0}},hamming:{win:1,fn:function(o){if(o<0&&(o=-o),o>=1)return 0;if(o<11920929e-14)return 1;var l=o*Math.PI;return Math.sin(l)/l*(.54+.46*Math.cos(l/1))}},lanczos2:{win:2,fn:function(o){if(o<0&&(o=-o),o>=2)return 0;if(o<11920929e-14)return 1;var l=o*Math.PI;return Math.sin(l)/l*Math.sin(l/2)/(l/2)}},lanczos3:{win:3,fn:function(o){if(o<0&&(o=-o),o>=3)return 0;if(o<11920929e-14)return 1;var l=o*Math.PI;return Math.sin(l)/l*Math.sin(l/3)/(l/3)}},mks2013:{win:2.5,fn:function(o){return o<0&&(o=-o),o>=2.5?0:o>=1.5?-.125*(o-2.5)*(o-2.5):o>=.5?.25*(4*o*o-11*o+7):1.0625-1.75*o*o}}};i.exports={filter:s,f2q:{box:0,hamming:1,lanczos2:2,lanczos3:3},q2f:["box","hamming","lanczos2","lanczos3"]}},{}],8:[function(t,i,r){var s=t("./resize_filter_gen");function a(d,f,p){for(var m=3,y=f*p*4|0;m<y;){if(d[m]!==255)return!0;m=m+4|0}return!1}function o(d,f,p){for(var m=3,y=f*p*4|0;m<y;)d[m]=255,m=m+4|0}function l(d){return new Uint8Array(d.buffer,0,d.byteLength)}var c=!0;try{c=new Uint32Array(new Uint8Array([1,0,0,0]).buffer)[0]===1}catch{}function h(d,f,p){if(c){f.set(l(d),p);return}for(var m=p,y=0;y<d.length;y++){var v=d[y];f[m++]=v&255,f[m++]=v>>8&255}}i.exports=function(f){var p=f.src,m=f.width,y=f.height,v=f.toWidth,x=f.toHeight,b=f.scaleX||f.toWidth/f.width,E=f.scaleY||f.toHeight/f.height,I=f.offsetX||0,C=f.offsetY||0,M=f.dest||new Uint8Array(v*x*4),D=typeof f.filter=="undefined"?"mks2013":f.filter,P=s(D,m,v,b,I),z=s(D,y,x,E,C),j=0,Q=Math.max(p.byteLength,M.byteLength),q=this.__align(j+Q),J=y*v*4*2,ye=this.__align(q+J),$=this.__align(ye+P.byteLength),N=$+z.byteLength,G=this.__instance("resize",N),B=new Uint8Array(this.__memory.buffer),W=new Uint32Array(this.__memory.buffer),X=new Uint32Array(p.buffer);W.set(X),h(P,B,ye),h(z,B,$);var ie=G.exports.convolveHV||G.exports._convolveHV;a(p,m,y)?ie(ye,$,q,m,y,v,x,1):(ie(ye,$,q,m,y,v,x,0),o(M,v,x));var U=new Uint32Array(M.buffer);return U.set(new Uint32Array(this.__memory.buffer,0,x*v)),M}},{"./resize_filter_gen":6}],9:[function(t,i,r){i.exports={name:"unsharp_mask",fn:t("./unsharp_mask"),wasm_fn:t("./unsharp_mask_wasm"),wasm_src:t("./unsharp_mask_wasm_base64")}},{"./unsharp_mask":10,"./unsharp_mask_wasm":11,"./unsharp_mask_wasm_base64":12}],10:[function(t,i,r){var s=t("glur/mono16");function a(o,l,c){for(var h=l*c,d=new Uint16Array(h),f,p,m,y,v=0;v<h;v++)f=o[4*v],p=o[4*v+1],m=o[4*v+2],y=f>=p&&f>=m?f:p>=m&&p>=f?p:m,d[v]=y<<8;return d}i.exports=function(l,c,h,d,f,p){var m,y,v,x,b;if(!(d===0||f<.5)){f>2&&(f=2);var E=a(l,c,h),I=new Uint16Array(E);s(I,c,h,f);for(var C=d/100*4096+.5|0,M=p<<8,D=c*h,P=0;P<D;P++)m=E[P],x=m-I[P],Math.abs(x)>=M&&(y=m+(C*x+2048>>12),y=y>65280?65280:y,y=y<0?0:y,m=m!==0?m:1,v=(y<<12)/m|0,b=P*4,l[b]=l[b]*v+2048>>12,l[b+1]=l[b+1]*v+2048>>12,l[b+2]=l[b+2]*v+2048>>12)}}},{"glur/mono16":18}],11:[function(t,i,r){i.exports=function(a,o,l,c,h,d){if(!(c===0||h<.5)){h>2&&(h=2);var f=o*l,p=f*4,m=f*2,y=f*2,v=Math.max(o,l)*4,x=8*4,b=0,E=p,I=E+m,C=I+y,M=C+y,D=M+v,P=this.__instance("unsharp_mask",p+m+y*2+v+x,{exp:Math.exp}),z=new Uint32Array(a.buffer),j=new Uint32Array(this.__memory.buffer);j.set(z);var Q=P.exports.hsv_v16||P.exports._hsv_v16;Q(b,E,o,l),Q=P.exports.blurMono16||P.exports._blurMono16,Q(E,I,C,M,D,o,l,h),Q=P.exports.unsharp||P.exports._unsharp,Q(b,b,E,I,o,l,c,d),z.set(new Uint32Array(this.__memory.buffer,0,f))}}},{}],12:[function(t,i,r){i.exports="AGFzbQEAAAAADAZkeWxpbmsAAAAAAAE0B2AAAGAEf39/fwBgBn9/f39/fwBgCH9/f39/f39/AGAIf39/f39/f30AYAJ9fwBgAXwBfAIZAgNlbnYDZXhwAAYDZW52Bm1lbW9yeQIAAAMHBgAFAgQBAwYGAX8AQQALB4oBCBFfX3dhc21fY2FsbF9jdG9ycwABFl9fYnVpbGRfZ2F1c3NpYW5fY29lZnMAAg5fX2dhdXNzMTZfbGluZQADCmJsdXJNb25vMTYABAdoc3ZfdjE2AAUHdW5zaGFycAAGDF9fZHNvX2hhbmRsZQMAGF9fd2FzbV9hcHBseV9kYXRhX3JlbG9jcwABCsUMBgMAAQvWAQEHfCABRNuGukOCGvs/IAC7oyICRAAAAAAAAADAohAAIgW2jDgCFCABIAKaEAAiAyADoCIGtjgCECABRAAAAAAAAPA/IAOhIgQgBKIgAyACIAKgokQAAAAAAADwP6AgBaGjIgS2OAIAIAEgBSAEmqIiB7Y4AgwgASADIAJEAAAAAAAA8D+gIASioiIItjgCCCABIAMgAkQAAAAAAADwv6AgBKKiIgK2OAIEIAEgByAIoCAFRAAAAAAAAPA/IAahoCIDo7Y4AhwgASAEIAKgIAOjtjgCGAuGBQMGfwl8An0gAyoCDCEVIAMqAgghFiADKgIUuyERIAMqAhC7IRACQCAEQQFrIghBAEgiCQRAIAIhByAAIQYMAQsgAiAALwEAuCIPIAMqAhi7oiIMIBGiIg0gDCAQoiAPIAMqAgS7IhOiIhQgAyoCALsiEiAPoqCgoCIOtjgCACACQQRqIQcgAEECaiEGIAhFDQAgCEEBIAhBAUgbIgpBf3MhCwJ/IAQgCmtBAXFFBEAgDiENIAgMAQsgAiANIA4gEKIgFCASIAAvAQK4Ig+ioKCgIg22OAIEIAJBCGohByAAQQRqIQYgDiEMIARBAmsLIQIgC0EAIARrRg0AA0AgByAMIBGiIA0gEKIgDyAToiASIAYvAQC4Ig6ioKCgIgy2OAIAIAcgDSARoiAMIBCiIA4gE6IgEiAGLwECuCIPoqCgoCINtjgCBCAHQQhqIQcgBkEEaiEGIAJBAkohACACQQJrIQIgAA0ACwsCQCAJDQAgASAFIAhsQQF0aiIAAn8gBkECay8BACICuCINIBW7IhKiIA0gFrsiE6KgIA0gAyoCHLuiIgwgEKKgIAwgEaKgIg8gB0EEayIHKgIAu6AiDkQAAAAAAADwQWMgDkQAAAAAAAAAAGZxBEAgDqsMAQtBAAs7AQAgCEUNACAGQQRrIQZBACAFa0EBdCEBA0ACfyANIBKiIAJB//8DcbgiDSAToqAgDyIOIBCioCAMIBGioCIPIAdBBGsiByoCALugIgxEAAAAAAAA8EFjIAxEAAAAAAAAAABmcQRAIAyrDAELQQALIQMgBi8BACECIAAgAWoiACADOwEAIAZBAmshBiAIQQFKIQMgDiEMIAhBAWshCCADDQALCwvRAgIBfwd8AkAgB0MAAAAAWw0AIARE24a6Q4Ia+z8gB0MAAAA/l7ujIglEAAAAAAAAAMCiEAAiDLaMOAIUIAQgCZoQACIKIAqgIg22OAIQIAREAAAAAAAA8D8gCqEiCyALoiAKIAkgCaCiRAAAAAAAAPA/oCAMoaMiC7Y4AgAgBCAMIAuaoiIOtjgCDCAEIAogCUQAAAAAAADwP6AgC6KiIg+2OAIIIAQgCiAJRAAAAAAAAPC/oCALoqIiCbY4AgQgBCAOIA+gIAxEAAAAAAAA8D8gDaGgIgqjtjgCHCAEIAsgCaAgCqO2OAIYIAYEQANAIAAgBSAIbEEBdGogAiAIQQF0aiADIAQgBSAGEAMgCEEBaiIIIAZHDQALCyAFRQ0AQQAhCANAIAIgBiAIbEEBdGogASAIQQF0aiADIAQgBiAFEAMgCEEBaiIIIAVHDQALCwtxAQN/IAIgA2wiBQRAA0AgASAAKAIAIgRBEHZB/wFxIgIgAiAEQQh2Qf8BcSIDIAMgBEH/AXEiBEkbIAIgA0sbIgYgBiAEIAIgBEsbIAMgBEsbQQh0OwEAIAFBAmohASAAQQRqIQAgBUEBayIFDQALCwuZAgIDfwF8IAQgBWwhBAJ/IAazQwAAgEWUQwAAyEKVu0QAAAAAAADgP6AiC5lEAAAAAAAA4EFjBEAgC6oMAQtBgICAgHgLIQUgBARAIAdBCHQhCUEAIQYDQCAJIAIgBkEBdCIHai8BACIBIAMgB2ovAQBrIgcgB0EfdSIIaiAIc00EQCAAIAZBAnQiCGoiCiAFIAdsQYAQakEMdSABaiIHQYD+AyAHQYD+A0gbIgdBACAHQQBKG0EMdCABQQEgARtuIgEgCi0AAGxBgBBqQQx2OgAAIAAgCEEBcmoiByABIActAABsQYAQakEMdjoAACAAIAhBAnJqIgcgASAHLQAAbEGAEGpBDHY6AAALIAZBAWoiBiAERw0ACwsL"},{}],13:[function(t,i,r){var s=100;function a(o,l){this.create=o,this.available=[],this.acquired={},this.lastId=1,this.timeoutId=0,this.idle=l||2e3}a.prototype.acquire=function(){var o=this,l;return this.available.length!==0?l=this.available.pop():(l=this.create(),l.id=this.lastId++,l.release=function(){return o.release(l)}),this.acquired[l.id]=l,l},a.prototype.release=function(o){var l=this;delete this.acquired[o.id],o.lastUsed=Date.now(),this.available.push(o),this.timeoutId===0&&(this.timeoutId=setTimeout(function(){return l.gc()},s))},a.prototype.gc=function(){var o=this,l=Date.now();this.available=this.available.filter(function(c){return l-c.lastUsed>o.idle?(c.destroy(),!1):!0}),this.available.length!==0?this.timeoutId=setTimeout(function(){return o.gc()},s):this.timeoutId=0},i.exports=a},{}],14:[function(t,i,r){var s=2;i.exports=function(o,l,c,h,d,f){var p=c/o,m=h/l,y=(2*f+s+1)/d;if(y>.5)return[[c,h]];var v=Math.ceil(Math.log(Math.min(p,m))/Math.log(y));if(v<=1)return[[c,h]];for(var x=[],b=0;b<v;b++){var E=Math.round(Math.pow(Math.pow(o,v-b-1)*Math.pow(c,b+1),1/v)),I=Math.round(Math.pow(Math.pow(l,v-b-1)*Math.pow(h,b+1),1/v));x.push([E,I])}return x}},{}],15:[function(t,i,r){var s=1e-5;function a(l){var c=Math.round(l);return Math.abs(l-c)<s?c:Math.floor(l)}function o(l){var c=Math.round(l);return Math.abs(l-c)<s?c:Math.ceil(l)}i.exports=function(c){var h=c.toWidth/c.width,d=c.toHeight/c.height,f=a(c.srcTileSize*h)-2*c.destTileBorder,p=a(c.srcTileSize*d)-2*c.destTileBorder;if(f<1||p<1)throw new Error("Internal error in pica: target tile width/height is too small.");var m,y,v,x,b,E,I=[],C;for(x=0;x<c.toHeight;x+=p)for(v=0;v<c.toWidth;v+=f)m=v-c.destTileBorder,m<0&&(m=0),b=v+f+c.destTileBorder-m,m+b>=c.toWidth&&(b=c.toWidth-m),y=x-c.destTileBorder,y<0&&(y=0),E=x+p+c.destTileBorder-y,y+E>=c.toHeight&&(E=c.toHeight-y),C={toX:m,toY:y,toWidth:b,toHeight:E,toInnerX:v,toInnerY:x,toInnerWidth:f,toInnerHeight:p,offsetX:m/h-a(m/h),offsetY:y/d-a(y/d),scaleX:h,scaleY:d,x:a(m/h),y:a(y/d),width:o(b/h),height:o(E/d)},I.push(C);return I}},{}],16:[function(t,i,r){function s(a){return Object.prototype.toString.call(a)}i.exports.isCanvas=function(o){var l=s(o);return l==="[object HTMLCanvasElement]"||l==="[object OffscreenCanvas]"||l==="[object Canvas]"},i.exports.isImage=function(o){return s(o)==="[object HTMLImageElement]"},i.exports.isImageBitmap=function(o){return s(o)==="[object ImageBitmap]"},i.exports.limiter=function(o){var l=0,c=[];function h(){l<o&&c.length&&(l++,c.shift()())}return function(f){return new Promise(function(p,m){c.push(function(){f().then(function(y){p(y),l--,h()},function(y){m(y),l--,h()})}),h()})}},i.exports.cib_quality_name=function(o){switch(o){case 0:return"pixelated";case 1:return"low";case 2:return"medium"}return"high"},i.exports.cib_support=function(o){return Promise.resolve().then(function(){if(typeof createImageBitmap=="undefined")return!1;var l=o(100,100);return createImageBitmap(l,0,0,100,100,{resizeWidth:10,resizeHeight:10,resizeQuality:"high"}).then(function(c){var h=c.width===10;return c.close(),l=null,h})}).catch(function(){return!1})},i.exports.worker_offscreen_canvas_support=function(){return new Promise(function(o,l){if(typeof OffscreenCanvas=="undefined"){o(!1);return}function c(f){if(typeof createImageBitmap=="undefined"){f.postMessage(!1);return}Promise.resolve().then(function(){var p=new OffscreenCanvas(10,10),m=p.getContext("2d");return m.rect(0,0,1,1),createImageBitmap(p,0,0,1,1)}).then(function(){return f.postMessage(!0)},function(){return f.postMessage(!1)})}var h=btoa("(".concat(c.toString(),")(self);")),d=new Worker("data:text/javascript;base64,".concat(h));d.onmessage=function(f){return o(f.data)},d.onerror=l}).then(function(o){return o},function(){return!1})},i.exports.can_use_canvas=function(o){var l=!1;try{var c=o(2,1),h=c.getContext("2d"),d=h.createImageData(2,1);d.data[0]=12,d.data[1]=23,d.data[2]=34,d.data[3]=255,d.data[4]=45,d.data[5]=56,d.data[6]=67,d.data[7]=255,h.putImageData(d,0,0),d=null,d=h.getImageData(0,0,2,1),d.data[0]===12&&d.data[1]===23&&d.data[2]===34&&d.data[3]===255&&d.data[4]===45&&d.data[5]===56&&d.data[6]===67&&d.data[7]===255&&(l=!0)}catch{}return l},i.exports.cib_can_use_region=function(){return new Promise(function(o){if(typeof createImageBitmap=="undefined"){o(!1);return}var l=new Image;l.src="data:image/jpeg;base64,/9j/4QBiRXhpZgAATU0AKgAAAAgABQESAAMAAAABAAYAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAAAAABIAAAAAQAAAEgAAAAB/9sAQwAEAwMEAwMEBAMEBQQEBQYKBwYGBgYNCQoICg8NEBAPDQ8OERMYFBESFxIODxUcFRcZGRsbGxAUHR8dGh8YGhsa/9sAQwEEBQUGBQYMBwcMGhEPERoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoa/8IAEQgAAQACAwERAAIRAQMRAf/EABQAAQAAAAAAAAAAAAAAAAAAAAf/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAF/P//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAQUCf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Bf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Bf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEABj8Cf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAT8hf//aAAwDAQACAAMAAAAQH//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Qf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Qf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAT8Qf//Z",l.onload=function(){createImageBitmap(l,0,0,l.width,l.height).then(function(c){c.width===l.width&&c.height===l.height?o(!0):o(!1)},function(){return o(!1)})},l.onerror=function(){return o(!1)}})}},{}],17:[function(t,i,r){i.exports=function(){var s=t("./mathlib"),a;onmessage=function(l){var c=l.data.opts;if(!c.src&&c.srcBitmap){var h=new OffscreenCanvas(c.width,c.height),d=h.getContext("2d");d.drawImage(c.srcBitmap,0,0),c.src=d.getImageData(0,0,c.width,c.height).data,h.width=h.height=0,h=null,c.srcBitmap.close(),c.srcBitmap=null}a||(a=new s(l.data.features));var f=a.resizeAndUnsharp(c);postMessage({data:f},[f.buffer])}}},{"./mathlib":1}],18:[function(t,i,r){var s,a,o,l,c,h,d,f;function p(v){v<.5&&(v=.5);var x=Math.exp(.726*.726)/v,b=Math.exp(-x),E=Math.exp(-2*x),I=(1-b)*(1-b)/(1+2*x*b-E);return s=I,a=I*(x-1)*b,o=I*(x+1)*b,l=-I*E,c=2*b,h=-E,d=(s+a)/(1-c-h),f=(o+l)/(1-c-h),new Float32Array([s,a,o,l,c,h,d,f])}function m(v,x,b,E,I,C){var M,D,P,z,j,Q,q,J,ye,$,N,G,B,W;for(ye=0;ye<C;ye++){for(Q=ye*I,q=ye,J=0,M=v[Q],j=M*E[6],z=j,N=E[0],G=E[1],B=E[4],W=E[5],$=0;$<I;$++)D=v[Q],P=D*N+M*G+z*B+j*W,j=z,z=P,M=D,b[J]=z,J++,Q++;for(Q--,J--,q+=C*(I-1),M=v[Q],j=M*E[7],z=j,D=M,N=E[2],G=E[3],$=I-1;$>=0;$--)P=D*N+M*G+z*B+j*W,j=z,z=P,M=D,D=v[Q],x[q]=b[J]+z,Q--,J--,q-=C}}function y(v,x,b,E){if(!!E){var I=new Uint16Array(v.length),C=new Float32Array(Math.max(x,b)),M=p(E);m(v,I,C,M,x,b),m(I,v,C,M,b,x)}}i.exports=y},{}],19:[function(t,i,r){var s=t("object-assign"),a=t("./lib/base64decode"),o=t("./lib/wa_detect"),l={js:!0,wasm:!0};function c(h){if(!(this instanceof c))return new c(h);var d=s({},l,h||{});if(this.options=d,this.__cache={},this.__init_promise=null,this.__modules=d.modules||{},this.__memory=null,this.__wasm={},this.__isLE=new Uint32Array(new Uint8Array([1,0,0,0]).buffer)[0]===1,!this.options.js&&!this.options.wasm)throw new Error('mathlib: at least "js" or "wasm" should be enabled')}c.prototype.has_wasm=o,c.prototype.use=function(h){return this.__modules[h.name]=h,this.options.wasm&&this.has_wasm()&&h.wasm_fn?this[h.name]=h.wasm_fn:this[h.name]=h.fn,this},c.prototype.init=function(){if(this.__init_promise)return this.__init_promise;if(!this.options.js&&this.options.wasm&&!this.has_wasm())return Promise.reject(new Error(`mathlib: only "wasm" was enabled, but it's not supported`));var h=this;return this.__init_promise=Promise.all(Object.keys(h.__modules).map(function(d){var f=h.__modules[d];return!h.options.wasm||!h.has_wasm()||!f.wasm_fn||h.__wasm[d]?null:WebAssembly.compile(h.__base64decode(f.wasm_src)).then(function(p){h.__wasm[d]=p})})).then(function(){return h}),this.__init_promise},c.prototype.__base64decode=a,c.prototype.__reallocate=function(d){if(!this.__memory)return this.__memory=new WebAssembly.Memory({initial:Math.ceil(d/(64*1024))}),this.__memory;var f=this.__memory.buffer.byteLength;return f<d&&this.__memory.grow(Math.ceil((d-f)/(64*1024))),this.__memory},c.prototype.__instance=function(d,f,p){if(f&&this.__reallocate(f),!this.__wasm[d]){var m=this.__modules[d];this.__wasm[d]=new WebAssembly.Module(this.__base64decode(m.wasm_src))}if(!this.__cache[d]){var y={memoryBase:0,memory:this.__memory,tableBase:0,table:new WebAssembly.Table({initial:0,element:"anyfunc"})};this.__cache[d]=new WebAssembly.Instance(this.__wasm[d],{env:s(y,p||{})})}return this.__cache[d]},c.prototype.__align=function(d,f){f=f||8;var p=d%f;return d+(p?f-p:0)},i.exports=c},{"./lib/base64decode":20,"./lib/wa_detect":21,"object-assign":22}],20:[function(t,i,r){var s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";i.exports=function(o){for(var l=o.replace(/[\r\n=]/g,""),c=l.length,h=new Uint8Array(c*3>>2),d=0,f=0,p=0;p<c;p++)p%4===0&&p&&(h[f++]=d>>16&255,h[f++]=d>>8&255,h[f++]=d&255),d=d<<6|s.indexOf(l.charAt(p));var m=c%4*6;return m===0?(h[f++]=d>>16&255,h[f++]=d>>8&255,h[f++]=d&255):m===18?(h[f++]=d>>10&255,h[f++]=d>>2&255):m===12&&(h[f++]=d>>4&255),h}},{}],21:[function(t,i,r){var s;i.exports=function(){if(typeof s!="undefined"||(s=!1,typeof WebAssembly=="undefined"))return s;try{var o=new Uint8Array([0,97,115,109,1,0,0,0,1,6,1,96,1,127,1,127,3,2,1,0,5,3,1,0,1,7,8,1,4,116,101,115,116,0,0,10,16,1,14,0,32,0,65,1,54,2,0,32,0,40,2,0,11]),l=new WebAssembly.Module(o),c=new WebAssembly.Instance(l,{});return c.exports.test(4)!==0&&(s=!0),s}catch{}return s}},{}],22:[function(t,i,r){var s=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function l(h){if(h==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(h)}function c(){try{if(!Object.assign)return!1;var h=new String("abc");if(h[5]="de",Object.getOwnPropertyNames(h)[0]==="5")return!1;for(var d={},f=0;f<10;f++)d["_"+String.fromCharCode(f)]=f;var p=Object.getOwnPropertyNames(d).map(function(y){return d[y]});if(p.join("")!=="0123456789")return!1;var m={};return"abcdefghijklmnopqrst".split("").forEach(function(y){m[y]=y}),Object.keys(Object.assign({},m)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}i.exports=c()?Object.assign:function(h,d){for(var f,p=l(h),m,y=1;y<arguments.length;y++){f=Object(arguments[y]);for(var v in f)a.call(f,v)&&(p[v]=f[v]);if(s){m=s(f);for(var x=0;x<m.length;x++)o.call(f,m[x])&&(p[m[x]]=f[m[x]])}}return p}},{}],23:[function(t,i,r){var s=arguments[3],a=arguments[4],o=arguments[5],l=JSON.stringify;i.exports=function(c,h){for(var d,f=Object.keys(o),p=0,m=f.length;p<m;p++){var y=f[p],v=o[y].exports;if(v===c||v&&v.default===c){d=y;break}}if(!d){d=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var x={},p=0,m=f.length;p<m;p++){var y=f[p];x[y]=y}a[d]=["function(require,module,exports){"+c+"(self); }",x]}var b=Math.floor(Math.pow(16,8)*Math.random()).toString(16),E={};E[d]=d,a[b]=["function(require,module,exports){var f = require("+l(d)+");(f.default ? f.default : f)(self);}",E];var I={};C(b);function C(Q){I[Q]=!0;for(var q in a[Q][1]){var J=a[Q][1][q];I[J]||C(J)}}var M="("+s+")({"+Object.keys(I).map(function(Q){return l(Q)+":["+a[Q][0]+","+l(a[Q][1])+"]"}).join(",")+"},{},["+l(b)+"])",D=window.URL||window.webkitURL||window.mozURL||window.msURL,P=new Blob([M],{type:"text/javascript"});if(h&&h.bare)return P;var z=D.createObjectURL(P),j=new Worker(z);return j.objectURL=z,j}},{}],"/index.js":[function(t,i,r){function s(N,G){return h(N)||c(N,G)||o(N,G)||a()}function a(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function o(N,G){if(!!N){if(typeof N=="string")return l(N,G);var B=Object.prototype.toString.call(N).slice(8,-1);if(B==="Object"&&N.constructor&&(B=N.constructor.name),B==="Map"||B==="Set")return Array.from(N);if(B==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(B))return l(N,G)}}function l(N,G){(G==null||G>N.length)&&(G=N.length);for(var B=0,W=new Array(G);B<G;B++)W[B]=N[B];return W}function c(N,G){var B=N==null?null:typeof Symbol!="undefined"&&N[Symbol.iterator]||N["@@iterator"];if(B!=null){var W=[],X=!0,ie=!1,U,re;try{for(B=B.call(N);!(X=(U=B.next()).done)&&(W.push(U.value),!(G&&W.length===G));X=!0);}catch(ce){ie=!0,re=ce}finally{try{!X&&B.return!=null&&B.return()}finally{if(ie)throw re}}return W}}function h(N){if(Array.isArray(N))return N}var d=t("object-assign"),f=t("webworkify"),p=t("./lib/mathlib"),m=t("./lib/pool"),y=t("./lib/utils"),v=t("./lib/worker"),x=t("./lib/stepper"),b=t("./lib/tiler"),E=t("./lib/mm_resize/resize_filter_info"),I={},C=!1;try{typeof navigator!="undefined"&&navigator.userAgent&&(C=navigator.userAgent.indexOf("Safari")>=0)}catch{}var M=1;typeof navigator!="undefined"&&(M=Math.min(navigator.hardwareConcurrency||1,4));var D={tile:1024,concurrency:M,features:["js","wasm","ww"],idle:2e3,createCanvas:function(G,B){var W=document.createElement("canvas");return W.width=G,W.height=B,W}},P={filter:"mks2013",unsharpAmount:0,unsharpRadius:0,unsharpThreshold:0},z=!1,j=!1,Q=!1,q=!1,J=!1;function ye(){return{value:f(v),destroy:function(){if(this.value.terminate(),typeof window!="undefined"){var G=window.URL||window.webkitURL||window.mozURL||window.msURL;G&&G.revokeObjectURL&&this.value.objectURL&&G.revokeObjectURL(this.value.objectURL)}}}}function $(N){if(!(this instanceof $))return new $(N);this.options=d({},D,N||{});var G="lk_".concat(this.options.concurrency);this.__limit=I[G]||y.limiter(this.options.concurrency),I[G]||(I[G]=this.__limit),this.features={js:!1,wasm:!1,cib:!1,ww:!1},this.__workersPool=null,this.__requested_features=[],this.__mathlib=null}$.prototype.init=function(){var N=this;if(this.__initPromise)return this.__initPromise;if(typeof ImageData!="undefined"&&typeof Uint8ClampedArray!="undefined")try{new ImageData(new Uint8ClampedArray(400),10,10),z=!0}catch{}typeof ImageBitmap!="undefined"&&(ImageBitmap.prototype&&ImageBitmap.prototype.close?j=!0:this.debug("ImageBitmap does not support .close(), disabled"));var G=this.options.features.slice();if(G.indexOf("all")>=0&&(G=["cib","wasm","js","ww"]),this.__requested_features=G,this.__mathlib=new p(G),G.indexOf("ww")>=0&&typeof window!="undefined"&&"Worker"in window)try{var B=t("webworkify")(function(){});B.terminate(),this.features.ww=!0;var W="wp_".concat(JSON.stringify(this.options));I[W]?this.__workersPool=I[W]:(this.__workersPool=new m(ye,this.options.idle),I[W]=this.__workersPool)}catch{}var X=this.__mathlib.init().then(function(ce){d(N.features,ce.features)}),ie;j?ie=y.cib_support(this.options.createCanvas).then(function(ce){if(N.features.cib&&G.indexOf("cib")<0){N.debug("createImageBitmap() resize supported, but disabled by config");return}G.indexOf("cib")>=0&&(N.features.cib=ce)}):ie=Promise.resolve(!1),Q=y.can_use_canvas(this.options.createCanvas);var U;j&&z&&G.indexOf("ww")!==-1?U=y.worker_offscreen_canvas_support():U=Promise.resolve(!1),U=U.then(function(ce){q=ce});var re=y.cib_can_use_region().then(function(ce){J=ce});return this.__initPromise=Promise.all([X,ie,U,re]).then(function(){return N}),this.__initPromise},$.prototype.__invokeResize=function(N,G){var B=this;return G.__mathCache=G.__mathCache||{},Promise.resolve().then(function(){return B.features.ww?new Promise(function(W,X){var ie=B.__workersPool.acquire();G.cancelToken&&G.cancelToken.catch(function(re){return X(re)}),ie.value.onmessage=function(re){ie.release(),re.data.err?X(re.data.err):W(re.data)};var U=[];N.src&&U.push(N.src.buffer),N.srcBitmap&&U.push(N.srcBitmap),ie.value.postMessage({opts:N,features:B.__requested_features,preload:{wasm_nodule:B.__mathlib.__}},U)}):{data:B.__mathlib.resizeAndUnsharp(N,G.__mathCache)}})},$.prototype.__extractTileData=function(N,G,B,W,X){if(this.features.ww&&q&&(y.isCanvas(G)||J))return this.debug("Create tile for OffscreenCanvas"),createImageBitmap(W.srcImageBitmap||G,N.x,N.y,N.width,N.height).then(function(re){return X.srcBitmap=re,X});if(y.isCanvas(G))return W.srcCtx||(W.srcCtx=G.getContext("2d")),this.debug("Get tile pixel data"),X.src=W.srcCtx.getImageData(N.x,N.y,N.width,N.height).data,X;this.debug("Draw tile imageBitmap/image to temporary canvas");var ie=this.options.createCanvas(N.width,N.height),U=ie.getContext("2d");return U.globalCompositeOperation="copy",U.drawImage(W.srcImageBitmap||G,N.x,N.y,N.width,N.height,0,0,N.width,N.height),this.debug("Get tile pixel data"),X.src=U.getImageData(0,0,N.width,N.height).data,ie.width=ie.height=0,X},$.prototype.__landTileData=function(N,G,B){var W;if(this.debug("Convert raw rgba tile result to ImageData"),G.bitmap)return B.toCtx.drawImage(G.bitmap,N.toX,N.toY),null;if(z)W=new ImageData(new Uint8ClampedArray(G.data),N.toWidth,N.toHeight);else if(W=B.toCtx.createImageData(N.toWidth,N.toHeight),W.data.set)W.data.set(G.data);else for(var X=W.data.length-1;X>=0;X--)W.data[X]=G.data[X];return this.debug("Draw tile"),C?B.toCtx.putImageData(W,N.toX,N.toY,N.toInnerX-N.toX,N.toInnerY-N.toY,N.toInnerWidth+1e-5,N.toInnerHeight+1e-5):B.toCtx.putImageData(W,N.toX,N.toY,N.toInnerX-N.toX,N.toInnerY-N.toY,N.toInnerWidth,N.toInnerHeight),null},$.prototype.__tileAndResize=function(N,G,B){var W=this,X={srcCtx:null,srcImageBitmap:null,isImageBitmapReused:!1,toCtx:null},ie=function(re){return W.__limit(function(){if(B.canceled)return B.cancelToken;var ce={width:re.width,height:re.height,toWidth:re.toWidth,toHeight:re.toHeight,scaleX:re.scaleX,scaleY:re.scaleY,offsetX:re.offsetX,offsetY:re.offsetY,filter:B.filter,unsharpAmount:B.unsharpAmount,unsharpRadius:B.unsharpRadius,unsharpThreshold:B.unsharpThreshold};return W.debug("Invoke resize math"),Promise.resolve(ce).then(function(me){return W.__extractTileData(re,N,B,X,me)}).then(function(me){return W.debug("Invoke resize math"),W.__invokeResize(me,B)}).then(function(me){return B.canceled?B.cancelToken:(X.srcImageData=null,W.__landTileData(re,me,X))})})};return Promise.resolve().then(function(){if(X.toCtx=G.getContext("2d"),y.isCanvas(N))return null;if(y.isImageBitmap(N))return X.srcImageBitmap=N,X.isImageBitmapReused=!0,null;if(y.isImage(N))return j?(W.debug("Decode image via createImageBitmap"),createImageBitmap(N).then(function(U){X.srcImageBitmap=U}).catch(function(U){return null})):null;throw new Error('Pica: ".from" should be Image, Canvas or ImageBitmap')}).then(function(){if(B.canceled)return B.cancelToken;W.debug("Calculate tiles");var U=b({width:B.width,height:B.height,srcTileSize:W.options.tile,toWidth:B.toWidth,toHeight:B.toHeight,destTileBorder:B.__destTileBorder}),re=U.map(function(me){return ie(me)});function ce(me){me.srcImageBitmap&&(me.isImageBitmapReused||me.srcImageBitmap.close(),me.srcImageBitmap=null)}return W.debug("Process tiles"),Promise.all(re).then(function(){return W.debug("Finished!"),ce(X),G},function(me){throw ce(X),me})})},$.prototype.__processStages=function(N,G,B,W){var X=this;if(W.canceled)return W.cancelToken;var ie=N.shift(),U=s(ie,2),re=U[0],ce=U[1],me=N.length===0,Ue;me||E.q2f.indexOf(W.filter)<0?Ue=W.filter:W.filter==="box"?Ue="box":Ue="hamming",W=d({},W,{toWidth:re,toHeight:ce,filter:Ue});var se;return me||(se=this.options.createCanvas(re,ce)),this.__tileAndResize(G,me?B:se,W).then(function(){return me?B:(W.width=re,W.height=ce,X.__processStages(N,se,B,W))}).then(function(fe){return se&&(se.width=se.height=0),fe})},$.prototype.__resizeViaCreateImageBitmap=function(N,G,B){var W=this,X=G.getContext("2d");return this.debug("Resize via createImageBitmap()"),createImageBitmap(N,{resizeWidth:B.toWidth,resizeHeight:B.toHeight,resizeQuality:y.cib_quality_name(E.f2q[B.filter])}).then(function(ie){if(B.canceled)return B.cancelToken;if(!B.unsharpAmount)return X.drawImage(ie,0,0),ie.close(),X=null,W.debug("Finished!"),G;W.debug("Unsharp result");var U=W.options.createCanvas(B.toWidth,B.toHeight),re=U.getContext("2d");re.drawImage(ie,0,0),ie.close();var ce=re.getImageData(0,0,B.toWidth,B.toHeight);return W.__mathlib.unsharp_mask(ce.data,B.toWidth,B.toHeight,B.unsharpAmount,B.unsharpRadius,B.unsharpThreshold),X.putImageData(ce,0,0),U.width=U.height=0,ce=re=U=X=null,W.debug("Finished!"),G})},$.prototype.resize=function(N,G,B){var W=this;this.debug("Start resize...");var X=d({},P);if(isNaN(B)?B&&(X=d(X,B)):X=d(X,{quality:B}),X.toWidth=G.width,X.toHeight=G.height,X.width=N.naturalWidth||N.width,X.height=N.naturalHeight||N.height,Object.prototype.hasOwnProperty.call(X,"quality")){if(X.quality<0||X.quality>3)throw new Error("Pica: .quality should be [0..3], got ".concat(X.quality));X.filter=E.q2f[X.quality]}if(G.width===0||G.height===0)return Promise.reject(new Error("Invalid output size: ".concat(G.width,"x").concat(G.height)));X.unsharpRadius>2&&(X.unsharpRadius=2),X.canceled=!1,X.cancelToken&&(X.cancelToken=X.cancelToken.then(function(U){throw X.canceled=!0,U},function(U){throw X.canceled=!0,U}));var ie=3;return X.__destTileBorder=Math.ceil(Math.max(ie,2.5*X.unsharpRadius|0)),this.init().then(function(){if(X.canceled)return X.cancelToken;if(W.features.cib){if(E.q2f.indexOf(X.filter)>=0)return W.__resizeViaCreateImageBitmap(N,G,X);W.debug("cib is enabled, but not supports provided filter, fallback to manual math")}if(!Q){var U=new Error("Pica: cannot use getImageData on canvas, make sure fingerprinting protection isn't enabled");throw U.code="ERR_GET_IMAGE_DATA",U}var re=x(X.width,X.height,X.toWidth,X.toHeight,W.options.tile,X.__destTileBorder);return W.__processStages(re,N,G,X)})},$.prototype.resizeBuffer=function(N){var G=this,B=d({},P,N);if(Object.prototype.hasOwnProperty.call(B,"quality")){if(B.quality<0||B.quality>3)throw new Error("Pica: .quality should be [0..3], got ".concat(B.quality));B.filter=E.q2f[B.quality]}return this.init().then(function(){return G.__mathlib.resizeAndUnsharp(B)})},$.prototype.toBlob=function(N,G,B){return G=G||"image/png",new Promise(function(W){if(N.toBlob){N.toBlob(function(ce){return W(ce)},G,B);return}if(N.convertToBlob){W(N.convertToBlob({type:G,quality:B}));return}for(var X=atob(N.toDataURL(G,B).split(",")[1]),ie=X.length,U=new Uint8Array(ie),re=0;re<ie;re++)U[re]=X.charCodeAt(re);W(new Blob([U],{type:G}))})},$.prototype.debug=function(){},i.exports=$},{"./lib/mathlib":1,"./lib/mm_resize/resize_filter_info":7,"./lib/pool":13,"./lib/stepper":14,"./lib/tiler":15,"./lib/utils":16,"./lib/worker":17,"object-assign":22,webworkify:23}]},{},[])("/index.js")})})(Xd);var pa={},Hd={exports:{}};(function(n){function e(o,l){var c=new Error(o);return c.code=l,c}function t(o){for(var l=o.toString(16).toUpperCase(),c=2-l.length;c>0;c--)l="0"+l;return"0x"+l}function i(o){try{return unescape(encodeURIComponent(o))}catch{return o}}function r(o){try{return decodeURIComponent(escape(o))}catch{return o}}function s(o){return Object.prototype.toString.call(o)==="[object Uint8Array]"}function a(o,l,c){this.input=o.subarray(l,c),this.start=l;var h=String.fromCharCode.apply(null,this.input.subarray(0,4));if(h!=="II*\0"&&h!=="MM\0*")throw e("invalid TIFF signature","EBADDATA");this.big_endian=h[0]==="M"}a.prototype.each=function(o){this.aborted=!1;var l=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:l}];this.ifds_to_read.length>0&&!this.aborted;){var c=this.ifds_to_read.shift();!c.offset||this.scan_ifd(c.id,c.offset,o)}},a.prototype.filter=function(o){var l={};l.ifd0={id:0,entries:[]},this.each(function(f){o(f)===!1&&!f.is_subifd_link||f.is_subifd_link&&f.count!==1&&f.format!==4||(l["ifd"+f.ifd]||(l["ifd"+f.ifd]={id:f.ifd,entries:[]}),l["ifd"+f.ifd].entries.push(f))}),delete l.ifd1;var c=8;Object.keys(l).forEach(function(f){c+=2,l[f].entries.forEach(function(p){c+=12+(p.data_length>4?Math.ceil(p.data_length/2)*2:0)}),c+=4}),this.output=new Uint8Array(c),this.output[0]=this.output[1]=(this.big_endian?"M":"I").charCodeAt(0),this.write_uint16(2,42);var h=8,d=this;if(this.write_uint32(4,h),Object.keys(l).forEach(function(f){l[f].written_offset=h;var p=h,m=p+2+l[f].entries.length*12+4;h=m,d.write_uint16(p,l[f].entries.length),l[f].entries.sort(function(v,x){return v.tag-x.tag}).forEach(function(v,x){var b=p+2+x*12;d.write_uint16(b,v.tag),d.write_uint16(b+2,v.format),d.write_uint32(b+4,v.count),v.is_subifd_link?l["ifd"+v.tag]&&(l["ifd"+v.tag].link_offset=b+8):v.data_length<=4?d.output.set(d.input.subarray(v.data_offset-d.start,v.data_offset-d.start+4),b+8):(d.write_uint32(b+8,h),d.output.set(d.input.subarray(v.data_offset-d.start,v.data_offset-d.start+v.data_length),h),h+=Math.ceil(v.data_length/2)*2)});var y=l["ifd"+(l[f].id+1)];y&&(y.link_offset=m-4)}),Object.keys(l).forEach(function(f){l[f].written_offset&&l[f].link_offset&&d.write_uint32(l[f].link_offset,l[f].written_offset)}),this.output.length!==h)throw e("internal error: incorrect buffer size allocated");return this.output},a.prototype.read_uint16=function(o){var l=this.input;if(o+2>l.length)throw e("unexpected EOF","EBADDATA");return this.big_endian?l[o]*256+l[o+1]:l[o]+l[o+1]*256},a.prototype.read_uint32=function(o){var l=this.input;if(o+4>l.length)throw e("unexpected EOF","EBADDATA");return this.big_endian?l[o]*16777216+l[o+1]*65536+l[o+2]*256+l[o+3]:l[o]+l[o+1]*256+l[o+2]*65536+l[o+3]*16777216},a.prototype.write_uint16=function(o,l){var c=this.output;this.big_endian?(c[o]=l>>>8&255,c[o+1]=l&255):(c[o]=l&255,c[o+1]=l>>>8&255)},a.prototype.write_uint32=function(o,l){var c=this.output;this.big_endian?(c[o]=l>>>24&255,c[o+1]=l>>>16&255,c[o+2]=l>>>8&255,c[o+3]=l&255):(c[o]=l&255,c[o+1]=l>>>8&255,c[o+2]=l>>>16&255,c[o+3]=l>>>24&255)},a.prototype.is_subifd_link=function(o,l){return o===0&&l===34665||o===0&&l===34853||o===34665&&l===40965},a.prototype.exif_format_length=function(o){switch(o){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},a.prototype.exif_format_read=function(o,l){var c;switch(o){case 1:case 2:return c=this.input[l],c;case 6:return c=this.input[l],c|(c&128)*33554430;case 3:return c=this.read_uint16(l),c;case 8:return c=this.read_uint16(l),c|(c&32768)*131070;case 4:return c=this.read_uint32(l),c;case 9:return c=this.read_uint32(l),c|0;case 5:case 10:case 11:case 12:return null;case 7:return null;default:return null}},a.prototype.scan_ifd=function(o,l,c){var h=this.read_uint16(l);l+=2;for(var d=0;d<h;d++){var f=this.read_uint16(l),p=this.read_uint16(l+2),m=this.read_uint32(l+4),y=this.exif_format_length(p),v=m*y,x=v<=4?l+8:this.read_uint32(l+8),b=!1;if(x+v>this.input.length)throw e("unexpected EOF","EBADDATA");for(var E=[],I=x,C=0;C<m;C++,I+=y){var M=this.exif_format_read(p,I);if(M===null){E=null;break}E.push(M)}if(Array.isArray(E)&&p===2){try{E=r(String.fromCharCode.apply(null,E))}catch{E=null}E&&E[E.length-1]==="\0"&&(E=E.slice(0,-1))}this.is_subifd_link(o,f)&&Array.isArray(E)&&Number.isInteger(E[0])&&E[0]>0&&(this.ifds_to_read.push({id:f,offset:E[0]}),b=!0);var D={is_big_endian:this.big_endian,ifd:o,tag:f,format:p,count:m,entry_offset:l+this.start,data_length:v,data_offset:x+this.start,value:E,is_subifd_link:b};if(c(D)===!1){this.aborted=!0;return}l+=12}o===0&&this.ifds_to_read.push({id:1,offset:this.read_uint32(l)})},n.exports.is_jpeg=function(o){return o.length>=4&&o[0]===255&&o[1]===216&&o[2]===255},n.exports.jpeg_segments_each=function(o,l){if(!s(o))throw e("Invalid argument (jpeg_bin), Uint8Array expected","EINVAL");if(typeof l!="function")throw e("Invalid argument (on_segment), Function expected","EINVAL");if(!n.exports.is_jpeg(o))throw e("Unknown file format","ENOTJPEG");for(var c=0,h=o.length,d=!1;;){var f,p;if(c+1>=h)throw e("Unexpected EOF","EBADDATA");var m=o[c],y=o[c+1];if(m===255&&y===255)f=255,p=1;else if(m===255&&y!==0){if(f=y,p=2,!(208<=f&&f<=217||f===1)){if(c+3>=h)throw e("Unexpected EOF","EBADDATA");if(p+=o[c+2]*256+o[c+3],p<2)throw e("Invalid segment length","EBADDATA");if(c+p-1>=h)throw e("Unexpected EOF","EBADDATA")}d&&(f>=208&&f<=215||(d=!1)),f===218&&(d=!0)}else if(d)for(var v=c+1;;v++){if(v>=h)throw e("Unexpected EOF","EBADDATA");if(o[v]===255){if(v+1>=h)throw e("Unexpected EOF","EBADDATA");if(o[v+1]!==0){f=0,p=v-c;break}}}else throw e("Unexpected byte at segment start: "+t(m)+" (offset "+t(c)+")","EBADDATA");if(l({code:f,offset:c,length:p})===!1||f===217)break;c+=p}},n.exports.jpeg_segments_filter=function(o,l){if(!s(o))throw e("Invalid argument (jpeg_bin), Uint8Array expected","EINVAL");if(typeof l!="function")throw e("Invalid argument (on_segment), Function expected","EINVAL");var c=[],h=0;n.exports.jpeg_segments_each(o,function(p){var m=l(p);if(s(m))c.push({data:m}),h+=m.length;else if(Array.isArray(m))m.filter(s).forEach(function(v){c.push({data:v}),h+=v.length});else if(m!==!1){var y={start:p.offset,end:p.offset+p.length};c.length>0&&c[c.length-1].end===y.start?c[c.length-1].end=y.end:c.push(y),h+=p.length}});var d=new Uint8Array(h),f=0;return c.forEach(function(p){var m=p.data||o.subarray(p.start,p.end);d.set(m,f),f+=m.length}),d},n.exports.jpeg_exif_tags_each=function(o,l){if(!s(o))throw e("Invalid argument (jpeg_bin), Uint8Array expected","EINVAL");if(typeof l!="function")throw e("Invalid argument (on_exif_entry), Function expected","EINVAL");n.exports.jpeg_segments_each(o,function(c){if(c.code===218)return!1;if(c.code===225&&c.length>=10&&o[c.offset+4]===69&&o[c.offset+5]===120&&o[c.offset+6]===105&&o[c.offset+7]===102&&o[c.offset+8]===0&&o[c.offset+9]===0)return new a(o,c.offset+10,c.offset+c.length).each(l),!1})},n.exports.jpeg_exif_tags_filter=function(o,l){if(!s(o))throw e("Invalid argument (jpeg_bin), Uint8Array expected","EINVAL");if(typeof l!="function")throw e("Invalid argument (on_exif_entry), Function expected","EINVAL");var c=!1;return n.exports.jpeg_segments_filter(o,function(h){if(!c&&(h.code===218&&(c=!0),h.code===225&&h.length>=10&&o[h.offset+4]===69&&o[h.offset+5]===120&&o[h.offset+6]===105&&o[h.offset+7]===102&&o[h.offset+8]===0&&o[h.offset+9]===0)){var d=new a(o,h.offset+10,h.offset+h.length).filter(l);if(!d)return!1;var f=new Uint8Array(10);return f.set(o.slice(h.offset,h.offset+10)),f[2]=d.length+8>>>8&255,f[3]=d.length+8&255,c=!0,[f,d]}})},n.exports.jpeg_add_comment=function(o,l){var c=!1,h=0;return n.exports.jpeg_segments_filter(o,function(d){if(h++,!(h===1&&d.code===216)&&!(h===2&&d.code===224)&&!c){l=i(l);var f=new Uint8Array(5+l.length),p=0;return f[p++]=255,f[p++]=254,f[p++]=l.length+3>>>8&255,f[p++]=l.length+3&255,l.split("").forEach(function(m){f[p++]=m.charCodeAt(0)&255}),f[p++]=0,c=!0,[f,o.subarray(d.offset,d.offset+d.length)]}})}})(Hd);var Fo=Hd.exports;function Qd(n){return this._getUint8Array(n.blob).then(function(e){if(n.is_jpeg=Fo.is_jpeg(e),!n.is_jpeg)return Promise.resolve(n);n.orig_blob=n.blob;try{var t,i;if(Fo.jpeg_exif_tags_each(e,function(s){if(s.ifd===0&&s.tag===274&&Array.isArray(s.value))return n.orientation=s.value[0]||1,t=s.is_big_endian,i=s.data_offset,!1}),i){var r=t?new Uint8Array([0,1]):new Uint8Array([1,0]);n.blob=new Blob([e.slice(0,i),r,e.slice(i+2)],{type:"image/jpeg"})}}catch{}return n})}function Kd(n){if(!n.is_jpeg)return Promise.resolve(n);var e=n.orientation-1;if(!e)return Promise.resolve(n);var t;e&4?t=this.pica.options.createCanvas(n.out_canvas.height,n.out_canvas.width):t=this.pica.options.createCanvas(n.out_canvas.width,n.out_canvas.height);var i=t.getContext("2d");return i.save(),e&1&&i.transform(-1,0,0,1,t.width,0),e&2&&i.transform(-1,0,0,-1,t.width,t.height),e&4&&i.transform(0,1,1,0,0,0),i.drawImage(n.out_canvas,0,0),i.restore(),n.out_canvas.width=n.out_canvas.height=0,n.out_canvas=t,Promise.resolve(n)}function Vd(n){return n.is_jpeg?Promise.all([this._getUint8Array(n.blob),this._getUint8Array(n.out_blob)]).then(function(e){var t=e[0],i=e[1];if(!Fo.is_jpeg(t))return Promise.resolve(n);var r=[];return Fo.jpeg_segments_each(t,function(s){if(s.code===218)return!1;r.push(s)}),r=r.filter(function(s){return s.code===226?!1:s.code>=224&&s.code<240||s.code===254}).map(function(s){return t.slice(s.offset,s.offset+s.length)}),n.out_blob=new Blob([i.slice(0,2)].concat(r).concat([i.slice(20)]),{type:"image/jpeg"}),n}):Promise.resolve(n)}function w_(n){n.before("_blob_to_image",Qd),n.after("_transform",Kd),n.after("_create_blob",Vd)}pa.jpeg_patch_exif=Qd;pa.jpeg_rotate_canvas=Kd;pa.jpeg_attach_orig_segments=Vd;pa.assign=w_;var du=il,$d=Xd.exports;function Yt(n){if(!(this instanceof Yt))return new Yt(n);n=n||{},this.pica=n.pica||$d({}),this.initialized=!1,this.utils=du}Yt.prototype.use=function(n){var e=[this].concat(Array.prototype.slice.call(arguments,1));return n.apply(n,e),this};Yt.prototype.init=function(){this.use(pa.assign)};Yt.prototype.toBlob=function(n,e){var t=du.assign({max:1/0},e),i={blob:n,opts:t};return this.initialized||(this.init(),this.initialized=!0),Promise.resolve(i).then(this._blob_to_image).then(this._calculate_size).then(this._transform).then(this._cleanup).then(this._create_blob).then(function(r){return r.out_canvas.width=r.out_canvas.height=0,r.out_blob})};Yt.prototype.toCanvas=function(n,e){var t=du.assign({max:1/0},e),i={blob:n,opts:t};return this.initialized||(this.init(),this.initialized=!0),Promise.resolve(i).then(this._blob_to_image).then(this._calculate_size).then(this._transform).then(this._cleanup).then(function(r){return r.out_canvas})};Yt.prototype.before=function(n,e){if(!this[n])throw new Error('Method "'+n+'" does not exist');if(typeof e!="function")throw new Error('Invalid argument "fn", function expected');var t=this[n],i=this;return this[n]=function(r){return e.call(i,r).then(function(s){return t.call(i,s)})},this};Yt.prototype.after=function(n,e){if(!this[n])throw new Error('Method "'+n+'" does not exist');if(typeof e!="function")throw new Error('Invalid argument "fn", function expected');var t=this[n],i=this;return this[n]=function(r){return t.call(i,r).then(function(s){return e.call(i,s)})},this};Yt.prototype._blob_to_image=function(n){var e=window.URL||window.webkitURL||window.mozURL||window.msURL;return n.image=document.createElement("img"),n.image_url=e.createObjectURL(n.blob),n.image.src=n.image_url,new Promise(function(t,i){n.image.onerror=function(){i(new Error("ImageBlobReduce: failed to create Image() from blob"))},n.image.onload=function(){t(n)}})};Yt.prototype._calculate_size=function(n){var e=n.opts.max/Math.max(n.image.width,n.image.height);return e>1&&(e=1),n.transform_width=Math.max(Math.round(n.image.width*e),1),n.transform_height=Math.max(Math.round(n.image.height*e),1),n.scale_factor=e,Promise.resolve(n)};Yt.prototype._transform=function(n){n.out_canvas=this.pica.options.createCanvas(n.transform_width,n.transform_height),n.transform_width=null,n.transform_height=null;var e={alpha:n.blob.type==="image/png"};return this.utils.assign(e,this.utils.pick_pica_resize_options(n.opts)),this.pica.resize(n.image,n.out_canvas,e).then(function(){return n})};Yt.prototype._cleanup=function(n){n.image.src="",n.image=null;var e=window.URL||window.webkitURL||window.mozURL||window.msURL;return e.revokeObjectURL&&e.revokeObjectURL(n.image_url),n.image_url=null,Promise.resolve(n)};Yt.prototype._create_blob=function(n){return this.pica.toBlob(n.out_canvas,n.blob.type).then(function(e){return n.out_blob=e,n})};Yt.prototype._getUint8Array=function(n){return n.arrayBuffer?n.arrayBuffer().then(function(e){return new Uint8Array(e)}):new Promise(function(e,t){var i=new FileReader;i.readAsArrayBuffer(n),i.onload=function(){e(new Uint8Array(i.result))},i.onerror=function(){t(new Error("ImageBlobReduce: failed to load data from input blob")),i.abort()},i.onabort=function(){t(new Error("ImageBlobReduce: failed to load data from input blob (aborted)"))}})};Yt.pica=$d;var x_=Yt,mo,E_=new Uint8Array(16);function b_(){if(!mo&&(mo=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!mo))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return mo(E_)}var C_=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function I_(n){return typeof n=="string"&&C_.test(n)}var Bt=[];for(var dc=0;dc<256;++dc)Bt.push((dc+256).toString(16).substr(1));function S_(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(Bt[n[e+0]]+Bt[n[e+1]]+Bt[n[e+2]]+Bt[n[e+3]]+"-"+Bt[n[e+4]]+Bt[n[e+5]]+"-"+Bt[n[e+6]]+Bt[n[e+7]]+"-"+Bt[n[e+8]]+Bt[n[e+9]]+"-"+Bt[n[e+10]]+Bt[n[e+11]]+Bt[n[e+12]]+Bt[n[e+13]]+Bt[n[e+14]]+Bt[n[e+15]]).toLowerCase();if(!I_(t))throw TypeError("Stringified UUID is invalid");return t}var yh,fc,gc=0,pc=0;function R_(n,e,t){var i=e&&t||0,r=e||new Array(16);n=n||{};var s=n.node||yh,a=n.clockseq!==void 0?n.clockseq:fc;if(s==null||a==null){var o=n.random||(n.rng||b_)();s==null&&(s=yh=[o[0]|1,o[1],o[2],o[3],o[4],o[5]]),a==null&&(a=fc=(o[6]<<8|o[7])&16383)}var l=n.msecs!==void 0?n.msecs:Date.now(),c=n.nsecs!==void 0?n.nsecs:pc+1,h=l-gc+(c-pc)/1e4;if(h<0&&n.clockseq===void 0&&(a=a+1&16383),(h<0||l>gc)&&n.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");gc=l,pc=c,fc=a,l+=122192928e5;var d=((l&268435455)*1e4+c)%4294967296;r[i++]=d>>>24&255,r[i++]=d>>>16&255,r[i++]=d>>>8&255,r[i++]=d&255;var f=l/4294967296*1e4&268435455;r[i++]=f>>>8&255,r[i++]=f&255,r[i++]=f>>>24&15|16,r[i++]=f>>>16&255,r[i++]=a>>>8|128,r[i++]=a&255;for(var p=0;p<6;++p)r[i+p]=s[p];return e||S_(r)}class T_{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}var Bi=T_,ls={PROPERTYCHANGE:"propertychange"};class O_{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}var fu=O_;function M_(n,e,t){let i,r;t=t||er;let s=0,a=n.length,o=!1;for(;s<a;)i=s+(a-s>>1),r=+t(n[i],e),r<0?s=i+1:(a=i,o=!r);return o?s:~s}function er(n,e){return n>e?1:n<e?-1:0}function gu(n,e,t){const i=n.length;if(n[0]<=e)return 0;if(e<=n[i-1])return i-1;let r;if(t>0){for(r=1;r<i;++r)if(n[r]<e)return r-1}else if(t<0){for(r=1;r<i;++r)if(n[r]<=e)return r}else for(r=1;r<i;++r){if(n[r]==e)return r;if(n[r]<e)return typeof t=="function"?t(e,n[r-1],n[r])>0?r-1:r:n[r-1]-e<e-n[r]?r-1:r}return i-1}function L_(n,e,t){for(;e<t;){const i=n[e];n[e]=n[t],n[t]=i,++e,--t}}function Pi(n,e){const t=Array.isArray(e)?e:[e],i=t.length;for(let r=0;r<i;r++)n[n.length]=t[r]}function Cn(n,e){const t=n.length;if(t!==e.length)return!1;for(let i=0;i<t;i++)if(n[i]!==e[i])return!1;return!0}function P_(n,e,t){const i=e||er;return n.every(function(r,s){if(s===0)return!0;const a=i(n[s-1],r);return!(a>0||t&&a===0)})}function ra(){return!0}function nl(){return!1}function cs(){}function F_(n){let e=!1,t,i,r;return function(){const s=Array.prototype.slice.call(arguments);return(!e||this!==r||!Cn(s,i))&&(e=!0,r=this,i=s,t=n.apply(this,arguments)),t}}function _a(n){for(const e in n)delete n[e]}function us(n){let e;for(e in n)return!1;return!e}class D_ extends fu{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const i=this.listeners_||(this.listeners_={}),r=i[e]||(i[e]=[]);r.includes(t)||r.push(t)}dispatchEvent(e){const t=typeof e=="string",i=t?e:e.type,r=this.listeners_&&this.listeners_[i];if(!r)return;const s=t?new Bi(e):e;s.target||(s.target=this.eventTarget_||this);const a=this.dispatching_||(this.dispatching_={}),o=this.pendingRemovals_||(this.pendingRemovals_={});i in a||(a[i]=0,o[i]=0),++a[i];let l;for(let c=0,h=r.length;c<h;++c)if("handleEvent"in r[c]?l=r[c].handleEvent(s):l=r[c].call(this,s),l===!1||s.propagationStopped){l=!1;break}if(--a[i]===0){let c=o[i];for(delete o[i];c--;)this.removeEventListener(i,cs);delete a[i]}return l}disposeInternal(){this.listeners_&&_a(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){const i=this.listeners_&&this.listeners_[e];if(i){const r=i.indexOf(t);r!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(i[r]=cs,++this.pendingRemovals_[e]):(i.splice(r,1),i.length===0&&delete this.listeners_[e]))}}}var rl=D_,Fe={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function We(n,e,t,i,r){if(i&&i!==n&&(t=t.bind(i)),r){const a=t;t=function(){n.removeEventListener(e,t),a.apply(this,arguments)}}const s={target:n,type:e,listener:t};return n.addEventListener(e,t),s}function Do(n,e,t,i){return We(n,e,t,i,!0)}function st(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),_a(n))}class sl extends rl{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(Fe.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const i=e.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=We(this,e[s],t);return r}return We(this,e,t)}onceInternal(e,t){let i;if(Array.isArray(e)){const r=e.length;i=new Array(r);for(let s=0;s<r;++s)i[s]=Do(this,e[s],t)}else i=Do(this,e,t);return t.ol_key=i,i}unInternal(e,t){const i=t.ol_key;if(i)k_(i);else if(Array.isArray(e))for(let r=0,s=e.length;r<s;++r)this.removeEventListener(e[r],t);else this.removeEventListener(e,t)}}sl.prototype.on;sl.prototype.once;sl.prototype.un;function k_(n){if(Array.isArray(n))for(let e=0,t=n.length;e<t;++e)st(n[e]);else st(n)}var Zd=sl;function Le(){throw new Error("Unimplemented abstract method.")}let N_=0;function Ve(n){return n.ol_uid||(n.ol_uid=String(++N_))}class vh extends Bi{constructor(e,t,i){super(e),this.key=t,this.oldValue=i}}class B_ extends Zd{constructor(e){super(),this.on,this.once,this.un,Ve(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}hasProperties(){return!!this.values_}notify(e,t){let i;i=`change:${e}`,this.hasListener(i)&&this.dispatchEvent(new vh(i,e,t)),i=ls.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new vh(i,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,i){const r=this.values_||(this.values_={});if(i)r[e]=t;else{const s=r[e];r[e]=t,s!==t&&this.notify(e,s)}}setProperties(e,t){for(const i in e)this.set(i,e[i],t)}applyProperties(e){!e.values_||Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const i=this.values_[e];delete this.values_[e],us(this.values_)&&(this.values_=null),t||this.notify(e,i)}}}var Ai=B_;const G_={1:"The view center is not defined",2:"The view resolution is not defined",3:"The view rotation is not defined",4:"`image` and `src` cannot be provided at the same time",5:"`imgSize` must be set when `image` is provided",7:"`format` must be set when `url` is set",8:"Unknown `serverType` configured",9:"`url` must be configured or set using `#setUrl()`",10:"The default `geometryFunction` can only handle `Point` geometries",11:"`options.featureTypes` must be an Array",12:"`options.geometryName` must also be provided when `options.bbox` is set",13:"Invalid corner",14:"Invalid color",15:"Tried to get a value for a key that does not exist in the cache",16:"Tried to set a value for a key that is used already",17:"`resolutions` must be sorted in descending order",18:"Either `origin` or `origins` must be configured, never both",19:"Number of `tileSizes` and `resolutions` must be equal",20:"Number of `origins` and `resolutions` must be equal",22:"Either `tileSize` or `tileSizes` must be configured, never both",24:"Invalid extent or geometry provided as `geometry`",25:"Cannot fit empty extent provided as `geometry`",26:"Features must have an id set",27:"Features must have an id set",28:'`renderMode` must be `"hybrid"` or `"vector"`',30:"The passed `feature` was already added to the source",31:"Tried to enqueue an `element` that was already added to the queue",32:"Transformation matrix cannot be inverted",33:"Invalid units",34:"Invalid geometry layout",36:"Unknown SRS type",37:"Unknown geometry type found",38:"`styleMapValue` has an unknown type",39:"Unknown geometry type",40:"Expected `feature` to have a geometry",41:"Expected an `ol/style/Style` or an array of `ol/style/Style.js`",42:"Question unknown, the answer is 42",43:"Expected `layers` to be an array or a `Collection`",47:"Expected `controls` to be an array or an `ol/Collection`",48:"Expected `interactions` to be an array or an `ol/Collection`",49:"Expected `overlays` to be an array or an `ol/Collection`",50:"`options.featureTypes` should be an Array",51:"Either `url` or `tileJSON` options must be provided",52:"Unknown `serverType` configured",53:"Unknown `tierSizeCalculation` configured",55:"The {-y} placeholder requires a tile grid with extent",56:"mapBrowserEvent must originate from a pointer event",57:"At least 2 conditions are required",59:"Invalid command found in the PBF",60:"Missing or invalid `size`",61:"Cannot determine IIIF Image API version from provided image information JSON",62:"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`",64:"Layer opacity must be a number",66:"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`",67:"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both",68:"A VectorTile source can only be rendered if it has a projection compatible with the view projection",69:"`width` or `height` cannot be provided together with `scale`"};class j_ extends Error{constructor(e){const t=G_[e];super(t),this.code=e,this.name="AssertionError",this.message=t}}var qd=j_,Jt={ADD:"add",REMOVE:"remove"};const Ah={LENGTH:"length"};class yo extends Bi{constructor(e,t,i){super(e),this.element=t,this.index=i}}class z_ extends Ai{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e||[],this.unique_)for(let i=0,r=this.array_.length;i<r;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,i=e.length;t<i;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let i=0,r=t.length;i<r;++i)e(t[i],i,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(Ah.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new yo(Jt.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let i=0,r=t.length;i<r;++i)if(t[i]===e)return this.removeAt(i)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new yo(Jt.REMOVE,t,e)),t}setAt(e,t){const i=this.getLength();if(e>=i){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const r=this.array_[e];this.array_[e]=t,this.dispatchEvent(new yo(Jt.REMOVE,r,e)),this.dispatchEvent(new yo(Jt.ADD,t,e))}updateLength_(){this.set(Ah.LENGTH,this.array_.length)}assertUnique_(e,t){for(let i=0,r=this.array_.length;i<r;++i)if(this.array_[i]===e&&i!==t)throw new qd(58)}}var Mi=z_;const En=typeof navigator!="undefined"&&typeof navigator.userAgent!="undefined"?navigator.userAgent.toLowerCase():"",U_=En.includes("firefox"),W_=En.includes("safari")&&!En.includes("chrom");W_&&(En.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(En));const Y_=En.includes("webkit")&&!En.includes("edge"),X_=En.includes("macintosh"),Jd=typeof devicePixelRatio!="undefined"?devicePixelRatio:1,pu=typeof WorkerGlobalScope!="undefined"&&typeof OffscreenCanvas!="undefined"&&self instanceof WorkerGlobalScope,H_=typeof Image!="undefined"&&Image.prototype.decode,ef=function(){let n=!1;try{const e=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return n}();function Ne(n,e){if(!n)throw new qd(e)}new Array(6);function Fi(){return[1,0,0,1,0,0]}function Q_(n,e,t,i,r,s,a){return n[0]=e,n[1]=t,n[2]=i,n[3]=r,n[4]=s,n[5]=a,n}function K_(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n}function Rt(n,e){const t=e[0],i=e[1];return e[0]=n[0]*t+n[2]*i+n[4],e[1]=n[1]*t+n[3]*i+n[5],e}function V_(n,e,t){return Q_(n,e,0,0,t,0,0)}function bn(n,e,t,i,r,s,a,o){const l=Math.sin(s),c=Math.cos(s);return n[0]=i*c,n[1]=r*l,n[2]=-i*l,n[3]=r*c,n[4]=a*i*c-o*i*l+e,n[5]=a*r*l+o*r*c+t,n}function _u(n,e){const t=$_(e);Ne(t!==0,32);const i=e[0],r=e[1],s=e[2],a=e[3],o=e[4],l=e[5];return n[0]=a/t,n[1]=-r/t,n[2]=-s/t,n[3]=i/t,n[4]=(s*l-a*o)/t,n[5]=-(i*l-r*o)/t,n}function $_(n){return n[0]*n[3]-n[1]*n[2]}let wh;function tf(n){const e="matrix("+n.join(", ")+")";if(pu)return e;const t=wh||(wh=document.createElement("div"));return t.style.transform=e,t.style.transform}var St={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function xh(n){const e=ui();for(let t=0,i=n.length;t<i;++t)Js(e,n[t]);return e}function mu(n,e,t){return t?(t[0]=n[0]-e,t[1]=n[1]-e,t[2]=n[2]+e,t[3]=n[3]+e,t):[n[0]-e,n[1]-e,n[2]+e,n[3]+e]}function nf(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n.slice()}function ir(n,e,t){let i,r;return e<n[0]?i=n[0]-e:n[2]<e?i=e-n[2]:i=0,t<n[1]?r=n[1]-t:n[3]<t?r=t-n[3]:r=0,i*i+r*r}function al(n,e){return yu(n,e[0],e[1])}function ns(n,e){return n[0]<=e[0]&&e[2]<=n[2]&&n[1]<=e[1]&&e[3]<=n[3]}function yu(n,e,t){return n[0]<=e&&e<=n[2]&&n[1]<=t&&t<=n[3]}function Bc(n,e){const t=n[0],i=n[1],r=n[2],s=n[3],a=e[0],o=e[1];let l=St.UNKNOWN;return a<t?l=l|St.LEFT:a>r&&(l=l|St.RIGHT),o<i?l=l|St.BELOW:o>s&&(l=l|St.ABOVE),l===St.UNKNOWN&&(l=St.INTERSECTING),l}function ui(){return[1/0,1/0,-1/0,-1/0]}function tn(n,e,t,i,r){return r?(r[0]=n,r[1]=e,r[2]=t,r[3]=i,r):[n,e,t,i]}function ma(n){return tn(1/0,1/0,-1/0,-1/0,n)}function Z_(n,e){const t=n[0],i=n[1];return tn(t,i,t,i,e)}function rf(n,e,t,i,r){const s=ma(r);return af(s,n,e,t,i)}function sa(n,e){return n[0]==e[0]&&n[2]==e[2]&&n[1]==e[1]&&n[3]==e[3]}function sf(n,e){return e[0]<n[0]&&(n[0]=e[0]),e[2]>n[2]&&(n[2]=e[2]),e[1]<n[1]&&(n[1]=e[1]),e[3]>n[3]&&(n[3]=e[3]),n}function Js(n,e){e[0]<n[0]&&(n[0]=e[0]),e[0]>n[2]&&(n[2]=e[0]),e[1]<n[1]&&(n[1]=e[1]),e[1]>n[3]&&(n[3]=e[1])}function af(n,e,t,i,r){for(;t<i;t+=r)q_(n,e[t],e[t+1]);return n}function q_(n,e,t){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}function of(n,e){let t;return t=e(ol(n)),t||(t=e(ll(n)),t)||(t=e(cl(n)),t)||(t=e(nr(n)),t)?t:!1}function Gc(n){let e=0;return vu(n)||(e=rt(n)*Di(n)),e}function ol(n){return[n[0],n[1]]}function ll(n){return[n[2],n[1]]}function tr(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function J_(n,e){let t;return e==="bottom-left"?t=ol(n):e==="bottom-right"?t=ll(n):e==="top-left"?t=nr(n):e==="top-right"?t=cl(n):Ne(!1,13),t}function jc(n,e,t,i,r){const[s,a,o,l,c,h,d,f]=zc(n,e,t,i);return tn(Math.min(s,o,c,d),Math.min(a,l,h,f),Math.max(s,o,c,d),Math.max(a,l,h,f),r)}function zc(n,e,t,i){const r=e*i[0]/2,s=e*i[1]/2,a=Math.cos(t),o=Math.sin(t),l=r*a,c=r*o,h=s*a,d=s*o,f=n[0],p=n[1];return[f-l+d,p-c-h,f-l-d,p-c+h,f+l-d,p+c+h,f+l+d,p+c-h,f-l+d,p-c-h]}function Di(n){return n[3]-n[1]}function ea(n,e,t){const i=t||ui();return Qt(n,e)?(n[0]>e[0]?i[0]=n[0]:i[0]=e[0],n[1]>e[1]?i[1]=n[1]:i[1]=e[1],n[2]<e[2]?i[2]=n[2]:i[2]=e[2],n[3]<e[3]?i[3]=n[3]:i[3]=e[3]):ma(i),i}function nr(n){return[n[0],n[3]]}function cl(n){return[n[2],n[3]]}function rt(n){return n[2]-n[0]}function Qt(n,e){return n[0]<=e[2]&&n[2]>=e[0]&&n[1]<=e[3]&&n[3]>=e[1]}function vu(n){return n[2]<n[0]||n[3]<n[1]}function em(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n}function tm(n,e,t){let i=!1;const r=Bc(n,e),s=Bc(n,t);if(r===St.INTERSECTING||s===St.INTERSECTING)i=!0;else{const a=n[0],o=n[1],l=n[2],c=n[3],h=e[0],d=e[1],f=t[0],p=t[1],m=(p-d)/(f-h);let y,v;!!(s&St.ABOVE)&&!(r&St.ABOVE)&&(y=f-(p-c)/m,i=y>=a&&y<=l),!i&&!!(s&St.RIGHT)&&!(r&St.RIGHT)&&(v=p-(f-l)*m,i=v>=o&&v<=c),!i&&!!(s&St.BELOW)&&!(r&St.BELOW)&&(y=f-(p-o)/m,i=y>=a&&y<=l),!i&&!!(s&St.LEFT)&&!(r&St.LEFT)&&(v=p-(f-a)*m,i=v>=o&&v<=c)}return i}function lf(n,e){const t=e.getExtent(),i=tr(n);if(e.canWrapX()&&(i[0]<t[0]||i[0]>=t[2])){const r=rt(t),a=Math.floor((i[0]-t[0])/r)*r;n[0]-=a,n[2]-=a}return n}function im(n,e){if(e.canWrapX()){const t=e.getExtent();if(!isFinite(n[0])||!isFinite(n[2]))return[[t[0],n[1],t[2],n[3]]];lf(n,e);const i=rt(t);if(rt(n)>i)return[[t[0],n[1],t[2],n[3]]];if(n[0]<t[0])return[[n[0]+i,n[1],t[2],n[3]],[t[0],n[1],n[2],n[3]]];if(n[2]>t[2])return[[n[0],n[1],t[2],n[3]],[t[0],n[1],n[2]-i,n[3]]]}return[n]}function xt(n,e,t){return Math.min(Math.max(n,e),t)}function nm(n,e,t,i,r,s){const a=r-t,o=s-i;if(a!==0||o!==0){const l=((n-t)*a+(e-i)*o)/(a*a+o*o);l>1?(t=r,i=s):l>0&&(t+=a*l,i+=o*l)}return Vn(n,e,t,i)}function Vn(n,e,t,i){const r=t-n,s=i-e;return r*r+s*s}function rm(n){const e=n.length;for(let i=0;i<e;i++){let r=i,s=Math.abs(n[i][i]);for(let o=i+1;o<e;o++){const l=Math.abs(n[o][i]);l>s&&(s=l,r=o)}if(s===0)return null;const a=n[r];n[r]=n[i],n[i]=a;for(let o=i+1;o<e;o++){const l=-n[o][i]/n[i][i];for(let c=i;c<e+1;c++)i==c?n[o][c]=0:n[o][c]+=l*n[i][c]}}const t=new Array(e);for(let i=e-1;i>=0;i--){t[i]=n[i][e]/n[i][i];for(let r=i-1;r>=0;r--)n[r][e]-=n[r][i]*t[i]}return t}function Eh(n){return n*180/Math.PI}function $n(n){return n*Math.PI/180}function Zn(n,e){const t=n%e;return t*e<0?t+e:t}function ii(n,e,t){return n+t*(e-n)}function Au(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}function vo(n,e){return Math.floor(Au(n,e))}function Ao(n,e){return Math.ceil(Au(n,e))}const sm=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,am=/^([a-z]*)$|^hsla?\(.*\)$/i;function cf(n){return typeof n=="string"?n:uf(n)}function om(n){const e=document.createElement("div");if(e.style.color=n,e.style.color!==""){document.body.appendChild(e);const t=getComputedStyle(e).color;return document.body.removeChild(e),t}return""}const lm=function(){const e={};let t=0;return function(i){let r;if(e.hasOwnProperty(i))r=e[i];else{if(t>=1024){let s=0;for(const a in e)(s++&3)===0&&(delete e[a],--t)}r=cm(i),e[i]=r,++t}return r}}();function ko(n){return Array.isArray(n)?n:lm(n)}function cm(n){let e,t,i,r,s;if(am.exec(n)&&(n=om(n)),sm.exec(n)){const a=n.length-1;let o;a<=4?o=1:o=2;const l=a===4||a===8;e=parseInt(n.substr(1+0*o,o),16),t=parseInt(n.substr(1+1*o,o),16),i=parseInt(n.substr(1+2*o,o),16),l?r=parseInt(n.substr(1+3*o,o),16):r=255,o==1&&(e=(e<<4)+e,t=(t<<4)+t,i=(i<<4)+i,l&&(r=(r<<4)+r)),s=[e,t,i,r/255]}else n.startsWith("rgba(")?(s=n.slice(5,-1).split(",").map(Number),bh(s)):n.startsWith("rgb(")?(s=n.slice(4,-1).split(",").map(Number),s.push(1),bh(s)):Ne(!1,14);return s}function bh(n){return n[0]=xt(n[0]+.5|0,0,255),n[1]=xt(n[1]+.5|0,0,255),n[2]=xt(n[2]+.5|0,0,255),n[3]=xt(n[3],0,1),n}function uf(n){let e=n[0];e!=(e|0)&&(e=e+.5|0);let t=n[1];t!=(t|0)&&(t=t+.5|0);let i=n[2];i!=(i|0)&&(i=i+.5|0);const r=n[3]===void 0?1:Math.round(n[3]*100)/100;return"rgba("+e+","+t+","+i+","+r+")"}class um{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const i=this.cache_[t];(e++&3)===0&&!i.hasListener()&&(delete this.cache_[t],--this.cacheSize_)}}}get(e,t,i){const r=Ch(e,t,i);return r in this.cache_?this.cache_[r]:null}set(e,t,i,r){const s=Ch(e,t,i);this.cache_[s]=r,++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function Ch(n,e,t){const i=t?cf(t):"null";return e+":"+n+":"+i}const No=new um;var Ze={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class hm extends Ai{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[Ze.OPACITY]=e.opacity!==void 0?e.opacity:1,Ne(typeof t[Ze.OPACITY]=="number",64),t[Ze.VISIBLE]=e.visible!==void 0?e.visible:!0,t[Ze.Z_INDEX]=e.zIndex,t[Ze.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[Ze.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[Ze.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[Ze.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},i=this.getZIndex();return t.opacity=xt(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=i===void 0&&!t.managed?1/0:i,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return Le()}getLayerStatesArray(e){return Le()}getExtent(){return this.get(Ze.EXTENT)}getMaxResolution(){return this.get(Ze.MAX_RESOLUTION)}getMinResolution(){return this.get(Ze.MIN_RESOLUTION)}getMinZoom(){return this.get(Ze.MIN_ZOOM)}getMaxZoom(){return this.get(Ze.MAX_ZOOM)}getOpacity(){return this.get(Ze.OPACITY)}getSourceState(){return Le()}getVisible(){return this.get(Ze.VISIBLE)}getZIndex(){return this.get(Ze.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(Ze.EXTENT,e)}setMaxResolution(e){this.set(Ze.MAX_RESOLUTION,e)}setMinResolution(e){this.set(Ze.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(Ze.MAX_ZOOM,e)}setMinZoom(e){this.set(Ze.MIN_ZOOM,e)}setOpacity(e){Ne(typeof e=="number",64),this.set(Ze.OPACITY,e)}setVisible(e){this.set(Ze.VISIBLE,e)}setZIndex(e){this.set(Ze.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}var hf=hm,xn={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},Wt={ANIMATING:0,INTERACTING:1},yi={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};const dm=42,wu=256,hs={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class fm{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||hs[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}var df=fm;const ya=6378137,rs=Math.PI*ya,gm=[-rs,-rs,rs,rs],pm=[-180,-85,180,85],wo=ya*Math.log(Math.tan(Math.PI/2));class Wr extends df{constructor(e){super({code:e,units:"m",extent:gm,global:!0,worldExtent:pm,getPointResolution:function(t,i){return t/Math.cosh(i[1]/ya)}})}}const Ih=[new Wr("EPSG:3857"),new Wr("EPSG:102100"),new Wr("EPSG:102113"),new Wr("EPSG:900913"),new Wr("http://www.opengis.net/def/crs/EPSG/0/3857"),new Wr("http://www.opengis.net/gml/srs/epsg.xml#3857")];function _m(n,e,t){const i=n.length;t=t>1?t:2,e===void 0&&(t>2?e=n.slice():e=new Array(i));for(let r=0;r<i;r+=t){e[r]=rs*n[r]/180;let s=ya*Math.log(Math.tan(Math.PI*(+n[r+1]+90)/360));s>wo?s=wo:s<-wo&&(s=-wo),e[r+1]=s}return e}function mm(n,e,t){const i=n.length;t=t>1?t:2,e===void 0&&(t>2?e=n.slice():e=new Array(i));for(let r=0;r<i;r+=t)e[r]=180*n[r]/rs,e[r+1]=360*Math.atan(Math.exp(n[r+1]/ya))/Math.PI-90;return e}const ym=6378137,Sh=[-180,-90,180,90],vm=Math.PI*ym/180;class zn extends df{constructor(e,t){super({code:e,units:"degrees",extent:Sh,axisOrientation:t,global:!0,metersPerUnit:vm,worldExtent:Sh})}}const Rh=[new zn("CRS:84"),new zn("EPSG:4326","neu"),new zn("urn:ogc:def:crs:OGC:1.3:CRS84"),new zn("urn:ogc:def:crs:OGC:2:84"),new zn("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new zn("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new zn("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let Uc={};function Am(n){return Uc[n]||Uc[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function wm(n,e){Uc[n]=e}let as={};function Bo(n,e,t){const i=n.getCode(),r=e.getCode();i in as||(as[i]={}),as[i][r]=t}function xm(n,e){let t;return n in as&&e in as[n]&&(t=as[n][e]),t}function Em(n,e){return n[0]+=+e[0],n[1]+=+e[1],n}function Go(n,e){let t=!0;for(let i=n.length-1;i>=0;--i)if(n[i]!=e[i]){t=!1;break}return t}function xu(n,e){const t=Math.cos(e),i=Math.sin(e),r=n[0]*t-n[1]*i,s=n[1]*t+n[0]*i;return n[0]=r,n[1]=s,n}function bm(n,e){return n[0]*=e,n[1]*=e,n}function ff(n,e){if(e.canWrapX()){const t=rt(e.getExtent()),i=Cm(n,e,t);i&&(n[0]-=i*t)}return n}function Cm(n,e,t){const i=e.getExtent();let r=0;return e.canWrapX()&&(n[0]<i[0]||n[0]>i[2])&&(t=t||rt(i),r=Math.floor((n[0]-i[0])/t)),r}const gf=63710088e-1;function Th(n,e,t){t=t||gf;const i=$n(n[1]),r=$n(e[1]),s=(r-i)/2,a=$n(e[0]-n[0])/2,o=Math.sin(s)*Math.sin(s)+Math.sin(a)*Math.sin(a)*Math.cos(i)*Math.cos(r);return 2*t*Math.atan2(Math.sqrt(o),Math.sqrt(1-o))}function Im(n,e,t,i){i=i||gf;const r=$n(n[1]),s=$n(n[0]),a=e/i,o=Math.asin(Math.sin(r)*Math.cos(a)+Math.cos(r)*Math.sin(a)*Math.cos(t)),l=s+Math.atan2(Math.sin(t)*Math.sin(a)*Math.cos(r),Math.cos(a)-Math.sin(r)*Math.sin(o));return[Eh(l),Eh(o)]}const pf={info:1,warn:2,error:3,none:4};let Sm=pf.info;function _f(...n){Sm>pf.warn||console.warn(...n)}let Wc=!0;function mf(n){Wc=!(n===void 0?!0:n)}function Eu(n,e){if(e!==void 0){for(let t=0,i=n.length;t<i;++t)e[t]=n[t];e=e}else e=n.slice();return e}function bu(n,e){if(e!==void 0&&n!==e){for(let t=0,i=n.length;t<i;++t)e[t]=n[t];n=e}return n}function Rm(n){wm(n.getCode(),n),Bo(n,n,Eu)}function Tm(n){n.forEach(Rm)}function yt(n){return typeof n=="string"?Am(n):n||null}function jo(n,e,t,i){n=yt(n);let r;const s=n.getPointResolutionFunc();if(s){if(r=s(e,t),i&&i!==n.getUnits()){const a=n.getMetersPerUnit();a&&(r=r*a/hs[i])}}else{const a=n.getUnits();if(a=="degrees"&&!i||i=="degrees")r=e;else{const o=ul(n,yt("EPSG:4326"));if(o===bu&&a!=="degrees")r=e*n.getMetersPerUnit();else{let c=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];c=o(c,c,2);const h=Th(c.slice(0,2),c.slice(2,4)),d=Th(c.slice(4,6),c.slice(6,8));r=(h+d)/2}const l=i?hs[i]:n.getMetersPerUnit();l!==void 0&&(r/=l)}}return r}function Oh(n){Tm(n),n.forEach(function(e){n.forEach(function(t){e!==t&&Bo(e,t,Eu)})})}function Om(n,e,t,i){n.forEach(function(r){e.forEach(function(s){Bo(r,s,t),Bo(s,r,i)})})}function Cu(n,e){if(n){if(typeof n=="string")return yt(n)}else return yt(e);return n}function ci(n,e){return mf(),Iu(n,"EPSG:4326",e!==void 0?e:"EPSG:3857")}function Zi(n,e){const t=Iu(n,e!==void 0?e:"EPSG:3857","EPSG:4326"),i=t[0];return(i<-180||i>180)&&(t[0]=Zn(i+180,360)-180),t}function Xn(n,e){if(n===e)return!0;const t=n.getUnits()===e.getUnits();return(n.getCode()===e.getCode()||ul(n,e)===Eu)&&t}function ul(n,e){const t=n.getCode(),i=e.getCode();let r=xm(t,i);return r||(r=bu),r}function zo(n,e){const t=yt(n),i=yt(e);return ul(t,i)}function Iu(n,e,t){return zo(e,t)(n,void 0,n.length)}function Yc(n,e){return n}function Ki(n,e){return Wc&&!Go(n,[0,0])&&n[0]>=-180&&n[0]<=180&&n[1]>=-90&&n[1]<=90&&(Wc=!1,_f("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),n}function Su(n,e){return n}function vn(n,e){return n}function Mm(n,e){return n}function Lm(){Oh(Ih),Oh(Rh),Om(Rh,Ih,_m,mm)}Lm();function Mh(n,e,t){return function(i,r,s,a,o){if(!i)return;if(!r&&!e)return i;const l=e?0:s[0]*r,c=e?0:s[1]*r,h=o?o[0]:0,d=o?o[1]:0;let f=n[0]+l/2+h,p=n[2]-l/2+h,m=n[1]+c/2+d,y=n[3]-c/2+d;f>p&&(f=(p+f)/2,p=f),m>y&&(m=(y+m)/2,y=m);let v=xt(i[0],f,p),x=xt(i[1],m,y);if(a&&t&&r){const b=30*r;v+=-b*Math.log(1+Math.max(0,f-i[0])/b)+b*Math.log(1+Math.max(0,i[0]-p)/b),x+=-b*Math.log(1+Math.max(0,m-i[1])/b)+b*Math.log(1+Math.max(0,i[1]-y)/b)}return[v,x]}}function Pm(n){return n}function Ru(n,e,t,i){const r=rt(e)/t[0],s=Di(e)/t[1];return i?Math.min(n,Math.max(r,s)):Math.min(n,Math.min(r,s))}function Tu(n,e,t){let i=Math.min(n,e);const r=50;return i*=Math.log(1+r*Math.max(0,n/e-1))/r+1,t&&(i=Math.max(i,t),i/=Math.log(1+r*Math.max(0,t/n-1))/r+1),xt(i,t/2,e*2)}function Fm(n,e,t,i){return e=e!==void 0?e:!0,function(r,s,a,o){if(r!==void 0){const l=n[0],c=n[n.length-1],h=t?Ru(l,t,a,i):l;if(o)return e?Tu(r,h,c):xt(r,c,h);const d=Math.min(h,r),f=Math.floor(gu(n,d,s));return n[f]>h&&f<n.length-1?n[f+1]:n[f]}}}function Dm(n,e,t,i,r,s){return i=i!==void 0?i:!0,t=t!==void 0?t:0,function(a,o,l,c){if(a!==void 0){const h=r?Ru(e,r,l,s):e;if(c)return i?Tu(a,h,t):xt(a,t,h);const d=1e-9,f=Math.ceil(Math.log(e/h)/Math.log(n)-d),p=-o*(.5-d)+.5,m=Math.min(h,a),y=Math.floor(Math.log(e/m)/Math.log(n)+p),v=Math.max(f,y),x=e/Math.pow(n,v);return xt(x,t,h)}}}function Lh(n,e,t,i,r){return t=t!==void 0?t:!0,function(s,a,o,l){if(s!==void 0){const c=i?Ru(n,i,o,r):n;return!t||!l?xt(s,e,c):Tu(s,c,e)}}}function Ou(n){if(n!==void 0)return 0}function Ph(n){if(n!==void 0)return n}function km(n){const e=2*Math.PI/n;return function(t,i){if(i)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t}}function Nm(n){return n=n||$n(5),function(e,t){if(t)return e;if(e!==void 0)return Math.abs(e)<=n?0:e}}function yf(n){return Math.pow(n,3)}function gs(n){return 1-yf(1-n)}function Bm(n){return 3*n*n-2*n*n*n}function Gm(n){return n}function qn(n,e,t,i,r,s){s=s||[];let a=0;for(let o=e;o<t;o+=i){const l=n[o],c=n[o+1];s[a++]=r[0]*l+r[2]*c+r[4],s[a++]=r[1]*l+r[3]*c+r[5]}return s&&s.length!=a&&(s.length=a),s}function vf(n,e,t,i,r,s,a){a=a||[];const o=Math.cos(r),l=Math.sin(r),c=s[0],h=s[1];let d=0;for(let f=e;f<t;f+=i){const p=n[f]-c,m=n[f+1]-h;a[d++]=c+p*o-m*l,a[d++]=h+p*l+m*o;for(let y=f+2;y<f+i;++y)a[d++]=n[y]}return a&&a.length!=d&&(a.length=d),a}function jm(n,e,t,i,r,s,a,o){o=o||[];const l=a[0],c=a[1];let h=0;for(let d=e;d<t;d+=i){const f=n[d]-l,p=n[d+1]-c;o[h++]=l+r*f,o[h++]=c+s*p;for(let m=d+2;m<d+i;++m)o[h++]=n[m]}return o&&o.length!=h&&(o.length=h),o}function zm(n,e,t,i,r,s,a){a=a||[];let o=0;for(let l=e;l<t;l+=i){a[o++]=n[l]+r,a[o++]=n[l+1]+s;for(let c=l+2;c<l+i;++c)a[o++]=n[c]}return a&&a.length!=o&&(a.length=o),a}const Fh=Fi();class Um extends Ai{constructor(){super(),this.extent_=ui(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=F_(function(e,t,i){if(!i)return this.getSimplifiedGeometry(t);const r=this.clone();return r.applyTransform(i),r.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return Le()}closestPointXY(e,t,i,r){return Le()}containsXY(e,t){const i=this.getClosestPoint([e,t]);return i[0]===e&&i[1]===t}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return Le()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&ma(t),this.extentRevision_=this.getRevision()}return em(this.extent_,e)}rotate(e,t){Le()}scale(e,t,i){Le()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return Le()}getType(){return Le()}applyTransform(e){Le()}intersectsExtent(e){return Le()}translate(e,t){Le()}transform(e,t){const i=yt(e),r=i.getUnits()=="tile-pixels"?function(s,a,o){const l=i.getExtent(),c=i.getWorldExtent(),h=Di(c)/Di(l);return bn(Fh,c[0],c[3],h,-h,0,0,0),qn(s,0,s.length,o,Fh,a),zo(i,t)(s,a,o)}:zo(i,t);return this.applyTransform(r),this}}var Af=Um;class Wm extends Af{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(e){return rf(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return Le()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=Dh(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){Le()}setLayout(e,t,i){let r;if(e)r=Dh(e);else{for(let s=0;s<i;++s){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}r=t.length,e=Ym(r)}this.layout=e,this.stride=r}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(e,t){const i=this.getFlatCoordinates();if(i){const r=this.getStride();vf(i,0,i.length,r,e,t,i),this.changed()}}scale(e,t,i){t===void 0&&(t=e),i||(i=tr(this.getExtent()));const r=this.getFlatCoordinates();if(r){const s=this.getStride();jm(r,0,r.length,s,e,t,i,r),this.changed()}}translate(e,t){const i=this.getFlatCoordinates();if(i){const r=this.getStride();zm(i,0,i.length,r,e,t,i),this.changed()}}}function Ym(n){let e;return n==2?e="XY":n==3?e="XYZ":n==4&&(e="XYZM"),e}function Dh(n){let e;return n=="XY"?e=2:n=="XYZ"||n=="XYM"?e=3:n=="XYZM"&&(e=4),e}function Xm(n,e,t){const i=n.getFlatCoordinates();if(!i)return null;const r=n.getStride();return qn(i,0,i.length,r,e,t)}var rr=Wm;function kh(n,e,t,i,r,s,a){const o=n[e],l=n[e+1],c=n[t]-o,h=n[t+1]-l;let d;if(c===0&&h===0)d=e;else{const f=((r-o)*c+(s-l)*h)/(c*c+h*h);if(f>1)d=t;else if(f>0){for(let p=0;p<i;++p)a[p]=ii(n[e+p],n[t+p],f);a.length=i;return}else d=e}for(let f=0;f<i;++f)a[f]=n[d+f];a.length=i}function Mu(n,e,t,i,r){let s=n[e],a=n[e+1];for(e+=i;e<t;e+=i){const o=n[e],l=n[e+1],c=Vn(s,a,o,l);c>r&&(r=c),s=o,a=l}return r}function Lu(n,e,t,i,r){for(let s=0,a=t.length;s<a;++s){const o=t[s];r=Mu(n,e,o,i,r),e=o}return r}function Hm(n,e,t,i,r){for(let s=0,a=t.length;s<a;++s){const o=t[s];r=Lu(n,e,o,i,r),e=o[o.length-1]}return r}function Pu(n,e,t,i,r,s,a,o,l,c,h){if(e==t)return c;let d,f;if(r===0){if(f=Vn(a,o,n[e],n[e+1]),f<c){for(d=0;d<i;++d)l[d]=n[e+d];return l.length=i,f}return c}h=h||[NaN,NaN];let p=e+i;for(;p<t;)if(kh(n,p-i,p,i,a,o,h),f=Vn(a,o,h[0],h[1]),f<c){for(c=f,d=0;d<i;++d)l[d]=h[d];l.length=i,p+=i}else p+=i*Math.max((Math.sqrt(f)-Math.sqrt(c))/r|0,1);if(s&&(kh(n,t-i,e,i,a,o,h),f=Vn(a,o,h[0],h[1]),f<c)){for(c=f,d=0;d<i;++d)l[d]=h[d];l.length=i}return c}function Fu(n,e,t,i,r,s,a,o,l,c,h){h=h||[NaN,NaN];for(let d=0,f=t.length;d<f;++d){const p=t[d];c=Pu(n,e,p,i,r,s,a,o,l,c,h),e=p}return c}function Qm(n,e,t,i,r,s,a,o,l,c,h){h=h||[NaN,NaN];for(let d=0,f=t.length;d<f;++d){const p=t[d];c=Fu(n,e,p,i,r,s,a,o,l,c,h),e=p[p.length-1]}return c}function Km(n,e,t,i){for(let r=0,s=t.length;r<s;++r)n[e++]=t[r];return e}function hl(n,e,t,i){for(let r=0,s=t.length;r<s;++r){const a=t[r];for(let o=0;o<i;++o)n[e++]=a[o]}return e}function Du(n,e,t,i,r){r=r||[];let s=0;for(let a=0,o=t.length;a<o;++a){const l=hl(n,e,t[a],i);r[s++]=l,e=l}return r.length=s,r}function Vm(n,e,t,i,r){r=r||[];let s=0;for(let a=0,o=t.length;a<o;++a){const l=Du(n,e,t[a],i,r[s]);l.length===0&&(l[0]=e),r[s++]=l,e=l[l.length-1]}return r.length=s,r}function ku(n,e,t,i,r,s,a){const o=(t-e)/i;if(o<3){for(;e<t;e+=i)s[a++]=n[e],s[a++]=n[e+1];return a}const l=new Array(o);l[0]=1,l[o-1]=1;const c=[e,t-i];let h=0;for(;c.length>0;){const d=c.pop(),f=c.pop();let p=0;const m=n[f],y=n[f+1],v=n[d],x=n[d+1];for(let b=f+i;b<d;b+=i){const E=n[b],I=n[b+1],C=nm(E,I,m,y,v,x);C>p&&(h=b,p=C)}p>r&&(l[(h-e)/i]=1,f+i<h&&c.push(f,h),h+i<d&&c.push(h,d))}for(let d=0;d<o;++d)l[d]&&(s[a++]=n[e+d*i],s[a++]=n[e+d*i+1]);return a}function $m(n,e,t,i,r,s,a,o){for(let l=0,c=t.length;l<c;++l){const h=t[l];a=ku(n,e,h,i,r,s,a),o.push(a),e=h}return a}function Yn(n,e){return e*Math.round(n/e)}function Zm(n,e,t,i,r,s,a){if(e==t)return a;let o=Yn(n[e],r),l=Yn(n[e+1],r);e+=i,s[a++]=o,s[a++]=l;let c,h;do if(c=Yn(n[e],r),h=Yn(n[e+1],r),e+=i,e==t)return s[a++]=c,s[a++]=h,a;while(c==o&&h==l);for(;e<t;){const d=Yn(n[e],r),f=Yn(n[e+1],r);if(e+=i,d==c&&f==h)continue;const p=c-o,m=h-l,y=d-o,v=f-l;if(p*v==m*y&&(p<0&&y<p||p==y||p>0&&y>p)&&(m<0&&v<m||m==v||m>0&&v>m)){c=d,h=f;continue}s[a++]=c,s[a++]=h,o=c,l=h,c=d,h=f}return s[a++]=c,s[a++]=h,a}function wf(n,e,t,i,r,s,a,o){for(let l=0,c=t.length;l<c;++l){const h=t[l];a=Zm(n,e,h,i,r,s,a),o.push(a),e=h}return a}function qm(n,e,t,i,r,s,a,o){for(let l=0,c=t.length;l<c;++l){const h=t[l],d=[];a=wf(n,e,h,i,r,s,a,d),o.push(d),e=h[h.length-1]}return a}function An(n,e,t,i,r){r=r!==void 0?r:[];let s=0;for(let a=e;a<t;a+=i)r[s++]=n.slice(a,a+i);return r.length=s,r}function aa(n,e,t,i,r){r=r!==void 0?r:[];let s=0;for(let a=0,o=t.length;a<o;++a){const l=t[a];r[s++]=An(n,e,l,i,r[s]),e=l}return r.length=s,r}function Xc(n,e,t,i,r){r=r!==void 0?r:[];let s=0;for(let a=0,o=t.length;a<o;++a){const l=t[a];r[s++]=l.length===1&&l[0]===e?[]:aa(n,e,l,i,r[s]),e=l[l.length-1]}return r.length=s,r}function xf(n,e,t,i){let r=0,s=n[t-i],a=n[t-i+1];for(;e<t;e+=i){const o=n[e],l=n[e+1];r+=a*o-s*l,s=o,a=l}return r/2}function Ef(n,e,t,i){let r=0;for(let s=0,a=t.length;s<a;++s){const o=t[s];r+=xf(n,e,o,i),e=o}return r}function Jm(n,e,t,i){let r=0;for(let s=0,a=t.length;s<a;++s){const o=t[s];r+=Ef(n,e,o,i),e=o[o.length-1]}return r}class Uo extends rr{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new Uo(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,i,r){return r<ir(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Mu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Pu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,i,r))}getArea(){return xf(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return An(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=ku(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new Uo(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=hl(this.flatCoordinates,0,e,this.stride),this.changed()}}var Nh=Uo;class Nu extends rr{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new Nu(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){const s=this.flatCoordinates,a=Vn(e,t,s[0],s[1]);if(a<r){const o=this.stride;for(let l=0;l<o;++l)i[l]=s[l];return i.length=o,a}return r}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(e){return Z_(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return yu(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Km(this.flatCoordinates,0,e,this.stride),this.changed()}}var ki=Nu;function ey(n,e,t,i,r){return!of(r,function(a){return!Hn(n,e,t,i,a[0],a[1])})}function Hn(n,e,t,i,r,s){let a=0,o=n[t-i],l=n[t-i+1];for(;e<t;e+=i){const c=n[e],h=n[e+1];l<=s?h>s&&(c-o)*(s-l)-(r-o)*(h-l)>0&&a++:h<=s&&(c-o)*(s-l)-(r-o)*(h-l)<0&&a--,o=c,l=h}return a!==0}function Bu(n,e,t,i,r,s){if(t.length===0||!Hn(n,e,t[0],i,r,s))return!1;for(let a=1,o=t.length;a<o;++a)if(Hn(n,t[a-1],t[a],i,r,s))return!1;return!0}function ty(n,e,t,i,r,s){if(t.length===0)return!1;for(let a=0,o=t.length;a<o;++a){const l=t[a];if(Bu(n,e,l,i,r,s))return!0;e=l[l.length-1]}return!1}function bf(n,e,t,i,r,s,a){let o,l,c,h,d,f,p;const m=r[s+1],y=[];for(let b=0,E=t.length;b<E;++b){const I=t[b];for(h=n[I-i],f=n[I-i+1],o=e;o<I;o+=i)d=n[o],p=n[o+1],(m<=f&&p<=m||f<=m&&m<=p)&&(c=(m-f)/(p-f)*(d-h)+h,y.push(c)),h=d,f=p}let v=NaN,x=-1/0;for(y.sort(er),h=y[0],o=1,l=y.length;o<l;++o){d=y[o];const b=Math.abs(d-h);b>x&&(c=(h+d)/2,Bu(n,e,t,i,c,m)&&(v=c,x=b)),h=d}return isNaN(v)&&(v=r[s]),a?(a.push(v,m,x),a):[v,m,x]}function iy(n,e,t,i,r){let s=[];for(let a=0,o=t.length;a<o;++a){const l=t[a];s=bf(n,e,l,i,r,2*a,s),e=l[l.length-1]}return s}function Cf(n,e,t,i,r){let s;for(e+=i;e<t;e+=i)if(s=r(n.slice(e-i,e),n.slice(e,e+i)),s)return s;return!1}function dl(n,e,t,i,r){const s=af(ui(),n,e,t,i);return Qt(r,s)?ns(r,s)||s[0]>=r[0]&&s[2]<=r[2]||s[1]>=r[1]&&s[3]<=r[3]?!0:Cf(n,e,t,i,function(a,o){return tm(r,a,o)}):!1}function ny(n,e,t,i,r){for(let s=0,a=t.length;s<a;++s){if(dl(n,e,t[s],i,r))return!0;e=t[s]}return!1}function If(n,e,t,i,r){return!!(dl(n,e,t,i,r)||Hn(n,e,t,i,r[0],r[1])||Hn(n,e,t,i,r[0],r[3])||Hn(n,e,t,i,r[2],r[1])||Hn(n,e,t,i,r[2],r[3]))}function Sf(n,e,t,i,r){if(!If(n,e,t[0],i,r))return!1;if(t.length===1)return!0;for(let s=1,a=t.length;s<a;++s)if(ey(n,t[s-1],t[s],i,r)&&!dl(n,t[s-1],t[s],i,r))return!1;return!0}function ry(n,e,t,i,r){for(let s=0,a=t.length;s<a;++s){const o=t[s];if(Sf(n,e,o,i,r))return!0;e=o[o.length-1]}return!1}function sy(n,e,t,i){for(;e<t-i;){for(let r=0;r<i;++r){const s=n[e+r];n[e+r]=n[t-i+r],n[t-i+r]=s}e+=i,t-=i}}function Rf(n,e,t,i){let r=0,s=n[t-i],a=n[t-i+1];for(;e<t;e+=i){const o=n[e],l=n[e+1];r+=(o-s)*(l+a),s=o,a=l}return r===0?void 0:r>0}function Tf(n,e,t,i,r){r=r!==void 0?r:!1;for(let s=0,a=t.length;s<a;++s){const o=t[s],l=Rf(n,e,o,i);if(s===0){if(r&&l||!r&&!l)return!1}else if(r&&!l||!r&&l)return!1;e=o}return!0}function ay(n,e,t,i,r){for(let s=0,a=t.length;s<a;++s){const o=t[s];if(!Tf(n,e,o,i,r))return!1;o.length&&(e=o[o.length-1])}return!0}function Hc(n,e,t,i,r){r=r!==void 0?r:!1;for(let s=0,a=t.length;s<a;++s){const o=t[s],l=Rf(n,e,o,i);(s===0?r&&l||!r&&!l:r&&!l||!r&&l)&&sy(n,e,o,i),e=o}return e}function Bh(n,e,t,i,r){for(let s=0,a=t.length;s<a;++s)e=Hc(n,e,t[s],i,r);return e}class ds extends rr{constructor(e,t,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&i?(this.setFlatCoordinates(t,e),this.ends_=i):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?Pi(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new ds(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<ir(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Lu(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Fu(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,i,r))}containsXY(e,t){return Bu(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return Ef(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),Hc(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,aa(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=tr(this.getExtent());this.flatInteriorPoint_=bf(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new ki(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new Nh(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,i=this.ends_,r=[];let s=0;for(let a=0,o=i.length;a<o;++a){const l=i[a],c=new Nh(t.slice(s,l),e);r.push(c),s=l}return r}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;Tf(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=Hc(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=wf(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,i),new ds(t,"XY",i)}getType(){return"Polygon"}intersectsExtent(e){return Sf(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=Du(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}var Wo=ds;function oy(n,e,t,i){t=t||32;const r=[];for(let s=0;s<t;++s)Pi(r,Im(n,e,2*Math.PI*s/t,i));return r.push(r[0],r[1]),new ds(r,"XY",[r.length])}function Gh(n){const e=n[0],t=n[1],i=n[2],r=n[3],s=[e,t,e,r,i,r,i,t,e,t];return new ds(s,"XY",[s.length])}const _c=0;class ly extends Ai{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=Cu(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&mf(),e.center&&(e.center=Ki(e.center,this.projection_)),e.extent&&(e.extent=vn(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const o in yi)delete t[o];this.setProperties(t,!0);const i=uy(e);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=i.minZoom;const r=cy(e),s=i.constraint,a=hy(e);this.constraints_={center:r,resolution:s,rotation:a},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const i=this.getCenterInternal();if(i){const r=e||[0,0,0,0];t=t||[0,0,0,0];const s=this.getResolution(),a=s/2*(r[3]-t[3]+t[1]-r[1]),o=s/2*(r[0]-t[0]+t[2]-r[2]);this.setCenterInternal([i[0]+a,i[1]-o])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let i=0;i<t.length;++i){let r=arguments[i];r.center&&(r=Object.assign({},r),r.center=Ki(r.center,this.getProjection())),r.anchor&&(r=Object.assign({},r),r.anchor=Ki(r.anchor,this.getProjection())),t[i]=r}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,i;t>1&&typeof arguments[t-1]=="function"&&(i=arguments[t-1],--t);let r=0;for(;r<t&&!this.isDef();++r){const h=arguments[r];h.center&&this.setCenterInternal(h.center),h.zoom!==void 0?this.setZoom(h.zoom):h.resolution&&this.setResolution(h.resolution),h.rotation!==void 0&&this.setRotation(h.rotation)}if(r===t){i&&xo(i,!0);return}let s=Date.now(),a=this.targetCenter_.slice(),o=this.targetResolution_,l=this.targetRotation_;const c=[];for(;r<t;++r){const h=arguments[r],d={start:s,complete:!1,anchor:h.anchor,duration:h.duration!==void 0?h.duration:1e3,easing:h.easing||Bm,callback:i};if(h.center&&(d.sourceCenter=a,d.targetCenter=h.center.slice(),a=d.targetCenter),h.zoom!==void 0?(d.sourceResolution=o,d.targetResolution=this.getResolutionForZoom(h.zoom),o=d.targetResolution):h.resolution&&(d.sourceResolution=o,d.targetResolution=h.resolution,o=d.targetResolution),h.rotation!==void 0){d.sourceRotation=l;const f=Zn(h.rotation-l+Math.PI,2*Math.PI)-Math.PI;d.targetRotation=l+f,l=d.targetRotation}dy(d)?d.complete=!0:s+=d.duration,c.push(d)}this.animations_.push(c),this.setHint(Wt.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[Wt.ANIMATING]>0}getInteracting(){return this.hints_[Wt.INTERACTING]>0}cancelAnimations(){this.setHint(Wt.ANIMATING,-this.hints_[Wt.ANIMATING]);let e;for(let t=0,i=this.animations_.length;t<i;++t){const r=this.animations_[t];if(r[0].callback&&xo(r[0].callback,!1),!e)for(let s=0,a=r.length;s<a;++s){const o=r[s];if(!o.complete){e=o.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let i=this.animations_.length-1;i>=0;--i){const r=this.animations_[i];let s=!0;for(let a=0,o=r.length;a<o;++a){const l=r[a];if(l.complete)continue;const c=e-l.start;let h=l.duration>0?c/l.duration:1;h>=1?(l.complete=!0,h=1):s=!1;const d=l.easing(h);if(l.sourceCenter){const f=l.sourceCenter[0],p=l.sourceCenter[1],m=l.targetCenter[0],y=l.targetCenter[1];this.nextCenter_=l.targetCenter;const v=f+d*(m-f),x=p+d*(y-p);this.targetCenter_=[v,x]}if(l.sourceResolution&&l.targetResolution){const f=d===1?l.targetResolution:l.sourceResolution+d*(l.targetResolution-l.sourceResolution);if(l.anchor){const p=this.getViewportSize_(this.getRotation()),m=this.constraints_.resolution(f,0,p,!0);this.targetCenter_=this.calculateCenterZoom(m,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=f,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){const f=d===1?Zn(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+d*(l.targetRotation-l.sourceRotation);if(l.anchor){const p=this.constraints_.rotation(f,!0);this.targetCenter_=this.calculateCenterRotate(p,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=f}if(this.applyTargetState_(!0),t=!0,!l.complete)break}if(s){this.animations_[i]=null,this.setHint(Wt.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const a=r[0].callback;a&&xo(a,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let i;const r=this.getCenterInternal();return r!==void 0&&(i=[r[0]-t[0],r[1]-t[1]],xu(i,e-this.getRotation()),Em(i,t)),i}calculateCenterZoom(e,t){let i;const r=this.getCenterInternal(),s=this.getResolution();if(r!==void 0&&s!==void 0){const a=t[0]-e*(t[0]-r[0])/s,o=t[1]-e*(t[1]-r[1])/s;i=[a,o]}return i}getViewportSize_(e){const t=this.viewportSize_;if(e){const i=t[0],r=t[1];return[Math.abs(i*Math.cos(e))+Math.abs(r*Math.sin(e)),Math.abs(i*Math.sin(e))+Math.abs(r*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&Yc(e,this.getProjection())}getCenterInternal(){return this.get(yi.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return Su(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();Ne(t,1);const i=this.getResolution();Ne(i!==void 0,2);const r=this.getRotation();return Ne(r!==void 0,3),jc(t,i,r,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(yi.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(vn(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const i=rt(e)/t[0],r=Di(e)/t[1];return Math.max(i,r)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,r=Math.log(t/i)/Math.log(e);return function(s){return t/Math.pow(e,s*r)}}getRotation(){return this.get(yi.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),i=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,s=Math.log(i/r)/t;return function(a){return Math.log(i/a)/t/s}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const i=this.padding_;return i&&(t=[t[0]-i[1]-i[3],t[1]-i[0]-i[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),i=this.getRotation();let r=this.getCenterInternal();const s=this.padding_;if(s){const a=this.getViewportSizeMinusPadding_();r=mc(r,this.getViewportSize_(),[a[0]/2+s[3],a[1]/2+s[0]],t,i)}return{center:r.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,i,r;if(this.resolutions_){const s=gu(this.resolutions_,e,1);t=s,i=this.resolutions_[s],s==this.resolutions_.length-1?r=2:r=i/this.resolutions_[s+1]}else i=this.maxResolution_,r=this.zoomFactor_;return t+Math.log(i/e)/Math.log(r)}getResolutionForZoom(e){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const t=xt(Math.floor(e),0,this.resolutions_.length-2),i=this.resolutions_[t]/this.resolutions_[t+1];return this.resolutions_[t]/Math.pow(i,xt(e-t,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let i;if(Ne(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function",24),Array.isArray(e)){Ne(!vu(e),25);const r=vn(e,this.getProjection());i=Gh(r)}else if(e.getType()==="Circle"){const r=vn(e.getExtent(),this.getProjection());i=Gh(r),i.rotate(this.getRotation(),tr(r))}else i=e;this.fitInternal(i,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),i=Math.cos(t),r=Math.sin(-t),s=e.getFlatCoordinates(),a=e.getStride();let o=1/0,l=1/0,c=-1/0,h=-1/0;for(let d=0,f=s.length;d<f;d+=a){const p=s[d]*i-s[d+1]*r,m=s[d]*r+s[d+1]*i;o=Math.min(o,p),l=Math.min(l,m),c=Math.max(c,p),h=Math.max(h,m)}return[o,l,c,h]}fitInternal(e,t){t=t||{};let i=t.size;i||(i=this.getViewportSizeMinusPadding_());const r=t.padding!==void 0?t.padding:[0,0,0,0],s=t.nearest!==void 0?t.nearest:!1;let a;t.minResolution!==void 0?a=t.minResolution:t.maxZoom!==void 0?a=this.getResolutionForZoom(t.maxZoom):a=0;const o=this.rotatedExtentForGeometry(e);let l=this.getResolutionForExtentInternal(o,[i[0]-r[1]-r[3],i[1]-r[0]-r[2]]);l=isNaN(l)?a:Math.max(l,a),l=this.getConstrainedResolution(l,s?0:1);const c=this.getRotation(),h=Math.sin(c),d=Math.cos(c),f=tr(o);f[0]+=(r[1]-r[3])/2*l,f[1]+=(r[0]-r[2])/2*l;const p=f[0]*d-f[1]*h,m=f[1]*d+f[0]*h,y=this.getConstrainedCenter([p,m],l),v=t.callback?t.callback:cs;t.duration!==void 0?this.animateInternal({resolution:l,center:y,duration:t.duration,easing:t.easing},v):(this.targetResolution_=l,this.targetCenter_=y,this.applyTargetState_(!1,!0),xo(v,!0))}centerOn(e,t,i){this.centerOnInternal(Ki(e,this.getProjection()),t,i)}centerOnInternal(e,t,i){this.setCenterInternal(mc(e,t,i,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,i,r){let s;const a=this.padding_;if(a&&e){const o=this.getViewportSizeMinusPadding_(-i),l=mc(e,r,[o[0]/2+a[3],o[1]/2+a[0]],t,i);s=[e[0]-l[0],e[1]-l[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=Yc(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&Ki(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const i=this.getAnimating()||this.getInteracting(),r=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*e,0,r,i);t&&(this.targetCenter_=this.calculateCenterZoom(s,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=Ki(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const i=this.getAnimating()||this.getInteracting(),r=this.constraints_.rotation(this.targetRotation_+e,i);t&&(this.targetCenter_=this.calculateCenterRotate(r,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&Ki(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const i=this.getAnimating()||this.getInteracting()||t,r=this.constraints_.rotation(this.targetRotation_,i),s=this.getViewportSize_(r),a=this.constraints_.resolution(this.targetResolution_,0,s,i),o=this.constraints_.center(this.targetCenter_,a,s,i,this.calculateCenterShift(this.targetCenter_,a,r,s));this.get(yi.ROTATION)!==r&&this.set(yi.ROTATION,r),this.get(yi.RESOLUTION)!==a&&(this.set(yi.RESOLUTION,a),this.set("zoom",this.getZoom(),!0)),(!o||!this.get(yi.CENTER)||!Go(this.get(yi.CENTER),o))&&this.set(yi.CENTER,o),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,i){e=e!==void 0?e:200;const r=t||0,s=this.constraints_.rotation(this.targetRotation_),a=this.getViewportSize_(s),o=this.constraints_.resolution(this.targetResolution_,r,a),l=this.constraints_.center(this.targetCenter_,o,a,!1,this.calculateCenterShift(this.targetCenter_,o,s,a));if(e===0&&!this.cancelAnchor_){this.targetResolution_=o,this.targetRotation_=s,this.targetCenter_=l,this.applyTargetState_();return}i=i||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==o||this.getRotation()!==s||!this.getCenterInternal()||!Go(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:l,resolution:o,duration:e,easing:gs,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Wt.INTERACTING,1)}endInteraction(e,t,i){i=i&&Ki(i,this.getProjection()),this.endInteractionInternal(e,t,i)}endInteractionInternal(e,t,i){!this.getInteracting()||(this.setHint(Wt.INTERACTING,-1),this.resolveConstraints(e,t,i))}getConstrainedCenter(e,t){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),i)}getConstrainedZoom(e,t){const i=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(i,t))}getConstrainedResolution(e,t){t=t||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,i)}}function xo(n,e){setTimeout(function(){n(e)},0)}function cy(n){if(n.extent!==void 0){const t=n.smoothExtentConstraint!==void 0?n.smoothExtentConstraint:!0;return Mh(n.extent,n.constrainOnlyCenter,t)}const e=Cu(n.projection,"EPSG:3857");if(n.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,Mh(t,!1,!1)}return Pm}function uy(n){let e,t,i,a=n.minZoom!==void 0?n.minZoom:_c,o=n.maxZoom!==void 0?n.maxZoom:28;const l=n.zoomFactor!==void 0?n.zoomFactor:2,c=n.multiWorld!==void 0?n.multiWorld:!1,h=n.smoothResolutionConstraint!==void 0?n.smoothResolutionConstraint:!0,d=n.showFullExtent!==void 0?n.showFullExtent:!1,f=Cu(n.projection,"EPSG:3857"),p=f.getExtent();let m=n.constrainOnlyCenter,y=n.extent;if(!c&&!y&&f.isGlobal()&&(m=!1,y=p),n.resolutions!==void 0){const v=n.resolutions;t=v[a],i=v[o]!==void 0?v[o]:v[v.length-1],n.constrainResolution?e=Fm(v,h,!m&&y,d):e=Lh(t,i,h,!m&&y,d)}else{const x=(p?Math.max(rt(p),Di(p)):360*hs.degrees/f.getMetersPerUnit())/wu/Math.pow(2,_c),b=x/Math.pow(2,28-_c);t=n.maxResolution,t!==void 0?a=0:t=x/Math.pow(l,a),i=n.minResolution,i===void 0&&(n.maxZoom!==void 0?n.maxResolution!==void 0?i=t/Math.pow(l,o):i=x/Math.pow(l,o):i=b),o=a+Math.floor(Math.log(t/i)/Math.log(l)),i=t/Math.pow(l,o-a),n.constrainResolution?e=Dm(l,t,i,h,!m&&y,d):e=Lh(t,i,h,!m&&y,d)}return{constraint:e,maxResolution:t,minResolution:i,minZoom:a,zoomFactor:l}}function hy(n){if(n.enableRotation!==void 0?n.enableRotation:!0){const t=n.constrainRotation;return t===void 0||t===!0?Nm():t===!1?Ph:typeof t=="number"?km(t):Ph}return Ou}function dy(n){return!(n.sourceCenter&&n.targetCenter&&!Go(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}function mc(n,e,t,i,r){const s=Math.cos(-r);let a=Math.sin(-r),o=n[0]*s-n[1]*a,l=n[1]*s+n[0]*a;o+=(e[0]/2-t[0])*i,l+=(t[1]-e[1]/2)*i,a=-a;const c=o*s-l*a,h=l*s+o*a;return[c,h]}var ni=ly;class fy extends hf{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(Ze.SOURCE,this.handleSourcePropertyChange_);const i=e.source?e.source:null;this.setSource(i)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(Ze.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(st(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=We(e,Fe.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;e instanceof ni?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e;const i=this.getExtent();return this.getVisible()&&Gu(this.getLayerState(),t.viewState)&&(!i||Qt(i,t.extent))}getAttributions(e){if(!this.isVisible(e))return[];let t;const i=this.getSource();if(i&&(t=i.getAttributions()),!t)return[];const r=e instanceof ni?e.getViewStateAndExtent():e;let s=t(r);return Array.isArray(s)||(s=[s]),s}render(e,t){const i=this.getRenderer();if(i.prepareFrame(e))return this.rendered=!0,i.renderFrame(e,t)}unrender(){this.rendered=!1}setMapInternal(e){e||this.unrender(),this.set(Ze.MAP,e)}getMapInternal(){return this.get(Ze.MAP)}setMap(e){this.mapPrecomposeKey_&&(st(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(st(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=We(e,xn.PRECOMPOSE,function(t){const r=t.frameState.layerStatesArray,s=this.getLayerState(!1);Ne(!r.some(function(a){return a.layer===s.layer}),67),r.push(s)},this),this.mapRenderKey_=We(this,Fe.CHANGE,e.render,e),this.changed())}setSource(e){this.set(Ze.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function Gu(n,e){if(!n.visible)return!1;const t=e.resolution;if(t<n.minResolution||t>=n.maxResolution)return!1;const i=e.zoom;return i>n.minZoom&&i<=n.maxZoom}var fl=fy;class gy extends fu{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){Le()}calculateMatrices2D(e){const t=e.viewState,i=e.coordinateToPixelTransform,r=e.pixelToCoordinateTransform;bn(i,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),_u(r,i)}forEachFeatureAtCoordinate(e,t,i,r,s,a,o,l){let c;const h=t.viewState;function d(I,C,M,D){return s.call(a,C,I?M:null,D)}const f=h.projection,p=ff(e.slice(),f),m=[[0,0]];if(f.canWrapX()&&r){const I=f.getExtent(),C=rt(I);m.push([-C,0],[C,0])}const y=t.layerStatesArray,v=y.length,x=[],b=[];for(let I=0;I<m.length;I++)for(let C=v-1;C>=0;--C){const M=y[C],D=M.layer;if(D.hasRenderer()&&Gu(M,h)&&o.call(l,D)){const P=D.getRenderer(),z=D.getSource();if(P&&z){const j=z.getWrapX()?p:e,Q=d.bind(null,M.managed);b[0]=j[0]+m[I][0],b[1]=j[1]+m[I][1],c=P.forEachFeatureAtCoordinate(b,t,i,Q,x)}if(c)return c}}if(x.length===0)return;const E=1/x.length;return x.forEach((I,C)=>I.distanceSq+=C*E),x.sort((I,C)=>I.distanceSq-C.distanceSq),x.some(I=>c=I.callback(I.feature,I.layer,I.geometry)),c}hasFeatureAtCoordinate(e,t,i,r,s,a){return this.forEachFeatureAtCoordinate(e,t,i,r,ra,this,s,a)!==void 0}getMap(){return this.map_}renderFrame(e){Le()}scheduleExpireIconCache(e){No.canExpireCache()&&e.postRenderFunctions.push(py)}}function py(n,e){No.expire()}var _y=gy;class my extends Bi{constructor(e,t,i,r){super(e),this.inversePixelTransform=t,this.frameState=i,this.context=r}}var Of=my;const Eo="ol-hidden",va="ol-unselectable",ju="ol-control",jh="ol-collapsed",yy=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),zh=["style","variant","weight","size","lineHeight","family"],Mf=function(n){const e=n.match(yy);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let i=0,r=zh.length;i<r;++i){const s=e[i+1];s!==void 0&&(t[zh[i]]=s)}return t.families=t.family.split(/,\s?/),t};function Vt(n,e,t,i){let r;return t&&t.length?r=t.shift():pu?r=new OffscreenCanvas(n||300,e||300):r=document.createElement("canvas"),n&&(r.width=n),e&&(r.height=e),r.getContext("2d",i)}function gl(n){const e=n.canvas;e.width=1,e.height=1,n.clearRect(0,0,1,1)}function Uh(n,e){const t=e.parentNode;t&&t.replaceChild(n,e)}function Qc(n){return n&&n.parentNode?n.parentNode.removeChild(n):null}function vy(n){for(;n.lastChild;)n.removeChild(n.lastChild)}function Ay(n,e){const t=n.childNodes;for(let i=0;;++i){const r=t[i],s=e[i];if(!r&&!s)break;if(r!==s){if(!r){n.appendChild(s);continue}if(!s){n.removeChild(r),--i;continue}n.insertBefore(s,r)}}}const Lf="10px sans-serif",qi="#000",Yo="round",oa=[],la=0,fs="round",ca=10,ua="#000",ha="center",Xo="middle",Qn=[0,0,0,0],da=1,Vi=new Ai;let $r=null,Kc;const Vc={},wy=function(){const e="32px ",t=["monospace","serif"],i=t.length,r="wmytzilWMYTZIL@#/&?$%10\uF013";let s,a;function o(c,h,d){let f=!0;for(let p=0;p<i;++p){const m=t[p];if(a=Ho(c+" "+h+" "+e+m,r),d!=m){const y=Ho(c+" "+h+" "+e+d+","+m,r);f=f&&y!=a}}return!!f}function l(){let c=!0;const h=Vi.getKeys();for(let d=0,f=h.length;d<f;++d){const p=h[d];Vi.get(p)<100&&(o.apply(this,p.split(`
`))?(_a(Vc),$r=null,Kc=void 0,Vi.set(p,100)):(Vi.set(p,Vi.get(p)+1,!0),c=!1))}c&&(clearInterval(s),s=void 0)}return function(c){const h=Mf(c);if(!h)return;const d=h.families;for(let f=0,p=d.length;f<p;++f){const m=d[f],y=h.style+`
`+h.weight+`
`+m;Vi.get(y)===void 0&&(Vi.set(y,100,!0),o(h.style,h.weight,m)||(Vi.set(y,0,!0),s===void 0&&(s=setInterval(l,32))))}}}(),xy=function(){let n;return function(e){let t=Vc[e];if(t==null){if(pu){const i=Mf(e),r=Pf(e,"\u017Dg");t=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else n||(n=document.createElement("div"),n.innerHTML="M",n.style.minHeight="0",n.style.maxHeight="none",n.style.height="auto",n.style.padding="0",n.style.border="none",n.style.position="absolute",n.style.display="block",n.style.left="-99999px"),n.style.font=e,document.body.appendChild(n),t=n.offsetHeight,document.body.removeChild(n);Vc[e]=t}return t}}();function Pf(n,e){return $r||($r=Vt(1,1)),n!=Kc&&($r.font=n,Kc=$r.font),$r.measureText(e)}function Ho(n,e){return Pf(n,e).width}function Wh(n,e,t){if(e in t)return t[e];const i=e.split(`
`).reduce((r,s)=>Math.max(r,Ho(n,s)),0);return t[e]=i,i}function Ey(n,e){const t=[],i=[],r=[];let s=0,a=0,o=0,l=0;for(let c=0,h=e.length;c<=h;c+=2){const d=e[c];if(d===`
`||c===h){s=Math.max(s,a),r.push(a),a=0,o+=l;continue}const f=e[c+1]||n.font,p=Ho(f,d);t.push(p),a+=p;const m=xy(f);i.push(m),l=Math.max(l,m)}return{width:s,height:o,widths:t,heights:i,lineWidths:r}}function by(n,e,t,i,r,s,a,o,l,c,h){n.save(),t!==1&&(n.globalAlpha*=t),e&&n.setTransform.apply(n,e),i.contextInstructions?(n.translate(l,c),n.scale(h[0],h[1]),Cy(i,n)):h[0]<0||h[1]<0?(n.translate(l,c),n.scale(h[0],h[1]),n.drawImage(i,r,s,a,o,0,0,a,o)):n.drawImage(i,r,s,a,o,l,c,a*h[0],o*h[1]),n.restore()}function Cy(n,e){const t=n.contextInstructions;for(let i=0,r=t.length;i<r;i+=2)Array.isArray(t[i+1])?e[t[i]].apply(e,t[i+1]):e[t[i]]=t[i+1]}class Iy extends _y{constructor(e){super(e),this.fontChangeListenerKey_=We(Vi,ls.PROPERTYCHANGE,e.redrawText.bind(e)),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=va+" ol-layers";const i=e.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const i=this.getMap();if(i.hasListener(e)){const r=new Of(e,void 0,t);i.dispatchEvent(r)}}disposeInternal(){st(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(xn.PRECOMPOSE,e);const t=e.layerStatesArray.sort(function(a,o){return a.zIndex-o.zIndex}),i=e.viewState;this.children_.length=0;const r=[];let s=null;for(let a=0,o=t.length;a<o;++a){const l=t[a];e.layerIndex=a;const c=l.layer,h=c.getSourceState();if(!Gu(l,i)||h!="ready"&&h!="undefined"){c.unrender();continue}const d=c.render(e,s);!d||(d!==s&&(this.children_.push(d),s=d),"getDeclutter"in c&&r.push(c))}for(let a=r.length-1;a>=0;--a)r[a].renderDeclutter(e);Ay(this.element_,this.children_),this.dispatchRenderEvent(xn.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}}var Sy=Iy;class mn extends Bi{constructor(e,t){super(e),this.layer=t}}const yc={LAYERS:"layers"};class zu extends hf{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let i=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(yc.LAYERS,this.handleLayersChanged_),i?Array.isArray(i)?i=new Mi(i.slice(),{unique:!0}):Ne(typeof i.getArray=="function",43):i=new Mi(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(st),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(We(e,Jt.ADD,this.handleLayersAdd_,this),We(e,Jt.REMOVE,this.handleLayersRemove_,this));for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach(st);_a(this.listenerKeys_);const t=e.getArray();for(let i=0,r=t.length;i<r;i++){const s=t[i];this.registerLayerListeners_(s),this.dispatchEvent(new mn("addlayer",s))}this.changed()}registerLayerListeners_(e){const t=[We(e,ls.PROPERTYCHANGE,this.handleLayerChange_,this),We(e,Fe.CHANGE,this.handleLayerChange_,this)];e instanceof zu&&t.push(We(e,"addlayer",this.handleLayerGroupAdd_,this),We(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Ve(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new mn("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new mn("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new mn("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,i=Ve(t);this.listenerKeys_[i].forEach(st),delete this.listenerKeys_[i],this.dispatchEvent(new mn("removelayer",t)),this.changed()}getLayers(){return this.get(yc.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const i=t.getArray();for(let r=0,s=i.length;r<s;++r)this.dispatchEvent(new mn("removelayer",i[r]))}this.set(yc.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],i=t.length;this.getLayers().forEach(function(a){a.getLayerStatesArray(t)});const r=this.getLayerState();let s=r.zIndex;!e&&r.zIndex===void 0&&(s=0);for(let a=i,o=t.length;a<o;a++){const l=t[a];l.opacity*=r.opacity,l.visible=l.visible&&r.visible,l.maxResolution=Math.min(l.maxResolution,r.maxResolution),l.minResolution=Math.max(l.minResolution,r.minResolution),l.minZoom=Math.max(l.minZoom,r.minZoom),l.maxZoom=Math.min(l.maxZoom,r.maxZoom),r.extent!==void 0&&(l.extent!==void 0?l.extent=ea(l.extent,r.extent):l.extent=r.extent),l.zIndex===void 0&&(l.zIndex=s)}return t}getSourceState(){return"ready"}}var pl=zu;class Ry extends Bi{constructor(e,t,i){super(e),this.map=t,this.frameState=i!==void 0?i:null}}var Zr=Ry;class Ty extends Zr{constructor(e,t,i,r,s,a){super(e,t,s),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=r!==void 0?r:!1,this.activePointers=a}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}var pn=Ty,gt={SINGLECLICK:"singleclick",CLICK:Fe.CLICK,DBLCLICK:Fe.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},$c={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class Oy extends rl{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=We(i,$c.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=We(i,$c.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(Fe.TOUCHMOVE,this.boundHandleTouchMove_,ef?{passive:!1}:!1)}emulateClick_(e){let t=new pn(gt.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new pn(gt.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const i=new pn(gt.SINGLECLICK,this.map_,e);this.dispatchEvent(i)},250)}updateActivePointers_(e){const t=e,i=t.pointerId;if(t.type==gt.POINTERUP||t.type==gt.POINTERCANCEL){delete this.trackedTouches_[i];for(const r in this.trackedTouches_)if(this.trackedTouches_[r].target!==t.target){delete this.trackedTouches_[r];break}}else(t.type==gt.POINTERDOWN||t.type==gt.POINTERMOVE)&&(this.trackedTouches_[i]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new pn(gt.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(st),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new pn(gt.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(We(i,gt.POINTERMOVE,this.handlePointerMove_,this),We(i,gt.POINTERUP,this.handlePointerUp_,this),We(this.element_,gt.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(We(this.element_.getRootNode(),gt.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new pn(gt.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new pn(gt.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(st(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(Fe.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(st(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(st),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}var My=Oy,_n={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},Ut={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};const Qo=1/0;class Ly{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,_a(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,i=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const r=this.keyFunction_(i);return delete this.queuedElements_[r],i}enqueue(e){Ne(!(this.keyFunction_(e)in this.queuedElements_),31);const t=this.priorityFunction_(e);return t!=Qo?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,i=this.priorities_,r=t.length,s=t[e],a=i[e],o=e;for(;e<r>>1;){const l=this.getLeftChildIndex_(e),c=this.getRightChildIndex_(e),h=c<r&&i[c]<i[l]?c:l;t[e]=t[h],i[e]=i[h],e=h}t[e]=s,i[e]=a,this.siftDown_(o,e)}siftDown_(e,t){const i=this.elements_,r=this.priorities_,s=i[t],a=r[t];for(;t>e;){const o=this.getParentIndex_(t);if(r[o]>a)i[t]=i[o],r[t]=r[o],t=o;else break}i[t]=s,r[t]=a}reprioritize(){const e=this.priorityFunction_,t=this.elements_,i=this.priorities_;let r=0;const s=t.length;let a,o,l;for(o=0;o<s;++o)a=t[o],l=e(a),l==Qo?delete this.queuedElements_[this.keyFunction_(a)]:(i[r]=l,t[r++]=a);t.length=r,i.length=r,this.heapify_()}}var Py=Ly,Re={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class Fy extends Py{constructor(e,t){super(function(i){return e.apply(null,i)},function(i){return i[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(Fe.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,i=t.getState();if(i===Re.LOADED||i===Re.ERROR||i===Re.EMPTY){i!==Re.ERROR&&t.removeEventListener(Fe.CHANGE,this.boundHandleTileChange_);const r=t.getKey();r in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[r],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let i=0,r,s,a;for(;this.tilesLoading_<e&&i<t&&this.getCount()>0;)s=this.dequeue()[0],a=s.getKey(),r=s.getState(),r===Re.IDLE&&!(a in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[a]=!0,++this.tilesLoading_,++i,s.load())}}var Dy=Fy;function ky(n,e,t,i,r){if(!n||!(t in n.wantedTiles)||!n.wantedTiles[t][e.getKey()])return Qo;const s=n.viewState.center,a=i[0]-s[0],o=i[1]-s[1];return 65536*Math.log(r)+Math.sqrt(a*a+o*o)/r}class Ny extends Ai{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){Qc(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&Qc(this.element);for(let t=0,i=this.listenerKeys.length;t<i;++t)st(this.listenerKeys[t]);this.listenerKeys.length=0,this.map_=e,e&&((this.target_?this.target_:e.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==cs&&this.listenerKeys.push(We(e,_n.POSTRENDER,this.render,this)),e.render())}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}var _l=Ny;class By extends _l{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1);const t=e.className!==void 0?e.className:"ol-attribution",i=e.tipLabel!==void 0?e.tipLabel:"Attributions",r=e.expandClassName!==void 0?e.expandClassName:t+"-expand",s=e.collapseLabel!==void 0?e.collapseLabel:"\u203A",a=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=a):this.collapseLabel_=s;const o=e.label!==void 0?e.label:"i";typeof o=="string"?(this.label_=document.createElement("span"),this.label_.textContent=o,this.label_.className=r):this.label_=o;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(Fe.CLICK,this.handleClick_.bind(this),!1);const c=t+" "+va+" "+ju+(this.collapsed_&&this.collapsible_?" "+jh:"")+(this.collapsible_?"":" ol-uncollapsible"),h=this.element;h.className=c,h.appendChild(this.toggleButton_),h.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=Array.from(new Set(this.getMap().getAllLayers().flatMap(r=>r.getAttributions(e)))),i=!this.getMap().getAllLayers().some(r=>r.getSource()&&r.getSource().getAttributionsCollapsible()===!1);return this.overrideCollapsible_||this.setCollapsible(i),t}updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=this.collectSourceAttributions_(e),i=t.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!Cn(t,this.renderedAttributions_)){vy(this.ulElement_);for(let r=0,s=t.length;r<s;++r){const a=document.createElement("li");a.innerHTML=t[r],this.ulElement_.appendChild(a)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(jh),this.collapsed_?Uh(this.collapseLabel_,this.label_):Uh(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}var Gy=By;class jy extends _l{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",i=e.label!==void 0?e.label:"\u21E7",r=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof i=="string"?(this.label_=document.createElement("span"),this.label_.className=r,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(r));const s=e.tipLabel?e.tipLabel:"Reset rotation",a=document.createElement("button");a.className=t+"-reset",a.setAttribute("type","button"),a.title=s,a.appendChild(this.label_),a.addEventListener(Fe.CLICK,this.handleClick_.bind(this),!1);const o=t+" "+va+" "+ju,l=this.element;l.className=o,l.appendChild(a),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(Eo)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const i=t.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:gs}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const i=t.viewState.rotation;if(i!=this.rotation_){const r="rotate("+i+"rad)";if(this.autoHide_){const s=this.element.classList.contains(Eo);!s&&i===0?this.element.classList.add(Eo):s&&i!==0&&this.element.classList.remove(Eo)}this.label_.style.transform=r}this.rotation_=i}}var zy=jy;class Uy extends _l{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",i=e.delta!==void 0?e.delta:1,r=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",s=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",a=e.zoomInLabel!==void 0?e.zoomInLabel:"+",o=e.zoomOutLabel!==void 0?e.zoomOutLabel:"\u2013",l=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",c=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",h=document.createElement("button");h.className=r,h.setAttribute("type","button"),h.title=l,h.appendChild(typeof a=="string"?document.createTextNode(a):a),h.addEventListener(Fe.CLICK,this.handleClick_.bind(this,i),!1);const d=document.createElement("button");d.className=s,d.setAttribute("type","button"),d.title=c,d.appendChild(typeof o=="string"?document.createTextNode(o):o),d.addEventListener(Fe.CLICK,this.handleClick_.bind(this,-i),!1);const f=t+" "+va+" "+ju,p=this.element;p.className=f,p.appendChild(h),p.appendChild(d),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const i=this.getMap().getView();if(!i)return;const r=i.getZoom();if(r!==void 0){const s=i.getConstrainedZoom(r+e);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:s,duration:this.duration_,easing:gs})):i.setZoom(s)}}}var Wy=Uy;function Aa(n){n=n||{};const e=new Mi;return(n.zoom!==void 0?n.zoom:!0)&&e.push(new Wy(n.zoomOptions)),(n.rotate!==void 0?n.rotate:!0)&&e.push(new zy(n.rotateOptions)),(n.attribution!==void 0?n.attribution:!0)&&e.push(new Gy(n.attributionOptions)),e}var Yh={ACTIVE:"active"};class Yy extends Ai{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(Yh.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(Yh.ACTIVE,e)}setMap(e){this.map_=e}}function Xy(n,e,t){const i=n.getCenterInternal();if(i){const r=[i[0]+e[0],i[1]+e[1]];n.animateInternal({duration:t!==void 0?t:250,easing:Gm,center:n.getConstrainedCenter(r)})}}function Uu(n,e,t,i){const r=n.getZoom();if(r===void 0)return;const s=n.getConstrainedZoom(r+e),a=n.getResolutionForZoom(s);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:a,anchor:t,duration:i!==void 0?i:250,easing:gs})}var wa=Yy;class Hy extends wa{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==gt.DBLCLICK){const i=e.originalEvent,r=e.map,s=e.coordinate,a=i.shiftKey?-this.delta_:this.delta_,o=r.getView();Uu(o,a,s,this.duration_),i.preventDefault(),t=!0}return!t}}var Qy=Hy;class Ky extends wa{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==gt.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==gt.POINTERUP){const i=this.handleUpEvent(e);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(e.type==gt.POINTERDOWN){const i=this.handleDownEvent(e);this.handlingDownUpSequence=i,t=this.stopDown(i)}else e.type==gt.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function Wu(n){const e=n.length;let t=0,i=0;for(let r=0;r<e;r++)t+=n[r].clientX,i+=n[r].clientY;return{clientX:t/e,clientY:i/e}}var xa=Ky;function Zc(n){const e=arguments;return function(t){let i=!0;for(let r=0,s=e.length;r<s&&(i=i&&e[r](t),!!i);++r);return i}}const Vy=function(n){const e=n.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},$y=function(n){const e=n.map.getTargetElement(),t=n.map.getOwnerDocument().activeElement;return e.contains(t)},Ff=function(n){return n.map.getTargetElement().hasAttribute("tabindex")?$y(n):!0},Zy=ra,Df=function(n){const e=n.originalEvent;return e.button==0&&!(Y_&&X_&&e.ctrlKey)},kf=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},qy=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Nf=function(n){const e=n.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},vc=function(n){const e=n.originalEvent;return Ne(e!==void 0,56),e.pointerType=="mouse"},Jy=function(n){const e=n.originalEvent;return Ne(e!==void 0,56),e.isPrimary&&e.button===0};class ev extends xa{constructor(e){super({stopDown:nl}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:Zc(kf,Jy);this.condition_=e.onFocusOnly?Zc(Ff,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const i=this.targetPointers,r=t.getEventPixel(Wu(i));if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){const s=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],o=e.map.getView();bm(s,o.getResolution()),xu(s,o.getRotation()),o.adjustCenterInternal(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=i.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,i=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const r=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),a=i.getCenterInternal(),o=t.getPixelFromCoordinateInternal(a),l=t.getCoordinateFromPixelInternal([o[0]-r*Math.cos(s),o[1]-r*Math.sin(s)]);i.animateInternal({center:i.getConstrainedCenter(l),duration:500,easing:gs})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const i=e.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}var tv=ev;class iv extends xa{constructor(e){e=e||{},super({stopDown:nl}),this.condition_=e.condition?e.condition:Vy,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!vc(e))return;const t=e.map,i=t.getView();if(i.getConstraints().rotation===Ou)return;const r=t.getSize(),s=e.pixel,a=Math.atan2(r[1]/2-s[1],s[0]-r[0]/2);if(this.lastAngle_!==void 0){const o=a-this.lastAngle_;i.adjustRotationInternal(-o)}this.lastAngle_=a}handleUpEvent(e){return vc(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return vc(e)&&Df(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}var nv=iv;class rv extends fu{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,i="px",r=this.element_.style;r.left=Math.min(e[0],t[0])+i,r.top=Math.min(e[1],t[1])+i,r.width=Math.abs(t[0]-e[0])+i,r.height=Math.abs(t[1]-e[1])+i}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const e=this.startPixel_,t=this.endPixel_,r=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new Wo([r])}getGeometry(){return this.geometry_}}var sv=rv;const bo={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class Ac extends Bi{constructor(e,t,i){super(e),this.coordinate=t,this.mapBrowserEvent=i}}class av extends xa{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.box_=new sv(e.className||"ol-dragbox"),this.minArea_=e.minArea!==void 0?e.minArea:64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition?e.condition:Df,this.boxEndCondition_=e.boxEndCondition?e.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,i){const r=i[0]-t[0],s=i[1]-t[1];return r*r+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new Ac(bo.BOXDRAG,e.coordinate,e))}handleUpEvent(e){this.box_.setMap(null);const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new Ac(t?bo.BOXEND:bo.BOXCANCEL,e.coordinate,e)),!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Ac(bo.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}}var ov=av;class lv extends ov{constructor(e){e=e||{};const t=e.condition?e.condition:qy;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const i=this.getMap().getView();let r=this.getGeometry();if(this.out_){const s=i.rotatedExtentForGeometry(r),a=i.getResolutionForExtentInternal(s),o=i.getResolution()/a;r=r.clone(),r.scale(o*o)}i.fitInternal(r,{duration:this.duration_,easing:gs})}}var cv=lv,Un={LEFT:37,UP:38,RIGHT:39,DOWN:40};class uv extends wa{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return kf(t)&&Nf(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==Fe.KEYDOWN){const i=e.originalEvent,r=i.keyCode;if(this.condition_(e)&&(r==Un.DOWN||r==Un.LEFT||r==Un.RIGHT||r==Un.UP)){const a=e.map.getView(),o=a.getResolution()*this.pixelDelta_;let l=0,c=0;r==Un.DOWN?c=-o:r==Un.LEFT?l=-o:r==Un.RIGHT?l=o:c=o;const h=[l,c];xu(h,a.getRotation()),Xy(a,h,this.duration_),i.preventDefault(),t=!0}}return!t}}var hv=uv;class dv extends wa{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:Nf,this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==Fe.KEYDOWN||e.type==Fe.KEYPRESS){const i=e.originalEvent,r=i.key;if(this.condition_(e)&&(r==="+"||r==="-")){const s=e.map,a=r==="+"?this.delta_:-this.delta_,o=s.getView();Uu(o,a,void 0,this.duration_),i.preventDefault(),t=!0}}return!t}}var fv=dv;class gv{constructor(e,t,i){this.decay_=e,this.minVelocity_=t,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let i=t-3;for(;i>0&&this.points_[i+2]>e;)i-=3;const r=this.points_[t+2]-this.points_[i+2];if(r<1e3/60)return!1;const s=this.points_[t]-this.points_[i],a=this.points_[t+1]-this.points_[i+1];return this.angle_=Math.atan2(a,s),this.initialVelocity_=Math.sqrt(s*s+a*a)/r,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}var pv=gv;class _v extends wa{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:Zy;this.condition_=e.onFocusOnly?Zc(Ff,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(e){if(!this.condition_(e)||e.type!==Fe.WHEEL)return!0;const i=e.map,r=e.originalEvent;r.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.coordinate);let s;if(e.type==Fe.WHEEL&&(s=r.deltaY,U_&&r.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(s/=Jd),r.deltaMode===WheelEvent.DOM_DELTA_LINE&&(s*=40)),s===0)return!1;this.lastDelta_=s;const a=Date.now();this.startTime_===void 0&&(this.startTime_=a),(!this.mode_||a-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const o=i.getView();if(this.mode_==="trackpad"&&!(o.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(o.getAnimating()&&o.cancelAnimations(),o.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),o.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=a,!1;this.totalDelta_+=s;const l=Math.max(this.timeout_-(a-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),l),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let i=-xt(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),Uu(t,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}var mv=_v;class yv extends xa{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=nl),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const i=this.targetPointers[0],r=this.targetPointers[1],s=Math.atan2(r.clientY-i.clientY,r.clientX-i.clientX);if(this.lastAngle_!==void 0){const l=s-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=l}this.lastAngle_=s;const a=e.map,o=a.getView();o.getConstraints().rotation!==Ou&&(this.anchor_=a.getCoordinateFromPixelInternal(a.getEventPixel(Wu(this.targetPointers))),this.rotating_&&(a.render(),o.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}var vv=yv;class Av extends xa{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=nl),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const i=this.targetPointers[0],r=this.targetPointers[1],s=i.clientX-r.clientX,a=i.clientY-r.clientY,o=Math.sqrt(s*s+a*a);this.lastDistance_!==void 0&&(t=this.lastDistance_/o),this.lastDistance_=o;const l=e.map,c=l.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(Wu(this.targetPointers))),l.render(),c.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const i=e.map.getView(),r=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,r),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}var wv=Av;function xv(n){n=n||{};const e=new Mi,t=new pv(-.005,.05,100);return(n.altShiftDragRotate!==void 0?n.altShiftDragRotate:!0)&&e.push(new nv),(n.doubleClickZoom!==void 0?n.doubleClickZoom:!0)&&e.push(new Qy({delta:n.zoomDelta,duration:n.zoomDuration})),(n.dragPan!==void 0?n.dragPan:!0)&&e.push(new tv({onFocusOnly:n.onFocusOnly,kinetic:t})),(n.pinchRotate!==void 0?n.pinchRotate:!0)&&e.push(new vv),(n.pinchZoom!==void 0?n.pinchZoom:!0)&&e.push(new wv({duration:n.zoomDuration})),(n.keyboard!==void 0?n.keyboard:!0)&&(e.push(new hv),e.push(new fv({delta:n.zoomDelta,duration:n.zoomDuration}))),(n.mouseWheelZoom!==void 0?n.mouseWheelZoom:!0)&&e.push(new mv({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(n.shiftDragZoom!==void 0?n.shiftDragZoom:!0)&&e.push(new cv({duration:n.zoomDuration})),e}function Xh(n){return n[0]>0&&n[1]>0}function Ev(n,e,t){return t===void 0&&(t=[0,0]),t[0]=n[0]*e+.5|0,t[1]=n[1]*e+.5|0,t}function ri(n,e){return Array.isArray(n)?n:(e===void 0?e=[n,n]:(e[0]=n,e[1]=n),e)}function Bf(n){if(n instanceof fl){n.setMapInternal(null);return}n instanceof pl&&n.getLayers().forEach(Bf)}function Gf(n,e){if(n instanceof fl){n.setMapInternal(e);return}if(n instanceof pl){const t=n.getLayers().getArray();for(let i=0,r=t.length;i<r;++i)Gf(t[i],e)}}class bv extends Ai{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=Cv(e);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:Jd,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Fi(),this.pixelToCoordinateTransform_=Fi(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=t.controls||Aa(),this.interactions=t.interactions||xv({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new Dy(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(Ut.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(Ut.VIEW,this.handleViewChanged_),this.addChangeListener(Ut.SIZE,this.handleSizeChanged_),this.addChangeListener(Ut.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const i=this;e.view&&!(e.view instanceof ni)&&e.view.then(function(r){i.setView(new ni(r))}),this.controls.addEventListener(Jt.ADD,r=>{r.element.setMap(this)}),this.controls.addEventListener(Jt.REMOVE,r=>{r.element.setMap(null)}),this.interactions.addEventListener(Jt.ADD,r=>{r.element.setMap(this)}),this.interactions.addEventListener(Jt.REMOVE,r=>{r.element.setMap(null)}),this.overlays_.addEventListener(Jt.ADD,r=>{this.addOverlayInternal_(r.element)}),this.overlays_.addEventListener(Jt.REMOVE,r=>{const s=r.element.getId();s!==void 0&&delete this.overlayIdIndex_[s.toString()],r.element.setMap(null)}),this.controls.forEach(r=>{r.setMap(this)}),this.interactions.forEach(r=>{r.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){Gf(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,i){if(!this.frameState_||!this.renderer_)return;const r=this.getCoordinateFromPixelInternal(e);i=i!==void 0?i:{};const s=i.hitTolerance!==void 0?i.hitTolerance:0,a=i.layerFilter!==void 0?i.layerFilter:ra,o=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,s,o,t,null,a,null)}getFeaturesAtPixel(e,t){const i=[];return this.forEachFeatureAtPixel(e,function(r){i.push(r)},t),i}getAllLayers(){const e=[];function t(i){i.forEach(function(r){r instanceof pl?t(r.getLayers()):e.push(r)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const r=t.layerFilter!==void 0?t.layerFilter:ra,s=t.hitTolerance!==void 0?t.hitTolerance:0,a=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,s,a,r,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const i=this.viewport_.getBoundingClientRect(),r=this.getSize(),s=i.width/r[0],a=i.height/r[1],o="changedTouches"in e?e.changedTouches[0]:e;return[(o.clientX-i.left)/s,(o.clientY-i.top)/a]}getTarget(){return this.get(Ut.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return Yc(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?Rt(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(Ut.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof Mi){t.setLayers(e);return}const i=t.getLayers();i.clear(),i.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,i=e.length;t<i;++t){const r=e[t];if(!r.visible)continue;const s=r.layer.getRenderer();if(s&&!s.ready)return!0;const a=r.layer.getSource();if(a&&a.loading)return!0}return!1}getPixelFromCoordinate(e){const t=Ki(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?Rt(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(Ut.SIZE)}getView(){return this.get(Ut.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,i,r){return ky(this.frameState_,e,t,i,r)}handleBrowserEvent(e,t){t=t||e.type;const i=new pn(t,this,e);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,i=t.type;if(i===$c.POINTERDOWN||i===Fe.WHEEL||i===Fe.KEYDOWN){const r=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():r,a=t.target;if(this.overlayContainerStopEvent_.contains(a)||!(s===r?r.documentElement:s).contains(a))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const r=this.getInteractions().getArray().slice();for(let s=r.length-1;s>=0;s--){const a=r[s];if(a.getMap()!==this||!a.getActive()||!this.getTargetElement())continue;if(!a.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let r=this.maxTilesLoading_,s=r;if(e){const a=e.viewHints;if(a[Wt.ANIMATING]||a[Wt.INTERACTING]){const o=Date.now()-e.time>8;r=o?0:8,s=o?0:2}}t.getTilesLoading()<r&&(t.reprioritize(),t.loadMoreTiles(r,s))}e&&this.renderer_&&!e.animate&&(this.renderComplete_===!0?(this.hasListener(xn.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(xn.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new Zr(_n.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new Zr(_n.LOADSTART,this,e))));const i=this.postRenderFunctions_;for(let r=0,s=i.length;r<s;++r)i[r](this,e);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let i=0,r=this.targetChangeHandlerKeys_.length;i<r;++i)st(this.targetChangeHandlerKeys_[i]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(Fe.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(Fe.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,Qc(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const i=this.targetElement_.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.unobserve(i.host)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new Sy(this)),this.mapBrowserEventHandler_=new My(this,this.moveTolerance_);for(const s in gt)this.mapBrowserEventHandler_.addEventListener(gt[s],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(Fe.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(Fe.WHEEL,this.boundHandleBrowserEvent_,ef?{passive:!1}:!1);const i=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.targetChangeHandlerKeys_=[We(i,Fe.KEYDOWN,this.handleBrowserEvent,this),We(i,Fe.KEYPRESS,this.handleBrowserEvent,this)];const r=t.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.observe(r.host),this.resizeObserver_.observe(t)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(st(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(st(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=We(e,ls.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=We(e,Fe.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(st),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new mn("addlayer",e)),this.layerGroupPropertyListenerKeys_=[We(e,ls.PROPERTYCHANGE,this.render,this),We(e,Fe.CHANGE,this.render,this),We(e,"addlayer",this.handleLayerAdd_,this),We(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,i=e.length;t<i;++t){const r=e[t].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){Bf(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),i=this.getView(),r=this.frameState_;let s=null;if(t!==void 0&&Xh(t)&&i&&i.isDef()){const a=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),o=i.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:jc(o.center,o.resolution,o.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:o,viewHints:a,wantedTiles:{},mapId:Ve(this),renderTargets:{}},o.nextCenter&&o.nextResolution){const l=isNaN(o.nextRotation)?o.rotation:o.nextRotation;s.nextExtent=jc(o.nextCenter,o.nextResolution,l,t)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),r&&(!this.previousExtent_||!vu(this.previousExtent_)&&!sa(s.extent,this.previousExtent_))&&(this.dispatchEvent(new Zr(_n.MOVESTART,this,r)),this.previousExtent_=ma(this.previousExtent_)),this.previousExtent_&&!s.viewHints[Wt.ANIMATING]&&!s.viewHints[Wt.INTERACTING]&&!sa(s.extent,this.previousExtent_)&&(this.dispatchEvent(new Zr(_n.MOVEEND,this,s)),nf(s.extent,this.previousExtent_))),this.dispatchEvent(new Zr(_n.POSTRENDER,this,s)),this.renderComplete_=this.hasListener(_n.LOADSTART)||this.hasListener(_n.LOADEND)||this.hasListener(xn.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new mn("removelayer",t)),this.set(Ut.LAYERGROUP,e)}setSize(e){this.set(Ut.SIZE,e)}setTarget(e){this.set(Ut.TARGET,e)}setView(e){if(!e||e instanceof ni){this.set(Ut.VIEW,e);return}this.set(Ut.VIEW,new ni);const t=this;e.then(function(i){t.setView(new ni(i))})}updateSize(){const e=this.getTargetElement();let t;if(e){const r=getComputedStyle(e),s=e.offsetWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight)-parseFloat(r.borderRightWidth),a=e.offsetHeight-parseFloat(r.borderTopWidth)-parseFloat(r.paddingTop)-parseFloat(r.paddingBottom)-parseFloat(r.borderBottomWidth);!isNaN(s)&&!isNaN(a)&&(t=[s,a],!Xh(t)&&!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&_f("No map visible because the map container's width or height are 0."))}const i=this.getSize();t&&(!i||!Cn(t,i))&&(this.setSize(t),this.updateViewportSize_())}updateViewportSize_(){const e=this.getView();if(e){let t;const i=getComputedStyle(this.viewport_);i.width&&i.height&&(t=[parseInt(i.width,10),parseInt(i.height,10)]),e.setViewportSize(t)}}}function Cv(n){let e=null;n.keyboardEventTarget!==void 0&&(e=typeof n.keyboardEventTarget=="string"?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);const t={},i=n.layers&&typeof n.layers.getLayers=="function"?n.layers:new pl({layers:n.layers});t[Ut.LAYERGROUP]=i,t[Ut.TARGET]=n.target,t[Ut.VIEW]=n.view instanceof ni?n.view:new ni;let r;n.controls!==void 0&&(Array.isArray(n.controls)?r=new Mi(n.controls.slice()):(Ne(typeof n.controls.getArray=="function",47),r=n.controls));let s;n.interactions!==void 0&&(Array.isArray(n.interactions)?s=new Mi(n.interactions.slice()):(Ne(typeof n.interactions.getArray=="function",48),s=n.interactions));let a;return n.overlays!==void 0?Array.isArray(n.overlays)?a=new Mi(n.overlays.slice()):(Ne(typeof n.overlays.getArray=="function",49),a=n.overlays):a=new Mi,{controls:r,interactions:s,keyboardEventTarget:e,overlays:a,values:t}}var ml=bv;class Yu extends Ai{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new Yu(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const i=this.getStyle();return i&&e.setStyle(i),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(st(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=We(e,Fe.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?Iv(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function Iv(n){if(typeof n=="function")return n;let e;return Array.isArray(n)?e=n:(Ne(typeof n.getZIndex=="function",41),e=[n]),function(){return e}}var Ji=Yu,Et={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class Xu{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=ri(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Xu({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return Le()}getImage(e){return Le()}getHitDetectionImage(){return Le()}getPixelRatio(e){return 1}getImageState(){return Le()}getImageSize(){return Le()}getOrigin(){return Le()}getSize(){return Le()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=ri(e)}listenImageChange(e){Le()}load(){Le()}unlistenImageChange(e){Le()}}var jf=Xu;function Li(n){return Array.isArray(n)?uf(n):n}class Hu extends jf{constructor(e){const t=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:1,rotateWithView:t,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius_=e.radius!==void 0?e.radius:e.radius1,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){const e=this.getScale(),t=new Hu({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_;if(!e)return null;const t=this.getDisplacement(),i=this.getScaleArray();return[e[0]/2-t[0]/i[0],e[1]/2+t[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(e){let t=this.canvas_[e];if(!t){const i=this.renderOptions_,r=Vt(i.size*e,i.size*e);this.draw_(i,r,e),t=r.canvas,this.canvas_[e]=t}return t}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return Et.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,i){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let r=this.radius_,s=this.radius2_===void 0?r:this.radius2_;if(r<s){const M=r;r=s,s=M}const a=this.radius2_===void 0?this.points_:this.points_*2,o=2*Math.PI/a,l=s*Math.sin(o),c=Math.sqrt(s*s-l*l),h=r-c,d=Math.sqrt(l*l+h*h),f=d/l;if(e==="miter"&&f<=i)return f*t;const p=t/2/f,m=t/2*(h/d),v=Math.sqrt((r+p)*(r+p)+m*m)-r;if(this.radius2_===void 0||e==="bevel")return v*2;const x=r*Math.sin(o),b=Math.sqrt(r*r-x*x),E=s-b,C=Math.sqrt(x*x+E*E)/x;if(C<=i){const M=C*t/2-s-r;return 2*Math.max(v,M)}return v*2}createRenderOptions(){let e=fs,t=0,i=null,r=0,s,a=0;this.stroke_&&(s=this.stroke_.getColor(),s===null&&(s=ua),s=Li(s),a=this.stroke_.getWidth(),a===void 0&&(a=da),i=this.stroke_.getLineDash(),r=this.stroke_.getLineDashOffset(),e=this.stroke_.getLineJoin(),e===void 0&&(e=fs),t=this.stroke_.getMiterLimit(),t===void 0&&(t=ca));const o=this.calculateLineJoinSize_(e,a,t),l=Math.max(this.radius_,this.radius2_||0),c=Math.ceil(2*l+o);return{strokeStyle:s,strokeWidth:a,size:c,lineDash:i,lineDashOffset:r,lineJoin:e,miterLimit:t}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.canvas_={},this.size_=[e,e]}draw_(e,t,i){if(t.scale(i,i),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let r=this.fill_.getColor();r===null&&(r=qi),t.fillStyle=Li(r),t.fill()}this.stroke_&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){if(this.fill_){let t=this.fill_.getColor(),i=0;if(typeof t=="string"&&(t=ko(t)),t===null?i=1:Array.isArray(t)&&(i=t.length===4?t[3]:1),i===0){const r=Vt(e.size,e.size);this.hitDetectionCanvas_=r.canvas,this.drawHitDetectionCanvas_(e,r)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(e){let t=this.points_;const i=this.radius_;if(t===1/0)e.arc(0,0,i,0,2*Math.PI);else{const r=this.radius2_===void 0?i:this.radius2_;this.radius2_!==void 0&&(t*=2);const s=this.angle_-Math.PI/2,a=2*Math.PI/t;for(let o=0;o<t;o++){const l=s+o*a,c=o%2===0?i:r;e.lineTo(c*Math.cos(l),c*Math.sin(l))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=qi,t.fill(),this.stroke_&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}}var zf=Hu;class Qu extends zf{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new Qu({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius_=e,this.render()}}var Gt=Qu;class Ku{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null}clone(){const e=this.getColor();return new Ku({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){this.color_=e}}var Ot=Ku;function Uf(n,e,t){const i=n;let r=!0,s=!1,a=!1;const o=[Do(i,Fe.LOAD,function(){a=!0,s||e()})];return i.src&&H_?(s=!0,i.decode().then(function(){r&&e()}).catch(function(l){r&&(a?e():t())})):o.push(Do(i,Fe.ERROR,t)),function(){r=!1,o.forEach(st)}}let Qs=null;class Sv extends rl{constructor(e,t,i,r,s,a){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=r,this.canvas_={},this.color_=a,this.unlisten_=null,this.imageState_=s,this.size_=i,this.src_=t,this.tainted_}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===Et.LOADED){Qs||(Qs=Vt(1,1,void 0,{willReadFrequently:!0})),Qs.drawImage(this.image_,0,0);try{Qs.getImageData(0,0,1,1),this.tainted_=!1}catch{Qs=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(Fe.CHANGE)}handleImageError_(){this.imageState_=Et.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=Et.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],i=Vt(e,t);i.fillRect(0,0,e,t),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===Et.IDLE){this.image_||this.initializeImage_(),this.imageState_=Et.LOADING;try{this.image_.src=this.src_}catch{this.handleImageError_()}this.unlisten_=Uf(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==Et.LOADED)return;const t=this.image_,i=document.createElement("canvas");i.width=Math.ceil(t.width*e),i.height=Math.ceil(t.height*e);const r=i.getContext("2d");r.scale(e,e),r.drawImage(t,0,0),r.globalCompositeOperation="multiply",r.fillStyle=cf(this.color_),r.fillRect(0,0,i.width/e,i.height/e),r.globalCompositeOperation="destination-in",r.drawImage(t,0,0),this.canvas_[e]=i}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function Rv(n,e,t,i,r,s){let a=No.get(e,i,s);return a||(a=new Sv(n,e,t,i,r,s),No.set(e,i,s,a)),a}class Vu extends jf{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,i=e.rotation!==void 0?e.rotation:0,r=e.scale!==void 0?e.scale:1,s=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:i,scale:r,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:s,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const a=e.img!==void 0?e.img:null;this.imgSize_=e.imgSize;let o=e.src;Ne(!(o!==void 0&&a),4),Ne(!a||a&&this.imgSize_,5),(o===void 0||o.length===0)&&a&&(o=a.src||Ve(a)),Ne(o!==void 0&&o.length>0,6),Ne(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),69);const l=e.src!==void 0?Et.IDLE:Et.LOADED;if(this.color_=e.color!==void 0?ko(e.color):null,this.iconImage_=Rv(a,o,this.imgSize_!==void 0?this.imgSize_:null,this.crossOrigin_,l,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.width_=e.width,this.height_=e.height,this.width_!==void 0||this.height_!==void 0){const c=this.getImage(1),h=()=>{this.updateScaleFromWidthAndHeight(this.width_,this.height_)};c.width>0?this.updateScaleFromWidthAndHeight(this.width_,this.height_):c.addEventListener("load",h)}}clone(){let e=this.getScale();return e=Array.isArray(e)?e.slice():e,(this.width_!==void 0||this.height_!==void 0)&&(e=void 0),new Vu({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode(),width:this.width_,height:this.height_})}updateScaleFromWidthAndHeight(e,t){const i=this.getImage(1);e!==void 0&&t!==void 0?super.setScale([e/i.width,t/i.height]):e!==void 0?super.setScale([e/i.width,e/i.width]):t!==void 0?super.setScale([t/i.height,t/i.height]):super.setScale([1,1])}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const r=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!r)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=r[0]),this.anchorYUnits_=="fraction"&&(e[1]*=r[1])}if(this.anchorOrigin_!="top-left"){if(!r)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+r[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+r[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),i=this.getScaleArray();return[e[0]-t[0]/i[0],e[1]+t[1]/i[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),i=this.iconImage_.getSize();if(!t||!i)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=i[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=i[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){return this.width_}getHeight(){return this.height_}setWidth(e){this.width_=e,this.updateScaleFromWidthAndHeight(e,this.height_)}setHeight(e){this.height_=e,this.updateScaleFromWidthAndHeight(this.width_,e)}setScale(e){super.setScale(e);const t=this.getImage(1);if(t){const i=Array.isArray(e)?e[0]:e;i!==void 0&&(this.width_=i*t.width);const r=Array.isArray(e)?e[1]:e;r!==void 0&&(this.height_=r*t.height)}}listenImageChange(e){this.iconImage_.addEventListener(Fe.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(Fe.CHANGE,e)}}var Wf=Vu;class $u{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new $u({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}var Kt=$u;class yl{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=Hh,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new yl({geometry:e,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=Hh,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function Tv(n){let e;if(typeof n=="function")e=n;else{let t;Array.isArray(n)?t=n:(Ne(typeof n.getZIndex=="function",41),t=[n]),e=function(){return t}}return e}let wc=null;function Ov(n,e){if(!wc){const t=new Ot({color:"rgba(255,255,255,0.4)"}),i=new Kt({color:"#3399CC",width:1.25});wc=[new yl({image:new Gt({fill:t,stroke:i,radius:5}),fill:t,stroke:i})]}return wc}function Hh(n){return n.getGeometry()}var vt=yl;const Mv="#333";class Zu{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=ri(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new Ot({color:Mv}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding}clone(){const e=this.getScale();return new Zu({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=ri(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}var Lv=Zu;class Pv{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const i=this.entries_[e];return Ne(i!==void 0,15),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(e){const t=this.entries_[e];return Ne(t!==void 0,15),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.key_;return e}getValues(){const e=new Array(this.count_);let t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){if(!!this.containsKey(e))return this.entries_[e].value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){Ne(!(e in this.entries_),16);const i={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[e]=i,++this.count_}setSize(e){this.highWaterMark=e}}var Fv=Pv;class Dv extends rl{constructor(e,t,i){super(),i=i||{},this.tileCoord=e,this.state=t,this.interimTile=null,this.key="",this.transition_=i.transition===void 0?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(Fe.CHANGE)}release(){this.state===Re.ERROR&&this.setState(Re.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let e=this.interimTile;do{if(e.getState()==Re.LOADED)return this.transition_=0,e;e=e.interimTile}while(e);return this}refreshInterimChain(){if(!this.interimTile)return;let e=this.interimTile,t=this;do{if(e.getState()==Re.LOADED){e.interimTile=null;break}else e.getState()==Re.LOADING?t=e:e.getState()==Re.IDLE?t.interimTile=e.interimTile:t=e;e=t.interimTile}while(e)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==Re.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}load(){Le()}getAlpha(e,t){if(!this.transition_)return 1;let i=this.transitionStarts_[e];if(!i)i=t,this.transitionStarts_[e]=i;else if(i===-1)return 1;const r=t-i+1e3/60;return r>=this.transition_?1:yf(r/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}}var Yf=Dv;class kv extends Yf{constructor(e,t,i,r,s,a){super(e,t,a),this.crossOrigin_=r,this.src_=i,this.key=i,this.image_=new Image,r!==null&&(this.image_.crossOrigin=r),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(e){this.image_=e,this.state=Re.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=Re.ERROR,this.unlistenImage_(),this.image_=Nv(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=Re.LOADED:this.state=Re.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==Re.ERROR&&(this.state=Re.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==Re.IDLE&&(this.state=Re.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=Uf(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function Nv(){const n=Vt(1,1);return n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1),n.canvas}var Xf=kv;const Bv=.5,Gv=10,Qh=.25;class jv{constructor(e,t,i,r,s,a){this.sourceProj_=e,this.targetProj_=t;let o={};const l=zo(this.targetProj_,this.sourceProj_);this.transformInv_=function(b){const E=b[0]+"/"+b[1];return o[E]||(o[E]=l(b)),o[E]},this.maxSourceExtent_=r,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&rt(r)==rt(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?rt(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?rt(this.targetProj_.getExtent()):null;const c=nr(i),h=cl(i),d=ll(i),f=ol(i),p=this.transformInv_(c),m=this.transformInv_(h),y=this.transformInv_(d),v=this.transformInv_(f),x=Gv+(a?Math.max(0,Math.ceil(Math.log2(Gc(i)/(a*a*256*256)))):0);if(this.addQuad_(c,h,d,f,p,m,y,v,x),this.wrapsXInSource_){let b=1/0;this.triangles_.forEach(function(E,I,C){b=Math.min(b,E.source[0][0],E.source[1][0],E.source[2][0])}),this.triangles_.forEach(E=>{if(Math.max(E.source[0][0],E.source[1][0],E.source[2][0])-b>this.sourceWorldWidth_/2){const I=[[E.source[0][0],E.source[0][1]],[E.source[1][0],E.source[1][1]],[E.source[2][0],E.source[2][1]]];I[0][0]-b>this.sourceWorldWidth_/2&&(I[0][0]-=this.sourceWorldWidth_),I[1][0]-b>this.sourceWorldWidth_/2&&(I[1][0]-=this.sourceWorldWidth_),I[2][0]-b>this.sourceWorldWidth_/2&&(I[2][0]-=this.sourceWorldWidth_);const C=Math.min(I[0][0],I[1][0],I[2][0]);Math.max(I[0][0],I[1][0],I[2][0])-C<this.sourceWorldWidth_/2&&(E.source=I)}})}o={}}addTriangle_(e,t,i,r,s,a){this.triangles_.push({source:[r,s,a],target:[e,t,i]})}addQuad_(e,t,i,r,s,a,o,l,c){const h=xh([s,a,o,l]),d=this.sourceWorldWidth_?rt(h)/this.sourceWorldWidth_:null,f=this.sourceWorldWidth_,p=this.sourceProj_.canWrapX()&&d>.5&&d<1;let m=!1;if(c>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const v=xh([e,t,i,r]);m=rt(v)/this.targetWorldWidth_>Qh||m}!p&&this.sourceProj_.isGlobal()&&d&&(m=d>Qh||m)}if(!m&&this.maxSourceExtent_&&isFinite(h[0])&&isFinite(h[1])&&isFinite(h[2])&&isFinite(h[3])&&!Qt(h,this.maxSourceExtent_))return;let y=0;if(!m&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(l[0])||!isFinite(l[1]))){if(c>0)m=!0;else if(y=(!isFinite(s[0])||!isFinite(s[1])?8:0)+(!isFinite(a[0])||!isFinite(a[1])?4:0)+(!isFinite(o[0])||!isFinite(o[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),y!=1&&y!=2&&y!=4&&y!=8)return}if(c>0){if(!m){const v=[(e[0]+i[0])/2,(e[1]+i[1])/2],x=this.transformInv_(v);let b;p?b=(Zn(s[0],f)+Zn(o[0],f))/2-Zn(x[0],f):b=(s[0]+o[0])/2-x[0];const E=(s[1]+o[1])/2-x[1];m=b*b+E*E>this.errorThresholdSquared_}if(m){if(Math.abs(e[0]-i[0])<=Math.abs(e[1]-i[1])){const v=[(t[0]+i[0])/2,(t[1]+i[1])/2],x=this.transformInv_(v),b=[(r[0]+e[0])/2,(r[1]+e[1])/2],E=this.transformInv_(b);this.addQuad_(e,t,v,b,s,a,x,E,c-1),this.addQuad_(b,v,i,r,E,x,o,l,c-1)}else{const v=[(e[0]+t[0])/2,(e[1]+t[1])/2],x=this.transformInv_(v),b=[(i[0]+r[0])/2,(i[1]+r[1])/2],E=this.transformInv_(b);this.addQuad_(e,v,b,r,s,x,E,l,c-1),this.addQuad_(v,t,i,b,x,a,o,E,c-1)}return}}if(p){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(y&11)==0&&this.addTriangle_(e,i,r,s,o,l),(y&14)==0&&this.addTriangle_(e,i,t,s,o,a),y&&((y&13)==0&&this.addTriangle_(t,r,e,a,l,s),(y&7)==0&&this.addTriangle_(t,r,i,a,l,o))}calculateSourceExtent(){const e=ui();return this.triangles_.forEach(function(t,i,r){const s=t.source;Js(e,s[0]),Js(e,s[1]),Js(e,s[2])}),e}getTriangles(){return this.triangles_}}var zv=jv;let xc;const os=[];function Kh(n,e,t,i,r){n.beginPath(),n.moveTo(0,0),n.lineTo(e,t),n.lineTo(i,r),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(e,i)+1,Math.max(t,r)),n.restore()}function Ec(n,e){return Math.abs(n[e*4]-210)>2||Math.abs(n[e*4+3]-.75*255)>2}function Uv(){if(xc===void 0){const n=Vt(6,6,os);n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",Kh(n,4,5,4,0),Kh(n,4,5,0,5);const e=n.getImageData(0,0,3,3).data;xc=Ec(e,0)||Ec(e,4)||Ec(e,8),gl(n),os.push(n.canvas)}return xc}function Vh(n,e,t,i){const r=Iu(t,e,n);let s=jo(e,i,t);const a=e.getMetersPerUnit();a!==void 0&&(s*=a);const o=n.getMetersPerUnit();o!==void 0&&(s/=o);const l=n.getExtent();if(!l||al(l,r)){const c=jo(n,s,r)/s;isFinite(c)&&c>0&&(s/=c)}return s}function Wv(n,e,t,i){const r=tr(t);let s=Vh(n,e,r,i);return(!isFinite(s)||s<=0)&&of(t,function(a){return s=Vh(n,e,a,i),isFinite(s)&&s>0}),s}function Yv(n,e,t,i,r,s,a,o,l,c,h,d){const f=Vt(Math.round(t*n),Math.round(t*e),os);if(d||(f.imageSmoothingEnabled=!1),l.length===0)return f.canvas;f.scale(t,t);function p(I){return Math.round(I*t)/t}f.globalCompositeOperation="lighter";const m=ui();l.forEach(function(I,C,M){sf(m,I.extent)});const y=rt(m),v=Di(m),x=Vt(Math.round(t*y/i),Math.round(t*v/i),os);d||(x.imageSmoothingEnabled=!1);const b=t/i;l.forEach(function(I,C,M){const D=I.extent[0]-m[0],P=-(I.extent[3]-m[3]),z=rt(I.extent),j=Di(I.extent);I.image.width>0&&I.image.height>0&&x.drawImage(I.image,c,c,I.image.width-2*c,I.image.height-2*c,D*b,P*b,z*b,j*b)});const E=nr(a);return o.getTriangles().forEach(function(I,C,M){const D=I.source,P=I.target;let z=D[0][0],j=D[0][1],Q=D[1][0],q=D[1][1],J=D[2][0],ye=D[2][1];const $=p((P[0][0]-E[0])/s),N=p(-(P[0][1]-E[1])/s),G=p((P[1][0]-E[0])/s),B=p(-(P[1][1]-E[1])/s),W=p((P[2][0]-E[0])/s),X=p(-(P[2][1]-E[1])/s),ie=z,U=j;z=0,j=0,Q-=ie,q-=U,J-=ie,ye-=U;const re=[[Q,q,0,0,G-$],[J,ye,0,0,W-$],[0,0,Q,q,B-N],[0,0,J,ye,X-N]],ce=rm(re);if(!!ce){if(f.save(),f.beginPath(),Uv()||!d){f.moveTo(G,B);const me=4,Ue=$-G,se=N-B;for(let fe=0;fe<me;fe++)f.lineTo(G+p((fe+1)*Ue/me),B+p(fe*se/(me-1))),fe!=me-1&&f.lineTo(G+p((fe+1)*Ue/me),B+p((fe+1)*se/(me-1)));f.lineTo(W,X)}else f.moveTo(G,B),f.lineTo($,N),f.lineTo(W,X);f.clip(),f.transform(ce[0],ce[2],ce[1],ce[3],$,N),f.translate(m[0]-ie,m[3]-U),f.scale(i/t,-i/t),f.drawImage(x.canvas,0,0),f.restore()}}),gl(x),os.push(x.canvas),h&&(f.save(),f.globalCompositeOperation="source-over",f.strokeStyle="black",f.lineWidth=1,o.getTriangles().forEach(function(I,C,M){const D=I.target,P=(D[0][0]-E[0])/s,z=-(D[0][1]-E[1])/s,j=(D[1][0]-E[0])/s,Q=-(D[1][1]-E[1])/s,q=(D[2][0]-E[0])/s,J=-(D[2][1]-E[1])/s;f.beginPath(),f.moveTo(j,Q),f.lineTo(P,z),f.lineTo(q,J),f.closePath(),f.stroke()}),f.restore()),f.canvas}class Xv extends Yf{constructor(e,t,i,r,s,a,o,l,c,h,d,f){super(s,Re.IDLE,{interpolate:!!f}),this.renderEdges_=d!==void 0?d:!1,this.pixelRatio_=o,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=r,this.wrappedTileCoord_=a||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const p=r.getTileCoordExtent(this.wrappedTileCoord_),m=this.targetTileGrid_.getExtent();let y=this.sourceTileGrid_.getExtent();const v=m?ea(p,m):p;if(Gc(v)===0){this.state=Re.EMPTY;return}const x=e.getExtent();x&&(y?y=ea(y,x):y=x);const b=r.getResolution(this.wrappedTileCoord_[0]),E=Wv(e,i,v,b);if(!isFinite(E)||E<=0){this.state=Re.EMPTY;return}const I=h!==void 0?h:Bv;if(this.triangulation_=new zv(e,i,v,y,E*I,b),this.triangulation_.getTriangles().length===0){this.state=Re.EMPTY;return}this.sourceZ_=t.getZForResolution(E);let C=this.triangulation_.calculateSourceExtent();if(y&&(e.canWrapX()?(C[1]=xt(C[1],y[1],y[3]),C[3]=xt(C[3],y[1],y[3])):C=ea(C,y)),!Gc(C))this.state=Re.EMPTY;else{const M=t.getTileRangeForExtentAndZ(C,this.sourceZ_);for(let D=M.minX;D<=M.maxX;D++)for(let P=M.minY;P<=M.maxY;P++){const z=c(this.sourceZ_,D,P,o);z&&this.sourceTiles_.push(z)}this.sourceTiles_.length===0&&(this.state=Re.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{t&&t.getState()==Re.LOADED&&e.push({extent:this.sourceTileGrid_.getTileCoordExtent(t.tileCoord),image:t.getImage()})}),this.sourceTiles_.length=0,e.length===0)this.state=Re.ERROR;else{const t=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(t),r=typeof i=="number"?i:i[0],s=typeof i=="number"?i:i[1],a=this.targetTileGrid_.getResolution(t),o=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Yv(r,s,this.pixelRatio_,o,this.sourceTileGrid_.getExtent(),a,l,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=Re.LOADED}this.changed()}load(){if(this.state==Re.IDLE){this.state=Re.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(t=>{const i=t.getState();if(i==Re.IDLE||i==Re.LOADING){e++;const r=We(t,Fe.CHANGE,function(s){const a=t.getState();(a==Re.LOADED||a==Re.ERROR||a==Re.EMPTY)&&(st(r),e--,e===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(r)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(t,i,r){t.getState()==Re.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(st),this.sourcesListenerKeys_=null}release(){this.canvas_&&(gl(this.canvas_.getContext("2d")),os.push(this.canvas_),this.canvas_=null),super.release()}}var qc=Xv;function $h(n,e,t,i){return i!==void 0?(i[0]=n,i[1]=e,i[2]=t,i):[n,e,t]}function vl(n,e,t){return n+"/"+e+"/"+t}function Hf(n){return vl(n[0],n[1],n[2])}function Hv(n){return n.split("/").map(Number)}function Qv(n){return(n[1]<<n[0])+n[2]}function Kv(n,e){const t=n[0],i=n[1],r=n[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const s=e.getFullTileRange(t);return s?s.containsXY(i,r):!0}class Vv extends Fv{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(e){for(;this.canExpireCache()&&!(this.peekLast().getKey()in e);)this.pop().release()}pruneExceptNewestZ(){if(this.getCount()===0)return;const e=this.peekFirstKey(),i=Hv(e)[0];this.forEach(r=>{r.tileCoord[0]!==i&&(this.remove(Hf(r.tileCoord)),r.release())})}}var Qf=Vv,bc={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class $v extends Ai{constructor(e){super(),this.projection=yt(e.projection),this.attributions_=Zh(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible!==void 0?e.attributionsCollapsible:!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(i,r){t.viewResolver=i,t.viewRejector=r})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=Zh(e),this.changed()}setState(e){this.state_=e,this.changed()}}function Zh(n){return n?Array.isArray(n)?function(e){return n}:typeof n=="function"?n:function(e){return[n]}:null}var Kf=$v;class Vf{constructor(e,t,i,r){this.minX=e,this.maxX=t,this.minY=i,this.maxY=r}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function Yr(n,e,t,i,r){return r!==void 0?(r.minX=n,r.maxX=e,r.minY=t,r.maxY=i,r):new Vf(n,e,t,i)}var $f=Vf;const Xr=[0,0,0],hn=5;class Zv{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,Ne(P_(this.resolutions_,function(r,s){return s-r},!0),17);let t;if(!e.origins){for(let r=0,s=this.resolutions_.length-1;r<s;++r)if(!t)t=this.resolutions_[r]/this.resolutions_[r+1];else if(this.resolutions_[r]/this.resolutions_[r+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,Ne(this.origins_.length==this.resolutions_.length,20));const i=e.extent;i!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=nr(i)),Ne(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,Ne(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:wu,Ne(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=i!==void 0?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map(function(r,s){const a=new $f(Math.min(0,r[0]),Math.max(r[0]-1,-1),Math.min(0,r[1]),Math.max(r[1]-1,-1));if(i){const o=this.getTileRangeForExtentAndZ(i,s);a.minX=Math.max(o.minX,a.minX),a.maxX=Math.min(o.maxX,a.maxX),a.minY=Math.max(o.minY,a.minY),a.maxY=Math.min(o.maxY,a.maxY)}return a},this):i&&this.calculateTileRanges_(i)}forEachTileCoord(e,t,i){const r=this.getTileRangeForExtentAndZ(e,t);for(let s=r.minX,a=r.maxX;s<=a;++s)for(let o=r.minY,l=r.maxY;o<=l;++o)i([t,s,o])}forEachTileCoordParentTileRange(e,t,i,r){let s,a,o,l=null,c=e[0]-1;for(this.zoomFactor_===2?(a=e[1],o=e[2]):l=this.getTileCoordExtent(e,r);c>=this.minZoom;){if(this.zoomFactor_===2?(a=Math.floor(a/2),o=Math.floor(o/2),s=Yr(a,a,o,o,i)):s=this.getTileRangeForExtentAndZ(l,c,i),t(c,s))return!0;--c}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,i){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const s=e[1]*2,a=e[2]*2;return Yr(s,s+1,a,a+1,t)}const r=this.getTileCoordExtent(e,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,i){if(t>this.maxZoom||t<this.minZoom)return null;const r=e[0],s=e[1],a=e[2];if(t===r)return Yr(s,a,s,a,i);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,t-r),c=Math.floor(s*l),h=Math.floor(a*l);if(t<r)return Yr(c,c,h,h,i);const d=Math.floor(l*(s+1))-1,f=Math.floor(l*(a+1))-1;return Yr(c,d,h,f,i)}const o=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(o,t,i)}getTileRangeExtent(e,t,i){const r=this.getOrigin(e),s=this.getResolution(e),a=ri(this.getTileSize(e),this.tmpSize_),o=r[0]+t.minX*a[0]*s,l=r[0]+(t.maxX+1)*a[0]*s,c=r[1]+t.minY*a[1]*s,h=r[1]+(t.maxY+1)*a[1]*s;return tn(o,c,l,h,i)}getTileRangeForExtentAndZ(e,t,i){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,Xr);const r=Xr[1],s=Xr[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,Xr);const a=Xr[1],o=Xr[2];return Yr(r,a,s,o,i)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),i=this.getResolution(e[0]),r=ri(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*r[0]*i,t[1]-(e[2]+.5)*r[1]*i]}getTileCoordExtent(e,t){const i=this.getOrigin(e[0]),r=this.getResolution(e[0]),s=ri(this.getTileSize(e[0]),this.tmpSize_),a=i[0]+e[1]*s[0]*r,o=i[1]-(e[2]+1)*s[1]*r,l=a+s[0]*r,c=o+s[1]*r;return tn(a,o,l,c,t)}getTileCoordForCoordAndResolution(e,t,i){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,i)}getTileCoordForXYAndResolution_(e,t,i,r,s){const a=this.getZForResolution(i),o=i/this.getResolution(a),l=this.getOrigin(a),c=ri(this.getTileSize(a),this.tmpSize_);let h=o*(e-l[0])/i/c[0],d=o*(l[1]-t)/i/c[1];return r?(h=Ao(h,hn)-1,d=Ao(d,hn)-1):(h=vo(h,hn),d=vo(d,hn)),$h(a,h,d,s)}getTileCoordForXYAndZ_(e,t,i,r,s){const a=this.getOrigin(i),o=this.getResolution(i),l=ri(this.getTileSize(i),this.tmpSize_);let c=(e-a[0])/o/l[0],h=(a[1]-t)/o/l[1];return r?(c=Ao(c,hn)-1,h=Ao(h,hn)-1):(c=vo(c,hn),h=vo(h,hn)),$h(i,c,h,s)}getTileCoordForCoordAndZ(e,t,i){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,i)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const i=gu(this.resolutions_,e,t||0);return xt(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return If(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,i=new Array(t);for(let r=this.minZoom;r<t;++r)i[r]=this.getTileRangeForExtentAndZ(e,r);this.fullTileRanges_=i}}var Zf=Zv;function qf(n){let e=n.getDefaultTileGrid();return e||(e=e0(n),n.setDefaultTileGrid(e)),e}function qv(n,e,t){const i=e[0],r=n.getTileCoordCenter(e),s=qu(t);if(!al(s,r)){const a=rt(s),o=Math.ceil((s[0]-r[0])/a);return r[0]+=a*o,n.getTileCoordForCoordAndZ(r,i)}return e}function Jv(n,e,t,i){i=i!==void 0?i:"top-left";const r=Jf(n,e,t);return new Zf({extent:n,origin:J_(n,i),resolutions:r,tileSize:t})}function Al(n){const e=n||{},t=e.extent||yt("EPSG:3857").getExtent(),i={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:Jf(t,e.maxZoom,e.tileSize,e.maxResolution)};return new Zf(i)}function Jf(n,e,t,i){e=e!==void 0?e:dm,t=ri(t!==void 0?t:wu);const r=Di(n),s=rt(n);i=i>0?i:Math.max(s/t[0],r/t[1]);const a=e+1,o=new Array(a);for(let l=0;l<a;++l)o[l]=i/Math.pow(2,l);return o}function e0(n,e,t,i){const r=qu(n);return Jv(r,e,t,i)}function qu(n){n=yt(n);let e=n.getExtent();if(!e){const t=180*hs.degrees/n.getMetersPerUnit();e=tn(-t,-t,t,t)}return e}class t0 extends Kf{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.opaque_=e.opaque!==void 0?e.opaque:!1,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&ri(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tileCache=new Qf(e.cacheSize||0),this.tmpSize=[0,0],this.key_=e.key||"",this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(e,t){const i=this.getTileCacheForProjection(e);i&&i.expireCache(t)}forEachLoadedTile(e,t,i,r){const s=this.getTileCacheForProjection(e);if(!s)return!1;let a=!0,o,l,c;for(let h=i.minX;h<=i.maxX;++h)for(let d=i.minY;d<=i.maxY;++d)l=vl(t,h,d),c=!1,s.containsKey(l)&&(o=s.get(l),c=o.getState()===Re.LOADED,c&&(c=r(o)!==!1)),c||(a=!1);return a}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getOpaque(e){return this.opaque_}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,i,r,s){return Le()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:qf(e)}getTileCacheForProjection(e){const t=this.getProjection();return Ne(t===null||Xn(t,e),68),this.tileCache}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,i){const r=this.getTileGridForProjection(i),s=this.getTilePixelRatio(t),a=ri(r.getTileSize(e),this.tmpSize);return s==1?a:Ev(a,s,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){t=t!==void 0?t:this.getProjection();const i=this.getTileGridForProjection(t);return this.getWrapX()&&t.isGlobal()&&(e=qv(i,e,t)),Kv(e,i)?e:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(e,t){const i=this.getTileCacheForProjection(t);e>i.highWaterMark&&(i.highWaterMark=e)}useTile(e,t,i,r){}}class i0 extends Bi{constructor(e,t){super(e),this.tile=t}}var n0=t0;function r0(n,e){const t=/\{z\}/g,i=/\{x\}/g,r=/\{y\}/g,s=/\{-y\}/g;return function(a,o,l){if(!!a)return n.replace(t,a[0].toString()).replace(i,a[1].toString()).replace(r,a[2].toString()).replace(s,function(){const c=a[0],h=e.getFullTileRange(c);return Ne(h,55),(h.getHeight()-a[2]-1).toString()})}}function s0(n,e){const t=n.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=r0(n[r],e);return a0(i)}function a0(n){return n.length===1?n[0]:function(e,t,i){if(!e)return;const r=Qv(e),s=Zn(r,n.length);return n[s](e,t,i)}}function o0(n){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(n);if(t){const i=t[1].charCodeAt(0),r=t[2].charCodeAt(0);let s;for(s=i;s<=r;++s)e.push(n.replace(t[0],String.fromCharCode(s)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(n),t){const i=parseInt(t[2],10);for(let r=parseInt(t[1],10);r<=i;r++)e.push(n.replace(t[0],r.toString()));return e}return e.push(n),e}class Ju extends n0{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===Ju.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,i=Ve(t),r=t.getState();let s;r==Re.LOADING?(this.tileLoadingKeys_[i]=!0,s=bc.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],s=r==Re.ERROR?bc.TILELOADERROR:r==Re.LOADED?bc.TILELOADEND:void 0),s!=null&&this.dispatchEvent(new i0(s,t))}setTileLoadFunction(e){this.tileCache.clear(),this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,this.tileCache.pruneExceptNewestZ(),typeof t!="undefined"?this.setKey(t):this.changed()}setUrl(e){const t=o0(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(s0(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,i){}useTile(e,t,i){const r=vl(e,t,i);this.tileCache.containsKey(r)&&this.tileCache.get(r)}}var l0=Ju;class c0 extends l0{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:u0,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:Xf,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1}expireCache(e,t){const i=this.getTileCacheForProjection(e);this.tileCache.expireCache(this.tileCache==i?t:{});for(const r in this.tileCacheForProjection){const s=this.tileCacheForProjection[r];s.expireCache(s==i?t:{})}}getGutterForProjection(e){return this.getProjection()&&e&&!Xn(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getOpaque(e){return this.getProjection()&&e&&!Xn(this.getProjection(),e)?!1:super.getOpaque(e)}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||Xn(t,e)))return this.tileGrid;const i=Ve(e);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=qf(e)),this.tileGridForProjection[i]}getTileCacheForProjection(e){const t=this.getProjection();if(!t||Xn(t,e))return this.tileCache;const i=Ve(e);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new Qf(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]}createTile_(e,t,i,r,s,a){const o=[e,t,i],l=this.getTileCoordForTileUrlFunction(o,s),c=l?this.tileUrlFunction(l,r,s):void 0,h=new this.tileClass(o,c!==void 0?Re.IDLE:Re.EMPTY,c!==void 0?c:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return h.key=a,h.addEventListener(Fe.CHANGE,this.handleTileChange.bind(this)),h}getTile(e,t,i,r,s){const a=this.getProjection();if(!a||!s||Xn(a,s))return this.getTileInternal(e,t,i,r,a||s);const o=this.getTileCacheForProjection(s),l=[e,t,i];let c;const h=Hf(l);o.containsKey(h)&&(c=o.get(h));const d=this.getKey();if(c&&c.key==d)return c;const f=this.getTileGridForProjection(a),p=this.getTileGridForProjection(s),m=this.getTileCoordForTileUrlFunction(l,s),y=new qc(a,f,s,p,l,m,this.getTilePixelRatio(r),this.getGutter(),(v,x,b,E)=>this.getTileInternal(v,x,b,E,a),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return y.key=d,c?(y.interimTile=c,y.refreshInterimChain(),o.replace(h,y)):o.set(h,y),y}getTileInternal(e,t,i,r,s){let a=null;const o=vl(e,t,i),l=this.getKey();if(!this.tileCache.containsKey(o))a=this.createTile_(e,t,i,r,s,l),this.tileCache.set(o,a);else if(a=this.tileCache.get(o),a.key!=l){const c=a;a=this.createTile_(e,t,i,r,s,l),c.getState()==Re.IDLE?a.interimTile=c.interimTile:a.interimTile=c,a.refreshInterimChain(),this.tileCache.replace(o,a)}return a}setRenderReprojectionEdges(e){if(this.renderReprojectionEdges_!=e){this.renderReprojectionEdges_=e;for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear();this.changed()}}setTileGridForProjection(e,t){const i=yt(e);if(i){const r=Ve(i);r in this.tileGridForProjection||(this.tileGridForProjection[r]=t)}}clear(){super.clear();for(const e in this.tileCacheForProjection)this.tileCacheForProjection[e].clear()}}function u0(n,e){n.getImage().src=e}var h0=c0;class d0 extends h0{constructor(e){e=e||{};const t=e.projection!==void 0?e.projection:"EPSG:3857",i=e.tileGrid!==void 0?e.tileGrid:Al({extent:qu(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,opaque:e.opaque,projection:t,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}}var sr=d0;function f0(n,e,t,i,r){eg(n,e,t||0,i||n.length-1,r||g0)}function eg(n,e,t,i,r){for(;i>t;){if(i-t>600){var s=i-t+1,a=e-t+1,o=Math.log(s),l=.5*Math.exp(2*o/3),c=.5*Math.sqrt(o*l*(s-l)/s)*(a-s/2<0?-1:1),h=Math.max(t,Math.floor(e-a*l/s+c)),d=Math.min(i,Math.floor(e+(s-a)*l/s+c));eg(n,e,h,d,r)}var f=n[e],p=t,m=i;for(Ks(n,t,e),r(n[i],f)>0&&Ks(n,t,i);p<m;){for(Ks(n,p,m),p++,m--;r(n[p],f)<0;)p++;for(;r(n[m],f)>0;)m--}r(n[t],f)===0?Ks(n,t,m):(m++,Ks(n,m,i)),m<=e&&(t=m+1),e<=m&&(i=m-1)}}function Ks(n,e,t){var i=n[e];n[e]=n[t],n[t]=i}function g0(n,e){return n<e?-1:n>e?1:0}class tg{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const i=[];if(!Io(e,t))return i;const r=this.toBBox,s=[];for(;t;){for(let a=0;a<t.children.length;a++){const o=t.children[a],l=t.leaf?r(o):o;Io(e,l)&&(t.leaf?i.push(o):Ic(e,l)?this._all(o,i):s.push(o))}t=s.pop()}return i}collides(e){let t=this.data;if(!Io(e,t))return!1;const i=[];for(;t;){for(let r=0;r<t.children.length;r++){const s=t.children[r],a=t.leaf?this.toBBox(s):s;if(Io(e,a)){if(t.leaf||Ic(e,a))return!0;i.push(s)}}t=i.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let i=0;i<e.length;i++)this.insert(e[i]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const i=this.data;this.data=t,t=i}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=qr([]),this}remove(e,t){if(!e)return this;let i=this.data;const r=this.toBBox(e),s=[],a=[];let o,l,c;for(;i||s.length;){if(i||(i=s.pop(),l=s[s.length-1],o=a.pop(),c=!0),i.leaf){const h=p0(e,i.children,t);if(h!==-1)return i.children.splice(h,1),s.push(i),this._condense(s),this}!c&&!i.leaf&&Ic(i,r)?(s.push(i),a.push(o),o=0,l=i,i=i.children[0]):l?(o++,i=l.children[o],c=!1):i=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const i=[];for(;e;)e.leaf?t.push(...e.children):i.push(...e.children),e=i.pop();return t}_build(e,t,i,r){const s=i-t+1;let a=this._maxEntries,o;if(s<=a)return o=qr(e.slice(t,i+1)),Hr(o,this.toBBox),o;r||(r=Math.ceil(Math.log(s)/Math.log(a)),a=Math.ceil(s/Math.pow(a,r-1))),o=qr([]),o.leaf=!1,o.height=r;const l=Math.ceil(s/a),c=l*Math.ceil(Math.sqrt(a));qh(e,t,i,c,this.compareMinX);for(let h=t;h<=i;h+=c){const d=Math.min(h+c-1,i);qh(e,h,d,l,this.compareMinY);for(let f=h;f<=d;f+=l){const p=Math.min(f+l-1,d);o.children.push(this._build(e,f,p,r-1))}}return Hr(o,this.toBBox),o}_chooseSubtree(e,t,i,r){for(;r.push(t),!(t.leaf||r.length-1===i);){let s=1/0,a=1/0,o;for(let l=0;l<t.children.length;l++){const c=t.children[l],h=Cc(c),d=y0(e,c)-h;d<a?(a=d,s=h<s?h:s,o=c):d===a&&h<s&&(s=h,o=c)}t=o||t.children[0]}return t}_insert(e,t,i){const r=i?e:this.toBBox(e),s=[],a=this._chooseSubtree(r,this.data,t,s);for(a.children.push(e),Zs(a,r);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(r,s,t)}_split(e,t){const i=e[t],r=i.children.length,s=this._minEntries;this._chooseSplitAxis(i,s,r);const a=this._chooseSplitIndex(i,s,r),o=qr(i.children.splice(a,i.children.length-a));o.height=i.height,o.leaf=i.leaf,Hr(i,this.toBBox),Hr(o,this.toBBox),t?e[t-1].children.push(o):this._splitRoot(i,o)}_splitRoot(e,t){this.data=qr([e,t]),this.data.height=e.height+1,this.data.leaf=!1,Hr(this.data,this.toBBox)}_chooseSplitIndex(e,t,i){let r,s=1/0,a=1/0;for(let o=t;o<=i-t;o++){const l=$s(e,0,o,this.toBBox),c=$s(e,o,i,this.toBBox),h=v0(l,c),d=Cc(l)+Cc(c);h<s?(s=h,r=o,a=d<a?d:a):h===s&&d<a&&(a=d,r=o)}return r||i-t}_chooseSplitAxis(e,t,i){const r=e.leaf?this.compareMinX:_0,s=e.leaf?this.compareMinY:m0,a=this._allDistMargin(e,t,i,r),o=this._allDistMargin(e,t,i,s);a<o&&e.children.sort(r)}_allDistMargin(e,t,i,r){e.children.sort(r);const s=this.toBBox,a=$s(e,0,t,s),o=$s(e,i-t,i,s);let l=Co(a)+Co(o);for(let c=t;c<i-t;c++){const h=e.children[c];Zs(a,e.leaf?s(h):h),l+=Co(a)}for(let c=i-t-1;c>=t;c--){const h=e.children[c];Zs(o,e.leaf?s(h):h),l+=Co(o)}return l}_adjustParentBBoxes(e,t,i){for(let r=i;r>=0;r--)Zs(t[r],e)}_condense(e){for(let t=e.length-1,i;t>=0;t--)e[t].children.length===0?t>0?(i=e[t-1].children,i.splice(i.indexOf(e[t]),1)):this.clear():Hr(e[t],this.toBBox)}}function p0(n,e,t){if(!t)return e.indexOf(n);for(let i=0;i<e.length;i++)if(t(n,e[i]))return i;return-1}function Hr(n,e){$s(n,0,n.children.length,e,n)}function $s(n,e,t,i,r){r||(r=qr(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let s=e;s<t;s++){const a=n.children[s];Zs(r,n.leaf?i(a):a)}return r}function Zs(n,e){return n.minX=Math.min(n.minX,e.minX),n.minY=Math.min(n.minY,e.minY),n.maxX=Math.max(n.maxX,e.maxX),n.maxY=Math.max(n.maxY,e.maxY),n}function _0(n,e){return n.minX-e.minX}function m0(n,e){return n.minY-e.minY}function Cc(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function Co(n){return n.maxX-n.minX+(n.maxY-n.minY)}function y0(n,e){return(Math.max(e.maxX,n.maxX)-Math.min(e.minX,n.minX))*(Math.max(e.maxY,n.maxY)-Math.min(e.minY,n.minY))}function v0(n,e){const t=Math.max(n.minX,e.minX),i=Math.max(n.minY,e.minY),r=Math.min(n.maxX,e.maxX),s=Math.min(n.maxY,e.maxY);return Math.max(0,r-t)*Math.max(0,s-i)}function Ic(n,e){return n.minX<=e.minX&&n.minY<=e.minY&&e.maxX<=n.maxX&&e.maxY<=n.maxY}function Io(n,e){return e.minX<=n.maxX&&e.minY<=n.maxY&&e.maxX>=n.minX&&e.maxY>=n.minY}function qr(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function qh(n,e,t,i,r){const s=[e,t];for(;s.length;){if(t=s.pop(),e=s.pop(),t-e<=i)continue;const a=e+Math.ceil((t-e)/i/2)*i;f0(n,a,e,t,r),s.push(e,a,a,t)}}class A0{constructor(e){this.rbush_=new tg(e),this.items_={}}insert(e,t){const i={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(i),this.items_[Ve(t)]=i}load(e,t){const i=new Array(t.length);for(let r=0,s=t.length;r<s;r++){const a=e[r],o=t[r],l={minX:a[0],minY:a[1],maxX:a[2],maxY:a[3],value:o};i[r]=l,this.items_[Ve(o)]=l}this.rbush_.load(i)}remove(e){const t=Ve(e),i=this.items_[t];return delete this.items_[t],this.rbush_.remove(i)!==null}update(e,t){const i=this.items_[Ve(t)],r=[i.minX,i.minY,i.maxX,i.maxY];sa(r,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(r){return r.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let i;for(let r=0,s=e.length;r<s;r++)if(i=t(e[r]),i)return i;return i}isEmpty(){return us(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return tn(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}var Jh=A0,vi={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function w0(n,e){return[[-1/0,-1/0,1/0,1/0]]}function eh(n){return function(e,t,i){const r=n.getZForResolution(Mm(t)),s=n.getTileRangeForExtentAndZ(vn(e),r),a=[],o=[r,0,0];for(o[1]=s.minX;o[1]<=s.maxX;++o[1])for(o[2]=s.minY;o[2]<=s.maxY;++o[2])a.push(Su(n.getTileCoordExtent(o)));return a}}let x0=!1;function E0(n,e,t,i,r,s,a){const o=new XMLHttpRequest;o.open("GET",typeof n=="function"?n(t,i,r):n,!0),e.getType()=="arraybuffer"&&(o.responseType="arraybuffer"),o.withCredentials=x0,o.onload=function(l){if(!o.status||o.status>=200&&o.status<300){const c=e.getType();let h;c=="json"||c=="text"?h=o.responseText:c=="xml"?(h=o.responseXML,h||(h=new DOMParser().parseFromString(o.responseText,"application/xml"))):c=="arraybuffer"&&(h=o.response),h?s(e.readFeatures(h,{extent:t,featureProjection:r}),e.readProjection(h)):a()}else a()},o.onerror=a,o.send()}function ed(n,e){return function(t,i,r,s,a){const o=this;E0(n,e,t,i,r,function(l,c){o.addFeatures(l),s!==void 0&&s(l)},a||cs)}}class dn extends Bi{constructor(e,t,i){super(e),this.feature=t,this.features=i}}class b0 extends Kf{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=cs,this.format_=e.format,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(Ne(this.format_,7),this.loader_=ed(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:w0;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new Jh:null,this.loadedExtentsRtree_=new Jh,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let i,r;Array.isArray(e.features)?r=e.features:e.features&&(i=e.features,r=i.getArray()),!t&&i===void 0&&(i=new Mi(r)),r!==void 0&&this.addFeaturesInternal(r),i!==void 0&&this.bindFeaturesCollection_(i)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=Ve(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const i=e.getGeometry();if(i){const r=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(r,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new dn(vi.ADDFEATURE,e))}setupChangeEvents_(e,t){this.featureChangeKeys_[e]=[We(t,Fe.CHANGE,this.handleFeatureChange_,this),We(t,ls.PROPERTYCHANGE,this.handleFeatureChange_,this)]}addToIndex_(e,t){let i=!0;const r=t.getId();return r!==void 0&&(r.toString()in this.idIndex_?i=!1:this.idIndex_[r.toString()]=t),i&&(Ne(!(e in this.uidIndex_),30),this.uidIndex_[e]=t),i}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],i=[],r=[];for(let s=0,a=e.length;s<a;s++){const o=e[s],l=Ve(o);this.addToIndex_(l,o)&&i.push(o)}for(let s=0,a=i.length;s<a;s++){const o=i[s],l=Ve(o);this.setupChangeEvents_(l,o);const c=o.getGeometry();if(c){const h=c.getExtent();t.push(h),r.push(o)}else this.nullGeometryFeatures_[l]=o}if(this.featuresRtree_&&this.featuresRtree_.load(t,r),this.hasListener(vi.ADDFEATURE))for(let s=0,a=i.length;s<a;s++)this.dispatchEvent(new dn(vi.ADDFEATURE,i[s]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(vi.ADDFEATURE,function(i){t||(t=!0,e.push(i.feature),t=!1)}),this.addEventListener(vi.REMOVEFEATURE,function(i){t||(t=!0,e.remove(i.feature),t=!1)}),e.addEventListener(Jt.ADD,i=>{t||(t=!0,this.addFeature(i.element),t=!1)}),e.addEventListener(Jt.REMOVE,i=>{t||(t=!0,this.removeFeature(i.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach(st);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const i=r=>{this.removeFeatureInternal(r)};this.featuresRtree_.forEach(i);for(const r in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new dn(vi.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const i=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(i,function(r){if(r.getGeometry().intersectsCoordinate(e))return t(r)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(i){if(i.getGeometry().intersectsExtent(e)){const s=t(i);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),us(this.nullGeometryFeatures_)||Pi(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(i){t.push(i)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const r=im(e,t);return[].concat(...r.map(s=>this.featuresRtree_.getInExtent(s)))}else if(this.featuresCollection_)return this.featuresCollection_.getArray().slice(0);return[]}getClosestFeatureToCoordinate(e,t){const i=e[0],r=e[1];let s=null;const a=[NaN,NaN];let o=1/0;const l=[-1/0,-1/0,1/0,1/0];return t=t||ra,this.featuresRtree_.forEachInExtent(l,function(c){if(t(c)){const h=c.getGeometry(),d=o;if(o=h.closestPointXY(i,r,a,o),o<d){s=c;const f=Math.sqrt(o);l[0]=i-f,l[1]=r-f,l[2]=i+f,l[3]=r+f}}}),s}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,i=Ve(t),r=t.getGeometry();if(!r)i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[i]=t);else{const a=r.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(a,t)):this.featuresRtree_&&this.featuresRtree_.update(a,t)}const s=t.getId();if(s!==void 0){const a=s.toString();this.idIndex_[a]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[a]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[i]=t;this.changed(),this.dispatchEvent(new dn(vi.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:Ve(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&us(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,i){const r=this.loadedExtentsRtree_,s=this.strategy_(e,t,i);for(let a=0,o=s.length;a<o;++a){const l=s[a];r.forEachInExtent(l,function(h){return ns(h.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new dn(vi.FEATURESLOADSTART)),this.loader_.call(this,l,t,i,h=>{--this.loadingExtentsCount_,this.dispatchEvent(new dn(vi.FEATURESLOADEND,void 0,h))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new dn(vi.FEATURESLOADERROR))}),r.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_;let i;t.forEachInExtent(e,function(r){if(sa(r.extent,e))return i=r,!0}),i&&t.remove(i)}removeFeature(e){if(!e)return;const t=Ve(e);t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=Ve(e),i=this.featureChangeKeys_[t];if(!i)return;i.forEach(st),delete this.featureChangeKeys_[t];const r=e.getId();return r!==void 0&&delete this.idIndex_[r.toString()],delete this.uidIndex_[t],this.dispatchEvent(new dn(vi.REMOVEFEATURE,e)),e}removeFromIdIndex_(e){let t=!1;for(const i in this.idIndex_)if(this.idIndex_[i]===e){delete this.idIndex_[i],t=!0;break}return t}setLoader(e){this.loader_=e}setUrl(e){Ne(this.format_,7),this.url_=e,this.setLoader(ed(e,this.format_))}}var Gi=b0;const C0='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class I0 extends sr{constructor(e){e=e||{};let t;e.attributions!==void 0?t=e.attributions:t=[C0];const i=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",r=e.url!==void 0?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:t,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:i,interpolate:e.interpolate,maxZoom:e.maxZoom!==void 0?e.maxZoom:19,opaque:e.opaque!==void 0?e.opaque:!0,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:r,wrapX:e.wrapX,zDirection:e.zDirection})}}var S0=I0;class R0 extends Zd{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.declutterExecutorGroup=null}getFeatures(e){return Le()}getData(e){return null}prepareFrame(e){return Le()}renderFrame(e,t){return Le()}loadedTileCallback(e,t,i){e[t]||(e[t]={}),e[t][i.tileCoord.toString()]=i}createLoadedTileFinder(e,t,i){return(r,s)=>{const a=this.loadedTileCallback.bind(this,i,r);return e.forEachLoadedTile(t,r,s,a)}}forEachFeatureAtCoordinate(e,t,i,r,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){e.target.getState()===Et.LOADED&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=Et.LOADED&&t!=Et.ERROR&&e.addEventListener(Fe.CHANGE,this.boundHandleImageChange_),t==Et.IDLE&&(e.load(),t=e.getState()),t==Et.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}}var T0=R0;const td=[];let Jr=null;function O0(){Jr=Vt(1,1,void 0,{willReadFrequently:!0})}class M0 extends T0{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=Fi(),this.pixelTransform=Fi(),this.inversePixelTransform=Fi(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(e,t,i){Jr||O0(),Jr.clearRect(0,0,1,1);let r;try{Jr.drawImage(e,t,i,1,1,0,0,1,1),r=Jr.getImageData(0,0,1,1).data}catch{return Jr=null,null}return r}getBackground(e){let i=this.getLayer().getBackground();return typeof i=="function"&&(i=i(e.viewState.resolution)),i||void 0}useContainer(e,t,i){const r=this.getLayer().getClassName();let s,a;if(e&&e.className===r&&(!i||e&&e.style.backgroundColor&&Cn(ko(e.style.backgroundColor),ko(i)))){const o=e.firstElementChild;o instanceof HTMLCanvasElement&&(a=o.getContext("2d"))}if(a&&a.canvas.style.transform===t?(this.container=e,this.context=a,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){s=document.createElement("div"),s.className=r;let o=s.style;o.position="absolute",o.width="100%",o.height="100%",a=Vt();const l=a.canvas;s.appendChild(l),o=l.style,o.position="absolute",o.left="0",o.transformOrigin="top left",this.container=s,this.context=a}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(e,t,i){const r=nr(i),s=cl(i),a=ll(i),o=ol(i);Rt(t.coordinateToPixelTransform,r),Rt(t.coordinateToPixelTransform,s),Rt(t.coordinateToPixelTransform,a),Rt(t.coordinateToPixelTransform,o);const l=this.inversePixelTransform;Rt(l,r),Rt(l,s),Rt(l,a),Rt(l,o),e.save(),e.beginPath(),e.moveTo(Math.round(r[0]),Math.round(r[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.clip()}dispatchRenderEvent_(e,t,i){const r=this.getLayer();if(r.hasListener(e)){const s=new Of(e,this.inversePixelTransform,i,t);r.dispatchEvent(s)}}preRender(e,t){this.frameState=t,this.dispatchRenderEvent_(xn.PRERENDER,e,t)}postRender(e,t){this.dispatchRenderEvent_(xn.POSTRENDER,e,t)}getRenderTransform(e,t,i,r,s,a,o){const l=s/2,c=a/2,h=r/t,d=-h,f=-e[0]+o,p=-e[1];return bn(this.tempTransform,l,c,h,d,-i,f,p)}disposeInternal(){delete this.frameState,super.disposeInternal()}}var ig=M0,So={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class L0 extends fl{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getPreload(){return this.get(So.PRELOAD)}setPreload(e){this.set(So.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(So.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(So.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}var P0=L0;class F0 extends ig{constructor(e){super(e),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=ui(),this.tmpTileRange_=new $f(0,0,0,0)}isDrawableTile(e){const t=this.getLayer(),i=e.getState(),r=t.getUseInterimTilesOnError();return i==Re.LOADED||i==Re.EMPTY||i==Re.ERROR&&!r}getTile(e,t,i,r){const s=r.pixelRatio,a=r.viewState.projection,o=this.getLayer();let c=o.getSource().getTile(e,t,i,s,a);return c.getState()==Re.ERROR&&o.getUseInterimTilesOnError()&&o.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(c)||(c=c.getInterimTile()),c}getData(e){const t=this.frameState;if(!t)return null;const i=this.getLayer(),r=Rt(t.pixelToCoordinateTransform,e.slice()),s=i.getExtent();if(s&&!al(s,r))return null;const a=t.pixelRatio,o=t.viewState.projection,l=t.viewState,c=i.getRenderSource(),h=c.getTileGridForProjection(l.projection),d=c.getTilePixelRatio(t.pixelRatio);for(let f=h.getZForResolution(l.resolution);f>=h.getMinZoom();--f){const p=h.getTileCoordForCoordAndZ(r,f),m=c.getTile(f,p[1],p[2],a,o);if(!(m instanceof Xf||m instanceof qc)||m instanceof qc&&m.getState()===Re.EMPTY)return null;if(m.getState()!==Re.LOADED)continue;const y=h.getOrigin(f),v=ri(h.getTileSize(f)),x=h.getResolution(f),b=Math.floor(d*((r[0]-y[0])/x-p[1]*v[0])),E=Math.floor(d*((y[1]-r[1])/x-p[2]*v[1])),I=Math.round(d*c.getGutterForProjection(l.projection));return this.getImageData(m.getImage(),b+I,E+I)}return null}loadedTileCallback(e,t,i){return this.isDrawableTile(i)?super.loadedTileCallback(e,t,i):!1}prepareFrame(e){return!!this.getLayer().getSource()}renderFrame(e,t){const i=e.layerStatesArray[e.layerIndex],r=e.viewState,s=r.projection,a=r.resolution,o=r.center,l=r.rotation,c=e.pixelRatio,h=this.getLayer(),d=h.getSource(),f=d.getRevision(),p=d.getTileGridForProjection(s),m=p.getZForResolution(a,d.zDirection),y=p.getResolution(m);let v=e.extent;const x=e.viewState.resolution,b=d.getTilePixelRatio(c),E=Math.round(rt(v)/x*c),I=Math.round(Di(v)/x*c),C=i.extent&&vn(i.extent);C&&(v=ea(v,vn(i.extent)));const M=y*E/2/b,D=y*I/2/b,P=[o[0]-M,o[1]-D,o[0]+M,o[1]+D],z=p.getTileRangeForExtentAndZ(v,m),j={};j[m]={};const Q=this.createLoadedTileFinder(d,s,j),q=this.tmpExtent,J=this.tmpTileRange_;this.newTiles_=!1;const ye=l?zc(r.center,x,l,e.size):void 0;for(let re=z.minX;re<=z.maxX;++re)for(let ce=z.minY;ce<=z.maxY;++ce){if(l&&!p.tileCoordIntersectsViewport([m,re,ce],ye))continue;const me=this.getTile(m,re,ce,e);if(this.isDrawableTile(me)){const fe=Ve(this);if(me.getState()==Re.LOADED){j[m][me.tileCoord.toString()]=me;let ve=me.inTransition(fe);ve&&i.opacity!==1&&(me.endTransition(fe),ve=!1),!this.newTiles_&&(ve||!this.renderedTiles.includes(me))&&(this.newTiles_=!0)}if(me.getAlpha(fe,e.time)===1)continue}const Ue=p.getTileCoordChildTileRange(me.tileCoord,J,q);let se=!1;Ue&&(se=Q(m+1,Ue)),se||p.forEachTileCoordParentTileRange(me.tileCoord,Q,J,q)}const $=y/a*c/b;bn(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/c,1/c,l,-E/2,-I/2);const N=tf(this.pixelTransform);this.useContainer(t,N,this.getBackground(e));const G=this.context,B=G.canvas;_u(this.inversePixelTransform,this.pixelTransform),bn(this.tempTransform,E/2,I/2,$,$,0,-E/2,-I/2),B.width!=E||B.height!=I?(B.width=E,B.height=I):this.containerReused||G.clearRect(0,0,E,I),C&&this.clipUnrotated(G,e,C),d.getInterpolate()||(G.imageSmoothingEnabled=!1),this.preRender(G,e),this.renderedTiles.length=0;let W=Object.keys(j).map(Number);W.sort(er);let X,ie,U;i.opacity===1&&(!this.containerReused||d.getOpaque(e.viewState.projection))?W=W.reverse():(X=[],ie=[]);for(let re=W.length-1;re>=0;--re){const ce=W[re],me=d.getTilePixelSize(ce,c,s),se=p.getResolution(ce)/y,fe=me[0]*se*$,ve=me[1]*se*$,ee=p.getTileCoordForCoordAndZ(nr(P),ce),le=p.getTileCoordExtent(ee),pe=Rt(this.tempTransform,[b*(le[0]-P[0])/y,b*(P[3]-le[3])/y]),_e=b*d.getGutterForProjection(s),Je=j[ce];for(const Ge in Je){const Ie=Je[Ge],ht=Ie.tileCoord,lt=ee[1]-ht[1],Qe=Math.round(pe[0]-(lt-1)*fe),ne=ee[2]-ht[2],xe=Math.round(pe[1]-(ne-1)*ve),be=Math.round(pe[0]-lt*fe),De=Math.round(pe[1]-ne*ve),Me=Qe-be,qe=xe-De,At=m===ce,$t=At&&Ie.getAlpha(Ve(this),e.time)!==1;let Zt=!1;if(!$t)if(X){U=[be,De,be+Me,De,be+Me,De+qe,be,De+qe];for(let dt=0,Mt=X.length;dt<Mt;++dt)if(m!==ce&&ce<ie[dt]){const Ye=X[dt];Qt([be,De,be+Me,De+qe],[Ye[0],Ye[3],Ye[4],Ye[7]])&&(Zt||(G.save(),Zt=!0),G.beginPath(),G.moveTo(U[0],U[1]),G.lineTo(U[2],U[3]),G.lineTo(U[4],U[5]),G.lineTo(U[6],U[7]),G.moveTo(Ye[6],Ye[7]),G.lineTo(Ye[4],Ye[5]),G.lineTo(Ye[2],Ye[3]),G.lineTo(Ye[0],Ye[1]),G.clip())}X.push(U),ie.push(ce)}else G.clearRect(be,De,Me,qe);this.drawTileImage(Ie,e,be,De,Me,qe,_e,At),X&&!$t?(Zt&&G.restore(),this.renderedTiles.unshift(Ie)):this.renderedTiles.push(Ie),this.updateUsedTiles(e.usedTiles,d,Ie)}}return this.renderedRevision=f,this.renderedResolution=y,this.extentChanged=!this.renderedExtent_||!sa(this.renderedExtent_,P),this.renderedExtent_=P,this.renderedPixelRatio=c,this.renderedProjection=s,this.manageTilePyramid(e,d,p,c,s,v,m,h.getPreload()),this.scheduleExpireCache(e,d),this.postRender(G,e),i.extent&&G.restore(),G.imageSmoothingEnabled=!0,N!==B.style.transform&&(B.style.transform=N),this.container}drawTileImage(e,t,i,r,s,a,o,l){const c=this.getTileImage(e);if(!c)return;const h=Ve(this),d=t.layerStatesArray[t.layerIndex],f=d.opacity*(l?e.getAlpha(h,t.time):1),p=f!==this.context.globalAlpha;p&&(this.context.save(),this.context.globalAlpha=f),this.context.drawImage(c,o,o,c.width-2*o,c.height-2*o,i,r,s,a),p&&this.context.restore(),f!==d.opacity?t.animate=!0:l&&e.endTransition(h)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}scheduleExpireCache(e,t){if(t.canExpireCache()){const i=function(r,s,a){const o=Ve(r);o in a.usedTiles&&r.expireCache(a.viewState.projection,a.usedTiles[o])}.bind(null,t);e.postRenderFunctions.push(i)}}updateUsedTiles(e,t,i){const r=Ve(t);r in e||(e[r]={}),e[r][i.getKey()]=!0}manageTilePyramid(e,t,i,r,s,a,o,l,c){const h=Ve(t);h in e.wantedTiles||(e.wantedTiles[h]={});const d=e.wantedTiles[h],f=e.tileQueue,p=i.getMinZoom(),m=e.viewState.rotation,y=m?zc(e.viewState.center,e.viewState.resolution,m,e.size):void 0;let v=0,x,b,E,I,C,M;for(M=p;M<=o;++M)for(b=i.getTileRangeForExtentAndZ(a,M,b),E=i.getResolution(M),I=b.minX;I<=b.maxX;++I)for(C=b.minY;C<=b.maxY;++C)m&&!i.tileCoordIntersectsViewport([M,I,C],y)||(o-M<=l?(++v,x=t.getTile(M,I,C,r,s),x.getState()==Re.IDLE&&(d[x.getKey()]=!0,f.isKeyQueued(x.getKey())||f.enqueue([x,h,i.getTileCoordCenter(x.tileCoord),E])),c!==void 0&&c(x)):t.useTile(M,I,C,s));t.updateCacheSize(v,s)}}var D0=F0;class k0 extends P0{constructor(e){super(e)}createRenderer(){return new D0(this)}}var ar=k0;function ng(n,e,t,i,r,s,a){let o,l;const c=(t-e)/i;if(c===1)o=e;else if(c===2)o=e,l=r;else if(c!==0){let h=n[e],d=n[e+1],f=0;const p=[0];for(let v=e+i;v<t;v+=i){const x=n[v],b=n[v+1];f+=Math.sqrt((x-h)*(x-h)+(b-d)*(b-d)),p.push(f),h=x,d=b}const m=r*f,y=M_(p,m);y<0?(l=(m-p[-y-2])/(p[-y-1]-p[-y-2]),o=e+(-y-2)*i):o=e+y*i}a=a>1?a:2,s=s||new Array(a);for(let h=0;h<a;++h)s[h]=o===void 0?NaN:l===void 0?n[o+h]:ii(n[o+h],n[o+i+h],l);return s}function Jc(n,e,t,i,r,s){if(t==e)return null;let a;if(r<n[e+i-1])return s?(a=n.slice(e,e+i),a[i-1]=r,a):null;if(n[t-1]<r)return s?(a=n.slice(t-i,t),a[i-1]=r,a):null;if(r==n[e+i-1])return n.slice(e,e+i);let o=e/i,l=t/i;for(;o<l;){const f=o+l>>1;r<n[(f+1)*i-1]?l=f:o=f+1}const c=n[o*i-1];if(r==c)return n.slice((o-1)*i,(o-1)*i+i);const h=n[(o+1)*i-1],d=(r-c)/(h-c);a=[];for(let f=0;f<i-1;++f)a.push(ii(n[(o-1)*i+f],n[o*i+f],d));return a.push(r),a}function N0(n,e,t,i,r,s,a){if(a)return Jc(n,e,t[t.length-1],i,r,s);let o;if(r<n[i-1])return s?(o=n.slice(0,i),o[i-1]=r,o):null;if(n[n.length-1]<r)return s?(o=n.slice(n.length-i),o[i-1]=r,o):null;for(let l=0,c=t.length;l<c;++l){const h=t[l];if(e!=h){if(r<n[e+i-1])return null;if(r<=n[h-1])return Jc(n,e,h,i,r,!1);e=h}}return null}function rg(n,e,t,i){let r=n[e],s=n[e+1],a=0;for(let o=e+i;o<t;o+=i){const l=n[o],c=n[o+1];a+=Math.sqrt((l-r)*(l-r)+(c-s)*(c-s)),r=l,s=c}return a}class Ko extends rr{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){this.flatCoordinates?Pi(this.flatCoordinates,e):this.flatCoordinates=e.slice(),this.changed()}clone(){const e=new Ko(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<ir(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Mu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Pu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,i,r))}forEachSegment(e){return Cf(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,Jc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return An(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return ng(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return rg(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=ku(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new Ko(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return dl(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=hl(this.flatCoordinates,0,e,this.stride),this.changed()}}var eu=Ko;function id(n){return new vt({fill:fa(n,""),stroke:ga(n,""),text:B0(n),image:G0(n)})}function fa(n,e){const t=n[e+"fill-color"];if(!!t)return new Ot({color:t})}function ga(n,e){const t=n[e+"stroke-width"],i=n[e+"stroke-color"];if(!(!t&&!i))return new Kt({width:t,color:i,lineCap:n[e+"stroke-line-cap"],lineJoin:n[e+"stroke-line-join"],lineDash:n[e+"stroke-line-dash"],lineDashOffset:n[e+"stroke-line-dash-offset"],miterLimit:n[e+"stroke-miter-limit"]})}function B0(n){const e=n["text-value"];return e?new Lv({text:e,font:n["text-font"],maxAngle:n["text-max-angle"],offsetX:n["text-offset-x"],offsetY:n["text-offset-y"],overflow:n["text-overflow"],placement:n["text-placement"],repeat:n["text-repeat"],scale:n["text-scale"],rotateWithView:n["text-rotate-with-view"],rotation:n["text-rotation"],textAlign:n["text-align"],justify:n["text-justify"],textBaseline:n["text-baseline"],padding:n["text-padding"],fill:fa(n,"text-"),backgroundFill:fa(n,"text-background-"),stroke:ga(n,"text-"),backgroundStroke:ga(n,"text-background-")}):void 0}function G0(n){const e=n["icon-src"],t=n["icon-img"];if(e||t)return new Wf({src:e,img:t,imgSize:n["icon-img-size"],anchor:n["icon-anchor"],anchorOrigin:n["icon-anchor-origin"],anchorXUnits:n["icon-anchor-x-units"],anchorYUnits:n["icon-anchor-y-units"],color:n["icon-color"],crossOrigin:n["icon-cross-origin"],offset:n["icon-offset"],displacement:n["icon-displacement"],opacity:n["icon-opacity"],scale:n["icon-scale"],rotation:n["icon-rotation"],rotateWithView:n["icon-rotate-with-view"],size:n["icon-size"],declutterMode:n["icon-declutter-mode"]});const i=n["shape-points"];if(i){const s="shape-";return new zf({points:i,fill:fa(n,s),stroke:ga(n,s),radius:n["shape-radius"],radius1:n["shape-radius1"],radius2:n["shape-radius2"],angle:n["shape-angle"],displacement:n["shape-displacement"],rotation:n["shape-rotation"],rotateWithView:n["shape-rotate-with-view"],scale:n["shape-scale"],declutterMode:n["shape-declutter-mode"]})}const r=n["circle-radius"];if(r){const s="circle-";return new Gt({radius:r,fill:fa(n,s),stroke:ga(n,s),displacement:n["circle-displacement"],scale:n["circle-scale"],rotation:n["circle-rotation"],rotateWithView:n["circle-rotate-with-view"],declutterMode:n["circle-declutter-mode"]})}}const nd={RENDER_ORDER:"renderOrder"};class j0 extends fl{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter!==void 0?e.declutter:!1,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(nd.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e){e.declutterTree||(e.declutterTree=new tg(9)),this.getRenderer().renderDeclutter(e)}setRenderOrder(e){this.set(nd.RENDER_ORDER,e)}setStyle(e){let t;if(e===void 0)t=Ov;else if(e===null)t=null;else if(typeof e=="function")t=e;else if(e instanceof vt)t=e;else if(Array.isArray(e)){const i=e.length,r=new Array(i);for(let s=0;s<i;++s){const a=e[s];a instanceof vt?r[s]=a:r[s]=id(a)}t=r}else t=id(e);this.style_=t,this.styleFunction_=e===null?void 0:Tv(this.style_),this.changed()}}var z0=j0;const Ea={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Ro=[Ea.FILL],wn=[Ea.STROKE],Kn=[Ea.BEGIN_PATH],rd=[Ea.CLOSE_PATH];var Oe=Ea;class U0{drawCustom(e,t,i,r){}drawGeometry(e){}setStyle(e){}drawCircle(e,t){}drawFeature(e,t){}drawGeometryCollection(e,t){}drawLineString(e,t){}drawMultiLineString(e,t){}drawMultiPoint(e,t){}drawMultiPolygon(e,t){}drawPoint(e,t){}drawPolygon(e,t){}drawText(e,t){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}var sg=U0;class W0 extends sg{constructor(e,t,i,r){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(i){return i*t})}appendFlatPointCoordinates(e,t){const i=this.getBufferedMaxExtent(),r=this.tmpCoordinate_,s=this.coordinates;let a=s.length;for(let o=0,l=e.length;o<l;o+=t)r[0]=e[o],r[1]=e[o+1],al(i,r)&&(s[a++]=r[0],s[a++]=r[1]);return a}appendFlatLineCoordinates(e,t,i,r,s,a){const o=this.coordinates;let l=o.length;const c=this.getBufferedMaxExtent();a&&(t+=r);let h=e[t],d=e[t+1];const f=this.tmpCoordinate_;let p=!0,m,y,v;for(m=t+r;m<i;m+=r)f[0]=e[m],f[1]=e[m+1],v=Bc(c,f),v!==y?(p&&(o[l++]=h,o[l++]=d,p=!1),o[l++]=f[0],o[l++]=f[1]):v===St.INTERSECTING?(o[l++]=f[0],o[l++]=f[1],p=!1):p=!0,h=f[0],d=f[1],y=v;return(s&&p||m===t+r)&&(o[l++]=h,o[l++]=d),l}drawCustomCoordinates_(e,t,i,r,s){for(let a=0,o=i.length;a<o;++a){const l=i[a],c=this.appendFlatLineCoordinates(e,t,l,r,!1,!1);s.push(c),t=l}return t}drawCustom(e,t,i,r){this.beginGeometry(e,t);const s=e.getType(),a=e.getStride(),o=this.coordinates.length;let l,c,h,d,f;switch(s){case"MultiPolygon":l=e.getOrientedFlatCoordinates(),d=[];const p=e.getEndss();f=0;for(let m=0,y=p.length;m<y;++m){const v=[];f=this.drawCustomCoordinates_(l,f,p[m],a,v),d.push(v)}this.instructions.push([Oe.CUSTOM,o,d,e,i,Xc]),this.hitDetectionInstructions.push([Oe.CUSTOM,o,d,e,r||i,Xc]);break;case"Polygon":case"MultiLineString":h=[],l=s=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),f=this.drawCustomCoordinates_(l,0,e.getEnds(),a,h),this.instructions.push([Oe.CUSTOM,o,h,e,i,aa]),this.hitDetectionInstructions.push([Oe.CUSTOM,o,h,e,r||i,aa]);break;case"LineString":case"Circle":l=e.getFlatCoordinates(),c=this.appendFlatLineCoordinates(l,0,l.length,a,!1,!1),this.instructions.push([Oe.CUSTOM,o,c,e,i,An]),this.hitDetectionInstructions.push([Oe.CUSTOM,o,c,e,r||i,An]);break;case"MultiPoint":l=e.getFlatCoordinates(),c=this.appendFlatPointCoordinates(l,a),c>o&&(this.instructions.push([Oe.CUSTOM,o,c,e,i,An]),this.hitDetectionInstructions.push([Oe.CUSTOM,o,c,e,r||i,An]));break;case"Point":l=e.getFlatCoordinates(),this.coordinates.push(l[0],l[1]),c=this.coordinates.length,this.instructions.push([Oe.CUSTOM,o,c,e,i]),this.hitDetectionInstructions.push([Oe.CUSTOM,o,c,e,r||i]);break}this.endGeometry(t)}beginGeometry(e,t){this.beginGeometryInstruction1_=[Oe.BEGIN_GEOMETRY,t,0,e],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Oe.BEGIN_GEOMETRY,t,0,e],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const i=e.length;let r,s,a=-1;for(t=0;t<i;++t)r=e[t],s=r[0],s==Oe.END_GEOMETRY?a=t:s==Oe.BEGIN_GEOMETRY&&(r[2]=t,L_(this.hitDetectionInstructions,a,t),a=-1)}setFillStrokeStyle(e,t){const i=this.state;if(e){const r=e.getColor();i.fillStyle=Li(r||qi)}else i.fillStyle=void 0;if(t){const r=t.getColor();i.strokeStyle=Li(r||ua);const s=t.getLineCap();i.lineCap=s!==void 0?s:Yo;const a=t.getLineDash();i.lineDash=a?a.slice():oa;const o=t.getLineDashOffset();i.lineDashOffset=o||la;const l=t.getLineJoin();i.lineJoin=l!==void 0?l:fs;const c=t.getWidth();i.lineWidth=c!==void 0?c:da;const h=t.getMiterLimit();i.miterLimit=h!==void 0?h:ca,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0}createFill(e){const t=e.fillStyle,i=[Oe.SET_FILL_STYLE,t];return typeof t!="string"&&i.push(!0),i}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[Oe.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const i=e.fillStyle;(typeof i!="string"||e.currentFillStyle!=i)&&(i!==void 0&&this.instructions.push(t.call(this,e)),e.currentFillStyle=i)}updateStrokeStyle(e,t){const i=e.strokeStyle,r=e.lineCap,s=e.lineDash,a=e.lineDashOffset,o=e.lineJoin,l=e.lineWidth,c=e.miterLimit;(e.currentStrokeStyle!=i||e.currentLineCap!=r||s!=e.currentLineDash&&!Cn(e.currentLineDash,s)||e.currentLineDashOffset!=a||e.currentLineJoin!=o||e.currentLineWidth!=l||e.currentMiterLimit!=c)&&(i!==void 0&&t.call(this,e),e.currentStrokeStyle=i,e.currentLineCap=r,e.currentLineDash=s,e.currentLineDashOffset=a,e.currentLineJoin=o,e.currentLineWidth=l,e.currentMiterLimit=c)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[Oe.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=nf(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;mu(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}var ba=W0;class Y0 extends ba{constructor(e,t,i,r){super(e,t,i,r),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t){if(!this.image_)return;this.beginGeometry(e,t);const i=e.getFlatCoordinates(),r=e.getStride(),s=this.coordinates.length,a=this.appendFlatPointCoordinates(i,r);this.instructions.push([Oe.DRAW_IMAGE,s,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Oe.DRAW_IMAGE,s,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t){if(!this.image_)return;this.beginGeometry(e,t);const i=e.getFlatCoordinates(),r=e.getStride(),s=this.coordinates.length,a=this.appendFlatPointCoordinates(i,r);this.instructions.push([Oe.DRAW_IMAGE,s,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Oe.DRAW_IMAGE,s,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const i=e.getAnchor(),r=e.getSize(),s=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=r[1],this.opacity_=e.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=r[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}var X0=Y0;class H0 extends ba{constructor(e,t,i,r){super(e,t,i,r)}drawFlatCoordinates_(e,t,i,r){const s=this.coordinates.length,a=this.appendFlatLineCoordinates(e,t,i,r,!1,!1),o=[Oe.MOVE_TO_LINE_TO,s,a];return this.instructions.push(o),this.hitDetectionInstructions.push(o),i}drawLineString(e,t){const i=this.state,r=i.strokeStyle,s=i.lineWidth;if(r===void 0||s===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t),this.hitDetectionInstructions.push([Oe.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,oa,la],Kn);const a=e.getFlatCoordinates(),o=e.getStride();this.drawFlatCoordinates_(a,0,a.length,o),this.hitDetectionInstructions.push(wn),this.endGeometry(t)}drawMultiLineString(e,t){const i=this.state,r=i.strokeStyle,s=i.lineWidth;if(r===void 0||s===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t),this.hitDetectionInstructions.push([Oe.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],Kn);const a=e.getEnds(),o=e.getFlatCoordinates(),l=e.getStride();let c=0;for(let h=0,d=a.length;h<d;++h)c=this.drawFlatCoordinates_(o,c,a[h],l);this.hitDetectionInstructions.push(wn),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(wn),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(wn),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(Kn)}}var Q0=H0;class K0 extends ba{constructor(e,t,i,r){super(e,t,i,r)}drawFlatCoordinatess_(e,t,i,r){const s=this.state,a=s.fillStyle!==void 0,o=s.strokeStyle!==void 0,l=i.length;this.instructions.push(Kn),this.hitDetectionInstructions.push(Kn);for(let c=0;c<l;++c){const h=i[c],d=this.coordinates.length,f=this.appendFlatLineCoordinates(e,t,h,r,!0,!o),p=[Oe.MOVE_TO_LINE_TO,d,f];this.instructions.push(p),this.hitDetectionInstructions.push(p),o&&(this.instructions.push(rd),this.hitDetectionInstructions.push(rd)),t=h}return a&&(this.instructions.push(Ro),this.hitDetectionInstructions.push(Ro)),o&&(this.instructions.push(wn),this.hitDetectionInstructions.push(wn)),t}drawCircle(e,t){const i=this.state,r=i.fillStyle,s=i.strokeStyle;if(r===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Oe.SET_FILL_STYLE,qi]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Oe.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const a=e.getFlatCoordinates(),o=e.getStride(),l=this.coordinates.length;this.appendFlatLineCoordinates(a,0,a.length,o,!1,!1);const c=[Oe.CIRCLE,l];this.instructions.push(Kn,c),this.hitDetectionInstructions.push(Kn,c),i.fillStyle!==void 0&&(this.instructions.push(Ro),this.hitDetectionInstructions.push(Ro)),i.strokeStyle!==void 0&&(this.instructions.push(wn),this.hitDetectionInstructions.push(wn)),this.endGeometry(t)}drawPolygon(e,t){const i=this.state,r=i.fillStyle,s=i.strokeStyle;if(r===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Oe.SET_FILL_STYLE,qi]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Oe.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const a=e.getEnds(),o=e.getOrientedFlatCoordinates(),l=e.getStride();this.drawFlatCoordinatess_(o,0,a,l),this.endGeometry(t)}drawMultiPolygon(e,t){const i=this.state,r=i.fillStyle,s=i.strokeStyle;if(r===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Oe.SET_FILL_STYLE,qi]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Oe.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const a=e.getEndss(),o=e.getOrientedFlatCoordinates(),l=e.getStride();let c=0;for(let h=0,d=a.length;h<d;++h)c=this.drawFlatCoordinatess_(o,c,a[h],l);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let i=0,r=t.length;i<r;++i)t[i]=Yn(t[i],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;e.fillStyle!==void 0&&this.updateFillStyle(e,this.createFill),e.strokeStyle!==void 0&&this.updateStrokeStyle(e,this.applyStroke)}}var sd=K0;function V0(n,e,t,i,r){const s=[];let a=t,o=0,l=e.slice(t,2);for(;o<n&&a+r<i;){const[c,h]=l.slice(-2),d=e[a+r],f=e[a+r+1],p=Math.sqrt((d-c)*(d-c)+(f-h)*(f-h));if(o+=p,o>=n){const m=(n-o+p)/p,y=ii(c,d,m),v=ii(h,f,m);l.push(y,v),s.push(l),l=[y,v],o==n&&(a+=r),o=0}else if(o<n)l.push(e[a+r],e[a+r+1]),a+=r;else{const m=p-o,y=ii(c,d,m/p),v=ii(h,f,m/p);l.push(y,v),s.push(l),l=[y,v],o=0,a+=r}}return o>0&&s.push(l),s}function $0(n,e,t,i,r){let s=t,a=t,o=0,l=0,c=t,h,d,f,p,m,y,v,x,b,E;for(d=t;d<i;d+=r){const I=e[d],C=e[d+1];m!==void 0&&(b=I-m,E=C-y,p=Math.sqrt(b*b+E*E),v!==void 0&&(l+=f,h=Math.acos((v*b+x*E)/(f*p)),h>n&&(l>o&&(o=l,s=c,a=d),l=0,c=d-r)),f=p,v=b,x=E),m=I,y=C}return l+=p,l>o?[c,d]:[s,a]}const ta={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class Z0 extends ba{constructor(e,t,i,r){super(e,t,i,r),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t){const i=this.textFillState_,r=this.textStrokeState_,s=this.textState_;if(this.text_===""||!s||!i&&!r)return;const a=this.coordinates;let o=a.length;const l=e.getType();let c=null,h=e.getStride();if(s.placement==="line"&&(l=="LineString"||l=="MultiLineString"||l=="Polygon"||l=="MultiPolygon")){if(!Qt(this.getBufferedMaxExtent(),e.getExtent()))return;let d;if(c=e.getFlatCoordinates(),l=="LineString")d=[c.length];else if(l=="MultiLineString")d=e.getEnds();else if(l=="Polygon")d=e.getEnds().slice(0,1);else if(l=="MultiPolygon"){const y=e.getEndss();d=[];for(let v=0,x=y.length;v<x;++v)d.push(y[v][0])}this.beginGeometry(e,t);const f=s.repeat,p=f?void 0:s.textAlign;let m=0;for(let y=0,v=d.length;y<v;++y){let x;f?x=V0(f*this.resolution,c,m,d[y],h):x=[c.slice(m,d[y])];for(let b=0,E=x.length;b<E;++b){const I=x[b];let C=0,M=I.length;if(p==null){const P=$0(s.maxAngle,I,0,I.length,2);C=P[0],M=P[1]}for(let P=C;P<M;P+=h)a.push(I[P],I[P+1]);const D=a.length;m=d[y],this.drawChars_(o,D),o=D}}this.endGeometry(t)}else{let d=s.overflow?null:[];switch(l){case"Point":case"MultiPoint":c=e.getFlatCoordinates();break;case"LineString":c=e.getFlatMidpoint();break;case"Circle":c=e.getCenter();break;case"MultiLineString":c=e.getFlatMidpoints(),h=2;break;case"Polygon":c=e.getFlatInteriorPoint(),s.overflow||d.push(c[2]/this.resolution),h=3;break;case"MultiPolygon":const v=e.getFlatInteriorPoints();c=[];for(let x=0,b=v.length;x<b;x+=3)s.overflow||d.push(v[x+2]/this.resolution),c.push(v[x],v[x+1]);if(c.length===0)return;h=2;break}const f=this.appendFlatPointCoordinates(c,h);if(f===o)return;if(d&&(f-o)/2!==c.length/h){let v=o/2;d=d.filter((x,b)=>{const E=a[(v+b)*2]===c[b*h]&&a[(v+b)*2+1]===c[b*h+1];return E||--v,E})}this.saveTextStates_(),(s.backgroundFill||s.backgroundStroke)&&(this.setFillStrokeStyle(s.backgroundFill,s.backgroundStroke),s.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),s.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,t);let p=s.padding;if(p!=Qn&&(s.scale[0]<0||s.scale[1]<0)){let v=s.padding[0],x=s.padding[1],b=s.padding[2],E=s.padding[3];s.scale[0]<0&&(x=-x,E=-E),s.scale[1]<0&&(v=-v,b=-b),p=[v,x,b,E]}const m=this.pixelRatio;this.instructions.push([Oe.DRAW_IMAGE,o,f,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,p==Qn?Qn:p.map(function(v){return v*m}),!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,d]);const y=1/m;this.hitDetectionInstructions.push([Oe.DRAW_IMAGE,o,f,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[y,y],NaN,void 0,this.declutterImageWithText_,p,!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,d]),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,i=this.textFillState_,r=this.strokeKey_;e&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:t.font,textAlign:t.textAlign||ha,justify:t.justify,textBaseline:t.textBaseline||Xo,scale:t.scale});const a=this.fillKey_;i&&(a in this.fillStates||(this.fillStates[a]={fillStyle:i.fillStyle}))}drawChars_(e,t){const i=this.textStrokeState_,r=this.textState_,s=this.strokeKey_,a=this.textKey_,o=this.fillKey_;this.saveTextStates_();const l=this.pixelRatio,c=ta[r.textBaseline],h=this.textOffsetY_*l,d=this.text_,f=i?i.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([Oe.DRAW_CHARS,e,t,c,r.overflow,o,r.maxAngle,l,h,s,f*l,d,a,1]),this.hitDetectionInstructions.push([Oe.DRAW_CHARS,e,t,c,r.overflow,o,r.maxAngle,1,h,s,f,d,a,1/l])}setTextStyle(e,t){let i,r,s;if(!e)this.text_="";else{const a=e.getFill();a?(r=this.textFillState_,r||(r={},this.textFillState_=r),r.fillStyle=Li(a.getColor()||qi)):(r=null,this.textFillState_=r);const o=e.getStroke();if(!o)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const m=o.getLineDash(),y=o.getLineDashOffset(),v=o.getWidth(),x=o.getMiterLimit();s.lineCap=o.getLineCap()||Yo,s.lineDash=m?m.slice():oa,s.lineDashOffset=y===void 0?la:y,s.lineJoin=o.getLineJoin()||fs,s.lineWidth=v===void 0?da:v,s.miterLimit=x===void 0?ca:x,s.strokeStyle=Li(o.getColor()||ua)}i=this.textState_;const l=e.getFont()||Lf;wy(l);const c=e.getScaleArray();i.overflow=e.getOverflow(),i.font=l,i.maxAngle=e.getMaxAngle(),i.placement=e.getPlacement(),i.textAlign=e.getTextAlign(),i.repeat=e.getRepeat(),i.justify=e.getJustify(),i.textBaseline=e.getTextBaseline()||Xo,i.backgroundFill=e.getBackgroundFill(),i.backgroundStroke=e.getBackgroundStroke(),i.padding=e.getPadding()||Qn,i.scale=c===void 0?[1,1]:c;const h=e.getOffsetX(),d=e.getOffsetY(),f=e.getRotateWithView(),p=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=h===void 0?0:h,this.textOffsetY_=d===void 0?0:d,this.textRotateWithView_=f===void 0?!1:f,this.textRotation_=p===void 0?0:p,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:Ve(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=r?typeof r.fillStyle=="string"?r.fillStyle:"|"+Ve(r.fillStyle):""}this.declutterImageWithText_=t}}const q0={Circle:sd,Default:ba,Image:X0,LineString:Q0,Polygon:sd,Text:Z0};class J0{constructor(e,t,i,r){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=r,this.resolution_=i,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const i=this.buildersByZIndex_[t];for(const r in i){const s=i[r].finish();e[t][r]=s}}return e}getBuilder(e,t){const i=e!==void 0?e.toString():"0";let r=this.buildersByZIndex_[i];r===void 0&&(r={},this.buildersByZIndex_[i]=r);let s=r[t];if(s===void 0){const a=q0[t];s=new a(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[t]=s}return s}}var ad=J0;function eA(n,e,t,i,r,s,a,o,l,c,h,d){let f=n[e],p=n[e+1],m=0,y=0,v=0,x=0;function b(){m=f,y=p,e+=i,f=n[e],p=n[e+1],x+=v,v=Math.sqrt((f-m)*(f-m)+(p-y)*(p-y))}do b();while(e<t-i&&x+v<s);let E=v===0?0:(s-x)/v;const I=ii(m,f,E),C=ii(y,p,E),M=e-i,D=x,P=s+o*l(c,r,h);for(;e<t-i&&x+v<P;)b();E=v===0?0:(P-x)/v;const z=ii(m,f,E),j=ii(y,p,E);let Q;if(d){const N=[I,C,z,j];vf(N,0,4,2,d,N,N),Q=N[0]>N[2]}else Q=I>z;const q=Math.PI,J=[],ye=M+i===e;e=M,v=0,x=D,f=n[e],p=n[e+1];let $;if(ye){b(),$=Math.atan2(p-y,f-m),Q&&($+=$>0?-q:q);const N=(z+I)/2,G=(j+C)/2;return J[0]=[N,G,(P-s)/2,$,r],J}r=r.replace(/\n/g," ");for(let N=0,G=r.length;N<G;){b();let B=Math.atan2(p-y,f-m);if(Q&&(B+=B>0?-q:q),$!==void 0){let ce=B-$;if(ce+=ce>q?-2*q:ce<-q?2*q:0,Math.abs(ce)>a)return null}$=B;const W=N;let X=0;for(;N<G;++N){const ce=Q?G-N-1:N,me=o*l(c,r[ce],h);if(e+i<t&&x+v<s+X+me/2)break;X+=me}if(N===W)continue;const ie=Q?r.substring(G-W,G-N):r.substring(W,N);E=v===0?0:(s+X/2-x)/v;const U=ii(m,f,E),re=ii(y,p,E);J.push([U,re,X/2,B,ie]),s+=X}return J}const Qr=ui(),fn=[],Hi=[],Qi=[],gn=[];function od(n){return n[3].declutterBox}const tA=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function ld(n,e){return(e==="start"||e==="end")&&!tA.test(n)&&(e=e==="start"?"left":"right"),ta[e]}function iA(n,e,t){return t>0&&n.push(`
`,""),n.push(e,""),n}class nA{constructor(e,t,i,r){this.overlaps=i,this.pixelRatio=t,this.resolution=e,this.alignFill_,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=Fi(),this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={}}createLabel(e,t,i,r){const s=e+t+i+r;if(this.labels_[s])return this.labels_[s];const a=r?this.strokeStates[r]:null,o=i?this.fillStates[i]:null,l=this.textStates[t],c=this.pixelRatio,h=[l.scale[0]*c,l.scale[1]*c],d=Array.isArray(e),f=l.justify?ta[l.justify]:ld(Array.isArray(e)?e[0]:e,l.textAlign||ha),p=r&&a.lineWidth?a.lineWidth:0,m=d?e:e.split(`
`).reduce(iA,[]),{width:y,height:v,widths:x,heights:b,lineWidths:E}=Ey(l,m),I=y+p,C=[],M=(I+2)*h[0],D=(v+p)*h[1],P={width:M<0?Math.floor(M):Math.ceil(M),height:D<0?Math.floor(D):Math.ceil(D),contextInstructions:C};(h[0]!=1||h[1]!=1)&&C.push("scale",h),r&&(C.push("strokeStyle",a.strokeStyle),C.push("lineWidth",p),C.push("lineCap",a.lineCap),C.push("lineJoin",a.lineJoin),C.push("miterLimit",a.miterLimit),C.push("setLineDash",[a.lineDash]),C.push("lineDashOffset",a.lineDashOffset)),i&&C.push("fillStyle",o.fillStyle),C.push("textBaseline","middle"),C.push("textAlign","center");const z=.5-f;let j=f*I+z*p;const Q=[],q=[];let J=0,ye=0,$=0,N=0,G;for(let B=0,W=m.length;B<W;B+=2){const X=m[B];if(X===`
`){ye+=J,J=0,j=f*I+z*p,++N;continue}const ie=m[B+1]||l.font;ie!==G&&(r&&Q.push("font",ie),i&&q.push("font",ie),G=ie),J=Math.max(J,b[$]);const U=[X,j+z*x[$]+f*(x[$]-E[N]),.5*(p+J)+ye];j+=x[$],r&&Q.push("strokeText",U),i&&q.push("fillText",U),++$}return Array.prototype.push.apply(C,Q),Array.prototype.push.apply(C,q),this.labels_[s]=P,P}replayTextBackground_(e,t,i,r,s,a,o){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,i),e.lineTo.apply(e,r),e.lineTo.apply(e,s),e.lineTo.apply(e,t),a&&(this.alignFill_=a[2],this.fill_(e)),o&&(this.setStrokeStyle_(e,o),e.stroke())}calculateImageOrLabelDimensions_(e,t,i,r,s,a,o,l,c,h,d,f,p,m,y,v){o*=f[0],l*=f[1];let x=i-o,b=r-l;const E=s+c>e?e-c:s,I=a+h>t?t-h:a,C=m[3]+E*f[0]+m[1],M=m[0]+I*f[1]+m[2],D=x-m[3],P=b-m[0];(y||d!==0)&&(fn[0]=D,gn[0]=D,fn[1]=P,Hi[1]=P,Hi[0]=D+C,Qi[0]=Hi[0],Qi[1]=P+M,gn[1]=Qi[1]);let z;return d!==0?(z=bn(Fi(),i,r,1,1,d,-i,-r),Rt(z,fn),Rt(z,Hi),Rt(z,Qi),Rt(z,gn),tn(Math.min(fn[0],Hi[0],Qi[0],gn[0]),Math.min(fn[1],Hi[1],Qi[1],gn[1]),Math.max(fn[0],Hi[0],Qi[0],gn[0]),Math.max(fn[1],Hi[1],Qi[1],gn[1]),Qr)):tn(Math.min(D,D+C),Math.min(P,P+M),Math.max(D,D+C),Math.max(P,P+M),Qr),p&&(x=Math.round(x),b=Math.round(b)),{drawImageX:x,drawImageY:b,drawImageW:E,drawImageH:I,originX:c,originY:h,declutterBox:{minX:Qr[0],minY:Qr[1],maxX:Qr[2],maxY:Qr[3],value:v},canvasTransform:z,scale:f}}replayImageOrLabel_(e,t,i,r,s,a,o){const l=!!(a||o),c=r.declutterBox,h=e.canvas,d=o?o[2]*r.scale[0]/2:0;return c.minX-d<=h.width/t&&c.maxX+d>=0&&c.minY-d<=h.height/t&&c.maxY+d>=0&&(l&&this.replayTextBackground_(e,fn,Hi,Qi,gn,a,o),by(e,r.canvasTransform,s,i,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0}fill_(e){if(this.alignFill_){const t=Rt(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;e.save(),e.translate(t[0]%i,t[1]%i),e.rotate(this.viewRotation_)}e.fill(),this.alignFill_&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6])}drawLabelWithPointPlacement_(e,t,i,r){const s=this.textStates[t],a=this.createLabel(e,t,r,i),o=this.strokeStates[i],l=this.pixelRatio,c=ld(Array.isArray(e)?e[0]:e,s.textAlign||ha),h=ta[s.textBaseline||Xo],d=o&&o.lineWidth?o.lineWidth:0,f=a.width/l-2*s.scale[0],p=c*f+2*(.5-c)*d,m=h*a.height/l+2*(.5-h)*d;return{label:a,anchorX:p,anchorY:m}}execute_(e,t,i,r,s,a,o,l){let c;this.pixelCoordinates_&&Cn(i,this.renderedTransform_)?c=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),c=qn(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),K_(this.renderedTransform_,i));let h=0;const d=r.length;let f=0,p,m,y,v,x,b,E,I,C,M,D,P,z=0,j=0,Q=null,q=null;const J=this.coordinateCache_,ye=this.viewRotation_,$=Math.round(Math.atan2(-i[1],i[0])*1e12)/1e12,N={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:ye},G=this.instructions!=r||this.overlaps?0:200;let B,W,X,ie;for(;h<d;){const U=r[h];switch(U[0]){case Oe.BEGIN_GEOMETRY:B=U[1],ie=U[3],B.getGeometry()?o!==void 0&&!Qt(o,ie.getExtent())?h=U[2]+1:++h:h=U[2];break;case Oe.BEGIN_PATH:z>G&&(this.fill_(e),z=0),j>G&&(e.stroke(),j=0),!z&&!j&&(e.beginPath(),v=NaN,x=NaN),++h;break;case Oe.CIRCLE:f=U[1];const ce=c[f],me=c[f+1],Ue=c[f+2],se=c[f+3],fe=Ue-ce,ve=se-me,ee=Math.sqrt(fe*fe+ve*ve);e.moveTo(ce+ee,me),e.arc(ce,me,ee,0,2*Math.PI,!0),++h;break;case Oe.CLOSE_PATH:e.closePath(),++h;break;case Oe.CUSTOM:f=U[1],p=U[2];const le=U[3],pe=U[4],_e=U.length==6?U[5]:void 0;N.geometry=le,N.feature=B,h in J||(J[h]=[]);const Je=J[h];_e?_e(c,f,p,2,Je):(Je[0]=c[f],Je[1]=c[f+1],Je.length=2),pe(Je,N),++h;break;case Oe.DRAW_IMAGE:f=U[1],p=U[2],I=U[3],m=U[4],y=U[5];let Ge=U[6];const Ie=U[7],ht=U[8],lt=U[9],Qe=U[10];let ne=U[11];const xe=U[12];let be=U[13];const De=U[14],Me=U[15];if(!I&&U.length>=20){C=U[19],M=U[20],D=U[21],P=U[22];const Lt=this.drawLabelWithPointPlacement_(C,M,D,P);I=Lt.label,U[3]=I;const ei=U[23];m=(Lt.anchorX-ei)*this.pixelRatio,U[4]=m;const ft=U[24];y=(Lt.anchorY-ft)*this.pixelRatio,U[5]=y,Ge=I.height,U[6]=Ge,be=I.width,U[13]=be}let qe;U.length>25&&(qe=U[25]);let At,$t,Zt;U.length>17?(At=U[16],$t=U[17],Zt=U[18]):(At=Qn,$t=!1,Zt=!1),Qe&&$?ne+=ye:!Qe&&!$&&(ne-=ye);let dt=0;for(;f<p;f+=2){if(qe&&qe[dt++]<be/this.pixelRatio)continue;const Lt=this.calculateImageOrLabelDimensions_(I.width,I.height,c[f],c[f+1],be,Ge,m,y,ht,lt,ne,xe,s,At,$t||Zt,B),ei=[e,t,I,Lt,Ie,$t?Q:null,Zt?q:null];if(l){if(De==="none")continue;if(De==="obstacle"){l.insert(Lt.declutterBox);continue}else{let ft,_t;if(Me){const Ct=p-f;if(!Me[Ct]){Me[Ct]=ei;continue}if(ft=Me[Ct],delete Me[Ct],_t=od(ft),l.collides(_t))continue}if(l.collides(Lt.declutterBox))continue;ft&&(l.insert(_t),this.replayImageOrLabel_.apply(this,ft)),l.insert(Lt.declutterBox)}}this.replayImageOrLabel_.apply(this,ei)}++h;break;case Oe.DRAW_CHARS:const Mt=U[1],Ye=U[2],ji=U[3],ms=U[4];P=U[5];const hi=U[6],zi=U[7],In=U[8];D=U[9];const bt=U[10];C=U[11],M=U[12];const ct=[U[13],U[13]],sn=this.textStates[M],wi=sn.font,xi=[sn.scale[0]*zi,sn.scale[1]*zi];let di;wi in this.widths_?di=this.widths_[wi]:(di={},this.widths_[wi]=di);const Ui=rg(c,Mt,Ye,2),or=Math.abs(xi[0])*Wh(wi,C,di);if(ms||or<=Ui){const Lt=this.textStates[M].textAlign,ei=(Ui-or)*ta[Lt],ft=eA(c,Mt,Ye,2,C,ei,hi,Math.abs(xi[0]),Wh,wi,di,$?0:this.viewRotation_);e:if(ft){const _t=[];let Ct,ti,$e,mt,Pt;if(D)for(Ct=0,ti=ft.length;Ct<ti;++Ct){Pt=ft[Ct],$e=Pt[4],mt=this.createLabel($e,M,"",D),m=Pt[2]+(xi[0]<0?-bt:bt),y=ji*mt.height+(.5-ji)*2*bt*xi[1]/xi[0]-In;const Ht=this.calculateImageOrLabelDimensions_(mt.width,mt.height,Pt[0],Pt[1],mt.width,mt.height,m,y,0,0,Pt[3],ct,!1,Qn,!1,B);if(l&&l.collides(Ht.declutterBox))break e;_t.push([e,t,mt,Ht,1,null,null])}if(P)for(Ct=0,ti=ft.length;Ct<ti;++Ct){Pt=ft[Ct],$e=Pt[4],mt=this.createLabel($e,M,P,""),m=Pt[2],y=ji*mt.height-In;const Ht=this.calculateImageOrLabelDimensions_(mt.width,mt.height,Pt[0],Pt[1],mt.width,mt.height,m,y,0,0,Pt[3],ct,!1,Qn,!1,B);if(l&&l.collides(Ht.declutterBox))break e;_t.push([e,t,mt,Ht,1,null,null])}l&&l.load(_t.map(od));for(let Ht=0,Wi=_t.length;Ht<Wi;++Ht)this.replayImageOrLabel_.apply(this,_t[Ht])}}++h;break;case Oe.END_GEOMETRY:if(a!==void 0){B=U[1];const Lt=a(B,ie);if(Lt)return Lt}++h;break;case Oe.FILL:G?z++:this.fill_(e),++h;break;case Oe.MOVE_TO_LINE_TO:for(f=U[1],p=U[2],W=c[f],X=c[f+1],b=W+.5|0,E=X+.5|0,(b!==v||E!==x)&&(e.moveTo(W,X),v=b,x=E),f+=2;f<p;f+=2)W=c[f],X=c[f+1],b=W+.5|0,E=X+.5|0,(f==p-2||b!==v||E!==x)&&(e.lineTo(W,X),v=b,x=E);++h;break;case Oe.SET_FILL_STYLE:Q=U,this.alignFill_=U[2],z&&(this.fill_(e),z=0,j&&(e.stroke(),j=0)),e.fillStyle=U[1],++h;break;case Oe.SET_STROKE_STYLE:q=U,j&&(e.stroke(),j=0),this.setStrokeStyle_(e,U),++h;break;case Oe.STROKE:G?j++:e.stroke(),++h;break;default:++h;break}}z&&this.fill_(e),j&&e.stroke()}execute(e,t,i,r,s,a){this.viewRotation_=r,this.execute_(e,t,i,this.instructions,s,void 0,void 0,a)}executeHitDetection(e,t,i,r,s){return this.viewRotation_=i,this.execute_(e,1,t,this.hitDetectionInstructions,!0,r,s)}}var rA=nA;const Sc=["Polygon","Circle","LineString","Image","Text","Default"];class sA{constructor(e,t,i,r,s,a){this.maxExtent_=e,this.overlaps_=r,this.pixelRatio_=i,this.resolution_=t,this.renderBuffer_=a,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Fi(),this.createExecutors_(s)}clip(e,t){const i=this.getClipCoords(t);e.beginPath(),e.moveTo(i[0],i[1]),e.lineTo(i[2],i[3]),e.lineTo(i[4],i[5]),e.lineTo(i[6],i[7]),e.clip()}createExecutors_(e){for(const t in e){let i=this.executorsByZIndex_[t];i===void 0&&(i={},this.executorsByZIndex_[t]=i);const r=e[t];for(const s in r){const a=r[s];i[s]=new rA(this.resolution_,this.pixelRatio_,this.overlaps_,a)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const i=this.executorsByZIndex_[t];for(let r=0,s=e.length;r<s;++r)if(e[r]in i)return!0}return!1}forEachFeatureAtCoordinate(e,t,i,r,s,a){r=Math.round(r);const o=r*2+1,l=bn(this.hitDetectionTransform_,r+.5,r+.5,1/t,-1/t,-i,-e[0],-e[1]),c=!this.hitDetectionContext_;c&&(this.hitDetectionContext_=Vt(o,o,void 0,{willReadFrequently:!0}));const h=this.hitDetectionContext_;h.canvas.width!==o||h.canvas.height!==o?(h.canvas.width=o,h.canvas.height=o):c||h.clearRect(0,0,o,o);let d;this.renderBuffer_!==void 0&&(d=ui(),Js(d,e),mu(d,t*(this.renderBuffer_+r),d));const f=aA(r);let p;function m(C,M){const D=h.getImageData(0,0,o,o).data;for(let P=0,z=f.length;P<z;P++)if(D[f[P]]>0){if(!a||p!=="Image"&&p!=="Text"||a.includes(C)){const j=(f[P]-3)/4,Q=r-j%o,q=r-(j/o|0),J=s(C,M,Q*Q+q*q);if(J)return J}h.clearRect(0,0,o,o);break}}const y=Object.keys(this.executorsByZIndex_).map(Number);y.sort(er);let v,x,b,E,I;for(v=y.length-1;v>=0;--v){const C=y[v].toString();for(b=this.executorsByZIndex_[C],x=Sc.length-1;x>=0;--x)if(p=Sc[x],E=b[p],E!==void 0&&(I=E.executeHitDetection(h,l,i,m,d),I))return I}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const i=t[0],r=t[1],s=t[2],a=t[3],o=[i,r,i,a,s,a,s,r];return qn(o,0,8,2,e,o),o}isEmpty(){return us(this.executorsByZIndex_)}execute(e,t,i,r,s,a,o){const l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(er),this.maxExtent_&&(e.save(),this.clip(e,i)),a=a||Sc;let c,h,d,f,p,m;for(o&&l.reverse(),c=0,h=l.length;c<h;++c){const y=l[c].toString();for(p=this.executorsByZIndex_[y],d=0,f=a.length;d<f;++d){const v=a[d];m=p[v],m!==void 0&&m.execute(e,t,i,r,s,o)}}this.maxExtent_&&e.restore()}}const Rc={};function aA(n){if(Rc[n]!==void 0)return Rc[n];const e=n*2+1,t=n*n,i=new Array(t+1);for(let s=0;s<=n;++s)for(let a=0;a<=n;++a){const o=s*s+a*a;if(o>t)break;let l=i[o];l||(l=[],i[o]=l),l.push(((n+s)*e+(n+a))*4+3),s>0&&l.push(((n-s)*e+(n+a))*4+3),a>0&&(l.push(((n+s)*e+(n-a))*4+3),s>0&&l.push(((n-s)*e+(n-a))*4+3))}const r=[];for(let s=0,a=i.length;s<a;++s)i[s]&&r.push(...i[s]);return Rc[n]=r,r}var cd=sA;class oA extends sg{constructor(e,t,i,r,s,a,o){super(),this.context_=e,this.pixelRatio_=t,this.extent_=i,this.transform_=r,this.transformRotation_=r?Au(Math.atan2(r[1],r[0]),10):0,this.viewRotation_=s,this.squaredTolerance_=a,this.userTransform_=o,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Fi()}drawImages_(e,t,i,r){if(!this.image_)return;const s=qn(e,t,i,r,this.transform_,this.pixelCoordinates_),a=this.context_,o=this.tmpLocalTransform_,l=a.globalAlpha;this.imageOpacity_!=1&&(a.globalAlpha=l*this.imageOpacity_);let c=this.imageRotation_;this.transformRotation_===0&&(c-=this.viewRotation_),this.imageRotateWithView_&&(c+=this.viewRotation_);for(let h=0,d=s.length;h<d;h+=2){const f=s[h]-this.imageAnchorX_,p=s[h+1]-this.imageAnchorY_;if(c!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const m=f+this.imageAnchorX_,y=p+this.imageAnchorY_;bn(o,m,y,1,1,c,-m,-y),a.setTransform.apply(a,o),a.translate(m,y),a.scale(this.imageScale_[0],this.imageScale_[1]),a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),a.setTransform(1,0,0,1,0,0)}else a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,f,p,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(a.globalAlpha=l)}drawText_(e,t,i,r){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=qn(e,t,i,r,this.transform_,this.pixelCoordinates_),a=this.context_;let o=this.textRotation_;for(this.transformRotation_===0&&(o-=this.viewRotation_),this.textRotateWithView_&&(o+=this.viewRotation_);t<i;t+=r){const l=s[t]+this.textOffsetX_,c=s[t+1]+this.textOffsetY_;o!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(a.translate(l-this.textOffsetX_,c-this.textOffsetY_),a.rotate(o),a.translate(this.textOffsetX_,this.textOffsetY_),a.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&a.strokeText(this.text_,0,0),this.textFillState_&&a.fillText(this.text_,0,0),a.setTransform(1,0,0,1,0,0)):(this.textStrokeState_&&a.strokeText(this.text_,l,c),this.textFillState_&&a.fillText(this.text_,l,c))}}moveToLineTo_(e,t,i,r,s){const a=this.context_,o=qn(e,t,i,r,this.transform_,this.pixelCoordinates_);a.moveTo(o[0],o[1]);let l=o.length;s&&(l-=2);for(let c=2;c<l;c+=2)a.lineTo(o[c],o[c+1]);return s&&a.closePath(),i}drawRings_(e,t,i,r){for(let s=0,a=i.length;s<a;++s)t=this.moveToLineTo_(e,t,i[s],r,!0);return t}drawCircle(e){if(!!Qt(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=Xm(e,this.transform_,this.pixelCoordinates_),i=t[2]-t[0],r=t[3]-t[1],s=Math.sqrt(i*i+r*r),a=this.context_;a.beginPath(),a.arc(t[0],t[1],s,0,2*Math.PI),this.fillState_&&a.fill(),this.strokeState_&&a.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const i=t.getGeometryFunction()(e);!i||!Qt(this.extent_,i.getExtent())||(this.setStyle(t),this.drawGeometry(i))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let i=0,r=t.length;i<r;++i)this.drawGeometry(t[i])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),this.text_!==""&&this.drawText_(t,0,t.length,i)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),this.text_!==""&&this.drawText_(t,0,t.length,i)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Qt(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(i,0,i.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(!!Qt(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,r=e.getFlatCoordinates();let s=0;const a=e.getEnds(),o=e.getStride();i.beginPath();for(let l=0,c=a.length;l<c;++l)s=this.moveToLineTo_(r,s,a[l],o,!1);i.stroke()}if(this.text_!==""){const i=e.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Qt(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Qt(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getOrientedFlatCoordinates();let r=0;const s=e.getEndss(),a=e.getStride();t.beginPath();for(let o=0,l=s.length;o<l;++o){const c=s[o];r=this.drawRings_(i,r,c,a)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,i=this.contextFillState_;i?i.fillStyle!=e.fillStyle&&(i.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=e.lineCap&&(i.lineCap=e.lineCap,t.lineCap=e.lineCap),Cn(i.lineDash,e.lineDash)||t.setLineDash(i.lineDash=e.lineDash),i.lineDashOffset!=e.lineDashOffset&&(i.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),i.lineJoin!=e.lineJoin&&(i.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),i.lineWidth!=e.lineWidth&&(i.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),i.miterLimit!=e.miterLimit&&(i.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),i.strokeStyle!=e.strokeStyle&&(i.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,i=this.contextTextState_,r=e.textAlign?e.textAlign:ha;i?(i.font!=e.font&&(i.font=e.font,t.font=e.font),i.textAlign!=r&&(i.textAlign=r,t.textAlign=r),i.textBaseline!=e.textBaseline&&(i.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=r,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:r,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const i=e.getColor();this.fillState_={fillStyle:Li(i||qi)}}if(!t)this.strokeState_=null;else{const i=t.getColor(),r=t.getLineCap(),s=t.getLineDash(),a=t.getLineDashOffset(),o=t.getLineJoin(),l=t.getWidth(),c=t.getMiterLimit(),h=s||oa;this.strokeState_={lineCap:r!==void 0?r:Yo,lineDash:this.pixelRatio_===1?h:h.map(d=>d*this.pixelRatio_),lineDashOffset:(a||la)*this.pixelRatio_,lineJoin:o!==void 0?o:fs,lineWidth:(l!==void 0?l:da)*this.pixelRatio_,miterLimit:c!==void 0?c:ca,strokeStyle:Li(i||ua)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const i=e.getPixelRatio(this.pixelRatio_),r=e.getAnchor(),s=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*i,this.imageAnchorY_=r[1]*i,this.imageHeight_=t[1]*i,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const a=e.getScaleArray();this.imageScale_=[a[0]*this.pixelRatio_/i,a[1]*this.pixelRatio_/i],this.imageWidth_=t[0]*i}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const p=t.getColor();this.textFillState_={fillStyle:Li(p||qi)}}const i=e.getStroke();if(!i)this.textStrokeState_=null;else{const p=i.getColor(),m=i.getLineCap(),y=i.getLineDash(),v=i.getLineDashOffset(),x=i.getLineJoin(),b=i.getWidth(),E=i.getMiterLimit();this.textStrokeState_={lineCap:m!==void 0?m:Yo,lineDash:y||oa,lineDashOffset:v||la,lineJoin:x!==void 0?x:fs,lineWidth:b!==void 0?b:da,miterLimit:E!==void 0?E:ca,strokeStyle:Li(p||ua)}}const r=e.getFont(),s=e.getOffsetX(),a=e.getOffsetY(),o=e.getRotateWithView(),l=e.getRotation(),c=e.getScaleArray(),h=e.getText(),d=e.getTextAlign(),f=e.getTextBaseline();this.textState_={font:r!==void 0?r:Lf,textAlign:d!==void 0?d:ha,textBaseline:f!==void 0?f:Xo},this.text_=h!==void 0?Array.isArray(h)?h.reduce((p,m,y)=>p+=y%2?" ":m,""):h:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=a!==void 0?this.pixelRatio_*a:0,this.textRotateWithView_=o!==void 0?o:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*c[0],this.pixelRatio_*c[1]]}}}var lA=oA;const Oi=.5;function cA(n,e,t,i,r,s,a){const o=n[0]*Oi,l=n[1]*Oi,c=Vt(o,l);c.imageSmoothingEnabled=!1;const h=c.canvas,d=new lA(c,Oi,r,null,a),f=t.length,p=Math.floor((256*256*256-1)/f),m={};for(let v=1;v<=f;++v){const x=t[v-1],b=x.getStyleFunction()||i;if(!i)continue;let E=b(x,s);if(!E)continue;Array.isArray(E)||(E=[E]);const C=(v*p).toString(16).padStart(7,"#00000");for(let M=0,D=E.length;M<D;++M){const P=E[M],z=P.getGeometryFunction()(x);if(!z||!Qt(r,z.getExtent()))continue;const j=P.clone(),Q=j.getFill();Q&&Q.setColor(C);const q=j.getStroke();q&&(q.setColor(C),q.setLineDash(null)),j.setText(void 0);const J=P.getImage();if(J&&J.getOpacity()!==0){const G=J.getImageSize();if(!G)continue;const B=Vt(G[0],G[1],void 0,{alpha:!1}),W=B.canvas;B.fillStyle=C,B.fillRect(0,0,W.width,W.height),j.setImage(new Wf({img:W,imgSize:G,anchor:J.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:J.getOrigin(),opacity:1,size:J.getSize(),scale:J.getScale(),rotation:J.getRotation(),rotateWithView:J.getRotateWithView()}))}const ye=j.getZIndex()||0;let $=m[ye];$||($={},m[ye]=$,$.Polygon=[],$.Circle=[],$.LineString=[],$.Point=[]);const N=z.getType();if(N==="GeometryCollection"){const G=z.getGeometriesArrayRecursive();for(let B=0,W=G.length;B<W;++B){const X=G[B];$[X.getType().replace("Multi","")].push(X,j)}}else $[N.replace("Multi","")].push(z,j)}}const y=Object.keys(m).map(Number).sort(er);for(let v=0,x=y.length;v<x;++v){const b=m[y[v]];for(const E in b){const I=b[E];for(let C=0,M=I.length;C<M;C+=2){d.setStyle(I[C+1]);for(let D=0,P=e.length;D<P;++D)d.setTransform(e[D]),d.drawGeometry(I[C])}}}return c.getImageData(0,0,h.width,h.height)}function uA(n,e,t){const i=[];if(t){const r=Math.floor(Math.round(n[0])*Oi),s=Math.floor(Math.round(n[1])*Oi),a=(xt(r,0,t.width-1)+xt(s,0,t.height-1)*t.width)*4,o=t.data[a],l=t.data[a+1],h=t.data[a+2]+256*(l+256*o),d=Math.floor((256*256*256-1)/e.length);h&&h%d===0&&i.push(e[h/d-1])}return i}const hA=.5,ag={Point:AA,LineString:mA,Polygon:xA,MultiPoint:wA,MultiLineString:yA,MultiPolygon:vA,GeometryCollection:_A,Circle:gA};function dA(n,e){return parseInt(Ve(n),10)-parseInt(Ve(e),10)}function fA(n,e){const t=tu(n,e);return t*t}function tu(n,e){return hA*n/e}function gA(n,e,t,i,r){const s=t.getFill(),a=t.getStroke();if(s||a){const l=n.getBuilder(t.getZIndex(),"Circle");l.setFillStrokeStyle(s,a),l.drawCircle(e,i)}const o=t.getText();if(o&&o.getText()){const l=(r||n).getBuilder(t.getZIndex(),"Text");l.setTextStyle(o),l.drawText(e,i)}}function ud(n,e,t,i,r,s,a){let o=!1;const l=t.getImage();if(l){const c=l.getImageState();c==Et.LOADED||c==Et.ERROR?l.unlistenImageChange(r):(c==Et.IDLE&&l.load(),l.listenImageChange(r),o=!0)}return pA(n,e,t,i,s,a),o}function pA(n,e,t,i,r,s){const a=t.getGeometryFunction()(e);if(!a)return;const o=a.simplifyTransformed(i,r);if(t.getRenderer())og(n,o,t,e);else{const c=ag[o.getType()];c(n,o,t,e,s)}}function og(n,e,t,i){if(e.getType()=="GeometryCollection"){const s=e.getGeometries();for(let a=0,o=s.length;a<o;++a)og(n,s[a],t,i);return}n.getBuilder(t.getZIndex(),"Default").drawCustom(e,i,t.getRenderer(),t.getHitDetectionRenderer())}function _A(n,e,t,i,r){const s=e.getGeometriesArray();let a,o;for(a=0,o=s.length;a<o;++a){const l=ag[s[a].getType()];l(n,s[a],t,i,r)}}function mA(n,e,t,i,r){const s=t.getStroke();if(s){const o=n.getBuilder(t.getZIndex(),"LineString");o.setFillStrokeStyle(null,s),o.drawLineString(e,i)}const a=t.getText();if(a&&a.getText()){const o=(r||n).getBuilder(t.getZIndex(),"Text");o.setTextStyle(a),o.drawText(e,i)}}function yA(n,e,t,i,r){const s=t.getStroke();if(s){const o=n.getBuilder(t.getZIndex(),"LineString");o.setFillStrokeStyle(null,s),o.drawMultiLineString(e,i)}const a=t.getText();if(a&&a.getText()){const o=(r||n).getBuilder(t.getZIndex(),"Text");o.setTextStyle(a),o.drawText(e,i)}}function vA(n,e,t,i,r){const s=t.getFill(),a=t.getStroke();if(a||s){const l=n.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(s,a),l.drawMultiPolygon(e,i)}const o=t.getText();if(o&&o.getText()){const l=(r||n).getBuilder(t.getZIndex(),"Text");l.setTextStyle(o),l.drawText(e,i)}}function AA(n,e,t,i,r){const s=t.getImage(),a=t.getText();let o;if(s){if(s.getImageState()!=Et.LOADED)return;let l=n;if(r){const h=s.getDeclutterMode();if(h!=="none")if(l=r,h==="obstacle"){const d=n.getBuilder(t.getZIndex(),"Image");d.setImageStyle(s,o),d.drawPoint(e,i)}else a&&a.getText()&&(o={})}const c=l.getBuilder(t.getZIndex(),"Image");c.setImageStyle(s,o),c.drawPoint(e,i)}if(a&&a.getText()){let l=n;r&&(l=r);const c=l.getBuilder(t.getZIndex(),"Text");c.setTextStyle(a,o),c.drawText(e,i)}}function wA(n,e,t,i,r){const s=t.getImage(),a=t.getText();let o;if(s){if(s.getImageState()!=Et.LOADED)return;let l=n;if(r){const h=s.getDeclutterMode();if(h!=="none")if(l=r,h==="obstacle"){const d=n.getBuilder(t.getZIndex(),"Image");d.setImageStyle(s,o),d.drawMultiPoint(e,i)}else a&&a.getText()&&(o={})}const c=l.getBuilder(t.getZIndex(),"Image");c.setImageStyle(s,o),c.drawMultiPoint(e,i)}if(a&&a.getText()){let l=n;r&&(l=r);const c=l.getBuilder(t.getZIndex(),"Text");c.setTextStyle(a,o),c.drawText(e,i)}}function xA(n,e,t,i,r){const s=t.getFill(),a=t.getStroke();if(s||a){const l=n.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(s,a),l.drawPolygon(e,i)}const o=t.getText();if(o&&o.getText()){const l=(r||n).getBuilder(t.getZIndex(),"Text");l.setTextStyle(o),l.drawText(e,i)}}class EA extends ig{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=ui(),this.wrappedRenderedExtent_=ui(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(e,t,i){const r=t.extent,s=t.viewState,a=s.center,o=s.resolution,l=s.projection,c=s.rotation,h=l.getExtent(),d=this.getLayer().getSource(),f=t.pixelRatio,p=t.viewHints,m=!(p[Wt.ANIMATING]||p[Wt.INTERACTING]),y=this.compositionContext_,v=Math.round(t.size[0]*f),x=Math.round(t.size[1]*f),b=d.getWrapX()&&l.canWrapX(),E=b?rt(h):null,I=b?Math.ceil((r[2]-h[2])/E)+1:1;let C=b?Math.floor((r[0]-h[0])/E):0;do{const M=this.getRenderTransform(a,o,c,f,v,x,C*E);e.execute(y,1,M,c,m,void 0,i)}while(++C<I)}setupCompositionContext_(){if(this.opacity_!==1){const e=Vt(this.context.canvas.width,this.context.canvas.height,td);this.compositionContext_=e}else this.compositionContext_=this.context}releaseCompositionContext_(){if(this.opacity_!==1){const e=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=e,gl(this.compositionContext_),td.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(e){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,e,e.declutterTree),this.releaseCompositionContext_())}renderFrame(e,t){const i=e.pixelRatio,r=e.layerStatesArray[e.layerIndex];V_(this.pixelTransform,1/i,1/i),_u(this.inversePixelTransform,this.pixelTransform);const s=tf(this.pixelTransform);this.useContainer(t,s,this.getBackground(e));const a=this.context,o=a.canvas,l=this.replayGroup_,c=this.declutterExecutorGroup;if((!l||l.isEmpty())&&(!c||c.isEmpty()))return null;const h=Math.round(e.size[0]*i),d=Math.round(e.size[1]*i);o.width!=h||o.height!=d?(o.width=h,o.height=d,o.style.transform!==s&&(o.style.transform=s)):this.containerReused||a.clearRect(0,0,h,d),this.preRender(a,e);const f=e.viewState;f.projection,this.opacity_=r.opacity,this.setupCompositionContext_();let p=!1,m=!0;if(r.extent&&this.clipping){const y=vn(r.extent);m=Qt(y,e.extent),p=m&&!ns(y,e.extent),p&&this.clipUnrotated(this.compositionContext_,e,y)}return m&&this.renderWorlds(l,e),p&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(a,e),this.renderedRotation_!==f.rotation&&(this.renderedRotation_=f.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(e){return new Promise(t=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const i=[this.context.canvas.width,this.context.canvas.height];Rt(this.pixelTransform,i);const r=this.renderedCenter_,s=this.renderedResolution_,a=this.renderedRotation_,o=this.renderedProjection_,l=this.wrappedRenderedExtent_,c=this.getLayer(),h=[],d=i[0]*Oi,f=i[1]*Oi;h.push(this.getRenderTransform(r,s,a,Oi,d,f,0).slice());const p=c.getSource(),m=o.getExtent();if(p.getWrapX()&&o.canWrapX()&&!ns(m,l)){let y=l[0];const v=rt(m);let x=0,b;for(;y<m[0];)--x,b=v*x,h.push(this.getRenderTransform(r,s,a,Oi,d,f,b).slice()),y+=v;for(x=0,y=l[2];y>m[2];)++x,b=v*x,h.push(this.getRenderTransform(r,s,a,Oi,d,f,b).slice()),y-=v}this.hitDetectionImageData_=cA(i,h,this.renderedFeatures_,c.getStyleFunction(),l,s,a)}t(uA(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,i,r,s){if(!this.replayGroup_)return;const a=t.viewState.resolution,o=t.viewState.rotation,l=this.getLayer(),c={},h=function(p,m,y){const v=Ve(p),x=c[v];if(x){if(x!==!0&&y<x.distanceSq){if(y===0)return c[v]=!0,s.splice(s.lastIndexOf(x),1),r(p,l,m);x.geometry=m,x.distanceSq=y}}else{if(y===0)return c[v]=!0,r(p,l,m);s.push(c[v]={feature:p,layer:l,geometry:m,distanceSq:y,callback:r})}};let d;const f=[this.replayGroup_];return this.declutterExecutorGroup&&f.push(this.declutterExecutorGroup),f.some(p=>d=p.forEachFeatureAtCoordinate(e,a,o,i,h,p===this.declutterExecutorGroup&&t.declutterTree?t.declutterTree.all().map(m=>m.value):null)),d}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),i=t.getSource();if(!i)return!1;const r=e.viewHints[Wt.ANIMATING],s=e.viewHints[Wt.INTERACTING],a=t.getUpdateWhileAnimating(),o=t.getUpdateWhileInteracting();if(this.ready&&!a&&r||!o&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=e.extent,c=e.viewState,h=c.projection,d=c.resolution,f=e.pixelRatio,p=t.getRevision(),m=t.getRenderBuffer();let y=t.getRenderOrder();y===void 0&&(y=dA);const v=c.center.slice(),x=mu(l,m*d),b=x.slice(),E=[x.slice()],I=h.getExtent();if(i.getWrapX()&&h.canWrapX()&&!ns(I,e.extent)){const $=rt(I),N=Math.max(rt(x)/2,$);x[0]=I[0]-N,x[2]=I[2]+N,ff(v,h);const G=lf(E[0],h);G[0]<I[0]&&G[2]<I[2]?E.push([G[0]+$,G[1],G[2]+$,G[3]]):G[0]>I[0]&&G[2]>I[2]&&E.push([G[0]-$,G[1],G[2]-$,G[3]])}if(this.ready&&this.renderedResolution_==d&&this.renderedRevision_==p&&this.renderedRenderOrder_==y&&ns(this.wrappedRenderedExtent_,x))return Cn(this.renderedExtent_,b)||(this.hitDetectionImageData_=null,this.renderedExtent_=b),this.renderedCenter_=v,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const C=new ad(tu(d,f),x,d,f);let M;this.getLayer().getDeclutter()&&(M=new ad(tu(d,f),x,d,f));let D;for(let $=0,N=E.length;$<N;++$)i.loadFeatures(E[$],d,h);const P=fA(d,f);let z=!0;const j=$=>{let N;const G=$.getStyleFunction()||t.getStyleFunction();if(G&&(N=G($,d)),N){const B=this.renderFeature($,P,N,C,D,M);z=z&&!B}},Q=Su(x),q=i.getFeaturesInExtent(Q);y&&q.sort(y);for(let $=0,N=q.length;$<N;++$)j(q[$]);this.renderedFeatures_=q,this.ready=z;const J=C.finish(),ye=new cd(x,d,f,i.getOverlaps(),J,t.getRenderBuffer());return M&&(this.declutterExecutorGroup=new cd(x,d,f,i.getOverlaps(),M.finish(),t.getRenderBuffer())),this.renderedResolution_=d,this.renderedRevision_=p,this.renderedRenderOrder_=y,this.renderedExtent_=b,this.wrappedRenderedExtent_=x,this.renderedCenter_=v,this.renderedProjection_=h,this.replayGroup_=ye,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,i,r,s,a){if(!i)return!1;let o=!1;if(Array.isArray(i))for(let l=0,c=i.length;l<c;++l)o=ud(r,e,i[l],t,this.boundHandleStyleImageChange_,s,a)||o;else o=ud(r,e,i,t,this.boundHandleStyleImageChange_,s,a);return o}}var bA=EA;class CA extends z0{constructor(e){super(e)}createRenderer(){return new bA(this)}}var rn=CA;class IA{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let i=t.dataProjection?yt(t.dataProjection):this.readProjection(e);t.extent&&i&&i.getUnits()==="tile-pixels"&&(i=yt(i),i.setWorldExtent(t.extent)),t={dataProjection:i,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},e)}getType(){return Le()}readFeature(e,t){return Le()}readFeatures(e,t){return Le()}readGeometry(e,t){return Le()}readProjection(e){return Le()}writeFeature(e,t){return Le()}writeFeatures(e,t){return Le()}writeGeometry(e,t){return Le()}}function lg(n,e,t){const i=t?yt(t.featureProjection):null,r=t?yt(t.dataProjection):null;let s;if(i&&r&&!Xn(i,r)?s=(e?n.clone():n).transform(e?i:r,e?r:i):s=n,e&&t&&t.decimals!==void 0){const a=Math.pow(10,t.decimals),o=function(l){for(let c=0,h=l.length;c<h;++c)l[c]=Math.round(l[c]*a)/a;return l};s===n&&(s=n.clone()),s.applyTransform(o)}return s}class Vo extends rr{constructor(e,t,i){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&i)this.setFlatCoordinates(t,e),this.ends_=i;else{let r=this.getLayout();const s=e,a=[],o=[];for(let l=0,c=s.length;l<c;++l){const h=s[l];l===0&&(r=h.getLayout()),Pi(a,h.getFlatCoordinates()),o.push(a.length)}this.setFlatCoordinates(r,a),this.ends_=o}}appendLineString(e){this.flatCoordinates?Pi(this.flatCoordinates,e.getFlatCoordinates().slice()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Vo(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<ir(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Lu(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Fu(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,i,r))}getCoordinateAtM(e,t,i){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,i=i!==void 0?i:!1,N0(this.flatCoordinates,0,this.ends_,this.stride,e,t,i))}getCoordinates(){return aa(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new eu(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,i=this.layout,r=[];let s=0;for(let a=0,o=t.length;a<o;++a){const l=t[a],c=new eu(e.slice(s,l),i);r.push(c),s=l}return r}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let i=0;const r=this.ends_,s=this.stride;for(let a=0,o=r.length;a<o;++a){const l=r[a],c=ng(t,i,l,s,.5);Pi(e,c),i=l}return e}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=$m(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,i),new Vo(t,"XY",i)}getType(){return"MultiLineString"}intersectsExtent(e){return ny(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=Du(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}var SA=Vo;class th extends rr{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){this.flatCoordinates?Pi(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.changed()}clone(){const e=new th(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){if(r<ir(this.getExtent(),e,t))return r;const s=this.flatCoordinates,a=this.stride;for(let o=0,l=s.length;o<l;o+=a){const c=Vn(e,t,s[o],s[o+1]);if(c<r){r=c;for(let h=0;h<a;++h)i[h]=s[o+h];i.length=a}}return r}getCoordinates(){return An(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return e<0||t<=e?null:new ki(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,i=this.stride,r=[];for(let s=0,a=e.length;s<a;s+=i){const o=new ki(e.slice(s,s+i),t);r.push(o)}return r}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,i=this.stride;for(let r=0,s=t.length;r<s;r+=i){const a=t[r],o=t[r+1];if(yu(e,a,o))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=hl(this.flatCoordinates,0,e,this.stride),this.changed()}}var cg=th;function RA(n,e,t,i){const r=[];let s=ui();for(let a=0,o=t.length;a<o;++a){const l=t[a];s=rf(n,e,l[0],i),r.push((s[0]+s[2])/2,(s[1]+s[3])/2),e=l[l.length-1]}return r}class $o extends rr{constructor(e,t,i){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!i&&!Array.isArray(e[0])){let r=this.getLayout();const s=e,a=[],o=[];for(let l=0,c=s.length;l<c;++l){const h=s[l];l===0&&(r=h.getLayout());const d=a.length,f=h.getEnds();for(let p=0,m=f.length;p<m;++p)f[p]+=d;Pi(a,h.getFlatCoordinates()),o.push(f)}t=r,e=a,i=o}t!==void 0&&i?(this.setFlatCoordinates(t,e),this.endss_=i):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const i=this.flatCoordinates.length;Pi(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let r=0,s=t.length;r<s;++r)t[r]+=i}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let r=0;r<e;++r)t[r]=this.endss_[r].slice();const i=new $o(this.flatCoordinates.slice(),this.layout,t);return i.applyProperties(this),i}closestPointXY(e,t,i,r){return r<ir(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Hm(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Qm(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,i,r))}containsXY(e,t){return ty(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return Jm(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),Bh(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,Xc(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=RA(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=iy(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new cg(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;ay(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=Bh(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=qm(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,i),new $o(t,"XY",i)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const s=this.endss_[e-1];t=s[s.length-1]}const i=this.endss_[e].slice(),r=i[i.length-1];if(t!==0)for(let s=0,a=i.length;s<a;++s)i[s]-=t;return new Wo(this.flatCoordinates.slice(t,r),this.layout,i)}getPolygons(){const e=this.layout,t=this.flatCoordinates,i=this.endss_,r=[];let s=0;for(let a=0,o=i.length;a<o;++a){const l=i[a].slice(),c=l[l.length-1];if(s!==0)for(let d=0,f=l.length;d<f;++d)l[d]-=s;const h=new Wo(t.slice(s,c),e,l);r.push(h),s=c}return r}getType(){return"MultiPolygon"}intersectsExtent(e){return ry(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const i=Vm(this.flatCoordinates,0,e,this.stride,this.endss_);if(i.length===0)this.flatCoordinates.length=0;else{const r=i[i.length-1];this.flatCoordinates.length=r.length===0?0:r[r.length-1]}this.changed()}}var TA=$o;class Zo extends Af{constructor(e){super(),this.geometries_=e||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(st),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(!!this.geometries_)for(let e=0,t=this.geometries_.length;e<t;++e)this.changeEventsKeys_.push(We(this.geometries_[e],Fe.CHANGE,this.changed,this))}clone(){const e=new Zo(null);return e.setGeometries(this.geometries_),e.applyProperties(this),e}closestPointXY(e,t,i,r){if(r<ir(this.getExtent(),e,t))return r;const s=this.geometries_;for(let a=0,o=s.length;a<o;++a)r=s[a].closestPointXY(e,t,i,r);return r}containsXY(e,t){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)if(i[r].containsXY(e,t))return!0;return!1}computeExtent(e){ma(e);const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)sf(e,t[i].getExtent());return e}getGeometries(){return hd(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)t[i].getType()===this.getType()?e=e.concat(t[i].getGeometriesArrayRecursive()):e.push(t[i]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],i=this.geometries_;let r=!1;for(let s=0,a=i.length;s<a;++s){const o=i[s],l=o.getSimplifiedGeometry(e);t.push(l),l!==o&&(r=!0)}if(r){const s=new Zo(null);return s.setGeometriesArray(t),s}return this.simplifiedGeometryMaxMinSquaredTolerance=e,this}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)if(t[i].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)i[r].rotate(e,t);this.changed()}scale(e,t,i){i||(i=tr(this.getExtent()));const r=this.geometries_;for(let s=0,a=r.length;s<a;++s)r[s].scale(e,t,i);this.changed()}setGeometries(e){this.setGeometriesArray(hd(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)t[i].applyTransform(e);this.changed()}translate(e,t){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)i[r].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function hd(n){const e=[];for(let t=0,i=n.length;t<i;++t)e.push(n[t].clone());return e}var OA=Zo;class MA extends IA{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(To(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(To(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return Le()}readFeaturesFromObject(e,t){return Le()}readGeometry(e,t){return this.readGeometryFromObject(To(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return Le()}readProjection(e){return this.readProjectionFromObject(To(e))}readProjectionFromObject(e){return Le()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return Le()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return Le()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return Le()}}function To(n){if(typeof n=="string"){const e=JSON.parse(n);return e||null}else if(n!==null)return n;return null}var LA=MA;class PA extends LA{constructor(e){e=e||{},super(),this.dataProjection=yt(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=yt(e.featureProjection)),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let i=null;e.type==="Feature"?i=e:i={type:"Feature",geometry:e,properties:null};const r=iu(i.geometry,t),s=new Ji;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in i!==void 0&&s.setGeometryName(i.geometry_name),s.setGeometry(r),"id"in i&&s.setId(i.id),i.properties&&s.setProperties(i.properties,!0),s}readFeaturesFromObject(e,t){const i=e;let r=null;if(i.type==="FeatureCollection"){const s=e;r=[];const a=s.features;for(let o=0,l=a.length;o<l;++o)r.push(this.readFeatureFromObject(a[o],t))}else r=[this.readFeatureFromObject(e,t)];return r}readGeometryFromObject(e,t){return iu(e,t)}readProjectionFromObject(e){const t=e.crs;let i;return t?t.type=="name"?i=yt(t.properties.name):t.type==="EPSG"?i=yt("EPSG:"+t.properties.code):Ne(!1,36):i=this.dataProjection,i}writeFeatureObject(e,t){t=this.adaptOptions(t);const i={type:"Feature",geometry:null,properties:null},r=e.getId();if(r!==void 0&&(i.id=r),!e.hasProperties())return i;const s=e.getProperties(),a=e.getGeometry();return a&&(i.geometry=nu(a,t),delete s[e.getGeometryName()]),us(s)||(i.properties=s),i}writeFeaturesObject(e,t){t=this.adaptOptions(t);const i=[];for(let r=0,s=e.length;r<s;++r)i.push(this.writeFeatureObject(e[r],t));return{type:"FeatureCollection",features:i}}writeGeometryObject(e,t){return nu(e,this.adaptOptions(t))}}function iu(n,e){if(!n)return null;let t;switch(n.type){case"Point":{t=DA(n);break}case"LineString":{t=kA(n);break}case"Polygon":{t=jA(n);break}case"MultiPoint":{t=BA(n);break}case"MultiLineString":{t=NA(n);break}case"MultiPolygon":{t=GA(n);break}case"GeometryCollection":{t=FA(n);break}default:throw new Error("Unsupported GeoJSON type: "+n.type)}return lg(t,!1,e)}function FA(n,e){const t=n.geometries.map(function(i){return iu(i,e)});return new OA(t)}function DA(n){return new ki(n.coordinates)}function kA(n){return new eu(n.coordinates)}function NA(n){return new SA(n.coordinates)}function BA(n){return new cg(n.coordinates)}function GA(n){return new TA(n.coordinates)}function jA(n){return new Wo(n.coordinates)}function nu(n,e){n=lg(n,!0,e);const t=n.getType();let i;switch(t){case"Point":{i=HA(n);break}case"LineString":{i=UA(n);break}case"Polygon":{i=QA(n,e);break}case"MultiPoint":{i=YA(n);break}case"MultiLineString":{i=WA(n);break}case"MultiPolygon":{i=XA(n,e);break}case"GeometryCollection":{i=zA(n,e);break}case"Circle":{i={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return i}function zA(n,e){e=Object.assign({},e),delete e.featureProjection;const t=n.getGeometriesArray().map(function(i){return nu(i,e)});return{type:"GeometryCollection",geometries:t}}function UA(n,e){return{type:"LineString",coordinates:n.getCoordinates()}}function WA(n,e){return{type:"MultiLineString",coordinates:n.getCoordinates()}}function YA(n,e){return{type:"MultiPoint",coordinates:n.getCoordinates()}}function XA(n,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:n.getCoordinates(t)}}function HA(n,e){return{type:"Point",coordinates:n.getCoordinates()}}function QA(n,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:n.getCoordinates(t)}}var ps=PA;const Tc="units",KA=[1,2,5],Vs=25.4/.28;class VA extends _l{constructor(e){e=e||{};const t=document.createElement("div");t.style.pointerEvents="none",super({element:t,render:e.render,target:e.target}),this.on,this.once,this.un;const i=e.className!==void 0?e.className:e.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=i+"-inner",this.element.className=i+" "+va,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=e.minWidth!==void 0?e.minWidth:64,this.maxWidth_=e.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(Tc,this.handleUnitsChanged_),this.setUnits(e.units||"metric"),this.scaleBar_=e.bar||!1,this.scaleBarSteps_=e.steps||4,this.scaleBarText_=e.text||!1,this.dpi_=e.dpi||void 0}getUnits(){return this.get(Tc)}handleUnitsChanged_(){this.updateElement_()}setUnits(e){this.set(Tc,e)}setDpi(e){this.dpi_=e}updateElement_(){const e=this.viewState_;if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=e.center,i=e.projection,r=this.getUnits(),s=r=="degrees"?"degrees":"m";let a=jo(i,e.resolution,t,s);const o=this.minWidth_*(this.dpi_||Vs)/Vs,l=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||Vs)/Vs:void 0;let c=o*a,h="";if(r=="degrees"){const E=hs.degrees;c*=E,c<E/60?(h="\u2033",a*=3600):c<E?(h="\u2032",a*=60):h="\xB0"}else r=="imperial"?c<.9144?(h="in",a/=.0254):c<1609.344?(h="ft",a/=.3048):(h="mi",a/=1609.344):r=="nautical"?(a/=1852,h="NM"):r=="metric"?c<.001?(h="\u03BCm",a*=1e6):c<1?(h="mm",a*=1e3):c<1e3?h="m":(h="km",a/=1e3):r=="us"?c<.9144?(h="in",a*=39.37):c<1609.344?(h="ft",a/=.30480061):(h="mi",a/=1609.3472):Ne(!1,33);let d=3*Math.floor(Math.log(o*a)/Math.log(10)),f,p,m,y,v,x;for(;;){m=Math.floor(d/3);const E=Math.pow(10,m);if(f=KA[(d%3+3)%3]*E,p=Math.round(f/a),isNaN(p)){this.element.style.display="none",this.renderedVisible_=!1;return}if(l!==void 0&&p>=l){f=y,p=v,m=x;break}else if(p>=o)break;y=f,v=p,x=m,++d}const b=this.scaleBar_?this.createScaleBar(p,f,h):f.toFixed(m<0?-m:0)+" "+h;this.renderedHTML_!=b&&(this.innerElement_.innerHTML=b,this.renderedHTML_=b),this.renderedWidth_!=p&&(this.innerElement_.style.width=p+"px",this.renderedWidth_=p),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(e,t,i){const r=this.getScaleForResolution(),s=r<1?Math.round(1/r).toLocaleString()+" : 1":"1 : "+Math.round(r).toLocaleString(),a=this.scaleBarSteps_,o=e/a,l=[this.createMarker("absolute")];for(let h=0;h<a;++h){const d=h%2===0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";l.push(`<div><div class="ol-scale-singlebar ${d}" style="width: ${o}px;"></div>`+this.createMarker("relative")+(h%2===0||a===2?this.createStepText(h,e,!1,t,i):"")+"</div>")}return l.push(this.createStepText(a,e,!0,t,i)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${e}px;">`+s+"</div>":"")+l.join("")}createMarker(e){return`<div class="ol-scale-step-marker" style="position: ${e}; top: ${e==="absolute"?3:-10}px;"></div>`}createStepText(e,t,i,r,s){const o=(e===0?0:Math.round(r/this.scaleBarSteps_*e*100)/100)+(e===0?"":" "+s),l=e===0?-3:t/this.scaleBarSteps_*-1,c=e===0?0:t/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${l}px;text-align: ${e===0?"left":"center"};min-width: ${c}px;left: ${i?t+"px":"unset"};">`+o+"</div>"}getScaleForResolution(){const e=jo(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m"),t=this.dpi_||Vs,i=1e3/25.4;return e*i*t}render(e){const t=e.frameState;t?this.viewState_=t.viewState:this.viewState_=null,this.updateElement_()}}var wl=VA;const ut={ACCURACY:"accuracy",ACCURACY_GEOMETRY:"accuracyGeometry",ALTITUDE:"altitude",ALTITUDE_ACCURACY:"altitudeAccuracy",HEADING:"heading",POSITION:"position",PROJECTION:"projection",SPEED:"speed",TRACKING:"tracking",TRACKING_OPTIONS:"trackingOptions"},$A={ERROR:"error"};class ZA extends Bi{constructor(e){super($A.ERROR),this.code=e.code,this.message=e.message}}class qA extends Ai{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.position_=null,this.transform_=bu,this.watchId_=void 0,this.addChangeListener(ut.PROJECTION,this.handleProjectionChanged_),this.addChangeListener(ut.TRACKING,this.handleTrackingChanged_),e.projection!==void 0&&this.setProjection(e.projection),e.trackingOptions!==void 0&&this.setTrackingOptions(e.trackingOptions),this.setTracking(e.tracking!==void 0?e.tracking:!1)}disposeInternal(){this.setTracking(!1),super.disposeInternal()}handleProjectionChanged_(){const e=this.getProjection();e&&(this.transform_=ul(yt("EPSG:4326"),e),this.position_&&this.set(ut.POSITION,this.transform_(this.position_)))}handleTrackingChanged_(){if("geolocation"in navigator){const e=this.getTracking();e&&this.watchId_===void 0?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):!e&&this.watchId_!==void 0&&(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}}positionChange_(e){const t=e.coords;this.set(ut.ACCURACY,t.accuracy),this.set(ut.ALTITUDE,t.altitude===null?void 0:t.altitude),this.set(ut.ALTITUDE_ACCURACY,t.altitudeAccuracy===null?void 0:t.altitudeAccuracy),this.set(ut.HEADING,t.heading===null?void 0:$n(t.heading)),this.position_?(this.position_[0]=t.longitude,this.position_[1]=t.latitude):this.position_=[t.longitude,t.latitude];const i=this.transform_(this.position_);this.set(ut.POSITION,i.slice()),this.set(ut.SPEED,t.speed===null?void 0:t.speed);const r=oy(this.position_,t.accuracy);r.applyTransform(this.transform_),this.set(ut.ACCURACY_GEOMETRY,r),this.changed()}positionError_(e){this.dispatchEvent(new ZA(e))}getAccuracy(){return this.get(ut.ACCURACY)}getAccuracyGeometry(){return this.get(ut.ACCURACY_GEOMETRY)||null}getAltitude(){return this.get(ut.ALTITUDE)}getAltitudeAccuracy(){return this.get(ut.ALTITUDE_ACCURACY)}getHeading(){return this.get(ut.HEADING)}getPosition(){return this.get(ut.POSITION)}getProjection(){return this.get(ut.PROJECTION)}getSpeed(){return this.get(ut.SPEED)}getTracking(){return this.get(ut.TRACKING)}getTrackingOptions(){return this.get(ut.TRACKING_OPTIONS)}setProjection(e){this.set(ut.PROJECTION,yt(e))}setTracking(e){this.set(ut.TRACKING,e)}setTrackingOptions(e){this.set(ut.TRACKING_OPTIONS,e)}}var ug=qA;class xl extends ar{constructor(){super({source:new S0,zIndex:1})}}class JA extends ar{constructor(){super({source:new sr({url:"https://mapserver.mapy.cz/turist-m/retina/{z}-{x}-{y}",tilePixelRatio:2}),zIndex:1})}}class ew extends ar{constructor(){super({source:new sr({url:"https://{a-c}.tile.thunderforest.com/outdoors/{z}/{x}/{y}.png"}),zIndex:1})}}class tw extends ar{constructor(){super({source:new sr({url:"https://mt0.google.com/vt/lyrs=p&hl=en&x={x}&y={y}&z={z}"}),zIndex:1})}}class iw extends ar{constructor(){super({source:new sr({url:"https://mt{0-3}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}"}),zIndex:1})}}let nw=12,rw=1,sw=new vt({image:new Gt({radius:nw,fill:new Ot({color:[51,169,255,.125]}),stroke:new Kt({color:"#33A9FF",width:rw,lineDash:[6]})})}),Wn=new vt({}),aw=new vt({image:new Gt({radius:12,fill:new Ot({color:[51,169,255,.1]}),stroke:new Kt({color:"#33A9FF",width:1})}),zIndex:5});window.color=[255,102,51,1];let ow=new vt({image:new Gt({radius:12,fill:new Ot({color:[255,211,0,.25]}),stroke:new Kt({color:window.color,width:1})}),zIndex:10});var ia=(n,e)=>!window.rodnikMap.filters.spring&&n.get("type")=="Spring"||!window.rodnikMap.filters.water_well&&n.get("type")=="Water well"||!window.rodnikMap.filters.water_tap&&n.get("type")=="Water tap"||!window.rodnikMap.filters.drinking_water&&n.get("type")=="Drinking water source"||!window.rodnikMap.filters.fountain&&n.get("type")=="Fountain"||!window.rodnikMap.filters.other&&n.get("type")=="Water source"||window.rodnikMap.filters.confirmed&&!n.get("waterConfirmed")?Wn:n.get("hasReports")>0?ow:n.get("intermittent")=="yes"?sw:aw,hg={exports:{}};(function(n,e){var t=function(){var i={},r=Math.PI/180,s=180/Math.PI,a=6378137,o=20037508342789244e-9;function l(h){return Number(h)===h&&h%1!==0}function c(h){if(h=h||{},this.size=h.size||256,this.expansion=h.antimeridian===!0?2:1,!i[this.size]){var d=this.size,f=i[this.size]={};f.Bc=[],f.Cc=[],f.zc=[],f.Ac=[];for(var p=0;p<30;p++)f.Bc.push(d/360),f.Cc.push(d/(2*Math.PI)),f.zc.push(d/2),f.Ac.push(d),d*=2}this.Bc=i[this.size].Bc,this.Cc=i[this.size].Cc,this.zc=i[this.size].zc,this.Ac=i[this.size].Ac}return c.prototype.px=function(h,d){if(l(d)){var f=this.size*Math.pow(2,d),p=f/2,m=f/360,y=f/(2*Math.PI),v=f,x=Math.min(Math.max(Math.sin(r*h[1]),-.9999),.9999),b=p+h[0]*m,E=p+.5*Math.log((1+x)/(1-x))*-y;return b>v*this.expansion&&(b=v*this.expansion),E>v&&(E=v),[b,E]}else{var p=this.zc[d],x=Math.min(Math.max(Math.sin(r*h[1]),-.9999),.9999),b=Math.round(p+h[0]*this.Bc[d]),E=Math.round(p+.5*Math.log((1+x)/(1-x))*-this.Cc[d]);return b>this.Ac[d]*this.expansion&&(b=this.Ac[d]*this.expansion),E>this.Ac[d]&&(E=this.Ac[d]),[b,E]}},c.prototype.ll=function(h,d){if(l(d)){var f=this.size*Math.pow(2,d),p=f/360,m=f/(2*Math.PI),y=f/2,v=(h[1]-y)/-m,x=(h[0]-y)/p,b=s*(2*Math.atan(Math.exp(v))-.5*Math.PI);return[x,b]}else{var v=(h[1]-this.zc[d])/-this.Cc[d],x=(h[0]-this.zc[d])/this.Bc[d],b=s*(2*Math.atan(Math.exp(v))-.5*Math.PI);return[x,b]}},c.prototype.bbox=function(h,d,f,p,m){p&&(d=Math.pow(2,f)-1-d);var y=[h*this.size,(+d+1)*this.size],v=[(+h+1)*this.size,d*this.size],x=this.ll(y,f).concat(this.ll(v,f));return m==="900913"?this.convert(x,"900913"):x},c.prototype.xyz=function(h,d,f,p){p==="900913"&&(h=this.convert(h,"WGS84"));var m=[h[0],h[1]],y=[h[2],h[3]],v=this.px(m,d),x=this.px(y,d),b=[Math.floor(v[0]/this.size),Math.floor((x[0]-1)/this.size)],E=[Math.floor(x[1]/this.size),Math.floor((v[1]-1)/this.size)],I={minX:Math.min.apply(Math,b)<0?0:Math.min.apply(Math,b),minY:Math.min.apply(Math,E)<0?0:Math.min.apply(Math,E),maxX:Math.max.apply(Math,b),maxY:Math.max.apply(Math,E)};if(f){var C={minY:Math.pow(2,d)-1-I.maxY,maxY:Math.pow(2,d)-1-I.minY};I.minY=C.minY,I.maxY=C.maxY}return I},c.prototype.convert=function(h,d){return d==="900913"?this.forward(h.slice(0,2)).concat(this.forward(h.slice(2,4))):this.inverse(h.slice(0,2)).concat(this.inverse(h.slice(2,4)))},c.prototype.forward=function(h){var d=[a*h[0]*r,a*Math.log(Math.tan(Math.PI*.25+.5*h[1]*r))];return d[0]>o&&(d[0]=o),d[0]<-o&&(d[0]=-o),d[1]>o&&(d[1]=o),d[1]<-o&&(d[1]=-o),d},c.prototype.inverse=function(h){return[h[0]*s/a,(Math.PI*.5-2*Math.atan(Math.exp(-h[1]/a)))*s]},c}();n.exports=t})(hg);var _s=hg.exports;let lw=new _s({antimeridian:!1}),dd=8;class cw extends Gi{constructor(){super({format:new ps,strategy:eh(Al({maxZoom:8,minZoom:8})),url:(e,t,i)=>{let r=Zi([e[0],e[1]]),s=Zi([e[2],e[3]]),a=lw.xyz([r[0],r[1],s[0],s[1]],dd);return"/tiles/"+dd+"/"+a.minX+"/"+a.minY+".json"}}),this.on("featuresloadend",e=>{window.rodnikMap.featuresLoadEnd()})}}new _s({antimeridian:!1});class fd extends rn{constructor(){super({minZoom:9,style:ia,zIndex:500,opacity:.8})}updateStyle(){this.setStyle(ia)}}let uw=new vt({image:new Gt({radius:30,fill:new Ot({color:[51,169,255,.33]})})}),hw=new vt({image:new Gt({radius:20,fill:new Ot({color:[255,180,0,.5]})})});var dg=(n,e)=>n.get("hasReports")>0?hw:uw,dw=new _s({antimeridian:!1}),Oo=5;class fw extends rn{constructor(){super({minZoom:6,maxZoom:9,source:new Gi({format:new ps,strategy:eh(Al({maxZoom:Oo,minZoom:Oo})),url:(e,t,i)=>{let r=Zi([e[0],e[1]]),s=Zi([e[2],e[3]]),a=dw.xyz([r[0],r[1],s[0],s[1]],Oo);return"/tiles/"+Oo+"/"+a.minX+"/"+a.minY+".json"}}),style:dg,zIndex:300,opacity:.6})}}let gw=new vt({image:new Gt({radius:40,fill:new Ot({color:[51,169,255,.33]})})}),pw=new vt({image:new Gt({radius:30,fill:new Ot({color:[255,180,0,.5]})})});var fg=(n,e)=>n.get("hasReports")>0?pw:gw;new _s({antimeridian:!1});class _w extends rn{constructor(){super({minZoom:0,maxZoom:6,source:new Gi({format:new ps,url:"/tiles/0/0/0.json"}),style:fg,zIndex:100,opacity:.6})}}var mw=new _s({antimeridian:!1}),Mo=5;class yw extends rn{constructor(){super({minZoom:6,maxZoom:9,source:new Gi({format:new ps,strategy:eh(Al({maxZoom:Mo,minZoom:Mo})),url:(e,t,i)=>{let r=Zi([e[0],e[1]]),s=Zi([e[2],e[3]]),a=mw.xyz([r[0],r[1],s[0],s[1]],Mo);return"/watered-tiles/"+Mo+"/"+a.minX+"/"+a.minY+".json"}}),style:dg,zIndex:400,opacity:.6})}}new _s({antimeridian:!1});class vw extends rn{constructor(){super({minZoom:0,maxZoom:6,source:new Gi({format:new ps,url:"/watered-tiles/0/0/0.json"}),style:fg,zIndex:200,opacity:.6})}}class Aw extends ar{constructor(){super({source:new sr({maxZoom:12,url:"https://heatmap-external-{a-c}.strava.com/tiles/all/hot/{z}/{x}/{y}.png?px=256"}),zIndex:10})}}class ww extends ar{constructor(){super({source:new sr({url:"https://gps-{a-c}.tile.openstreetmap.org/lines/{z}/{x}/{y}.png"}),zIndex:10})}}let gg=12,xw=1;new vt({image:new Gt({radius:gg,fill:new Ot({color:[67,191,225,.125]}),stroke:new Kt({color:"#67BFFF",width:xw,lineDash:[6]})})});let Ew=new vt({image:new Gt({radius:gg,fill:new Ot({color:[255,255,255,0]}),stroke:new Kt({color:"#cc0000",width:2})})});function pg(){let n=parseFloat(localStorage.getItem("centerLatitude")),e=parseFloat(localStorage.getItem("centerLongitude"));return isNaN(e)||isNaN(n)?ci([19.748,49.213]):[e,n]}function _g(){let n=parseFloat(localStorage.getItem("zoom"));return isNaN(n)?3:n}function ru(n){localStorage.setItem("centerLongitude",n[0]),localStorage.setItem("centerLatitude",n[1])}function su(n){localStorage.setItem("zoom",n)}class mg extends rn{constructor(e,t){super({source:new Gi({features:[e,t]}),zIndex:1e3})}}class bw extends Gi{constructor(){super({format:new ps}),this.userId=null,this.on("featuresloadend",e=>{window.rodnikMap.featuresLoadEnd(),window.rodnikMap.locateWorld()})}getUser(){return this.userId}setUser(e){this.userId=e;const t="/users/"+parseInt(e)+"/springs.json";this.getUrl()!==t&&(this.setUrl(t),this.refresh())}}class Cw{constructor(e){this.finalZoom=9,this.approximatedZoom=6,this.elementId=e,this.filters={all:!0,spring:!0,water_well:!0,water_tap:!0,drinking_water:!0,fountain:!0,other:!0,confirmed:!1},this.overlays={stravaPublic:!1,osmTraces:!1},this.currentOverlays={...this.overlays},this.osmLayer=new xl,this.mapyLayer=new JA,this.outdoorsLayer=new ew,this.googleTerrainLayer=new tw,this.googleSatelliteLayer=new iw,this.stravaPublicLayer=new Aw,this.osmTracesLayer=new ww,this.currentLayer=this.osmLayer,this.springsFinalLayer=new fd,this.springsApproximatedLayer=new fw,this.springsDistantLayer=new _w,this.wateredSpringsApproximatedLayer=new yw,this.wateredSpringsDistantLayer=new vw,this.springsFinalSource=new cw,this.springsUserSource=new bw,this.featureToBeSelected=null,this.selectedFeature=null,this.featureIdToBeSelected=null,this.view=new ni({center:pg(),zoom:_g(),enableRotation:!1}),this.geolocation=new ug({trackingOptions:{enableHighAccuracy:!0},projection:this.view.getProjection()}),this.scaleControl=new wl({units:"metric",bar:!1,steps:4,text:!0,minWidth:100}),this.map=new ml({controls:Aa().extend([this.scaleControl]),target:this.elementId,layers:[this.osmLayer,this.wateredSpringsDistantLayer,this.wateredSpringsApproximatedLayer,this.springsDistantLayer,this.springsApproximatedLayer,this.springsFinalLayer],view:this.view,moveTolerance:5}),this.map.on("moveend",t=>{ru(this.map.getView().getCenter()),su(this.map.getView().getZoom())}),this.map.on("click",t=>{let i=this.map.getFeaturesAtPixel(t.pixel,{hitTolerance:2,layerFilter:function(r){return r instanceof fd}});i.length>0?this.selectFeature(i[0]):this.deselectFeature()})}featuresLoadEnd(){let e=this.featureIdToBeSelected;e&&(this.featureIdToBeSelected=null,this.highlightFeatureById(e))}locateMe(){this.geolocation.getPosition()?this.view.animate({center:this.geolocation.getPosition(),zoom:18,duration:250}):navigator.geolocation.getCurrentPosition(e=>{this.view.animate({center:ci([e.coords.longitude,e.coords.latitude]),zoom:18,duration:250}),this.watchMe()},e=>{console.log(e)})}watchMe(){this.geolocation.setTracking(!0);const e=new Ji;this.geolocation.on("change:accuracyGeometry",()=>{e.setGeometry(this.geolocation.getAccuracyGeometry())}),this.geolocation.on("error",function(i){console.log(i)});const t=new Ji;t.setStyle(new vt({image:new Gt({radius:6,fill:new Ot({color:"#000000"}),stroke:new Kt({color:"#fff",width:2})})})),e.setStyle(new vt({fill:new Ot({color:[255,255,255,.5]}),stroke:new Kt({color:"#00000",width:2})})),this.geolocation.on("change:position",()=>{const i=this.geolocation.getPosition();t.setGeometry(i?new ki(i):null)}),this.geolocationLayer=new mg(e,t),this.map.addLayer(this.geolocationLayer)}source(e){switch(e){case"osm":this.map.removeLayer(this.currentLayer),this.currentLayer=this.osmLayer,this.map.addLayer(this.currentLayer);break;case"mapy":this.map.removeLayer(this.currentLayer),this.currentLayer=this.mapyLayer,this.map.addLayer(this.currentLayer);break;case"outdoors":this.map.removeLayer(this.currentLayer),this.currentLayer=this.outdoorsLayer,this.map.addLayer(this.currentLayer);break;case"terrain":this.map.removeLayer(this.currentLayer),this.currentLayer=this.googleTerrainLayer,this.map.addLayer(this.currentLayer);break;case"satellite":this.map.removeLayer(this.currentLayer),this.currentLayer=this.googleSatelliteLayer,this.map.addLayer(this.currentLayer);break}}updateOverlays(){this.overlays.stravaPublic?this.currentOverlays.stravaPublic||(this.map.addLayer(this.stravaPublicLayer),this.currentOverlays.stravaPublic=!0):this.currentOverlays.stravaPublic&&(this.map.removeLayer(this.stravaPublicLayer),this.currentOverlays.stravaPublic=!1),this.overlays.osmTraces?this.currentOverlays.osmTraces||(this.map.addLayer(this.osmTracesLayer),this.currentOverlays.osmTraces=!0):this.currentOverlays.osmTraces&&(this.map.removeLayer(this.osmTracesLayer),this.currentOverlays.osmTraces=!1)}highlightFeatureById(e){let t=window.rodnikMap.springsFinalLayer.getSource().getFeatureById(e);t?(this.locateFeature(t),this.highlightFeature(t)):this.featureIdToBeSelected=e}locateFeature(e){this.view.animate({center:e.getGeometry().flatCoordinates,duration:250})}locate(e){this.view.animate({center:ci(e),zoom:14,duration:250})}locateWorld(){this.view.fit(this.springsFinalLayer.getSource().getExtent()),this.view.setZoom(Math.floor(this.view.getZoom()-1))}highlightFeature(e){if(this.previouslyHighlightedFeature){if(e.get("id")==this.previouslyHighlightedFeature.get("id"))return!1;this.previouslyHighlightedFeature.setStyle(ia)}this.dehighlightPreviousFeature(),this.previouslyHighlightedFeature=e,e.setStyle(Ew),this.fullscreen&&(this.setFullscreen(!1),this.locateFeature(e))}selectFeature(e){this.highlightFeature(e);let t=e.get("id");const i=new CustomEvent("spring-selected-on-map",{detail:{id:t,feature:e}});window.dispatchEvent(i)}dehighlightFeature(){this.previouslyHighlightedFeature&&(this.previouslyHighlightedFeature.setStyle(ia),this.previouslyHighlightedFeature=null)}deselectFeature(){if(this.previouslyHighlightedFeature){this.dehighlightFeature();const e=new CustomEvent("spring-deselected-on-map");window.dispatchEvent(e)}}dehighlightPreviousFeature(){this.previouslyHighlightedFeature&&this.previouslyHighlightedFeature.setStyle(ia),this.previouslyHighlightedFeature=null}springsSource(e){e?(this.mode="user",this.springsFinalLayer.setMinZoom(0),this.springsApproximatedLayer.setVisible(!1),this.springsDistantLayer.setVisible(!1),this.wateredSpringsApproximatedLayer.setVisible(!1),this.wateredSpringsDistantLayer.setVisible(!1),this.springsUserSource.getUser()==e?(this.springsFinalLayer.setSource(this.springsUserSource),this.locateWorld()):(this.springsUserSource.setUser(e),this.springsFinalLayer.setSource(this.springsUserSource))):(this.mode="global",this.springsFinalLayer.setMinZoom(9),this.springsApproximatedLayer.setVisible(!0),this.springsDistantLayer.setVisible(!0),this.wateredSpringsApproximatedLayer.setVisible(!0),this.wateredSpringsDistantLayer.setVisible(!0),this.springsFinalLayer.setSource(this.springsFinalSource))}setFullscreen(e){this.fullscreen=e}}class Iw{constructor(e,t){this.osmLayer=new xl,this.springLayer=new rn({source:new Gi({features:[new Ji({geometry:new ki(ci(t))})]}),style:new vt({image:new Gt({radius:12,fill:new Ot({color:[0,0,0,.1]}),stroke:new Kt({color:[0,0,0,1],width:.5})})}),zIndex:500}),this.view=new ni({center:ci(t),zoom:18,enableRotation:!1}),this.scaleControl=new wl({units:"metric",bar:!1,steps:4,text:!0,minWidth:100}),this.map=new ml({controls:Aa().extend([this.scaleControl]),target:e,layers:[this.osmLayer,this.springLayer],view:this.view})}}class Sw{constructor(e,t){this.osmLayer=new xl;let i=!!t.length,r=i?ci(t):pg();i&&(this.springLayer=new rn({source:new Gi({features:[new Ji({geometry:new ki(ci(t))})]}),style:new vt({image:new Gt({radius:12,fill:new Ot({color:[0,0,0,0]}),stroke:new Kt({color:[0,0,0,.33],width:2})})}),zIndex:500})),this.view=new ni({center:r,zoom:_g(),enableRotation:!1}),this.geolocation=new ug({trackingOptions:{enableHighAccuracy:!0},projection:this.view.getProjection()}),this.scaleControl=new wl({units:"metric",bar:!1,steps:4,text:!0,minWidth:100}),this.map=new ml({controls:Aa().extend([this.scaleControl]),target:e,layers:[this.osmLayer],view:this.view}),i&&this.map.addLayer(this.springLayer),this.map.on("moveend",s=>{let a=Zi(this.view.getCenter());a[0]=a[0].toFixed(6),a[1]=a[1].toFixed(6),a=a.reverse().join(", "),this.mapMoved(a),ru(this.map.getView().getCenter()),su(this.map.getView().getZoom())}),this.map.on("pointerdrag",s=>{let a=Zi(this.view.getCenter());a[0]=a[0].toFixed(6),a[1]=a[1].toFixed(6),a=a.reverse().join(", "),this.mapMoved(a)}),this.map.on("click",s=>{let a=this.map.getEventPixel(s.originalEvent),o=Zi(this.map.getCoordinateFromPixel(a));this.updateCoordinates(o)})}updateCoordinates(e){let t=this.view.getZoom();ru(e),su(t),this.view.animate({center:ci(e),zoom:t,duration:100})}mapMoved(e){const t=new CustomEvent("map-moved",{detail:{coordinates:e}});window.dispatchEvent(t)}locateMe(){this.geolocation.getPosition()?this.view.animate({center:this.geolocation.getPosition(),zoom:18,duration:250}):navigator.geolocation.getCurrentPosition(e=>{this.view.animate({center:ci([e.coords.longitude,e.coords.latitude]),zoom:18,duration:250}),this.watchMe()},e=>{console.log(e)})}watchMe(){this.geolocation.setTracking(!0);const e=new Ji;this.geolocation.on("change:accuracyGeometry",()=>{e.setGeometry(this.geolocation.getAccuracyGeometry())}),this.geolocation.on("error",function(i){console.log(i)});const t=new Ji;t.setStyle(new vt({image:new Gt({radius:6,fill:new Ot({color:"#000000"}),stroke:new Kt({color:"#fff",width:2})})})),e.setStyle(new vt({fill:new Ot({color:[255,255,255,.5]}),stroke:new Kt({color:"#00000",width:2})})),this.geolocation.on("change:position",()=>{const i=this.geolocation.getPosition();t.setGeometry(i?new ki(i):null)}),this.geolocationLayer=new mg(e,t),this.map.addLayer(this.geolocationLayer)}}class Rw{constructor(e,t,i){this.osmLayer=new xl,this.springLayer=new rn({source:new Gi({features:[new Ji({geometry:new ki(ci(t)),type:"old"}),new Ji({geometry:new ki(ci(i)),type:"new"})]}),style:r=>{if(r.get("type")=="old")return new vt({image:new Gt({radius:12,stroke:new Kt({color:[0,0,0,.33],width:2})})});if(r.get("type")=="new")return new vt({image:new Gt({radius:12,stroke:new Kt({color:[0,0,0,1],width:2})})})},zIndex:500}),this.view=new ni({center:ci(i),zoom:18,enableRotation:!1}),this.view.fit(this.springLayer.getSource().getExtent()),this.scaleControl=new wl({units:"metric",bar:!1,steps:4,text:!0,minWidth:100}),this.map=new ml({controls:Aa().extend([this.scaleControl]),target:e,layers:[this.osmLayer,this.springLayer],view:this.view})}}/*!
  * PhotoSwipe Lightbox 5.3.2 - https://photoswipe.com
  * (c) 2022 Dmytro Semenov
  */function qs(n,e,t){const i=document.createElement(e||"div");return n&&(i.className=n),t&&t.appendChild(i),i}function Tw(n,e,t){let i="translate3d("+n+"px,"+(e||0)+"px,0)";return t!==void 0&&(i+=" scale3d("+t+","+t+",1)"),i}function au(n,e,t){n.style.width=typeof e=="number"?e+"px":e,n.style.height=typeof t=="number"?t+"px":t}const li={IDLE:"idle",LOADING:"loading",LOADED:"loaded",ERROR:"error"};function Ow(n){if(n.which===2||n.ctrlKey||n.metaKey||n.altKey||n.shiftKey)return!0}function Po(n,e,t=document){let i=[];if(n instanceof Element)i=[n];else if(n instanceof NodeList||Array.isArray(n))i=Array.from(n);else{const r=typeof n=="string"?n:e;r&&(i=Array.from(t.querySelectorAll(r)))}return i}function Mw(n){return typeof n=="function"&&n.prototype&&n.prototype.goTo}function gd(){return!!(navigator.vendor&&navigator.vendor.match(/apple/i))}class Lw{constructor(e,t){this.type=e,t&&Object.assign(this,t)}preventDefault(){this.defaultPrevented=!0}}class Pw{constructor(){this._listeners={},this._filters={},this.pswp=void 0,this.options=void 0}addFilter(e,t,i=100){this._filters[e]||(this._filters[e]=[]),this._filters[e].push({fn:t,priority:i}),this._filters[e].sort((r,s)=>r.priority-s.priority),this.pswp&&this.pswp.addFilter(e,t,i)}removeFilter(e,t){this._filters[e]&&(this._filters[e]=this._filters[e].filter(i=>i.fn!==t)),this.pswp&&this.pswp.removeFilter(e,t)}applyFilters(e,...t){return this._filters[e]&&this._filters[e].forEach(i=>{t[0]=i.fn.apply(this,t)}),t[0]}on(e,t){this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t),this.pswp&&this.pswp.on(e,t)}off(e,t){this._listeners[e]&&(this._listeners[e]=this._listeners[e].filter(i=>t!==i)),this.pswp&&this.pswp.off(e,t)}dispatch(e,t){if(this.pswp)return this.pswp.dispatch(e,t);const i=new Lw(e,t);return this._listeners&&this._listeners[e]&&this._listeners[e].forEach(r=>{r.call(this,i)}),i}}class Fw{constructor(e,t){this.element=qs("pswp__img pswp__img--placeholder",e?"img":"",t),e&&(this.element.decoding="async",this.element.alt="",this.element.src=e,this.element.setAttribute("role","presentation")),this.element.setAttribute("aria-hiden","true")}setDisplayedSize(e,t){!this.element||(this.element.tagName==="IMG"?(au(this.element,250,"auto"),this.element.style.transformOrigin="0 0",this.element.style.transform=Tw(0,0,e/250)):au(this.element,e,t))}destroy(){this.element.parentNode&&this.element.remove(),this.element=null}}class Dw{constructor(e,t,i){this.instance=t,this.data=e,this.index=i,this.element=void 0,this.displayedImageWidth=0,this.displayedImageHeight=0,this.width=Number(this.data.w)||Number(this.data.width)||0,this.height=Number(this.data.h)||Number(this.data.height)||0,this.isAttached=!1,this.hasSlide=!1,this.state=li.IDLE,this.data.type?this.type=this.data.type:this.data.src?this.type="image":this.type="html",this.instance.dispatch("contentInit",{content:this})}removePlaceholder(){this.placeholder&&!this.keepPlaceholder()&&setTimeout(()=>{this.placeholder&&(this.placeholder.destroy(),this.placeholder=null)},1e3)}load(e,t){if(this.slide&&this.usePlaceholder())if(this.placeholder){const i=this.placeholder.element;i&&!i.parentElement&&this.slide.container.prepend(i)}else{const i=this.instance.applyFilters("placeholderSrc",this.data.msrc&&this.slide.isFirstSlide?this.data.msrc:!1,this);this.placeholder=new Fw(i,this.slide.container)}this.element&&!t||this.instance.dispatch("contentLoad",{content:this,isLazy:e}).defaultPrevented||(this.isImageContent()?(this.element=qs("pswp__img","img"),this.displayedImageWidth&&this.loadImage(e)):(this.element=qs("pswp__content"),this.element.innerHTML=this.data.html||""),t&&this.slide&&this.slide.updateContentSize(!0))}loadImage(e){const t=this.element;this.instance.dispatch("contentLoadImage",{content:this,isLazy:e}).defaultPrevented||(this.updateSrcsetSizes(),this.data.srcset&&(t.srcset=this.data.srcset),t.src=this.data.src,t.alt=this.data.alt||"",this.state=li.LOADING,t.complete?this.onLoaded():(t.onload=()=>{this.onLoaded()},t.onerror=()=>{this.onError()}))}setSlide(e){this.slide=e,this.hasSlide=!0,this.instance=e.pswp}onLoaded(){this.state=li.LOADED,this.slide&&(this.instance.dispatch("loadComplete",{slide:this.slide,content:this}),this.slide.isActive&&this.slide.heavyAppended&&!this.element.parentNode&&(this.append(),this.slide.updateContentSize(!0)),(this.state===li.LOADED||this.state===li.ERROR)&&this.removePlaceholder())}onError(){this.state=li.ERROR,this.slide&&(this.displayError(),this.instance.dispatch("loadComplete",{slide:this.slide,isError:!0,content:this}),this.instance.dispatch("loadError",{slide:this.slide,content:this}))}isLoading(){return this.instance.applyFilters("isContentLoading",this.state===li.LOADING,this)}isError(){return this.state===li.ERROR}isImageContent(){return this.type==="image"}setDisplayedSize(e,t){if(!!this.element&&(this.placeholder&&this.placeholder.setDisplayedSize(e,t),!this.instance.dispatch("contentResize",{content:this,width:e,height:t}).defaultPrevented&&(au(this.element,e,t),this.isImageContent()&&!this.isError()))){const i=!this.displayedImageWidth&&e;this.displayedImageWidth=e,this.displayedImageHeight=t,i?this.loadImage(!1):this.updateSrcsetSizes(),this.slide&&this.instance.dispatch("imageSizeChange",{slide:this.slide,width:e,height:t,content:this})}}isZoomable(){return this.instance.applyFilters("isContentZoomable",this.isImageContent()&&this.state!==li.ERROR,this)}updateSrcsetSizes(){if(this.data.srcset){const e=this.element,t=this.instance.applyFilters("srcsetSizesWidth",this.displayedImageWidth,this);(!e.dataset.largestUsedSize||t>parseInt(e.dataset.largestUsedSize,10))&&(e.sizes=t+"px",e.dataset.largestUsedSize=String(t))}}usePlaceholder(){return this.instance.applyFilters("useContentPlaceholder",this.isImageContent(),this)}lazyLoad(){this.instance.dispatch("contentLazyLoad",{content:this}).defaultPrevented||this.load(!0)}keepPlaceholder(){return this.instance.applyFilters("isKeepingPlaceholder",this.isLoading(),this)}destroy(){this.hasSlide=!1,this.slide=null,!this.instance.dispatch("contentDestroy",{content:this}).defaultPrevented&&(this.remove(),this.placeholder&&(this.placeholder.destroy(),this.placeholder=null),this.isImageContent()&&this.element&&(this.element.onload=null,this.element.onerror=null,this.element=null))}displayError(){if(this.slide){let e=qs("pswp__error-msg");e.innerText=this.instance.options.errorMsg,e=this.instance.applyFilters("contentErrorElement",e,this),this.element=qs("pswp__content pswp__error-msg-container"),this.element.appendChild(e),this.slide.container.innerText="",this.slide.container.appendChild(this.element),this.slide.updateContentSize(!0),this.removePlaceholder()}}append(){if(this.isAttached)return;if(this.isAttached=!0,this.state===li.ERROR){this.displayError();return}if(this.instance.dispatch("contentAppend",{content:this}).defaultPrevented)return;const e="decode"in this.element;this.isImageContent()?e&&this.slide&&(!this.slide.isActive||gd())?(this.isDecoding=!0,this.element.decode().finally(()=>{this.isDecoding=!1,this.appendImage()})):this.appendImage():this.element&&!this.element.parentNode&&this.slide.container.appendChild(this.element)}activate(){this.instance.dispatch("contentActivate",{content:this}).defaultPrevented||this.slide&&(this.isImageContent()&&this.isDecoding&&!gd()?this.appendImage():this.isError()&&this.load(!1,!0))}deactivate(){this.instance.dispatch("contentDeactivate",{content:this})}remove(){this.isAttached=!1,!this.instance.dispatch("contentRemove",{content:this}).defaultPrevented&&(this.element&&this.element.parentNode&&this.element.remove(),this.placeholder&&this.placeholder.element&&this.placeholder.element.remove())}appendImage(){!this.isAttached||this.instance.dispatch("contentAppendImage",{content:this}).defaultPrevented||(this.slide&&this.element&&!this.element.parentNode&&this.slide.container.appendChild(this.element),(this.state===li.LOADED||this.state===li.ERROR)&&this.removePlaceholder())}}function kw(n,e){if(n.getViewportSizeFn){const t=n.getViewportSizeFn(n,e);if(t)return t}return{x:document.documentElement.clientWidth,y:window.innerHeight}}function Lo(n,e,t,i,r){let s;if(e.paddingFn)s=e.paddingFn(t,i,r)[n];else if(e.padding)s=e.padding[n];else{const a="padding"+n[0].toUpperCase()+n.slice(1);e[a]&&(s=e[a])}return s||0}function Nw(n,e,t,i){return{x:e.x-Lo("left",n,e,t,i)-Lo("right",n,e,t,i),y:e.y-Lo("top",n,e,t,i)-Lo("bottom",n,e,t,i)}}const pd=4e3;class Bw{constructor(e,t,i,r){this.pswp=r,this.options=e,this.itemData=t,this.index=i}update(e,t,i){this.elementSize={x:e,y:t},this.panAreaSize=i;const r=this.panAreaSize.x/this.elementSize.x,s=this.panAreaSize.y/this.elementSize.y;this.fit=Math.min(1,r<s?r:s),this.fill=Math.min(1,r>s?r:s),this.vFill=Math.min(1,s),this.initial=this._getInitial(),this.secondary=this._getSecondary(),this.max=Math.max(this.initial,this.secondary,this._getMax()),this.min=Math.min(this.fit,this.initial,this.secondary),this.pswp&&this.pswp.dispatch("zoomLevelsUpdate",{zoomLevels:this,slideData:this.itemData})}_parseZoomLevelOption(e){const t=e+"ZoomLevel",i=this.options[t];if(!!i)return typeof i=="function"?i(this):i==="fill"?this.fill:i==="fit"?this.fit:Number(i)}_getSecondary(){let e=this._parseZoomLevelOption("secondary");return e||(e=Math.min(1,this.fit*3),e*this.elementSize.x>pd&&(e=pd/this.elementSize.x),e)}_getInitial(){return this._parseZoomLevelOption("initial")||this.fit}_getMax(){const e=this._parseZoomLevelOption("max");return e||Math.max(1,this.fit*4)}}function yg(n,e,t){const i=e.createContentFromData(n,t);if(!i||!i.lazyLoad)return;const{options:r}=e,s=e.viewportSize||kw(r,e),a=Nw(r,s,n,t),o=new Bw(r,n,-1);return o.update(i.width,i.height,a),i.lazyLoad(),i.setDisplayedSize(Math.ceil(i.width*o.initial),Math.ceil(i.height*o.initial)),i}function Gw(n,e){const t=e.getItemData(n);if(!e.dispatch("lazyLoadSlide",{index:n,itemData:t}).defaultPrevented)return yg(t,e,n)}class jw extends Pw{getNumItems(){let e;const{dataSource:t}=this.options;t?"length"in t?e=t.length:"gallery"in t&&(t.items||(t.items=this._getGalleryDOMElements(t.gallery)),t.items&&(e=t.items.length)):e=0;const i=this.dispatch("numItems",{dataSource:t,numItems:e});return this.applyFilters("numItems",i.numItems,t)}createContentFromData(e,t){return new Dw(e,this,t)}getItemData(e){const{dataSource:t}=this.options;let i;Array.isArray(t)?i=t[e]:t&&t.gallery&&(t.items||(t.items=this._getGalleryDOMElements(t.gallery)),i=t.items[e]);let r=i;r instanceof Element&&(r=this._domElementToItemData(r));const s=this.dispatch("itemData",{itemData:r||{},index:e});return this.applyFilters("itemData",s.itemData,e)}_getGalleryDOMElements(e){return this.options.children||this.options.childSelector?Po(this.options.children,this.options.childSelector,e)||[]:[e]}_domElementToItemData(e){const t={element:e},i=e.tagName==="A"?e:e.querySelector("a");if(i){t.src=i.dataset.pswpSrc||i.href,i.dataset.pswpSrcset&&(t.srcset=i.dataset.pswpSrcset),t.width=parseInt(i.dataset.pswpWidth,10),t.height=parseInt(i.dataset.pswpHeight,10),t.w=t.width,t.h=t.height,i.dataset.pswpType&&(t.type=i.dataset.pswpType);const r=e.querySelector("img");r&&(t.msrc=r.currentSrc||r.src,t.alt=r.getAttribute("alt")),(i.dataset.pswpCropped||i.dataset.cropped)&&(t.thumbCropped=!0)}return this.applyFilters("domItemData",t,e,i)}lazyLoadData(e,t){return yg(e,this,t)}}class zw extends jw{constructor(e){super(),this.options=e||{},this._uid=0}init(){this.onThumbnailsClick=this.onThumbnailsClick.bind(this),Po(this.options.gallery,this.options.gallerySelector).forEach(e=>{e.addEventListener("click",this.onThumbnailsClick,!1)})}onThumbnailsClick(e){if(Ow(e)||window.pswp||window.navigator.onLine===!1)return;let t={x:e.clientX,y:e.clientY};!t.x&&!t.y&&(t=null);let i=this.getClickedIndex(e);i=this.applyFilters("clickedIndex",i,e,this);const r={gallery:e.currentTarget};i>=0&&(e.preventDefault(),this.loadAndOpen(i,r,t))}getClickedIndex(e){if(this.options.getClickedIndexFn)return this.options.getClickedIndexFn.call(this,e);const t=e.target,r=Po(this.options.children,this.options.childSelector,e.currentTarget).findIndex(s=>s===t||s.contains(t));return r!==-1?r:this.options.children||this.options.childSelector?-1:0}loadAndOpen(e,t,i){return window.pswp?!1:(this.options.index=e,this.options.initialPointerPos=i,this.shouldOpen=!0,this.preload(e,t),!0)}preload(e,t){const{options:i}=this;t&&(i.dataSource=t);const r=[],s=typeof i.pswpModule;if(Mw(i.pswpModule))r.push(Promise.resolve(i.pswpModule));else{if(s==="string")throw new Error("pswpModule as string is no longer supported");if(s==="function")r.push(i.pswpModule());else throw new Error("pswpModule is not valid")}typeof i.openPromise=="function"&&r.push(i.openPromise()),i.preloadFirstSlide!==!1&&e>=0&&(this._preloadedContent=Gw(e,this));const a=++this._uid;Promise.all(r).then(o=>{if(this.shouldOpen){const l=o[0];this._openPhotoswipe(l,a)}})}_openPhotoswipe(e,t){if(t!==this._uid&&this.shouldOpen||(this.shouldOpen=!1,window.pswp))return;const i=typeof e=="object"?new e.default(this.options):new e(this.options);this.pswp=i,window.pswp=i,Object.keys(this._listeners).forEach(r=>{this._listeners[r].forEach(s=>{i.on(r,s)})}),Object.keys(this._filters).forEach(r=>{this._filters[r].forEach(s=>{i.addFilter(r,s.fn,s.priority)})}),this._preloadedContent&&(i.contentLoader.addToCache(this._preloadedContent),this._preloadedContent=null),i.on("destroy",()=>{this.pswp=null,window.pswp=null}),i.init()}destroy(){this.pswp&&this.pswp.destroy(),this.shouldOpen=!1,this._listeners=null,Po(this.options.gallery,this.options.gallerySelector).forEach(e=>{e.removeEventListener("click",this.onThumbnailsClick,!1)})}}var vg;vg=class{isValid(e){var t;t=!0;try{return this.validate(e),t}catch{return t=!1,t}}validate(e){return this.checkContainsNoLetters(e),this.checkValidOrientation(e),this.checkNumbers(e)}checkContainsNoLetters(e){var t;if(t=/(?![neswd])[a-z]/i.test(e),t)throw new Error("Coordinate contains invalid alphanumeric characters.")}checkValidOrientation(e){var t;if(t=/^[^nsew]*[ns]?[^nsew]*[ew]?[^nsew]*$/i.test(e),!t)throw new Error("Invalid cardinal direction.")}checkNumbers(e){var t;return t=e.match(/-?\d+(\.\d+)?/g),this.checkAnyCoordinateNumbers(t),this.checkEvenCoordinateNumbers(t),this.checkMaximumCoordinateNumbers(t)}checkAnyCoordinateNumbers(e){if(e.length===0)throw new Error("Could not find any coordinate number")}checkEvenCoordinateNumbers(e){var t;if(t=e.length%2,t)throw new Error("Uneven count of latitude/longitude numbers")}checkMaximumCoordinateNumbers(e){if(e.length>6)throw new Error("Too many coordinate numbers")}};var Uw=vg,Ag;Ag=class{constructor(e){e=this.normalizeCoordinateNumbers(e),this.sign=this.normalizedSignOf(e[0]),[this.degrees,this.minutes,this.seconds,this.milliseconds]=e.map(Math.abs)}normalizeCoordinateNumbers(e){var t,i,r,s,a;for(a=[0,0,0,0],i=r=0,s=e.length;r<s;i=++r)t=e[i],a[i]=parseFloat(t);return a}normalizedSignOf(e){return e>=0?1:-1}detectSpecialFormats(){if(this.degreesCanBeSpecial()){if(this.degreesCanBeMilliseconds())return this.degreesAsMilliseconds();if(this.degreesCanBeDegreesMinutesAndSeconds())return this.degreesAsDegreesMinutesAndSeconds();if(this.degreesCanBeDegreesAndMinutes())return this.degreesAsDegreesAndMinutes()}}degreesCanBeSpecial(){var e;return e=!1,!this.minutes&&!this.seconds&&(e=!0),e}degreesCanBeMilliseconds(){var e;return this.degrees>909090?e=!0:e=!1,e}degreesAsMilliseconds(){return this.milliseconds=this.degrees,this.degrees=0}degreesCanBeDegreesMinutesAndSeconds(){var e;return this.degrees>9090?e=!0:e=!1,e}degreesAsDegreesMinutesAndSeconds(){var e;return e=Math.floor(this.degrees/1e4),this.minutes=Math.floor((this.degrees-e*1e4)/100),this.seconds=Math.floor(this.degrees-e*1e4-this.minutes*100),this.degrees=e}degreesCanBeDegreesAndMinutes(){var e;return this.degrees>360?e=!0:e=!1,e}degreesAsDegreesAndMinutes(){var e;return e=Math.floor(this.degrees/100),this.minutes=this.degrees-e*100,this.degrees=e}toDecimal(){var e;return e=this.sign*(this.degrees+this.minutes/60+this.seconds/3600+this.milliseconds/36e5),e}};var Ww=Ag,wg,xg,Eg;Eg=Uw;wg=Ww;xg=class{constructor(e){this.coordinates=e,this.latitudeNumbers=null,this.longitudeNumbers=null,this.validate(),this.parse()}validate(){var e;return e=new Eg,e.validate(this.coordinates)}parse(){return this.groupCoordinateNumbers(),this.latitude=this.extractLatitude(),this.longitude=this.extractLongitude()}groupCoordinateNumbers(){var e,t;return e=this.extractCoordinateNumbers(this.coordinates),t=e.length/2,this.latitudeNumbers=e.slice(0,t),this.longitudeNumbers=e.slice(0-t)}extractCoordinateNumbers(e){return e.match(/-?\d+(\.\d+)?/g)}extractLatitude(){var e;return e=this.coordinateNumbersToDecimal(this.latitudeNumbers),this.latitudeIsNegative()&&(e=e*-1),e}extractLongitude(){var e;return e=this.coordinateNumbersToDecimal(this.longitudeNumbers),this.longitudeIsNegative()&&(e=e*-1),e}coordinateNumbersToDecimal(e){var t,i;return t=new wg(e),t.detectSpecialFormats(),i=t.toDecimal(),i}latitudeIsNegative(){var e;return e=this.coordinates.match(/s/i),e}longitudeIsNegative(){var e;return e=this.coordinates.match(/w/i),e}getLatitude(){return this.latitude}getLongitude(){return this.longitude}};var Yw=xg;Ud.plugin(Nc);window.Alpine=Ud;window.ImageBlobReduce=new x_;window.uuidv1=R_;window.rodnikConfig={zoomLevels:{approximated:6,final:9}};window.initOpenLayers=function(n){window.rodnikMap=new Cw(n)};window.initOpenHelper=function(n,e){window.rodnikHelper=new Iw(n,e)};window.initOpenPicker=function(n,e){window.rodnikPicker=new Sw(n,e)};window.parseCoordinates=function(n){return new Yw(n)};window.initOpenDiffer=function(n,e,t){window.rodnikDiffer=new Rw(n,e,t)};window.initPhotoSwipe=function(n){new zw({gallery:n,children:".photoswipeImage",pswpModule:()=>Og(()=>import("./photoswipe.esm.382b1873.js"),[])}).init()};hu.start();window.ymCode=90143259;
