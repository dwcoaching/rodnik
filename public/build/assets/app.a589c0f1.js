const Ip="modulepreload",Ch={},Sp="/build/",Rp=function(e,t){return!t||t.length===0?e():Promise.all(t.map(i=>{if(i=`${Sp}${i}`,i in Ch)return;Ch[i]=!0;const r=i.endsWith(".css"),s=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${s}`))return;const o=document.createElement("link");if(o.rel=r?"stylesheet":Ip,r||(o.as="script",o.crossOrigin=""),o.href=i,document.head.appendChild(o),r)return new Promise((a,l)=>{o.addEventListener("load",a),o.addEventListener("error",()=>l(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e())};var Tp=Object.create,sd=Object.defineProperty,Lp=Object.getOwnPropertyDescriptor,od=Object.getOwnPropertyNames,Op=Object.getPrototypeOf,Mp=Object.prototype.hasOwnProperty,ln=(n,e)=>function(){return e||(0,n[od(n)[0]])((e={exports:{}}).exports,e),e.exports},Pp=(n,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of od(e))!Mp.call(n,r)&&r!==t&&sd(n,r,{get:()=>e[r],enumerable:!(i=Lp(e,r))||i.enumerable});return n},_t=(n,e,t)=>(t=n!=null?Tp(Op(n)):{},Pp(e||!n||!n.__esModule?sd(t,"default",{value:n,enumerable:!0}):t,n)),Pt=ln({"../alpine/packages/alpinejs/dist/module.cjs.js"(n,e){var t=Object.create,i=Object.defineProperty,r=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,o=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty,l=(h,g)=>function(){return g||(0,h[s(h)[0]])((g={exports:{}}).exports,g),g.exports},c=(h,g)=>{for(var w in g)i(h,w,{get:g[w],enumerable:!0})},u=(h,g,w,I)=>{if(g&&typeof g=="object"||typeof g=="function")for(let O of s(g))!a.call(h,O)&&O!==w&&i(h,O,{get:()=>g[O],enumerable:!(I=r(g,O))||I.enumerable});return h},d=(h,g,w)=>(w=h!=null?t(o(h)):{},u(g||!h||!h.__esModule?i(w,"default",{value:h,enumerable:!0}):w,h)),f=h=>u(i({},"__esModule",{value:!0}),h),_=l({"node_modules/@vue/shared/dist/shared.cjs.js"(h){Object.defineProperty(h,"__esModule",{value:!0});function g(j,ge){const we=Object.create(null),Oe=j.split(",");for(let st=0;st<Oe.length;st++)we[Oe[st]]=!0;return ge?st=>!!we[st.toLowerCase()]:st=>!!we[st]}var w={[1]:"TEXT",[2]:"CLASS",[4]:"STYLE",[8]:"PROPS",[16]:"FULL_PROPS",[32]:"HYDRATE_EVENTS",[64]:"STABLE_FRAGMENT",[128]:"KEYED_FRAGMENT",[256]:"UNKEYED_FRAGMENT",[512]:"NEED_PATCH",[1024]:"DYNAMIC_SLOTS",[2048]:"DEV_ROOT_FRAGMENT",[-1]:"HOISTED",[-2]:"BAIL"},I={[1]:"STABLE",[2]:"DYNAMIC",[3]:"FORWARDED"},O="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt",T=g(O),k=2;function W(j,ge=0,we=j.length){let Oe=j.split(/(\r?\n)/);const st=Oe.filter((Xt,Lt)=>Lt%2===1);Oe=Oe.filter((Xt,Lt)=>Lt%2===0);let wt=0;const Yt=[];for(let Xt=0;Xt<Oe.length;Xt++)if(wt+=Oe[Xt].length+(st[Xt]&&st[Xt].length||0),wt>=ge){for(let Lt=Xt-k;Lt<=Xt+k||we>wt;Lt++){if(Lt<0||Lt>=Oe.length)continue;const ls=Lt+1;Yt.push(`${ls}${" ".repeat(Math.max(3-String(ls).length,0))}|  ${Oe[Lt]}`);const vr=Oe[Lt].length,go=st[Lt]&&st[Lt].length||0;if(Lt===Xt){const wr=ge-(wt-(vr+go)),Ka=Math.max(1,we>wt?vr-wr:we-ge);Yt.push("   |  "+" ".repeat(wr)+"^".repeat(Ka))}else if(Lt>Xt){if(we>wt){const wr=Math.max(Math.min(we-wt,vr),1);Yt.push("   |  "+"^".repeat(wr))}wt+=vr+go}}break}return Yt.join(`
`)}var ae="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ve=g(ae),Ze=g(ae+",async,autofocus,autoplay,controls,default,defer,disabled,hidden,loop,open,required,reversed,scoped,seamless,checked,muted,multiple,selected"),yt=/[>/="'\u0009\u000a\u000c\u0020]/,qe={};function mt(j){if(qe.hasOwnProperty(j))return qe[j];const ge=yt.test(j);return ge&&console.error(`unsafe attribute name: ${j}`),qe[j]=!ge}var oi={acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},Fi=g("animation-iteration-count,border-image-outset,border-image-slice,border-image-width,box-flex,box-flex-group,box-ordinal-group,column-count,columns,flex,flex-grow,flex-positive,flex-shrink,flex-negative,flex-order,grid-row,grid-row-end,grid-row-span,grid-row-start,grid-column,grid-column-end,grid-column-span,grid-column-start,font-weight,line-clamp,line-height,opacity,order,orphans,tab-size,widows,z-index,zoom,fill-opacity,flood-opacity,stop-opacity,stroke-dasharray,stroke-dashoffset,stroke-miterlimit,stroke-opacity,stroke-width"),ke=g("accept,accept-charset,accesskey,action,align,allow,alt,async,autocapitalize,autocomplete,autofocus,autoplay,background,bgcolor,border,buffered,capture,challenge,charset,checked,cite,class,code,codebase,color,cols,colspan,content,contenteditable,contextmenu,controls,coords,crossorigin,csp,data,datetime,decoding,default,defer,dir,dirname,disabled,download,draggable,dropzone,enctype,enterkeyhint,for,form,formaction,formenctype,formmethod,formnovalidate,formtarget,headers,height,hidden,high,href,hreflang,http-equiv,icon,id,importance,integrity,ismap,itemprop,keytype,kind,label,lang,language,loading,list,loop,low,manifest,max,maxlength,minlength,media,min,multiple,muted,name,novalidate,open,optimum,pattern,ping,placeholder,poster,preload,radiogroup,readonly,referrerpolicy,rel,required,reversed,rows,rowspan,sandbox,scope,scoped,selected,shape,size,sizes,slot,span,spellcheck,src,srcdoc,srclang,srcset,start,step,style,summary,tabindex,target,title,translate,type,usemap,value,width,wrap");function rt(j){if(wi(j)){const ge={};for(let we=0;we<j.length;we++){const Oe=j[we],st=rt(kn(Oe)?Wt(Oe):Oe);if(st)for(const wt in st)ge[wt]=st[wt]}return ge}else if(ki(j))return j}var $e=/;(?![^(]*\))/g,lt=/:(.+)/;function Wt(j){const ge={};return j.split($e).forEach(we=>{if(we){const Oe=we.split(lt);Oe.length>1&&(ge[Oe[0].trim()]=Oe[1].trim())}}),ge}function vi(j){let ge="";if(!j)return ge;for(const we in j){const Oe=j[we],st=we.startsWith("--")?we:uo(we);(kn(Oe)||typeof Oe=="number"&&Fi(st))&&(ge+=`${st}:${Oe};`)}return ge}function Di(j){let ge="";if(kn(j))ge=j;else if(wi(j))for(let we=0;we<j.length;we++){const Oe=Di(j[we]);Oe&&(ge+=Oe+" ")}else if(ki(j))for(const we in j)j[we]&&(ge+=we+" ");return ge.trim()}var ar="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",es="svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistanceLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view",ts="area,base,br,col,embed,hr,img,input,link,meta,param,source,track,wbr",lr=g(ar),Na=g(es),cr=g(ts),Ba=/["'&<>]/;function Ga(j){const ge=""+j,we=Ba.exec(ge);if(!we)return ge;let Oe="",st,wt,Yt=0;for(wt=we.index;wt<ge.length;wt++){switch(ge.charCodeAt(wt)){case 34:st="&quot;";break;case 38:st="&amp;";break;case 39:st="&#39;";break;case 60:st="&lt;";break;case 62:st="&gt;";break;default:continue}Yt!==wt&&(Oe+=ge.substring(Yt,wt)),Yt=wt+1,Oe+=st}return Yt!==wt?Oe+ge.substring(Yt,wt):Oe}var qs=/^-?>|<!--|-->|--!>|<!-$/g;function ja(j){return j.replace(qs,"")}function za(j,ge){if(j.length!==ge.length)return!1;let we=!0;for(let Oe=0;we&&Oe<j.length;Oe++)we=hr(j[Oe],ge[Oe]);return we}function hr(j,ge){if(j===ge)return!0;let we=ss(j),Oe=ss(ge);if(we||Oe)return we&&Oe?j.getTime()===ge.getTime():!1;if(we=wi(j),Oe=wi(ge),we||Oe)return we&&Oe?za(j,ge):!1;if(we=ki(j),Oe=ki(ge),we||Oe){if(!we||!Oe)return!1;const st=Object.keys(j).length,wt=Object.keys(ge).length;if(st!==wt)return!1;for(const Yt in j){const Xt=j.hasOwnProperty(Yt),Lt=ge.hasOwnProperty(Yt);if(Xt&&!Lt||!Xt&&Lt||!hr(j[Yt],ge[Yt]))return!1}}return String(j)===String(ge)}function Js(j,ge){return j.findIndex(we=>hr(we,ge))}var eo=j=>j==null?"":ki(j)?JSON.stringify(j,Ua,2):String(j),Ua=(j,ge)=>Dn(ge)?{[`Map(${ge.size})`]:[...ge.entries()].reduce((we,[Oe,st])=>(we[`${Oe} =>`]=st,we),{})}:Ai(ge)?{[`Set(${ge.size})`]:[...ge.values()]}:ki(ge)&&!wi(ge)&&!oo(ge)?String(ge):ge,Wa=["bigInt","optionalChaining","nullishCoalescingOperator"],is=Object.freeze({}),ns=Object.freeze([]),rs=()=>{},ur=()=>!1,dr=/^on[^a-z]/,fr=j=>dr.test(j),gr=j=>j.startsWith("onUpdate:"),to=Object.assign,io=(j,ge)=>{const we=j.indexOf(ge);we>-1&&j.splice(we,1)},no=Object.prototype.hasOwnProperty,ro=(j,ge)=>no.call(j,ge),wi=Array.isArray,Dn=j=>Nn(j)==="[object Map]",Ai=j=>Nn(j)==="[object Set]",ss=j=>j instanceof Date,os=j=>typeof j=="function",kn=j=>typeof j=="string",Ya=j=>typeof j=="symbol",ki=j=>j!==null&&typeof j=="object",pr=j=>ki(j)&&os(j.then)&&os(j.catch),so=Object.prototype.toString,Nn=j=>so.call(j),Xa=j=>Nn(j).slice(8,-1),oo=j=>Nn(j)==="[object Object]",ao=j=>kn(j)&&j!=="NaN"&&j[0]!=="-"&&""+parseInt(j,10)===j,lo=g(",key,ref,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Bn=j=>{const ge=Object.create(null);return we=>ge[we]||(ge[we]=j(we))},co=/-(\w)/g,ho=Bn(j=>j.replace(co,(ge,we)=>we?we.toUpperCase():"")),Ha=/\B([A-Z])/g,uo=Bn(j=>j.replace(Ha,"-$1").toLowerCase()),Gn=Bn(j=>j.charAt(0).toUpperCase()+j.slice(1)),Qa=Bn(j=>j?`on${Gn(j)}`:""),as=(j,ge)=>j!==ge&&(j===j||ge===ge),Va=(j,ge)=>{for(let we=0;we<j.length;we++)j[we](ge)},mr=(j,ge,we)=>{Object.defineProperty(j,ge,{configurable:!0,enumerable:!1,value:we})},_r=j=>{const ge=parseFloat(j);return isNaN(ge)?j:ge},yr,fo=()=>yr||(yr=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});h.EMPTY_ARR=ns,h.EMPTY_OBJ=is,h.NO=ur,h.NOOP=rs,h.PatchFlagNames=w,h.babelParserDefaultPlugins=Wa,h.camelize=ho,h.capitalize=Gn,h.def=mr,h.escapeHtml=Ga,h.escapeHtmlComment=ja,h.extend=to,h.generateCodeFrame=W,h.getGlobalThis=fo,h.hasChanged=as,h.hasOwn=ro,h.hyphenate=uo,h.invokeArrayFns=Va,h.isArray=wi,h.isBooleanAttr=Ze,h.isDate=ss,h.isFunction=os,h.isGloballyWhitelisted=T,h.isHTMLTag=lr,h.isIntegerKey=ao,h.isKnownAttr=ke,h.isMap=Dn,h.isModelListener=gr,h.isNoUnitNumericStyleProp=Fi,h.isObject=ki,h.isOn=fr,h.isPlainObject=oo,h.isPromise=pr,h.isReservedProp=lo,h.isSSRSafeAttrName=mt,h.isSVGTag=Na,h.isSet=Ai,h.isSpecialBooleanAttr=ve,h.isString=kn,h.isSymbol=Ya,h.isVoidTag=cr,h.looseEqual=hr,h.looseIndexOf=Js,h.makeMap=g,h.normalizeClass=Di,h.normalizeStyle=rt,h.objectToString=so,h.parseStringStyle=Wt,h.propsToAttrMap=oi,h.remove=io,h.slotFlagsText=I,h.stringifyStyle=vi,h.toDisplayString=eo,h.toHandlerKey=Qa,h.toNumber=_r,h.toRawType=Xa,h.toTypeString=Nn}}),p=l({"node_modules/@vue/shared/index.js"(h,g){g.exports=_()}}),m=l({"node_modules/@vue/reactivity/dist/reactivity.cjs.js"(h){Object.defineProperty(h,"__esModule",{value:!0});var g=p(),w=new WeakMap,I=[],O,T=Symbol("iterate"),k=Symbol("Map key iterate");function W(b){return b&&b._isEffect===!0}function ae(b,$=g.EMPTY_OBJ){W(b)&&(b=b.raw);const te=yt(b,$);return $.lazy||te(),te}function ve(b){b.active&&(qe(b),b.options.onStop&&b.options.onStop(),b.active=!1)}var Ze=0;function yt(b,$){const te=function(){if(!te.active)return b();if(!I.includes(te)){qe(te);try{return ke(),I.push(te),O=te,b()}finally{I.pop(),rt(),O=I[I.length-1]}}};return te.id=Ze++,te.allowRecurse=!!$.allowRecurse,te._isEffect=!0,te.active=!0,te.raw=b,te.deps=[],te.options=$,te}function qe(b){const{deps:$}=b;if($.length){for(let te=0;te<$.length;te++)$[te].delete(b);$.length=0}}var mt=!0,oi=[];function Fi(){oi.push(mt),mt=!1}function ke(){oi.push(mt),mt=!0}function rt(){const b=oi.pop();mt=b===void 0?!0:b}function $e(b,$,te){if(!mt||O===void 0)return;let Ce=w.get(b);Ce||w.set(b,Ce=new Map);let me=Ce.get(te);me||Ce.set(te,me=new Set),me.has(O)||(me.add(O),O.deps.push(me),O.options.onTrack&&O.options.onTrack({effect:O,target:b,type:$,key:te}))}function lt(b,$,te,Ce,me,Me){const Qe=w.get(b);if(!Qe)return;const Et=new Set,Ht=Dt=>{Dt&&Dt.forEach(xi=>{(xi!==O||xi.allowRecurse)&&Et.add(xi)})};if($==="clear")Qe.forEach(Ht);else if(te==="length"&&g.isArray(b))Qe.forEach((Dt,xi)=>{(xi==="length"||xi>=Ce)&&Ht(Dt)});else switch(te!==void 0&&Ht(Qe.get(te)),$){case"add":g.isArray(b)?g.isIntegerKey(te)&&Ht(Qe.get("length")):(Ht(Qe.get(T)),g.isMap(b)&&Ht(Qe.get(k)));break;case"delete":g.isArray(b)||(Ht(Qe.get(T)),g.isMap(b)&&Ht(Qe.get(k)));break;case"set":g.isMap(b)&&Ht(Qe.get(T));break}const cs=Dt=>{Dt.options.onTrigger&&Dt.options.onTrigger({effect:Dt,target:b,key:te,type:$,newValue:Ce,oldValue:me,oldTarget:Me}),Dt.options.scheduler?Dt.options.scheduler(Dt):Dt()};Et.forEach(cs)}var Wt=g.makeMap("__proto__,__v_isRef,__isVue"),vi=new Set(Object.getOwnPropertyNames(Symbol).map(b=>Symbol[b]).filter(g.isSymbol)),Di=cr(),ar=cr(!1,!0),es=cr(!0),ts=cr(!0,!0),lr=Na();function Na(){const b={};return["includes","indexOf","lastIndexOf"].forEach($=>{b[$]=function(...te){const Ce=j(this);for(let Me=0,Qe=this.length;Me<Qe;Me++)$e(Ce,"get",Me+"");const me=Ce[$](...te);return me===-1||me===!1?Ce[$](...te.map(j)):me}}),["push","pop","shift","unshift","splice"].forEach($=>{b[$]=function(...te){Fi();const Ce=j(this)[$].apply(this,te);return rt(),Ce}}),b}function cr(b=!1,$=!1){return function(Ce,me,Me){if(me==="__v_isReactive")return!b;if(me==="__v_isReadonly")return b;if(me==="__v_raw"&&Me===(b?$?ho:co:$?Bn:lo).get(Ce))return Ce;const Qe=g.isArray(Ce);if(!b&&Qe&&g.hasOwn(lr,me))return Reflect.get(lr,me,Me);const Et=Reflect.get(Ce,me,Me);return(g.isSymbol(me)?vi.has(me):Wt(me))||(b||$e(Ce,"get",me),$)?Et:Oe(Et)?!Qe||!g.isIntegerKey(me)?Et.value:Et:g.isObject(Et)?b?as(Et):Gn(Et):Et}}var Ba=qs(),Ga=qs(!0);function qs(b=!1){return function(te,Ce,me,Me){let Qe=te[Ce];if(!b&&(me=j(me),Qe=j(Qe),!g.isArray(te)&&Oe(Qe)&&!Oe(me)))return Qe.value=me,!0;const Et=g.isArray(te)&&g.isIntegerKey(Ce)?Number(Ce)<te.length:g.hasOwn(te,Ce),Ht=Reflect.set(te,Ce,me,Me);return te===j(Me)&&(Et?g.hasChanged(me,Qe)&&lt(te,"set",Ce,me,Qe):lt(te,"add",Ce,me)),Ht}}function ja(b,$){const te=g.hasOwn(b,$),Ce=b[$],me=Reflect.deleteProperty(b,$);return me&&te&&lt(b,"delete",$,void 0,Ce),me}function za(b,$){const te=Reflect.has(b,$);return(!g.isSymbol($)||!vi.has($))&&$e(b,"has",$),te}function hr(b){return $e(b,"iterate",g.isArray(b)?"length":T),Reflect.ownKeys(b)}var Js={get:Di,set:Ba,deleteProperty:ja,has:za,ownKeys:hr},eo={get:es,set(b,$){return console.warn(`Set operation on key "${String($)}" failed: target is readonly.`,b),!0},deleteProperty(b,$){return console.warn(`Delete operation on key "${String($)}" failed: target is readonly.`,b),!0}},Ua=g.extend({},Js,{get:ar,set:Ga}),Wa=g.extend({},eo,{get:ts}),is=b=>g.isObject(b)?Gn(b):b,ns=b=>g.isObject(b)?as(b):b,rs=b=>b,ur=b=>Reflect.getPrototypeOf(b);function dr(b,$,te=!1,Ce=!1){b=b.__v_raw;const me=j(b),Me=j($);$!==Me&&!te&&$e(me,"get",$),!te&&$e(me,"get",Me);const{has:Qe}=ur(me),Et=Ce?rs:te?ns:is;if(Qe.call(me,$))return Et(b.get($));if(Qe.call(me,Me))return Et(b.get(Me));b!==me&&b.get($)}function fr(b,$=!1){const te=this.__v_raw,Ce=j(te),me=j(b);return b!==me&&!$&&$e(Ce,"has",b),!$&&$e(Ce,"has",me),b===me?te.has(b):te.has(b)||te.has(me)}function gr(b,$=!1){return b=b.__v_raw,!$&&$e(j(b),"iterate",T),Reflect.get(b,"size",b)}function to(b){b=j(b);const $=j(this);return ur($).has.call($,b)||($.add(b),lt($,"add",b,b)),this}function io(b,$){$=j($);const te=j(this),{has:Ce,get:me}=ur(te);let Me=Ce.call(te,b);Me?ao(te,Ce,b):(b=j(b),Me=Ce.call(te,b));const Qe=me.call(te,b);return te.set(b,$),Me?g.hasChanged($,Qe)&&lt(te,"set",b,$,Qe):lt(te,"add",b,$),this}function no(b){const $=j(this),{has:te,get:Ce}=ur($);let me=te.call($,b);me?ao($,te,b):(b=j(b),me=te.call($,b));const Me=Ce?Ce.call($,b):void 0,Qe=$.delete(b);return me&&lt($,"delete",b,void 0,Me),Qe}function ro(){const b=j(this),$=b.size!==0,te=g.isMap(b)?new Map(b):new Set(b),Ce=b.clear();return $&&lt(b,"clear",void 0,void 0,te),Ce}function wi(b,$){return function(Ce,me){const Me=this,Qe=Me.__v_raw,Et=j(Qe),Ht=$?rs:b?ns:is;return!b&&$e(Et,"iterate",T),Qe.forEach((cs,Dt)=>Ce.call(me,Ht(cs),Ht(Dt),Me))}}function Dn(b,$,te){return function(...Ce){const me=this.__v_raw,Me=j(me),Qe=g.isMap(Me),Et=b==="entries"||b===Symbol.iterator&&Qe,Ht=b==="keys"&&Qe,cs=me[b](...Ce),Dt=te?rs:$?ns:is;return!$&&$e(Me,"iterate",Ht?k:T),{next(){const{value:xi,done:$a}=cs.next();return $a?{value:xi,done:$a}:{value:Et?[Dt(xi[0]),Dt(xi[1])]:Dt(xi),done:$a}},[Symbol.iterator](){return this}}}}function Ai(b){return function(...$){{const te=$[0]?`on key "${$[0]}" `:"";console.warn(`${g.capitalize(b)} operation ${te}failed: target is readonly.`,j(this))}return b==="delete"?!1:this}}function ss(){const b={get(Me){return dr(this,Me)},get size(){return gr(this)},has:fr,add:to,set:io,delete:no,clear:ro,forEach:wi(!1,!1)},$={get(Me){return dr(this,Me,!1,!0)},get size(){return gr(this)},has:fr,add:to,set:io,delete:no,clear:ro,forEach:wi(!1,!0)},te={get(Me){return dr(this,Me,!0)},get size(){return gr(this,!0)},has(Me){return fr.call(this,Me,!0)},add:Ai("add"),set:Ai("set"),delete:Ai("delete"),clear:Ai("clear"),forEach:wi(!0,!1)},Ce={get(Me){return dr(this,Me,!0,!0)},get size(){return gr(this,!0)},has(Me){return fr.call(this,Me,!0)},add:Ai("add"),set:Ai("set"),delete:Ai("delete"),clear:Ai("clear"),forEach:wi(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(Me=>{b[Me]=Dn(Me,!1,!1),te[Me]=Dn(Me,!0,!1),$[Me]=Dn(Me,!1,!0),Ce[Me]=Dn(Me,!0,!0)}),[b,te,$,Ce]}var[os,kn,Ya,ki]=ss();function pr(b,$){const te=$?b?ki:Ya:b?kn:os;return(Ce,me,Me)=>me==="__v_isReactive"?!b:me==="__v_isReadonly"?b:me==="__v_raw"?Ce:Reflect.get(g.hasOwn(te,me)&&me in Ce?te:Ce,me,Me)}var so={get:pr(!1,!1)},Nn={get:pr(!1,!0)},Xa={get:pr(!0,!1)},oo={get:pr(!0,!0)};function ao(b,$,te){const Ce=j(te);if(Ce!==te&&$.call(b,Ce)){const me=g.toRawType(b);console.warn(`Reactive ${me} contains both the raw and reactive versions of the same object${me==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}var lo=new WeakMap,Bn=new WeakMap,co=new WeakMap,ho=new WeakMap;function Ha(b){switch(b){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function uo(b){return b.__v_skip||!Object.isExtensible(b)?0:Ha(g.toRawType(b))}function Gn(b){return b&&b.__v_isReadonly?b:mr(b,!1,Js,so,lo)}function Qa(b){return mr(b,!1,Ua,Nn,Bn)}function as(b){return mr(b,!0,eo,Xa,co)}function Va(b){return mr(b,!0,Wa,oo,ho)}function mr(b,$,te,Ce,me){if(!g.isObject(b))return console.warn(`value cannot be made reactive: ${String(b)}`),b;if(b.__v_raw&&!($&&b.__v_isReactive))return b;const Me=me.get(b);if(Me)return Me;const Qe=uo(b);if(Qe===0)return b;const Et=new Proxy(b,Qe===2?Ce:te);return me.set(b,Et),Et}function _r(b){return yr(b)?_r(b.__v_raw):!!(b&&b.__v_isReactive)}function yr(b){return!!(b&&b.__v_isReadonly)}function fo(b){return _r(b)||yr(b)}function j(b){return b&&j(b.__v_raw)||b}function ge(b){return g.def(b,"__v_skip",!0),b}var we=b=>g.isObject(b)?Gn(b):b;function Oe(b){return Boolean(b&&b.__v_isRef===!0)}function st(b){return Xt(b)}function wt(b){return Xt(b,!0)}var Yt=class{constructor(b,$=!1){this._shallow=$,this.__v_isRef=!0,this._rawValue=$?b:j(b),this._value=$?b:we(b)}get value(){return $e(j(this),"get","value"),this._value}set value(b){b=this._shallow?b:j(b),g.hasChanged(b,this._rawValue)&&(this._rawValue=b,this._value=this._shallow?b:we(b),lt(j(this),"set","value",b))}};function Xt(b,$=!1){return Oe(b)?b:new Yt(b,$)}function Lt(b){lt(j(b),"set","value",b.value)}function ls(b){return Oe(b)?b.value:b}var vr={get:(b,$,te)=>ls(Reflect.get(b,$,te)),set:(b,$,te,Ce)=>{const me=b[$];return Oe(me)&&!Oe(te)?(me.value=te,!0):Reflect.set(b,$,te,Ce)}};function go(b){return _r(b)?b:new Proxy(b,vr)}var wr=class{constructor(b){this.__v_isRef=!0;const{get:$,set:te}=b(()=>$e(this,"get","value"),()=>lt(this,"set","value"));this._get=$,this._set=te}get value(){return this._get()}set value(b){this._set(b)}};function Ka(b){return new wr(b)}function xp(b){fo(b)||console.warn("toRefs() expects a reactive object but received a plain one.");const $=g.isArray(b)?new Array(b.length):{};for(const te in b)$[te]=bh(b,te);return $}var Ep=class{constructor(b,$){this._object=b,this._key=$,this.__v_isRef=!0}get value(){return this._object[this._key]}set value(b){this._object[this._key]=b}};function bh(b,$){return Oe(b[$])?b[$]:new Ep(b,$)}var bp=class{constructor(b,$,te){this._setter=$,this._dirty=!0,this.__v_isRef=!0,this.effect=ae(b,{lazy:!0,scheduler:()=>{this._dirty||(this._dirty=!0,lt(j(this),"set","value"))}}),this.__v_isReadonly=te}get value(){const b=j(this);return b._dirty&&(b._value=this.effect(),b._dirty=!1),$e(b,"get","value"),b._value}set value(b){this._setter(b)}};function Cp(b){let $,te;return g.isFunction(b)?($=b,te=()=>{console.warn("Write operation failed: computed value is readonly")}):($=b.get,te=b.set),new bp($,te,g.isFunction(b)||!b.set)}h.ITERATE_KEY=T,h.computed=Cp,h.customRef=Ka,h.effect=ae,h.enableTracking=ke,h.isProxy=fo,h.isReactive=_r,h.isReadonly=yr,h.isRef=Oe,h.markRaw=ge,h.pauseTracking=Fi,h.proxyRefs=go,h.reactive=Gn,h.readonly=as,h.ref=st,h.resetTracking=rt,h.shallowReactive=Qa,h.shallowReadonly=Va,h.shallowRef=wt,h.stop=ve,h.toRaw=j,h.toRef=bh,h.toRefs=xp,h.track=$e,h.trigger=lt,h.triggerRef=Lt,h.unref=ls}}),y=l({"node_modules/@vue/reactivity/index.js"(h,g){g.exports=m()}}),v={};c(v,{default:()=>Ap}),e.exports=f(v);var A=!1,x=!1,E=[],M=-1;function L(h){R(h)}function R(h){E.includes(h)||E.push(h),B()}function S(h){let g=E.indexOf(h);g!==-1&&g>M&&E.splice(g,1)}function B(){!x&&!A&&(A=!0,queueMicrotask(U))}function U(){A=!1,x=!0;for(let h=0;h<E.length;h++)E[h](),M=h;E.length=0,M=-1,x=!1}var z,X,V,Ae,ee=!0;function F(h){ee=!1,h(),ee=!0}function N(h){z=h.reactive,V=h.release,X=g=>h.effect(g,{scheduler:w=>{ee?L(w):w()}}),Ae=h.raw}function G(h){X=h}function K(h){let g=()=>{};return[I=>{let O=X(I);return h._x_effects||(h._x_effects=new Set,h._x_runEffects=()=>{h._x_effects.forEach(T=>T())}),h._x_effects.add(O),g=()=>{O!==void 0&&(h._x_effects.delete(O),V(O))},O},()=>{g()}]}function H(h,g,w={}){h.dispatchEvent(new CustomEvent(g,{detail:w,bubbles:!0,composed:!0,cancelable:!0}))}function q(h,g){if(typeof ShadowRoot=="function"&&h instanceof ShadowRoot){Array.from(h.children).forEach(O=>q(O,g));return}let w=!1;if(g(h,()=>w=!0),w)return;let I=h.firstElementChild;for(;I;)q(I,g),I=I.nextElementSibling}function D(h,...g){console.warn(`Alpine Warning: ${h}`,...g)}var ce=!1;function J(){ce&&D("Alpine has already been initialized on this page. Calling Alpine.start() more than once can cause problems."),ce=!0,document.body||D("Unable to initialize. Trying to load Alpine before `<body>` is available. Did you forget to add `defer` in Alpine's `<script>` tag?"),H(document,"alpine:init"),H(document,"alpine:initializing"),at(),it(g=>xe(g,q)),ye(g=>Z(g)),se((g,w)=>{Zt(g,w).forEach(I=>I())});let h=g=>!We(g.parentElement,!0);Array.from(document.querySelectorAll(le())).filter(h).forEach(g=>{xe(g)}),H(document,"alpine:initialized")}var ne=[],fe=[];function Ne(){return ne.map(h=>h())}function le(){return ne.concat(fe).map(h=>h())}function pe(h){ne.push(h)}function Le(h){fe.push(h)}function We(h,g=!1){return Ie(h,w=>{if((g?le():Ne()).some(O=>w.matches(O)))return!0})}function Ie(h,g){if(!!h){if(g(h))return h;if(h._x_teleportBack&&(h=h._x_teleportBack),!!h.parentElement)return Ie(h.parentElement,g)}}function be(h){return Ne().some(g=>h.matches(g))}var pt=[];function ot(h){pt.push(h)}function xe(h,g=q,w=()=>{}){Ys(()=>{g(h,(I,O)=>{w(I,O),pt.forEach(T=>T(I,O)),Zt(I,I.attributes).forEach(T=>T()),I._x_ignore&&O()})})}function Z(h){q(h,g=>{Ee(g),Ye(g)})}var re=[],Se=[],de=[];function it(h){de.push(h)}function ye(h,g){typeof g=="function"?(h._x_cleanups||(h._x_cleanups=[]),h._x_cleanups.push(g)):(g=h,Se.push(g))}function se(h){re.push(h)}function he(h,g,w){h._x_attributeCleanups||(h._x_attributeCleanups={}),h._x_attributeCleanups[g]||(h._x_attributeCleanups[g]=[]),h._x_attributeCleanups[g].push(w)}function Ee(h,g){!h._x_attributeCleanups||Object.entries(h._x_attributeCleanups).forEach(([w,I])=>{(g===void 0||g.includes(w))&&(I.forEach(O=>O()),delete h._x_attributeCleanups[w])})}function Ye(h){if(h._x_cleanups)for(;h._x_cleanups.length;)h._x_cleanups.pop()()}var Pe=new MutationObserver(_i),nt=!1;function at(){Pe.observe(document,{subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0}),nt=!0}function Ft(){On(),Pe.disconnect(),nt=!1}var ht=[],ui=!1;function On(){ht=ht.concat(Pe.takeRecords()),ht.length&&!ui&&(ui=!0,queueMicrotask(()=>{Qi(),ui=!1}))}function Qi(){_i(ht),ht.length=0}function ft(h){if(!nt)return h();Ft();let g=h();return at(),g}var Vi=!1,mi=[];function or(){Vi=!0}function Mn(){Vi=!1,_i(mi),mi=[]}function _i(h){if(Vi){mi=mi.concat(h);return}let g=[],w=[],I=new Map,O=new Map;for(let T=0;T<h.length;T++)if(!h[T].target._x_ignoreMutationObserver&&(h[T].type==="childList"&&(h[T].addedNodes.forEach(k=>k.nodeType===1&&g.push(k)),h[T].removedNodes.forEach(k=>k.nodeType===1&&w.push(k))),h[T].type==="attributes")){let k=h[T].target,W=h[T].attributeName,ae=h[T].oldValue,ve=()=>{I.has(k)||I.set(k,[]),I.get(k).push({name:W,value:k.getAttribute(W)})},Ze=()=>{O.has(k)||O.set(k,[]),O.get(k).push(W)};k.hasAttribute(W)&&ae===null?ve():k.hasAttribute(W)?(Ze(),ve()):Ze()}O.forEach((T,k)=>{Ee(k,T)}),I.forEach((T,k)=>{re.forEach(W=>W(k,T))});for(let T of w)g.includes(T)||(Se.forEach(k=>k(T)),Z(T));g.forEach(T=>{T._x_ignoreSelf=!0,T._x_ignore=!0});for(let T of g)w.includes(T)||!T.isConnected||(delete T._x_ignoreSelf,delete T._x_ignore,de.forEach(k=>k(T)),T._x_ignore=!0,T._x_ignoreSelf=!0);g.forEach(T=>{delete T._x_ignoreSelf,delete T._x_ignore}),g=null,w=null,I=null,O=null}function Si(h){return Ri(di(h))}function ri(h,g,w){return h._x_dataStack=[g,...di(w||h)],()=>{h._x_dataStack=h._x_dataStack.filter(I=>I!==g)}}function di(h){return h._x_dataStack?h._x_dataStack:typeof ShadowRoot=="function"&&h instanceof ShadowRoot?di(h.host):h.parentNode?di(h.parentNode):[]}function Ri(h){return new Proxy({objects:h},jt)}var jt={ownKeys({objects:h}){return Array.from(new Set(h.flatMap(g=>Object.keys(g))))},has({objects:h},g){return g==Symbol.unscopables?!1:h.some(w=>Object.prototype.hasOwnProperty.call(w,g))},get({objects:h},g,w){return g=="toJSON"?Ti:Reflect.get(h.find(I=>Object.prototype.hasOwnProperty.call(I,g))||{},g,w)},set({objects:h},g,w,I){const O=h.find(k=>Object.prototype.hasOwnProperty.call(k,g))||h[h.length-1],T=Object.getOwnPropertyDescriptor(O,g);return(T==null?void 0:T.set)&&(T==null?void 0:T.get)?Reflect.set(O,g,w,I):Reflect.set(O,g,w)}};function Ti(){return Reflect.ownKeys(this).reduce((g,w)=>(g[w]=Reflect.get(this,w),g),{})}function zt(h){let g=I=>typeof I=="object"&&!Array.isArray(I)&&I!==null,w=(I,O="")=>{Object.entries(Object.getOwnPropertyDescriptors(I)).forEach(([T,{value:k,enumerable:W}])=>{if(W===!1||k===void 0)return;let ae=O===""?T:`${O}.${T}`;typeof k=="object"&&k!==null&&k._x_interceptor?I[T]=k.initialize(h,ae,T):g(k)&&k!==I&&!(k instanceof Element)&&w(k,ae)})};return w(h)}function si(h,g=()=>{}){let w={initialValue:void 0,_x_interceptor:!0,initialize(I,O,T){return h(this.initialValue,()=>Ut(I,O),k=>Li(I,O,k),O,T)}};return g(w),I=>{if(typeof I=="object"&&I!==null&&I._x_interceptor){let O=w.initialize.bind(w);w.initialize=(T,k,W)=>{let ae=I.initialize(T,k,W);return w.initialValue=ae,O(T,k,W)}}else w.initialValue=I;return w}}function Ut(h,g){return g.split(".").reduce((w,I)=>w[I],h)}function Li(h,g,w){if(typeof g=="string"&&(g=g.split(".")),g.length===1)h[g[0]]=w;else{if(g.length===0)throw error;return h[g[0]]||(h[g[0]]={}),Li(h[g[0]],g.slice(1),w)}}var Ki={};function gt(h,g){Ki[h]=g}function C(h,g){return Object.entries(Ki).forEach(([w,I])=>{let O=null;function T(){if(O)return O;{let[k,W]=$r(g);return O={interceptor:si,...k},ye(g,W),O}}Object.defineProperty(h,`$${w}`,{get(){return I(g,T())},enumerable:!1})}),h}function P(h,g,w,...I){try{return w(...I)}catch(O){Y(O,h,g)}}function Y(h,g,w=void 0){Object.assign(h,{el:g,expression:w}),console.warn(`Alpine Expression Error: ${h.message}

${w?'Expression: "'+w+`"

`:""}`,g),setTimeout(()=>{throw h},0)}var Q=!0;function ie(h){let g=Q;Q=!1;let w=h();return Q=g,w}function ue(h,g,w={}){let I;return oe(h,g)(O=>I=O,w),I}function oe(...h){return _e(...h)}var _e=Te;function Re(h){_e=h}function Te(h,g){let w={};C(w,h);let I=[w,...di(h)],O=typeof g=="function"?Xe(I,g):Fe(I,g,h);return P.bind(null,h,g,O)}function Xe(h,g){return(w=()=>{},{scope:I={},params:O=[]}={})=>{let T=g.apply(Ri([I,...h]),O);je(w,T)}}var ze={};function et(h,g){if(ze[h])return ze[h];let w=Object.getPrototypeOf(async function(){}).constructor,I=/^[\n\s]*if.*\(.*\)/.test(h.trim())||/^(let|const)\s/.test(h.trim())?`(async()=>{ ${h} })()`:h,T=(()=>{try{let k=new w(["__self","scope"],`with (scope) { __self.result = ${I} }; __self.finished = true; return __self.result;`);return Object.defineProperty(k,"name",{value:`[Alpine] ${h}`}),k}catch(k){return Y(k,g,h),Promise.resolve()}})();return ze[h]=T,T}function Fe(h,g,w){let I=et(g,w);return(O=()=>{},{scope:T={},params:k=[]}={})=>{I.result=void 0,I.finished=!1;let W=Ri([T,...h]);if(typeof I=="function"){let ae=I(I,W).catch(ve=>Y(ve,w,g));I.finished?(je(O,I.result,W,k,w),I.result=void 0):ae.then(ve=>{je(O,ve,W,k,w)}).catch(ve=>Y(ve,w,g)).finally(()=>I.result=void 0)}}}function je(h,g,w,I,O){if(Q&&typeof g=="function"){let T=g.apply(w,I);T instanceof Promise?T.then(k=>je(h,k,w,I)).catch(k=>Y(k,O,g)):h(T)}else typeof g=="object"&&g instanceof Promise?g.then(T=>h(T)):h(g)}var Ke="x-";function ut(h=""){return Ke+h}function Je(h){Ke=h}var vt={};function He(h,g){return vt[h]=g,{before(w){if(!vt[w]){console.warn("Cannot find directive `${directive}`. `${name}` will use the default order of execution");return}const I=Pn.indexOf(w);Pn.splice(I>=0?I:Pn.indexOf("DEFAULT"),0,h)}}}function Zt(h,g,w){if(g=Array.from(g),h._x_virtualDirectives){let T=Object.entries(h._x_virtualDirectives).map(([W,ae])=>({name:W,value:ae})),k=Tt(T);T=T.map(W=>k.find(ae=>ae.name===W.name)?{name:`x-bind:${W.name}`,value:`"${W.value}"`}:W),g=g.concat(T)}let I={};return g.map(un((T,k)=>I[T]=k)).filter(dn).map(bg(I,w)).sort(Cg).map(T=>Xs(h,T))}function Tt(h){return Array.from(h).map(un()).filter(g=>!dn(g))}var yi=!1,Oi=new Map,hn=Symbol();function Ys(h){yi=!0;let g=Symbol();hn=g,Oi.set(g,[]);let w=()=>{for(;Oi.get(g).length;)Oi.get(g).shift()();Oi.delete(g)},I=()=>{yi=!1,w()};h(w),I()}function $r(h){let g=[],w=W=>g.push(W),[I,O]=K(h);return g.push(O),[{Alpine:Jr,effect:I,cleanup:w,evaluateLater:oe.bind(oe,h),evaluate:ue.bind(ue,h)},()=>g.forEach(W=>W())]}function Xs(h,g){let w=()=>{},I=vt[g.type]||w,[O,T]=$r(h);he(h,g.original,T);let k=()=>{h._x_ignore||h._x_ignoreSelf||(I.inline&&I.inline(h,g,O),I=I.bind(I,h,g,O),yi?Oi.get(hn).push(I):I())};return k.runCleanups=T,k}var Mi=(h,g)=>({name:w,value:I})=>(w.startsWith(h)&&(w=w.replace(h,g)),{name:w,value:I}),Zr=h=>h;function un(h=()=>{}){return({name:g,value:w})=>{let{name:I,value:O}=$i.reduce((T,k)=>k(T),{name:g,value:w});return I!==g&&h(I,g),{name:I,value:O}}}var $i=[];function Pi(h){$i.push(h)}function dn({name:h}){return Hs().test(h)}var Hs=()=>new RegExp(`^${Ke}([^:^.]+)\\b`);function bg(h,g){return({name:w,value:I})=>{let O=w.match(Hs()),T=w.match(/:([a-zA-Z0-9\-_:]+)/),k=w.match(/\.[^.\]]+(?=[^\]]*$)/g)||[],W=g||h[w]||w;return{type:O?O[1]:null,value:T?T[1]:null,modifiers:k.map(ae=>ae.replace(".","")),expression:I,original:W}}}var ba="DEFAULT",Pn=["ignore","ref","data","id","anchor","bind","init","for","model","modelable","transition","show","if",ba,"teleport"];function Cg(h,g){let w=Pn.indexOf(h.type)===-1?ba:h.type,I=Pn.indexOf(g.type)===-1?ba:g.type;return Pn.indexOf(w)-Pn.indexOf(I)}var Ca=[],Ia=!1;function Sa(h=()=>{}){return queueMicrotask(()=>{Ia||setTimeout(()=>{Ra()})}),new Promise(g=>{Ca.push(()=>{h(),g()})})}function Ra(){for(Ia=!1;Ca.length;)Ca.shift()()}function Ig(){Ia=!0}function Ta(h,g){return Array.isArray(g)?Jc(h,g.join(" ")):typeof g=="object"&&g!==null?Sg(h,g):typeof g=="function"?Ta(h,g()):Jc(h,g)}function Jc(h,g){let w=O=>O.split(" ").filter(T=>!h.classList.contains(T)).filter(Boolean),I=O=>(h.classList.add(...O),()=>{h.classList.remove(...O)});return g=g===!0?g="":g||"",I(w(g))}function Sg(h,g){let w=W=>W.split(" ").filter(Boolean),I=Object.entries(g).flatMap(([W,ae])=>ae?w(W):!1).filter(Boolean),O=Object.entries(g).flatMap(([W,ae])=>ae?!1:w(W)).filter(Boolean),T=[],k=[];return O.forEach(W=>{h.classList.contains(W)&&(h.classList.remove(W),k.push(W))}),I.forEach(W=>{h.classList.contains(W)||(h.classList.add(W),T.push(W))}),()=>{k.forEach(W=>h.classList.add(W)),T.forEach(W=>h.classList.remove(W))}}function Qs(h,g){return typeof g=="object"&&g!==null?Rg(h,g):Tg(h,g)}function Rg(h,g){let w={};return Object.entries(g).forEach(([I,O])=>{w[I]=h.style[I],I.startsWith("--")||(I=Lg(I)),h.style.setProperty(I,O)}),setTimeout(()=>{h.style.length===0&&h.removeAttribute("style")}),()=>{Qs(h,w)}}function Tg(h,g){let w=h.getAttribute("style",g);return h.setAttribute("style",g),()=>{h.setAttribute("style",w||"")}}function Lg(h){return h.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function La(h,g=()=>{}){let w=!1;return function(){w?g.apply(this,arguments):(w=!0,h.apply(this,arguments))}}He("transition",(h,{value:g,modifiers:w,expression:I},{evaluate:O})=>{typeof I=="function"&&(I=O(I)),I!==!1&&(!I||typeof I=="boolean"?Mg(h,w,g):Og(h,I,g))});function Og(h,g,w){eh(h,Ta,""),{enter:O=>{h._x_transition.enter.during=O},"enter-start":O=>{h._x_transition.enter.start=O},"enter-end":O=>{h._x_transition.enter.end=O},leave:O=>{h._x_transition.leave.during=O},"leave-start":O=>{h._x_transition.leave.start=O},"leave-end":O=>{h._x_transition.leave.end=O}}[w](g)}function Mg(h,g,w){eh(h,Qs);let I=!g.includes("in")&&!g.includes("out")&&!w,O=I||g.includes("in")||["enter"].includes(w),T=I||g.includes("out")||["leave"].includes(w);g.includes("in")&&!I&&(g=g.filter((rt,$e)=>$e<g.indexOf("out"))),g.includes("out")&&!I&&(g=g.filter((rt,$e)=>$e>g.indexOf("out")));let k=!g.includes("opacity")&&!g.includes("scale"),W=k||g.includes("opacity"),ae=k||g.includes("scale"),ve=W?0:1,Ze=ae?qr(g,"scale",95)/100:1,yt=qr(g,"delay",0)/1e3,qe=qr(g,"origin","center"),mt="opacity, transform",oi=qr(g,"duration",150)/1e3,Fi=qr(g,"duration",75)/1e3,ke="cubic-bezier(0.4, 0.0, 0.2, 1)";O&&(h._x_transition.enter.during={transformOrigin:qe,transitionDelay:`${yt}s`,transitionProperty:mt,transitionDuration:`${oi}s`,transitionTimingFunction:ke},h._x_transition.enter.start={opacity:ve,transform:`scale(${Ze})`},h._x_transition.enter.end={opacity:1,transform:"scale(1)"}),T&&(h._x_transition.leave.during={transformOrigin:qe,transitionDelay:`${yt}s`,transitionProperty:mt,transitionDuration:`${Fi}s`,transitionTimingFunction:ke},h._x_transition.leave.start={opacity:1,transform:"scale(1)"},h._x_transition.leave.end={opacity:ve,transform:`scale(${Ze})`})}function eh(h,g,w={}){h._x_transition||(h._x_transition={enter:{during:w,start:w,end:w},leave:{during:w,start:w,end:w},in(I=()=>{},O=()=>{}){Oa(h,g,{during:this.enter.during,start:this.enter.start,end:this.enter.end},I,O)},out(I=()=>{},O=()=>{}){Oa(h,g,{during:this.leave.during,start:this.leave.start,end:this.leave.end},I,O)}})}window.Element.prototype._x_toggleAndCascadeWithTransitions=function(h,g,w,I){const O=document.visibilityState==="visible"?requestAnimationFrame:setTimeout;let T=()=>O(w);if(g){h._x_transition&&(h._x_transition.enter||h._x_transition.leave)?h._x_transition.enter&&(Object.entries(h._x_transition.enter.during).length||Object.entries(h._x_transition.enter.start).length||Object.entries(h._x_transition.enter.end).length)?h._x_transition.in(w):T():h._x_transition?h._x_transition.in(w):T();return}h._x_hidePromise=h._x_transition?new Promise((k,W)=>{h._x_transition.out(()=>{},()=>k(I)),h._x_transitioning&&h._x_transitioning.beforeCancel(()=>W({isFromCancelledTransition:!0}))}):Promise.resolve(I),queueMicrotask(()=>{let k=th(h);k?(k._x_hideChildren||(k._x_hideChildren=[]),k._x_hideChildren.push(h)):O(()=>{let W=ae=>{let ve=Promise.all([ae._x_hidePromise,...(ae._x_hideChildren||[]).map(W)]).then(([Ze])=>Ze());return delete ae._x_hidePromise,delete ae._x_hideChildren,ve};W(h).catch(ae=>{if(!ae.isFromCancelledTransition)throw ae})})})};function th(h){let g=h.parentNode;if(!!g)return g._x_hidePromise?g:th(g)}function Oa(h,g,{during:w,start:I,end:O}={},T=()=>{},k=()=>{}){if(h._x_transitioning&&h._x_transitioning.cancel(),Object.keys(w).length===0&&Object.keys(I).length===0&&Object.keys(O).length===0){T(),k();return}let W,ae,ve;Pg(h,{start(){W=g(h,I)},during(){ae=g(h,w)},before:T,end(){W(),ve=g(h,O)},after:k,cleanup(){ae(),ve()}})}function Pg(h,g){let w,I,O,T=La(()=>{ft(()=>{w=!0,I||g.before(),O||(g.end(),Ra()),g.after(),h.isConnected&&g.cleanup(),delete h._x_transitioning})});h._x_transitioning={beforeCancels:[],beforeCancel(k){this.beforeCancels.push(k)},cancel:La(function(){for(;this.beforeCancels.length;)this.beforeCancels.shift()();T()}),finish:T},ft(()=>{g.start(),g.during()}),Ig(),requestAnimationFrame(()=>{if(w)return;let k=Number(getComputedStyle(h).transitionDuration.replace(/,.*/,"").replace("s",""))*1e3,W=Number(getComputedStyle(h).transitionDelay.replace(/,.*/,"").replace("s",""))*1e3;k===0&&(k=Number(getComputedStyle(h).animationDuration.replace("s",""))*1e3),ft(()=>{g.before()}),I=!0,requestAnimationFrame(()=>{w||(ft(()=>{g.end()}),Ra(),setTimeout(h._x_transitioning.finish,k+W),O=!0)})})}function qr(h,g,w){if(h.indexOf(g)===-1)return w;const I=h[h.indexOf(g)+1];if(!I||g==="scale"&&isNaN(I))return w;if(g==="duration"||g==="delay"){let O=I.match(/([0-9]+)ms/);if(O)return O[1]}return g==="origin"&&["top","right","left","center","bottom"].includes(h[h.indexOf(g)+2])?[I,h[h.indexOf(g)+2]].join(" "):I}var fn=!1;function Vs(h,g=()=>{}){return(...w)=>fn?g(...w):h(...w)}function Fg(h){return(...g)=>fn&&h(...g)}function Dg(h,g){h._x_dataStack&&(g._x_dataStack=h._x_dataStack,g.setAttribute("data-has-alpine-state",!0)),fn=!0,ih(()=>{xe(g,(w,I)=>{I(w,()=>{})})}),fn=!1}var Ma=!1;function kg(h,g){g._x_dataStack||(g._x_dataStack=h._x_dataStack),fn=!0,Ma=!0,ih(()=>{Ng(g)}),fn=!1,Ma=!1}function Ng(h){let g=!1;xe(h,(I,O)=>{q(I,(T,k)=>{if(g&&be(T))return k();g=!0,O(T,k)})})}function ih(h){let g=X;G((w,I)=>{let O=g(w);return V(O),()=>{}}),h(),G(g)}function Bg(h){return fn?Ma?!0:h.hasAttribute("data-has-alpine-state"):!1}function nh(h,g,w,I=[]){switch(h._x_bindings||(h._x_bindings=z({})),h._x_bindings[g]=w,g=I.includes("camel")?Hg(g):g,g){case"value":Gg(h,w);break;case"style":zg(h,w);break;case"class":jg(h,w);break;case"selected":case"checked":Ug(h,g,w);break;default:rh(h,g,w);break}}function Gg(h,g){if(h.type==="radio")h.attributes.value===void 0&&(h.value=g),window.fromModel&&(h.checked=sh(h.value,g));else if(h.type==="checkbox")Number.isInteger(g)?h.value=g:!Array.isArray(g)&&typeof g!="boolean"&&![null,void 0].includes(g)?h.value=String(g):Array.isArray(g)?h.checked=g.some(w=>sh(w,h.value)):h.checked=!!g;else if(h.tagName==="SELECT")Xg(h,g);else{if(h.value===g)return;h.value=g===void 0?"":g}}function jg(h,g){h._x_undoAddedClasses&&h._x_undoAddedClasses(),h._x_undoAddedClasses=Ta(h,g)}function zg(h,g){h._x_undoAddedStyles&&h._x_undoAddedStyles(),h._x_undoAddedStyles=Qs(h,g)}function Ug(h,g,w){rh(h,g,w),Yg(h,g,w)}function rh(h,g,w){[null,void 0,!1].includes(w)&&Qg(g)?h.removeAttribute(g):(oh(g)&&(w=g),Wg(h,g,w))}function Wg(h,g,w){h.getAttribute(g)!=w&&h.setAttribute(g,w)}function Yg(h,g,w){h[g]!==w&&(h[g]=w)}function Xg(h,g){const w=[].concat(g).map(I=>I+"");Array.from(h.options).forEach(I=>{I.selected=w.includes(I.value)})}function Hg(h){return h.toLowerCase().replace(/-(\w)/g,(g,w)=>w.toUpperCase())}function sh(h,g){return h==g}function oh(h){return["disabled","checked","required","readonly","hidden","open","selected","autofocus","itemscope","multiple","novalidate","allowfullscreen","allowpaymentrequest","formnovalidate","autoplay","controls","loop","muted","playsinline","default","ismap","reversed","async","defer","nomodule"].includes(h)}function Qg(h){return!["aria-pressed","aria-checked","aria-expanded","aria-selected"].includes(h)}function Vg(h,g,w){return h._x_bindings&&h._x_bindings[g]!==void 0?h._x_bindings[g]:ah(h,g,w)}function Kg(h,g,w,I=!0){if(h._x_bindings&&h._x_bindings[g]!==void 0)return h._x_bindings[g];if(h._x_inlineBindings&&h._x_inlineBindings[g]!==void 0){let O=h._x_inlineBindings[g];return O.extract=I,ie(()=>ue(h,O.expression))}return ah(h,g,w)}function ah(h,g,w){let I=h.getAttribute(g);return I===null?typeof w=="function"?w():w:I===""?!0:oh(g)?!![g,"true"].includes(I):I}function lh(h,g){var w;return function(){var I=this,O=arguments,T=function(){w=null,h.apply(I,O)};clearTimeout(w),w=setTimeout(T,g)}}function ch(h,g){let w;return function(){let I=this,O=arguments;w||(h.apply(I,O),w=!0,setTimeout(()=>w=!1,g))}}function hh({get:h,set:g},{get:w,set:I}){let O=!0,T,k=X(()=>{const W=h(),ae=w();if(O)I(Pa(W)),O=!1,T=JSON.stringify(W);else{const ve=JSON.stringify(W);ve!==T?(I(Pa(W)),T=ve):(g(Pa(ae)),T=JSON.stringify(ae))}JSON.stringify(w()),JSON.stringify(h())});return()=>{V(k)}}function Pa(h){return typeof h=="object"?JSON.parse(JSON.stringify(h)):h}function $g(h){(Array.isArray(h)?h:[h]).forEach(w=>w(Jr))}var Fn={},uh=!1;function Zg(h,g){if(uh||(Fn=z(Fn),uh=!0),g===void 0)return Fn[h];Fn[h]=g,typeof g=="object"&&g!==null&&g.hasOwnProperty("init")&&typeof g.init=="function"&&Fn[h].init(),zt(Fn[h])}function qg(){return Fn}var dh={};function Jg(h,g){let w=typeof g!="function"?()=>g:g;return h instanceof Element?fh(h,w()):(dh[h]=w,()=>{})}function ep(h){return Object.entries(dh).forEach(([g,w])=>{Object.defineProperty(h,g,{get(){return(...I)=>w(...I)}})}),h}function fh(h,g,w){let I=[];for(;I.length;)I.pop()();let O=Object.entries(g).map(([k,W])=>({name:k,value:W})),T=Tt(O);return O=O.map(k=>T.find(W=>W.name===k.name)?{name:`x-bind:${k.name}`,value:`"${k.value}"`}:k),Zt(h,O,w).map(k=>{I.push(k.runCleanups),k()}),()=>{for(;I.length;)I.pop()()}}var gh={};function tp(h,g){gh[h]=g}function ip(h,g){return Object.entries(gh).forEach(([w,I])=>{Object.defineProperty(h,w,{get(){return(...O)=>I.bind(g)(...O)},enumerable:!1})}),h}var np={get reactive(){return z},get release(){return V},get effect(){return X},get raw(){return Ae},version:"3.13.2",flushAndStopDeferringMutations:Mn,dontAutoEvaluateFunctions:ie,disableEffectScheduling:F,startObservingMutations:at,stopObservingMutations:Ft,setReactivityEngine:N,onAttributeRemoved:he,onAttributesAdded:se,closestDataStack:di,skipDuringClone:Vs,onlyDuringClone:Fg,addRootSelector:pe,addInitSelector:Le,addScopeToNode:ri,deferMutations:or,mapAttributes:Pi,evaluateLater:oe,interceptInit:ot,setEvaluator:Re,mergeProxies:Ri,extractProp:Kg,findClosest:Ie,onElRemoved:ye,closestRoot:We,destroyTree:Z,interceptor:si,transition:Oa,setStyles:Qs,mutateDom:ft,directive:He,entangle:hh,throttle:ch,debounce:lh,evaluate:ue,initTree:xe,nextTick:Sa,prefixed:ut,prefix:Je,plugin:$g,magic:gt,store:Zg,start:J,clone:kg,cloneNode:Dg,bound:Vg,$data:Si,walk:q,data:tp,bind:Jg},Jr=np,Ks=d(y());gt("nextTick",()=>Sa),gt("dispatch",h=>H.bind(H,h)),gt("watch",(h,{evaluateLater:g,effect:w})=>(I,O)=>{let T=g(I),k=!0,W,ae=w(()=>T(ve=>{JSON.stringify(ve),k?W=ve:queueMicrotask(()=>{O(ve,W),W=ve}),k=!1}));h._x_effects.delete(ae)}),gt("store",qg),gt("data",h=>Si(h)),gt("root",h=>We(h)),gt("refs",h=>(h._x_refs_proxy||(h._x_refs_proxy=Ri(rp(h))),h._x_refs_proxy));function rp(h){let g=[],w=h;for(;w;)w._x_refs&&g.push(w._x_refs),w=w.parentNode;return g}var Fa={};function ph(h){return Fa[h]||(Fa[h]=0),++Fa[h]}function sp(h,g){return Ie(h,w=>{if(w._x_ids&&w._x_ids[g])return!0})}function op(h,g){h._x_ids||(h._x_ids={}),h._x_ids[g]||(h._x_ids[g]=ph(g))}gt("id",h=>(g,w=null)=>{let I=sp(h,g),O=I?I._x_ids[g]:ph(g);return w?`${g}-${O}-${w}`:`${g}-${O}`}),gt("el",h=>h),mh("Focus","focus","focus"),mh("Persist","persist","persist");function mh(h,g,w){gt(g,I=>D(`You can't use [$${g}] without first installing the "${h}" plugin here: https://alpinejs.dev/plugins/${w}`,I))}He("modelable",(h,{expression:g},{effect:w,evaluateLater:I,cleanup:O})=>{let T=I(g),k=()=>{let Ze;return T(yt=>Ze=yt),Ze},W=I(`${g} = __placeholder`),ae=Ze=>W(()=>{},{scope:{__placeholder:Ze}}),ve=k();ae(ve),queueMicrotask(()=>{if(!h._x_model)return;h._x_removeModelListeners.default();let Ze=h._x_model.get,yt=h._x_model.set,qe=hh({get(){return Ze()},set(mt){yt(mt)}},{get(){return k()},set(mt){ae(mt)}});O(qe)})}),He("teleport",(h,{modifiers:g,expression:w},{cleanup:I})=>{h.tagName.toLowerCase()!=="template"&&D("x-teleport can only be used on a <template> tag",h);let O=_h(w),T=h.content.cloneNode(!0).firstElementChild;h._x_teleport=T,T._x_teleportBack=h,h.setAttribute("data-teleport-template",!0),T.setAttribute("data-teleport-target",!0),h._x_forwardEvents&&h._x_forwardEvents.forEach(W=>{T.addEventListener(W,ae=>{ae.stopPropagation(),h.dispatchEvent(new ae.constructor(ae.type,ae))})}),ri(T,{},h);let k=(W,ae,ve)=>{ve.includes("prepend")?ae.parentNode.insertBefore(W,ae):ve.includes("append")?ae.parentNode.insertBefore(W,ae.nextSibling):ae.appendChild(W)};ft(()=>{k(T,O,g),xe(T),T._x_ignore=!0}),h._x_teleportPutBack=()=>{let W=_h(w);ft(()=>{k(h._x_teleport,W,g)})},I(()=>T.remove())});var ap=document.createElement("div");function _h(h){let g=Vs(()=>document.querySelector(h),()=>ap)();return g||D(`Cannot find x-teleport element for selector: "${h}"`),g}var yh=()=>{};yh.inline=(h,{modifiers:g},{cleanup:w})=>{g.includes("self")?h._x_ignoreSelf=!0:h._x_ignore=!0,w(()=>{g.includes("self")?delete h._x_ignoreSelf:delete h._x_ignore})},He("ignore",yh),He("effect",(h,{expression:g},{effect:w})=>w(oe(h,g)));function Da(h,g,w,I){let O=h,T=ae=>I(ae),k={},W=(ae,ve)=>Ze=>ve(ae,Ze);if(w.includes("dot")&&(g=lp(g)),w.includes("camel")&&(g=cp(g)),w.includes("passive")&&(k.passive=!0),w.includes("capture")&&(k.capture=!0),w.includes("window")&&(O=window),w.includes("document")&&(O=document),w.includes("debounce")){let ae=w[w.indexOf("debounce")+1]||"invalid-wait",ve=$s(ae.split("ms")[0])?Number(ae.split("ms")[0]):250;T=lh(T,ve)}if(w.includes("throttle")){let ae=w[w.indexOf("throttle")+1]||"invalid-wait",ve=$s(ae.split("ms")[0])?Number(ae.split("ms")[0]):250;T=ch(T,ve)}return w.includes("prevent")&&(T=W(T,(ae,ve)=>{ve.preventDefault(),ae(ve)})),w.includes("stop")&&(T=W(T,(ae,ve)=>{ve.stopPropagation(),ae(ve)})),w.includes("self")&&(T=W(T,(ae,ve)=>{ve.target===h&&ae(ve)})),(w.includes("away")||w.includes("outside"))&&(O=document,T=W(T,(ae,ve)=>{h.contains(ve.target)||ve.target.isConnected!==!1&&(h.offsetWidth<1&&h.offsetHeight<1||h._x_isShown!==!1&&ae(ve))})),w.includes("once")&&(T=W(T,(ae,ve)=>{ae(ve),O.removeEventListener(g,T,k)})),T=W(T,(ae,ve)=>{up(g)&&dp(ve,w)||ae(ve)}),O.addEventListener(g,T,k),()=>{O.removeEventListener(g,T,k)}}function lp(h){return h.replace(/-/g,".")}function cp(h){return h.toLowerCase().replace(/-(\w)/g,(g,w)=>w.toUpperCase())}function $s(h){return!Array.isArray(h)&&!isNaN(h)}function hp(h){return[" ","_"].includes(h)?h:h.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[_\s]/,"-").toLowerCase()}function up(h){return["keydown","keyup"].includes(h)}function dp(h,g){let w=g.filter(T=>!["window","document","prevent","stop","once","capture"].includes(T));if(w.includes("debounce")){let T=w.indexOf("debounce");w.splice(T,$s((w[T+1]||"invalid-wait").split("ms")[0])?2:1)}if(w.includes("throttle")){let T=w.indexOf("throttle");w.splice(T,$s((w[T+1]||"invalid-wait").split("ms")[0])?2:1)}if(w.length===0||w.length===1&&vh(h.key).includes(w[0]))return!1;const O=["ctrl","shift","alt","meta","cmd","super"].filter(T=>w.includes(T));return w=w.filter(T=>!O.includes(T)),!(O.length>0&&O.filter(k=>((k==="cmd"||k==="super")&&(k="meta"),h[`${k}Key`])).length===O.length&&vh(h.key).includes(w[0]))}function vh(h){if(!h)return[];h=hp(h);let g={ctrl:"control",slash:"/",space:" ",spacebar:" ",cmd:"meta",esc:"escape",up:"arrow-up",down:"arrow-down",left:"arrow-left",right:"arrow-right",period:".",equal:"=",minus:"-",underscore:"_"};return g[h]=h,Object.keys(g).map(w=>{if(g[w]===h)return w}).filter(w=>w)}He("model",(h,{modifiers:g,expression:w},{effect:I,cleanup:O})=>{let T=h;g.includes("parent")&&(T=h.parentNode);let k=oe(T,w),W;typeof w=="string"?W=oe(T,`${w} = __placeholder`):typeof w=="function"&&typeof w()=="string"?W=oe(T,`${w()} = __placeholder`):W=()=>{};let ae=()=>{let qe;return k(mt=>qe=mt),wh(qe)?qe.get():qe},ve=qe=>{let mt;k(oi=>mt=oi),wh(mt)?mt.set(qe):W(()=>{},{scope:{__placeholder:qe}})};typeof w=="string"&&h.type==="radio"&&ft(()=>{h.hasAttribute("name")||h.setAttribute("name",w)});var Ze=h.tagName.toLowerCase()==="select"||["checkbox","radio"].includes(h.type)||g.includes("lazy")?"change":"input";let yt=fn?()=>{}:Da(h,Ze,g,qe=>{ve(fp(h,g,qe,ae()))});if(g.includes("fill")&&([null,""].includes(ae())||h.type==="checkbox"&&Array.isArray(ae()))&&h.dispatchEvent(new Event(Ze,{})),h._x_removeModelListeners||(h._x_removeModelListeners={}),h._x_removeModelListeners.default=yt,O(()=>h._x_removeModelListeners.default()),h.form){let qe=Da(h.form,"reset",[],mt=>{Sa(()=>h._x_model&&h._x_model.set(h.value))});O(()=>qe())}h._x_model={get(){return ae()},set(qe){ve(qe)}},h._x_forceModelUpdate=qe=>{qe===void 0&&typeof w=="string"&&w.match(/\./)&&(qe=""),window.fromModel=!0,ft(()=>nh(h,"value",qe)),delete window.fromModel},I(()=>{let qe=ae();g.includes("unintrusive")&&document.activeElement.isSameNode(h)||h._x_forceModelUpdate(qe)})});function fp(h,g,w,I){return ft(()=>{if(w instanceof CustomEvent&&w.detail!==void 0)return w.detail!==null&&w.detail!==void 0?w.detail:w.target.value;if(h.type==="checkbox")if(Array.isArray(I)){let O=g.includes("number")?ka(w.target.value):w.target.value;return w.target.checked?I.concat([O]):I.filter(T=>!gp(T,O))}else return w.target.checked;else{if(h.tagName.toLowerCase()==="select"&&h.multiple)return g.includes("number")?Array.from(w.target.selectedOptions).map(O=>{let T=O.value||O.text;return ka(T)}):Array.from(w.target.selectedOptions).map(O=>O.value||O.text);{let O=w.target.value;return g.includes("number")?ka(O):g.includes("trim")?O.trim():O}}})}function ka(h){let g=h?parseFloat(h):null;return pp(g)?g:h}function gp(h,g){return h==g}function pp(h){return!Array.isArray(h)&&!isNaN(h)}function wh(h){return h!==null&&typeof h=="object"&&typeof h.get=="function"&&typeof h.set=="function"}He("cloak",h=>queueMicrotask(()=>ft(()=>h.removeAttribute(ut("cloak"))))),Le(()=>`[${ut("init")}]`),He("init",Vs((h,{expression:g},{evaluate:w})=>typeof g=="string"?!!g.trim()&&w(g,{},!1):w(g,{},!1))),He("text",(h,{expression:g},{effect:w,evaluateLater:I})=>{let O=I(g);w(()=>{O(T=>{ft(()=>{h.textContent=T})})})}),He("html",(h,{expression:g},{effect:w,evaluateLater:I})=>{let O=I(g);w(()=>{O(T=>{ft(()=>{h.innerHTML=T,h._x_ignoreSelf=!0,xe(h),delete h._x_ignoreSelf})})})}),Pi(Mi(":",Zr(ut("bind:"))));var Ah=(h,{value:g,modifiers:w,expression:I,original:O},{effect:T})=>{if(!g){let W={};ep(W),oe(h,I)(ve=>{fh(h,ve,O)},{scope:W});return}if(g==="key")return mp(h,I);if(h._x_inlineBindings&&h._x_inlineBindings[g]&&h._x_inlineBindings[g].extract)return;let k=oe(h,I);T(()=>k(W=>{W===void 0&&typeof I=="string"&&I.match(/\./)&&(W=""),ft(()=>nh(h,g,W,w))}))};Ah.inline=(h,{value:g,modifiers:w,expression:I})=>{!g||(h._x_inlineBindings||(h._x_inlineBindings={}),h._x_inlineBindings[g]={expression:I,extract:!1})},He("bind",Ah);function mp(h,g){h._x_keyExpression=g}pe(()=>`[${ut("data")}]`),He("data",(h,{expression:g},{cleanup:w})=>{if(Bg(h))return;g=g===""?"{}":g;let I={};C(I,h);let O={};ip(O,I);let T=ue(h,g,{scope:O});(T===void 0||T===!0)&&(T={}),C(T,h);let k=z(T);zt(k);let W=ri(h,k);k.init&&ue(h,k.init),w(()=>{k.destroy&&ue(h,k.destroy),W()})}),He("show",(h,{modifiers:g,expression:w},{effect:I})=>{let O=oe(h,w);h._x_doHide||(h._x_doHide=()=>{ft(()=>{h.style.setProperty("display","none",g.includes("important")?"important":void 0)})}),h._x_doShow||(h._x_doShow=()=>{ft(()=>{h.style.length===1&&h.style.display==="none"?h.removeAttribute("style"):h.style.removeProperty("display")})});let T=()=>{h._x_doHide(),h._x_isShown=!1},k=()=>{h._x_doShow(),h._x_isShown=!0},W=()=>setTimeout(k),ae=La(yt=>yt?k():T(),yt=>{typeof h._x_toggleAndCascadeWithTransitions=="function"?h._x_toggleAndCascadeWithTransitions(h,yt,k,T):yt?W():T()}),ve,Ze=!0;I(()=>O(yt=>{!Ze&&yt===ve||(g.includes("immediate")&&(yt?W():T()),ae(yt),ve=yt,Ze=!1)}))}),He("for",(h,{expression:g},{effect:w,cleanup:I})=>{let O=yp(g),T=oe(h,O.items),k=oe(h,h._x_keyExpression||"index");h._x_prevKeys=[],h._x_lookup={},w(()=>_p(h,O,T,k)),I(()=>{Object.values(h._x_lookup).forEach(W=>W.remove()),delete h._x_prevKeys,delete h._x_lookup})});function _p(h,g,w,I){let O=k=>typeof k=="object"&&!Array.isArray(k),T=h;w(k=>{vp(k)&&k>=0&&(k=Array.from(Array(k).keys(),ke=>ke+1)),k===void 0&&(k=[]);let W=h._x_lookup,ae=h._x_prevKeys,ve=[],Ze=[];if(O(k))k=Object.entries(k).map(([ke,rt])=>{let $e=xh(g,rt,ke,k);I(lt=>Ze.push(lt),{scope:{index:ke,...$e}}),ve.push($e)});else for(let ke=0;ke<k.length;ke++){let rt=xh(g,k[ke],ke,k);I($e=>Ze.push($e),{scope:{index:ke,...rt}}),ve.push(rt)}let yt=[],qe=[],mt=[],oi=[];for(let ke=0;ke<ae.length;ke++){let rt=ae[ke];Ze.indexOf(rt)===-1&&mt.push(rt)}ae=ae.filter(ke=>!mt.includes(ke));let Fi="template";for(let ke=0;ke<Ze.length;ke++){let rt=Ze[ke],$e=ae.indexOf(rt);if($e===-1)ae.splice(ke,0,rt),yt.push([Fi,ke]);else if($e!==ke){let lt=ae.splice(ke,1)[0],Wt=ae.splice($e-1,1)[0];ae.splice(ke,0,Wt),ae.splice($e,0,lt),qe.push([lt,Wt])}else oi.push(rt);Fi=rt}for(let ke=0;ke<mt.length;ke++){let rt=mt[ke];W[rt]._x_effects&&W[rt]._x_effects.forEach(S),W[rt].remove(),W[rt]=null,delete W[rt]}for(let ke=0;ke<qe.length;ke++){let[rt,$e]=qe[ke],lt=W[rt],Wt=W[$e],vi=document.createElement("div");ft(()=>{Wt||D('x-for ":key" is undefined or invalid',T),Wt.after(vi),lt.after(Wt),Wt._x_currentIfEl&&Wt.after(Wt._x_currentIfEl),vi.before(lt),lt._x_currentIfEl&&lt.after(lt._x_currentIfEl),vi.remove()}),Wt._x_refreshXForScope(ve[Ze.indexOf($e)])}for(let ke=0;ke<yt.length;ke++){let[rt,$e]=yt[ke],lt=rt==="template"?T:W[rt];lt._x_currentIfEl&&(lt=lt._x_currentIfEl);let Wt=ve[$e],vi=Ze[$e],Di=document.importNode(T.content,!0).firstElementChild,ar=z(Wt);ri(Di,ar,T),Di._x_refreshXForScope=es=>{Object.entries(es).forEach(([ts,lr])=>{ar[ts]=lr})},ft(()=>{lt.after(Di),xe(Di)}),typeof vi=="object"&&D("x-for key cannot be an object, it must be a string or an integer",T),W[vi]=Di}for(let ke=0;ke<oi.length;ke++)W[oi[ke]]._x_refreshXForScope(ve[Ze.indexOf(oi[ke])]);T._x_prevKeys=Ze})}function yp(h){let g=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,w=/^\s*\(|\)\s*$/g,I=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,O=h.match(I);if(!O)return;let T={};T.items=O[2].trim();let k=O[1].replace(w,"").trim(),W=k.match(g);return W?(T.item=k.replace(g,"").trim(),T.index=W[1].trim(),W[2]&&(T.collection=W[2].trim())):T.item=k,T}function xh(h,g,w,I){let O={};return/^\[.*\]$/.test(h.item)&&Array.isArray(g)?h.item.replace("[","").replace("]","").split(",").map(k=>k.trim()).forEach((k,W)=>{O[k]=g[W]}):/^\{.*\}$/.test(h.item)&&!Array.isArray(g)&&typeof g=="object"?h.item.replace("{","").replace("}","").split(",").map(k=>k.trim()).forEach(k=>{O[k]=g[k]}):O[h.item]=g,h.index&&(O[h.index]=w),h.collection&&(O[h.collection]=I),O}function vp(h){return!Array.isArray(h)&&!isNaN(h)}function Eh(){}Eh.inline=(h,{expression:g},{cleanup:w})=>{let I=We(h);I._x_refs||(I._x_refs={}),I._x_refs[g]=h,w(()=>delete I._x_refs[g])},He("ref",Eh),He("if",(h,{expression:g},{effect:w,cleanup:I})=>{h.tagName.toLowerCase()!=="template"&&D("x-if can only be used on a <template> tag",h);let O=oe(h,g),T=()=>{if(h._x_currentIfEl)return h._x_currentIfEl;let W=h.content.cloneNode(!0).firstElementChild;return ri(W,{},h),ft(()=>{h.after(W),xe(W)}),h._x_currentIfEl=W,h._x_undoIf=()=>{q(W,ae=>{ae._x_effects&&ae._x_effects.forEach(S)}),W.remove(),delete h._x_currentIfEl},W},k=()=>{!h._x_undoIf||(h._x_undoIf(),delete h._x_undoIf)};w(()=>O(W=>{W?T():k()})),I(()=>h._x_undoIf&&h._x_undoIf())}),He("id",(h,{expression:g},{evaluate:w})=>{w(g).forEach(O=>op(h,O))}),Pi(Mi("@",Zr(ut("on:")))),He("on",Vs((h,{value:g,modifiers:w,expression:I},{cleanup:O})=>{let T=I?oe(h,I):()=>{};h.tagName.toLowerCase()==="template"&&(h._x_forwardEvents||(h._x_forwardEvents=[]),h._x_forwardEvents.includes(g)||h._x_forwardEvents.push(g));let k=Da(h,g,w,W=>{T(()=>{},{scope:{$event:W},params:[W]})});O(()=>k())})),Zs("Collapse","collapse","collapse"),Zs("Intersect","intersect","intersect"),Zs("Focus","trap","focus"),Zs("Mask","mask","mask");function Zs(h,g,w){He(g,I=>D(`You can't use [x-${g}] without first installing the "${h}" plugin here: https://alpinejs.dev/plugins/${w}`,I))}Jr.setEvaluator(Te),Jr.setReactivityEngine({reactive:Ks.reactive,effect:Ks.effect,release:Ks.stop,raw:Ks.toRaw});var wp=Jr,Ap=wp}}),Fp=ln({"../alpine/packages/collapse/dist/module.cjs.js"(n,e){var t=Object.defineProperty,i=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,o=(_,p)=>{for(var m in p)t(_,m,{get:p[m],enumerable:!0})},a=(_,p,m,y)=>{if(p&&typeof p=="object"||typeof p=="function")for(let v of r(p))!s.call(_,v)&&v!==m&&t(_,v,{get:()=>p[v],enumerable:!(y=i(p,v))||y.enumerable});return _},l=_=>a(t({},"__esModule",{value:!0}),_),c={};o(c,{default:()=>f}),e.exports=l(c);function u(_){_.directive("collapse",p),p.inline=(m,{modifiers:y})=>{!y.includes("min")||(m._x_doShow=()=>{},m._x_doHide=()=>{})};function p(m,{modifiers:y}){let v=d(y,"duration",250)/1e3,A=d(y,"min",0),x=!y.includes("min");m._x_isShown||(m.style.height=`${A}px`),!m._x_isShown&&x&&(m.hidden=!0),m._x_isShown||(m.style.overflow="hidden");let E=(L,R)=>{let S=_.setStyles(L,R);return R.height?()=>{}:S},M={transitionProperty:"height",transitionDuration:`${v}s`,transitionTimingFunction:"cubic-bezier(0.4, 0.0, 0.2, 1)"};m._x_transition={in(L=()=>{},R=()=>{}){x&&(m.hidden=!1),x&&(m.style.display=null);let S=m.getBoundingClientRect().height;m.style.height="auto";let B=m.getBoundingClientRect().height;S===B&&(S=A),_.transition(m,_.setStyles,{during:M,start:{height:S+"px"},end:{height:B+"px"}},()=>m._x_isShown=!0,()=>{m.getBoundingClientRect().height==B&&(m.style.overflow=null)})},out(L=()=>{},R=()=>{}){let S=m.getBoundingClientRect().height;_.transition(m,E,{during:M,start:{height:S+"px"},end:{height:A+"px"}},()=>m.style.overflow="hidden",()=>{m._x_isShown=!1,m.style.height==`${A}px`&&x&&(m.style.display="none",m.hidden=!0)})}}}}function d(_,p,m){if(_.indexOf(p)===-1)return m;const y=_[_.indexOf(p)+1];if(!y)return m;if(p==="duration"){let v=y.match(/([0-9]+)ms/);if(v)return v[1]}if(p==="min"){let v=y.match(/([0-9]+)px/);if(v)return v[1]}return y}var f=u}}),Dp=ln({"../alpine/packages/focus/dist/module.cjs.js"(n,e){var t=Object.create,i=Object.defineProperty,r=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,o=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty,l=(R,S)=>function(){return S||(0,R[s(R)[0]])((S={exports:{}}).exports,S),S.exports},c=(R,S)=>{for(var B in S)i(R,B,{get:S[B],enumerable:!0})},u=(R,S,B,U)=>{if(S&&typeof S=="object"||typeof S=="function")for(let z of s(S))!a.call(R,z)&&z!==B&&i(R,z,{get:()=>S[z],enumerable:!(U=r(S,z))||U.enumerable});return R},d=(R,S,B)=>(B=R!=null?t(o(R)):{},u(S||!R||!R.__esModule?i(B,"default",{value:R,enumerable:!0}):B,R)),f=R=>u(i({},"__esModule",{value:!0}),R),_=l({"node_modules/tabbable/dist/index.js"(R){Object.defineProperty(R,"__esModule",{value:!0});var S=["input","select","textarea","a[href]","button","[tabindex]:not(slot)","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"],B=S.join(","),U=typeof Element=="undefined",z=U?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,X=!U&&Element.prototype.getRootNode?function(xe){return xe.getRootNode()}:function(xe){return xe.ownerDocument},V=function(Z,re,Se){var de=Array.prototype.slice.apply(Z.querySelectorAll(B));return re&&z.call(Z,B)&&de.unshift(Z),de=de.filter(Se),de},Ae=function xe(Z,re,Se){for(var de=[],it=Array.from(Z);it.length;){var ye=it.shift();if(ye.tagName==="SLOT"){var se=ye.assignedElements(),he=se.length?se:ye.children,Ee=xe(he,!0,Se);Se.flatten?de.push.apply(de,Ee):de.push({scope:ye,candidates:Ee})}else{var Ye=z.call(ye,B);Ye&&Se.filter(ye)&&(re||!Z.includes(ye))&&de.push(ye);var Pe=ye.shadowRoot||typeof Se.getShadowRoot=="function"&&Se.getShadowRoot(ye),nt=!Se.shadowRootFilter||Se.shadowRootFilter(ye);if(Pe&&nt){var at=xe(Pe===!0?ye.children:Pe.children,!0,Se);Se.flatten?de.push.apply(de,at):de.push({scope:ye,candidates:at})}else it.unshift.apply(it,ye.children)}}return de},ee=function(Z,re){return Z.tabIndex<0&&(re||/^(AUDIO|VIDEO|DETAILS)$/.test(Z.tagName)||Z.isContentEditable)&&isNaN(parseInt(Z.getAttribute("tabindex"),10))?0:Z.tabIndex},F=function(Z,re){return Z.tabIndex===re.tabIndex?Z.documentOrder-re.documentOrder:Z.tabIndex-re.tabIndex},N=function(Z){return Z.tagName==="INPUT"},G=function(Z){return N(Z)&&Z.type==="hidden"},K=function(Z){var re=Z.tagName==="DETAILS"&&Array.prototype.slice.apply(Z.children).some(function(Se){return Se.tagName==="SUMMARY"});return re},H=function(Z,re){for(var Se=0;Se<Z.length;Se++)if(Z[Se].checked&&Z[Se].form===re)return Z[Se]},q=function(Z){if(!Z.name)return!0;var re=Z.form||X(Z),Se=function(se){return re.querySelectorAll('input[type="radio"][name="'+se+'"]')},de;if(typeof window!="undefined"&&typeof window.CSS!="undefined"&&typeof window.CSS.escape=="function")de=Se(window.CSS.escape(Z.name));else try{de=Se(Z.name)}catch(ye){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",ye.message),!1}var it=H(de,Z.form);return!it||it===Z},D=function(Z){return N(Z)&&Z.type==="radio"},ce=function(Z){return D(Z)&&!q(Z)},J=function(Z){var re=Z.getBoundingClientRect(),Se=re.width,de=re.height;return Se===0&&de===0},ne=function(Z,re){var Se=re.displayCheck,de=re.getShadowRoot;if(getComputedStyle(Z).visibility==="hidden")return!0;var it=z.call(Z,"details>summary:first-of-type"),ye=it?Z.parentElement:Z;if(z.call(ye,"details:not([open]) *"))return!0;var se=X(Z).host,he=(se==null?void 0:se.ownerDocument.contains(se))||Z.ownerDocument.contains(Z);if(!Se||Se==="full"){if(typeof de=="function"){for(var Ee=Z;Z;){var Ye=Z.parentElement,Pe=X(Z);if(Ye&&!Ye.shadowRoot&&de(Ye)===!0)return J(Z);Z.assignedSlot?Z=Z.assignedSlot:!Ye&&Pe!==Z.ownerDocument?Z=Pe.host:Z=Ye}Z=Ee}if(he)return!Z.getClientRects().length}else if(Se==="non-zero-area")return J(Z);return!1},fe=function(Z){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(Z.tagName))for(var re=Z.parentElement;re;){if(re.tagName==="FIELDSET"&&re.disabled){for(var Se=0;Se<re.children.length;Se++){var de=re.children.item(Se);if(de.tagName==="LEGEND")return z.call(re,"fieldset[disabled] *")?!0:!de.contains(Z)}return!0}re=re.parentElement}return!1},Ne=function(Z,re){return!(re.disabled||G(re)||ne(re,Z)||K(re)||fe(re))},le=function(Z,re){return!(ce(re)||ee(re)<0||!Ne(Z,re))},pe=function(Z){var re=parseInt(Z.getAttribute("tabindex"),10);return!!(isNaN(re)||re>=0)},Le=function xe(Z){var re=[],Se=[];return Z.forEach(function(de,it){var ye=!!de.scope,se=ye?de.scope:de,he=ee(se,ye),Ee=ye?xe(de.candidates):se;he===0?ye?re.push.apply(re,Ee):re.push(se):Se.push({documentOrder:it,tabIndex:he,item:de,isScope:ye,content:Ee})}),Se.sort(F).reduce(function(de,it){return it.isScope?de.push.apply(de,it.content):de.push(it.content),de},[]).concat(re)},We=function(Z,re){re=re||{};var Se;return re.getShadowRoot?Se=Ae([Z],re.includeContainer,{filter:le.bind(null,re),flatten:!1,getShadowRoot:re.getShadowRoot,shadowRootFilter:pe}):Se=V(Z,re.includeContainer,le.bind(null,re)),Le(Se)},Ie=function(Z,re){re=re||{};var Se;return re.getShadowRoot?Se=Ae([Z],re.includeContainer,{filter:Ne.bind(null,re),flatten:!0,getShadowRoot:re.getShadowRoot}):Se=V(Z,re.includeContainer,Ne.bind(null,re)),Se},be=function(Z,re){if(re=re||{},!Z)throw new Error("No node provided");return z.call(Z,B)===!1?!1:le(re,Z)},pt=S.concat("iframe").join(","),ot=function(Z,re){if(re=re||{},!Z)throw new Error("No node provided");return z.call(Z,pt)===!1?!1:Ne(re,Z)};R.focusable=Ie,R.isFocusable=ot,R.isTabbable=be,R.tabbable=We}}),p=l({"node_modules/focus-trap/dist/focus-trap.js"(R){Object.defineProperty(R,"__esModule",{value:!0});var S=_();function B(q,D){var ce=Object.keys(q);if(Object.getOwnPropertySymbols){var J=Object.getOwnPropertySymbols(q);D&&(J=J.filter(function(ne){return Object.getOwnPropertyDescriptor(q,ne).enumerable})),ce.push.apply(ce,J)}return ce}function U(q){for(var D=1;D<arguments.length;D++){var ce=arguments[D]!=null?arguments[D]:{};D%2?B(Object(ce),!0).forEach(function(J){z(q,J,ce[J])}):Object.getOwnPropertyDescriptors?Object.defineProperties(q,Object.getOwnPropertyDescriptors(ce)):B(Object(ce)).forEach(function(J){Object.defineProperty(q,J,Object.getOwnPropertyDescriptor(ce,J))})}return q}function z(q,D,ce){return D in q?Object.defineProperty(q,D,{value:ce,enumerable:!0,configurable:!0,writable:!0}):q[D]=ce,q}var X=function(){var q=[];return{activateTrap:function(ce){if(q.length>0){var J=q[q.length-1];J!==ce&&J.pause()}var ne=q.indexOf(ce);ne===-1||q.splice(ne,1),q.push(ce)},deactivateTrap:function(ce){var J=q.indexOf(ce);J!==-1&&q.splice(J,1),q.length>0&&q[q.length-1].unpause()}}}(),V=function(D){return D.tagName&&D.tagName.toLowerCase()==="input"&&typeof D.select=="function"},Ae=function(D){return D.key==="Escape"||D.key==="Esc"||D.keyCode===27},ee=function(D){return D.key==="Tab"||D.keyCode===9},F=function(D){return setTimeout(D,0)},N=function(D,ce){var J=-1;return D.every(function(ne,fe){return ce(ne)?(J=fe,!1):!0}),J},G=function(D){for(var ce=arguments.length,J=new Array(ce>1?ce-1:0),ne=1;ne<ce;ne++)J[ne-1]=arguments[ne];return typeof D=="function"?D.apply(void 0,J):D},K=function(D){return D.target.shadowRoot&&typeof D.composedPath=="function"?D.composedPath()[0]:D.target},H=function(D,ce){var J=(ce==null?void 0:ce.document)||document,ne=U({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0},ce),fe={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0},Ne,le=function(se,he,Ee){return se&&se[he]!==void 0?se[he]:ne[Ee||he]},pe=function(se){return fe.containerGroups.findIndex(function(he){var Ee=he.container,Ye=he.tabbableNodes;return Ee.contains(se)||Ye.find(function(Pe){return Pe===se})})},Le=function(se){var he=ne[se];if(typeof he=="function"){for(var Ee=arguments.length,Ye=new Array(Ee>1?Ee-1:0),Pe=1;Pe<Ee;Pe++)Ye[Pe-1]=arguments[Pe];he=he.apply(void 0,Ye)}if(he===!0&&(he=void 0),!he){if(he===void 0||he===!1)return he;throw new Error("`".concat(se,"` was specified but was not a node, or did not return a node"))}var nt=he;if(typeof he=="string"&&(nt=J.querySelector(he),!nt))throw new Error("`".concat(se,"` as selector refers to no known node"));return nt},We=function(){var se=Le("initialFocus");if(se===!1)return!1;if(se===void 0)if(pe(J.activeElement)>=0)se=J.activeElement;else{var he=fe.tabbableGroups[0],Ee=he&&he.firstTabbableNode;se=Ee||Le("fallbackFocus")}if(!se)throw new Error("Your focus-trap needs to have at least one focusable element");return se},Ie=function(){if(fe.containerGroups=fe.containers.map(function(se){var he=S.tabbable(se,ne.tabbableOptions),Ee=S.focusable(se,ne.tabbableOptions);return{container:se,tabbableNodes:he,focusableNodes:Ee,firstTabbableNode:he.length>0?he[0]:null,lastTabbableNode:he.length>0?he[he.length-1]:null,nextTabbableNode:function(Pe){var nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,at=Ee.findIndex(function(Ft){return Ft===Pe});if(!(at<0))return nt?Ee.slice(at+1).find(function(Ft){return S.isTabbable(Ft,ne.tabbableOptions)}):Ee.slice(0,at).reverse().find(function(Ft){return S.isTabbable(Ft,ne.tabbableOptions)})}}}),fe.tabbableGroups=fe.containerGroups.filter(function(se){return se.tabbableNodes.length>0}),fe.tabbableGroups.length<=0&&!Le("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},be=function ye(se){if(se!==!1&&se!==J.activeElement){if(!se||!se.focus){ye(We());return}se.focus({preventScroll:!!ne.preventScroll}),fe.mostRecentlyFocusedNode=se,V(se)&&se.select()}},pt=function(se){var he=Le("setReturnFocus",se);return he||(he===!1?!1:se)},ot=function(se){var he=K(se);if(!(pe(he)>=0)){if(G(ne.clickOutsideDeactivates,se)){Ne.deactivate({returnFocus:ne.returnFocusOnDeactivate&&!S.isFocusable(he,ne.tabbableOptions)});return}G(ne.allowOutsideClick,se)||se.preventDefault()}},xe=function(se){var he=K(se),Ee=pe(he)>=0;Ee||he instanceof Document?Ee&&(fe.mostRecentlyFocusedNode=he):(se.stopImmediatePropagation(),be(fe.mostRecentlyFocusedNode||We()))},Z=function(se){var he=K(se);Ie();var Ee=null;if(fe.tabbableGroups.length>0){var Ye=pe(he),Pe=Ye>=0?fe.containerGroups[Ye]:void 0;if(Ye<0)se.shiftKey?Ee=fe.tabbableGroups[fe.tabbableGroups.length-1].lastTabbableNode:Ee=fe.tabbableGroups[0].firstTabbableNode;else if(se.shiftKey){var nt=N(fe.tabbableGroups,function(Qi){var ft=Qi.firstTabbableNode;return he===ft});if(nt<0&&(Pe.container===he||S.isFocusable(he,ne.tabbableOptions)&&!S.isTabbable(he,ne.tabbableOptions)&&!Pe.nextTabbableNode(he,!1))&&(nt=Ye),nt>=0){var at=nt===0?fe.tabbableGroups.length-1:nt-1,Ft=fe.tabbableGroups[at];Ee=Ft.lastTabbableNode}}else{var ht=N(fe.tabbableGroups,function(Qi){var ft=Qi.lastTabbableNode;return he===ft});if(ht<0&&(Pe.container===he||S.isFocusable(he,ne.tabbableOptions)&&!S.isTabbable(he,ne.tabbableOptions)&&!Pe.nextTabbableNode(he))&&(ht=Ye),ht>=0){var ui=ht===fe.tabbableGroups.length-1?0:ht+1,On=fe.tabbableGroups[ui];Ee=On.firstTabbableNode}}}else Ee=Le("fallbackFocus");Ee&&(se.preventDefault(),be(Ee))},re=function(se){if(Ae(se)&&G(ne.escapeDeactivates,se)!==!1){se.preventDefault(),Ne.deactivate();return}if(ee(se)){Z(se);return}},Se=function(se){var he=K(se);pe(he)>=0||G(ne.clickOutsideDeactivates,se)||G(ne.allowOutsideClick,se)||(se.preventDefault(),se.stopImmediatePropagation())},de=function(){if(!!fe.active)return X.activateTrap(Ne),fe.delayInitialFocusTimer=ne.delayInitialFocus?F(function(){be(We())}):be(We()),J.addEventListener("focusin",xe,!0),J.addEventListener("mousedown",ot,{capture:!0,passive:!1}),J.addEventListener("touchstart",ot,{capture:!0,passive:!1}),J.addEventListener("click",Se,{capture:!0,passive:!1}),J.addEventListener("keydown",re,{capture:!0,passive:!1}),Ne},it=function(){if(!!fe.active)return J.removeEventListener("focusin",xe,!0),J.removeEventListener("mousedown",ot,!0),J.removeEventListener("touchstart",ot,!0),J.removeEventListener("click",Se,!0),J.removeEventListener("keydown",re,!0),Ne};return Ne={get active(){return fe.active},get paused(){return fe.paused},activate:function(se){if(fe.active)return this;var he=le(se,"onActivate"),Ee=le(se,"onPostActivate"),Ye=le(se,"checkCanFocusTrap");Ye||Ie(),fe.active=!0,fe.paused=!1,fe.nodeFocusedBeforeActivation=J.activeElement,he&&he();var Pe=function(){Ye&&Ie(),de(),Ee&&Ee()};return Ye?(Ye(fe.containers.concat()).then(Pe,Pe),this):(Pe(),this)},deactivate:function(se){if(!fe.active)return this;var he=U({onDeactivate:ne.onDeactivate,onPostDeactivate:ne.onPostDeactivate,checkCanReturnFocus:ne.checkCanReturnFocus},se);clearTimeout(fe.delayInitialFocusTimer),fe.delayInitialFocusTimer=void 0,it(),fe.active=!1,fe.paused=!1,X.deactivateTrap(Ne);var Ee=le(he,"onDeactivate"),Ye=le(he,"onPostDeactivate"),Pe=le(he,"checkCanReturnFocus"),nt=le(he,"returnFocus","returnFocusOnDeactivate");Ee&&Ee();var at=function(){F(function(){nt&&be(pt(fe.nodeFocusedBeforeActivation)),Ye&&Ye()})};return nt&&Pe?(Pe(pt(fe.nodeFocusedBeforeActivation)).then(at,at),this):(at(),this)},pause:function(){return fe.paused||!fe.active?this:(fe.paused=!0,it(),this)},unpause:function(){return!fe.paused||!fe.active?this:(fe.paused=!1,Ie(),de(),this)},updateContainerElements:function(se){var he=[].concat(se).filter(Boolean);return fe.containers=he.map(function(Ee){return typeof Ee=="string"?J.querySelector(Ee):Ee}),fe.active&&Ie(),this}},Ne.updateContainerElements(D),Ne};R.createFocusTrap=H}}),m={};c(m,{default:()=>L}),e.exports=f(m);var y=d(p()),v=d(_());function A(R){let S,B;window.addEventListener("focusin",()=>{S=B,B=document.activeElement}),R.magic("focus",U=>{let z=U;return{__noscroll:!1,__wrapAround:!1,within(X){return z=X,this},withoutScrolling(){return this.__noscroll=!0,this},noscroll(){return this.__noscroll=!0,this},withWrapAround(){return this.__wrapAround=!0,this},wrap(){return this.withWrapAround()},focusable(X){return(0,v.isFocusable)(X)},previouslyFocused(){return S},lastFocused(){return S},focused(){return B},focusables(){return Array.isArray(z)?z:(0,v.focusable)(z,{displayCheck:"none"})},all(){return this.focusables()},isFirst(X){let V=this.all();return V[0]&&V[0].isSameNode(X)},isLast(X){let V=this.all();return V.length&&V.slice(-1)[0].isSameNode(X)},getFirst(){return this.all()[0]},getLast(){return this.all().slice(-1)[0]},getNext(){let X=this.all(),V=document.activeElement;if(X.indexOf(V)!==-1)return this.__wrapAround&&X.indexOf(V)===X.length-1?X[0]:X[X.indexOf(V)+1]},getPrevious(){let X=this.all(),V=document.activeElement;if(X.indexOf(V)!==-1)return this.__wrapAround&&X.indexOf(V)===0?X.slice(-1)[0]:X[X.indexOf(V)-1]},first(){this.focus(this.getFirst())},last(){this.focus(this.getLast())},next(){this.focus(this.getNext())},previous(){this.focus(this.getPrevious())},prev(){return this.previous()},focus(X){!X||setTimeout(()=>{X.hasAttribute("tabindex")||X.setAttribute("tabindex","0"),X.focus({preventScroll:this._noscroll})})}}}),R.directive("trap",R.skipDuringClone((U,{expression:z,modifiers:X},{effect:V,evaluateLater:Ae,cleanup:ee})=>{let F=Ae(z),N=!1,G={escapeDeactivates:!1,allowOutsideClick:!0,fallbackFocus:()=>U},K=U.querySelector("[autofocus]");K&&(G.initialFocus=K);let H=(0,y.createFocusTrap)(U,G),q=()=>{},D=()=>{};const ce=()=>{q(),q=()=>{},D(),D=()=>{},H.deactivate({returnFocus:!X.includes("noreturn")})};V(()=>F(J=>{N!==J&&(J&&!N&&(X.includes("noscroll")&&(D=M()),X.includes("inert")&&(q=x(U)),setTimeout(()=>{H.activate()},15)),!J&&N&&ce(),N=!!J)})),ee(ce)},(U,{expression:z,modifiers:X},{evaluate:V})=>{X.includes("inert")&&V(z)&&x(U)}))}function x(R){let S=[];return E(R,B=>{let U=B.hasAttribute("aria-hidden");B.setAttribute("aria-hidden","true"),S.push(()=>U||B.removeAttribute("aria-hidden"))}),()=>{for(;S.length;)S.pop()()}}function E(R,S){R.isSameNode(document.body)||!R.parentNode||Array.from(R.parentNode.children).forEach(B=>{B.isSameNode(R)?E(R.parentNode,S):S(B)})}function M(){let R=document.documentElement.style.overflow,S=document.documentElement.style.paddingRight,B=window.innerWidth-document.documentElement.clientWidth;return document.documentElement.style.overflow="hidden",document.documentElement.style.paddingRight=`${B}px`,()=>{document.documentElement.style.overflow=R,document.documentElement.style.paddingRight=S}}var L=A}}),kp=ln({"../alpine/packages/persist/dist/module.cjs.js"(n,e){var t=Object.defineProperty,i=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,o=(m,y)=>{for(var v in y)t(m,v,{get:y[v],enumerable:!0})},a=(m,y,v,A)=>{if(y&&typeof y=="object"||typeof y=="function")for(let x of r(y))!s.call(m,x)&&x!==v&&t(m,x,{get:()=>y[x],enumerable:!(A=i(y,x))||A.enumerable});return m},l=m=>a(t({},"__esModule",{value:!0}),m),c={};o(c,{default:()=>p}),e.exports=l(c);function u(m){let y=()=>{let v,A;try{A=localStorage}catch(x){console.error(x),console.warn("Alpine: $persist is using temporary storage since localStorage is unavailable.");let E=new Map;A={getItem:E.get.bind(E),setItem:E.set.bind(E)}}return m.interceptor((x,E,M,L,R)=>{let S=v||`_x_${L}`,B=d(S,A)?f(S,A):x;return M(B),m.effect(()=>{let U=E();_(S,U,A),M(U)}),B},x=>{x.as=E=>(v=E,x),x.using=E=>(A=E,x)})};Object.defineProperty(m,"$persist",{get:()=>y()}),m.magic("persist",y),m.persist=(v,{get:A,set:x},E=localStorage)=>{let M=d(v,E)?f(v,E):A();x(M),m.effect(()=>{let L=A();_(v,L,E),x(L)})}}function d(m,y){return y.getItem(m)!==null}function f(m,y){return JSON.parse(y.getItem(m,y))}function _(m,y,v){v.setItem(m,JSON.stringify(y))}var p=u}}),Np=ln({"../alpine/packages/intersect/dist/module.cjs.js"(n,e){var t=Object.defineProperty,i=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,o=(m,y)=>{for(var v in y)t(m,v,{get:y[v],enumerable:!0})},a=(m,y,v,A)=>{if(y&&typeof y=="object"||typeof y=="function")for(let x of r(y))!s.call(m,x)&&x!==v&&t(m,x,{get:()=>y[x],enumerable:!(A=i(y,x))||A.enumerable});return m},l=m=>a(t({},"__esModule",{value:!0}),m),c={};o(c,{default:()=>p}),e.exports=l(c);function u(m){m.directive("intersect",(y,{value:v,expression:A,modifiers:x},{evaluateLater:E,cleanup:M})=>{let L=E(A),R={rootMargin:_(x),threshold:d(x)},S=new IntersectionObserver(B=>{B.forEach(U=>{U.isIntersecting!==(v==="leave")&&(L(),x.includes("once")&&S.disconnect())})},R);S.observe(y),M(()=>{S.disconnect()})})}function d(m){if(m.includes("full"))return .99;if(m.includes("half"))return .5;if(!m.includes("threshold"))return 0;let y=m[m.indexOf("threshold")+1];return y==="100"?1:y==="0"?0:Number(`.${y}`)}function f(m){let y=m.match(/^(-?[0-9]+)(px|%)?$/);return y?y[1]+(y[2]||"px"):void 0}function _(m){const y="margin",v="0px 0px 0px 0px",A=m.indexOf(y);if(A===-1)return v;let x=[];for(let E=1;E<5;E++)x.push(f(m[A+E]||""));return x=x.filter(E=>E!==void 0),x.length?x.join(" ").trim():v}var p=u}}),Bp=ln({"../alpine/packages/anchor/dist/module.cjs.js"(n,e){var t=Object.defineProperty,i=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,o=(C,P)=>{for(var Y in P)t(C,Y,{get:P[Y],enumerable:!0})},a=(C,P,Y,Q)=>{if(P&&typeof P=="object"||typeof P=="function")for(let ie of r(P))!s.call(C,ie)&&ie!==Y&&t(C,ie,{get:()=>P[ie],enumerable:!(Q=i(P,ie))||Q.enumerable});return C},l=C=>a(t({},"__esModule",{value:!0}),C),c={};o(c,{default:()=>gt}),e.exports=l(c);var u=Math.min,d=Math.max,f=Math.round,_=Math.floor,p=C=>({x:C,y:C}),m={left:"right",right:"left",bottom:"top",top:"bottom"},y={start:"end",end:"start"};function v(C,P,Y){return d(C,u(P,Y))}function A(C,P){return typeof C=="function"?C(P):C}function x(C){return C.split("-")[0]}function E(C){return C.split("-")[1]}function M(C){return C==="x"?"y":"x"}function L(C){return C==="y"?"height":"width"}function R(C){return["top","bottom"].includes(x(C))?"y":"x"}function S(C){return M(R(C))}function B(C,P,Y){Y===void 0&&(Y=!1);const Q=E(C),ie=S(C),ue=L(ie);let oe=ie==="x"?Q===(Y?"end":"start")?"right":"left":Q==="start"?"bottom":"top";return P.reference[ue]>P.floating[ue]&&(oe=Ae(oe)),[oe,Ae(oe)]}function U(C){const P=Ae(C);return[z(C),P,z(P)]}function z(C){return C.replace(/start|end/g,P=>y[P])}function X(C,P,Y){const Q=["left","right"],ie=["right","left"],ue=["top","bottom"],oe=["bottom","top"];switch(C){case"top":case"bottom":return Y?P?ie:Q:P?Q:ie;case"left":case"right":return P?ue:oe;default:return[]}}function V(C,P,Y,Q){const ie=E(C);let ue=X(x(C),Y==="start",Q);return ie&&(ue=ue.map(oe=>oe+"-"+ie),P&&(ue=ue.concat(ue.map(z)))),ue}function Ae(C){return C.replace(/left|right|bottom|top/g,P=>m[P])}function ee(C){return{top:0,right:0,bottom:0,left:0,...C}}function F(C){return typeof C!="number"?ee(C):{top:C,right:C,bottom:C,left:C}}function N(C){return{...C,top:C.y,left:C.x,right:C.x+C.width,bottom:C.y+C.height}}function G(C,P,Y){let{reference:Q,floating:ie}=C;const ue=R(P),oe=S(P),_e=L(oe),Re=x(P),Te=ue==="y",Xe=Q.x+Q.width/2-ie.width/2,ze=Q.y+Q.height/2-ie.height/2,et=Q[_e]/2-ie[_e]/2;let Fe;switch(Re){case"top":Fe={x:Xe,y:Q.y-ie.height};break;case"bottom":Fe={x:Xe,y:Q.y+Q.height};break;case"right":Fe={x:Q.x+Q.width,y:ze};break;case"left":Fe={x:Q.x-ie.width,y:ze};break;default:Fe={x:Q.x,y:Q.y}}switch(E(P)){case"start":Fe[oe]-=et*(Y&&Te?-1:1);break;case"end":Fe[oe]+=et*(Y&&Te?-1:1);break}return Fe}var K=async(C,P,Y)=>{const{placement:Q="bottom",strategy:ie="absolute",middleware:ue=[],platform:oe}=Y,_e=ue.filter(Boolean),Re=await(oe.isRTL==null?void 0:oe.isRTL(P));let Te=await oe.getElementRects({reference:C,floating:P,strategy:ie}),{x:Xe,y:ze}=G(Te,Q,Re),et=Q,Fe={},je=0;for(let Ke=0;Ke<_e.length;Ke++){const{name:ut,fn:Je}=_e[Ke],{x:vt,y:He,data:Zt,reset:Tt}=await Je({x:Xe,y:ze,initialPlacement:Q,placement:et,strategy:ie,middlewareData:Fe,rects:Te,platform:oe,elements:{reference:C,floating:P}});if(Xe=vt!=null?vt:Xe,ze=He!=null?He:ze,Fe={...Fe,[ut]:{...Fe[ut],...Zt}},Tt&&je<=50){je++,typeof Tt=="object"&&(Tt.placement&&(et=Tt.placement),Tt.rects&&(Te=Tt.rects===!0?await oe.getElementRects({reference:C,floating:P,strategy:ie}):Tt.rects),{x:Xe,y:ze}=G(Te,et,Re)),Ke=-1;continue}}return{x:Xe,y:ze,placement:et,strategy:ie,middlewareData:Fe}};async function H(C,P){var Y;P===void 0&&(P={});const{x:Q,y:ie,platform:ue,rects:oe,elements:_e,strategy:Re}=C,{boundary:Te="clippingAncestors",rootBoundary:Xe="viewport",elementContext:ze="floating",altBoundary:et=!1,padding:Fe=0}=A(P,C),je=F(Fe),ut=_e[et?ze==="floating"?"reference":"floating":ze],Je=N(await ue.getClippingRect({element:(Y=await(ue.isElement==null?void 0:ue.isElement(ut)))==null||Y?ut:ut.contextElement||await(ue.getDocumentElement==null?void 0:ue.getDocumentElement(_e.floating)),boundary:Te,rootBoundary:Xe,strategy:Re})),vt=ze==="floating"?{...oe.floating,x:Q,y:ie}:oe.reference,He=await(ue.getOffsetParent==null?void 0:ue.getOffsetParent(_e.floating)),Zt=await(ue.isElement==null?void 0:ue.isElement(He))?await(ue.getScale==null?void 0:ue.getScale(He))||{x:1,y:1}:{x:1,y:1},Tt=N(ue.convertOffsetParentRelativeRectToViewportRelativeRect?await ue.convertOffsetParentRelativeRectToViewportRelativeRect({rect:vt,offsetParent:He,strategy:Re}):vt);return{top:(Je.top-Tt.top+je.top)/Zt.y,bottom:(Tt.bottom-Je.bottom+je.bottom)/Zt.y,left:(Je.left-Tt.left+je.left)/Zt.x,right:(Tt.right-Je.right+je.right)/Zt.x}}var q=function(C){return C===void 0&&(C={}),{name:"flip",options:C,async fn(P){var Y,Q;const{placement:ie,middlewareData:ue,rects:oe,initialPlacement:_e,platform:Re,elements:Te}=P,{mainAxis:Xe=!0,crossAxis:ze=!0,fallbackPlacements:et,fallbackStrategy:Fe="bestFit",fallbackAxisSideDirection:je="none",flipAlignment:Ke=!0,...ut}=A(C,P);if((Y=ue.arrow)!=null&&Y.alignmentOffset)return{};const Je=x(ie),vt=x(_e)===_e,He=await(Re.isRTL==null?void 0:Re.isRTL(Te.floating)),Zt=et||(vt||!Ke?[Ae(_e)]:U(_e));!et&&je!=="none"&&Zt.push(...V(_e,Ke,je,He));const Tt=[_e,...Zt],yi=await H(P,ut),Oi=[];let hn=((Q=ue.flip)==null?void 0:Q.overflows)||[];if(Xe&&Oi.push(yi[Je]),ze){const Mi=B(ie,oe,He);Oi.push(yi[Mi[0]],yi[Mi[1]])}if(hn=[...hn,{placement:ie,overflows:Oi}],!Oi.every(Mi=>Mi<=0)){var Ys,$r;const Mi=(((Ys=ue.flip)==null?void 0:Ys.index)||0)+1,Zr=Tt[Mi];if(Zr)return{data:{index:Mi,overflows:hn},reset:{placement:Zr}};let un=($r=hn.filter($i=>$i.overflows[0]<=0).sort(($i,Pi)=>$i.overflows[1]-Pi.overflows[1])[0])==null?void 0:$r.placement;if(!un)switch(Fe){case"bestFit":{var Xs;const $i=(Xs=hn.map(Pi=>[Pi.placement,Pi.overflows.filter(dn=>dn>0).reduce((dn,Hs)=>dn+Hs,0)]).sort((Pi,dn)=>Pi[1]-dn[1])[0])==null?void 0:Xs[0];$i&&(un=$i);break}case"initialPlacement":un=_e;break}if(ie!==un)return{reset:{placement:un}}}return{}}}};async function D(C,P){const{placement:Y,platform:Q,elements:ie}=C,ue=await(Q.isRTL==null?void 0:Q.isRTL(ie.floating)),oe=x(Y),_e=E(Y),Re=R(Y)==="y",Te=["left","top"].includes(oe)?-1:1,Xe=ue&&Re?-1:1,ze=A(P,C);let{mainAxis:et,crossAxis:Fe,alignmentAxis:je}=typeof ze=="number"?{mainAxis:ze,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...ze};return _e&&typeof je=="number"&&(Fe=_e==="end"?je*-1:je),Re?{x:Fe*Xe,y:et*Te}:{x:et*Te,y:Fe*Xe}}var ce=function(C){return C===void 0&&(C=0),{name:"offset",options:C,async fn(P){const{x:Y,y:Q}=P,ie=await D(P,C);return{x:Y+ie.x,y:Q+ie.y,data:ie}}}},J=function(C){return C===void 0&&(C={}),{name:"shift",options:C,async fn(P){const{x:Y,y:Q,placement:ie}=P,{mainAxis:ue=!0,crossAxis:oe=!1,limiter:_e={fn:ut=>{let{x:Je,y:vt}=ut;return{x:Je,y:vt}}},...Re}=A(C,P),Te={x:Y,y:Q},Xe=await H(P,Re),ze=R(x(ie)),et=M(ze);let Fe=Te[et],je=Te[ze];if(ue){const ut=et==="y"?"top":"left",Je=et==="y"?"bottom":"right",vt=Fe+Xe[ut],He=Fe-Xe[Je];Fe=v(vt,Fe,He)}if(oe){const ut=ze==="y"?"top":"left",Je=ze==="y"?"bottom":"right",vt=je+Xe[ut],He=je-Xe[Je];je=v(vt,je,He)}const Ke=_e.fn({...P,[et]:Fe,[ze]:je});return{...Ke,data:{x:Ke.x-Y,y:Ke.y-Q}}}}};function ne(C){return le(C)?(C.nodeName||"").toLowerCase():"#document"}function fe(C){var P;return(C==null||(P=C.ownerDocument)==null?void 0:P.defaultView)||window}function Ne(C){var P;return(P=(le(C)?C.ownerDocument:C.document)||window.document)==null?void 0:P.documentElement}function le(C){return C instanceof Node||C instanceof fe(C).Node}function pe(C){return C instanceof Element||C instanceof fe(C).Element}function Le(C){return C instanceof HTMLElement||C instanceof fe(C).HTMLElement}function We(C){return typeof ShadowRoot=="undefined"?!1:C instanceof ShadowRoot||C instanceof fe(C).ShadowRoot}function Ie(C){const{overflow:P,overflowX:Y,overflowY:Q,display:ie}=re(C);return/auto|scroll|overlay|hidden|clip/.test(P+Q+Y)&&!["inline","contents"].includes(ie)}function be(C){return["table","td","th"].includes(ne(C))}function pt(C){const P=xe(),Y=re(C);return Y.transform!=="none"||Y.perspective!=="none"||(Y.containerType?Y.containerType!=="normal":!1)||!P&&(Y.backdropFilter?Y.backdropFilter!=="none":!1)||!P&&(Y.filter?Y.filter!=="none":!1)||["transform","perspective","filter"].some(Q=>(Y.willChange||"").includes(Q))||["paint","layout","strict","content"].some(Q=>(Y.contain||"").includes(Q))}function ot(C){let P=de(C);for(;Le(P)&&!Z(P);){if(pt(P))return P;P=de(P)}return null}function xe(){return typeof CSS=="undefined"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Z(C){return["html","body","#document"].includes(ne(C))}function re(C){return fe(C).getComputedStyle(C)}function Se(C){return pe(C)?{scrollLeft:C.scrollLeft,scrollTop:C.scrollTop}:{scrollLeft:C.pageXOffset,scrollTop:C.pageYOffset}}function de(C){if(ne(C)==="html")return C;const P=C.assignedSlot||C.parentNode||We(C)&&C.host||Ne(C);return We(P)?P.host:P}function it(C){const P=de(C);return Z(P)?C.ownerDocument?C.ownerDocument.body:C.body:Le(P)&&Ie(P)?P:it(P)}function ye(C,P,Y){var Q;P===void 0&&(P=[]),Y===void 0&&(Y=!0);const ie=it(C),ue=ie===((Q=C.ownerDocument)==null?void 0:Q.body),oe=fe(ie);return ue?P.concat(oe,oe.visualViewport||[],Ie(ie)?ie:[],oe.frameElement&&Y?ye(oe.frameElement):[]):P.concat(ie,ye(ie,[],Y))}function se(C){const P=re(C);let Y=parseFloat(P.width)||0,Q=parseFloat(P.height)||0;const ie=Le(C),ue=ie?C.offsetWidth:Y,oe=ie?C.offsetHeight:Q,_e=f(Y)!==ue||f(Q)!==oe;return _e&&(Y=ue,Q=oe),{width:Y,height:Q,$:_e}}function he(C){return pe(C)?C:C.contextElement}function Ee(C){const P=he(C);if(!Le(P))return p(1);const Y=P.getBoundingClientRect(),{width:Q,height:ie,$:ue}=se(P);let oe=(ue?f(Y.width):Y.width)/Q,_e=(ue?f(Y.height):Y.height)/ie;return(!oe||!Number.isFinite(oe))&&(oe=1),(!_e||!Number.isFinite(_e))&&(_e=1),{x:oe,y:_e}}var Ye=p(0);function Pe(C){const P=fe(C);return!xe()||!P.visualViewport?Ye:{x:P.visualViewport.offsetLeft,y:P.visualViewport.offsetTop}}function nt(C,P,Y){return P===void 0&&(P=!1),!Y||P&&Y!==fe(C)?!1:P}function at(C,P,Y,Q){P===void 0&&(P=!1),Y===void 0&&(Y=!1);const ie=C.getBoundingClientRect(),ue=he(C);let oe=p(1);P&&(Q?pe(Q)&&(oe=Ee(Q)):oe=Ee(C));const _e=nt(ue,Y,Q)?Pe(ue):p(0);let Re=(ie.left+_e.x)/oe.x,Te=(ie.top+_e.y)/oe.y,Xe=ie.width/oe.x,ze=ie.height/oe.y;if(ue){const et=fe(ue),Fe=Q&&pe(Q)?fe(Q):Q;let je=et.frameElement;for(;je&&Q&&Fe!==et;){const Ke=Ee(je),ut=je.getBoundingClientRect(),Je=re(je),vt=ut.left+(je.clientLeft+parseFloat(Je.paddingLeft))*Ke.x,He=ut.top+(je.clientTop+parseFloat(Je.paddingTop))*Ke.y;Re*=Ke.x,Te*=Ke.y,Xe*=Ke.x,ze*=Ke.y,Re+=vt,Te+=He,je=fe(je).frameElement}}return N({width:Xe,height:ze,x:Re,y:Te})}function Ft(C){let{rect:P,offsetParent:Y,strategy:Q}=C;const ie=Le(Y),ue=Ne(Y);if(Y===ue)return P;let oe={scrollLeft:0,scrollTop:0},_e=p(1);const Re=p(0);if((ie||!ie&&Q!=="fixed")&&((ne(Y)!=="body"||Ie(ue))&&(oe=Se(Y)),Le(Y))){const Te=at(Y);_e=Ee(Y),Re.x=Te.x+Y.clientLeft,Re.y=Te.y+Y.clientTop}return{width:P.width*_e.x,height:P.height*_e.y,x:P.x*_e.x-oe.scrollLeft*_e.x+Re.x,y:P.y*_e.y-oe.scrollTop*_e.y+Re.y}}function ht(C){return Array.from(C.getClientRects())}function ui(C){return at(Ne(C)).left+Se(C).scrollLeft}function On(C){const P=Ne(C),Y=Se(C),Q=C.ownerDocument.body,ie=d(P.scrollWidth,P.clientWidth,Q.scrollWidth,Q.clientWidth),ue=d(P.scrollHeight,P.clientHeight,Q.scrollHeight,Q.clientHeight);let oe=-Y.scrollLeft+ui(C);const _e=-Y.scrollTop;return re(Q).direction==="rtl"&&(oe+=d(P.clientWidth,Q.clientWidth)-ie),{width:ie,height:ue,x:oe,y:_e}}function Qi(C,P){const Y=fe(C),Q=Ne(C),ie=Y.visualViewport;let ue=Q.clientWidth,oe=Q.clientHeight,_e=0,Re=0;if(ie){ue=ie.width,oe=ie.height;const Te=xe();(!Te||Te&&P==="fixed")&&(_e=ie.offsetLeft,Re=ie.offsetTop)}return{width:ue,height:oe,x:_e,y:Re}}function ft(C,P){const Y=at(C,!0,P==="fixed"),Q=Y.top+C.clientTop,ie=Y.left+C.clientLeft,ue=Le(C)?Ee(C):p(1),oe=C.clientWidth*ue.x,_e=C.clientHeight*ue.y,Re=ie*ue.x,Te=Q*ue.y;return{width:oe,height:_e,x:Re,y:Te}}function Vi(C,P,Y){let Q;if(P==="viewport")Q=Qi(C,Y);else if(P==="document")Q=On(Ne(C));else if(pe(P))Q=ft(P,Y);else{const ie=Pe(C);Q={...P,x:P.x-ie.x,y:P.y-ie.y}}return N(Q)}function mi(C,P){const Y=de(C);return Y===P||!pe(Y)||Z(Y)?!1:re(Y).position==="fixed"||mi(Y,P)}function or(C,P){const Y=P.get(C);if(Y)return Y;let Q=ye(C,[],!1).filter(_e=>pe(_e)&&ne(_e)!=="body"),ie=null;const ue=re(C).position==="fixed";let oe=ue?de(C):C;for(;pe(oe)&&!Z(oe);){const _e=re(oe),Re=pt(oe);!Re&&_e.position==="fixed"&&(ie=null),(ue?!Re&&!ie:!Re&&_e.position==="static"&&!!ie&&["absolute","fixed"].includes(ie.position)||Ie(oe)&&!Re&&mi(C,oe))?Q=Q.filter(Xe=>Xe!==oe):ie=_e,oe=de(oe)}return P.set(C,Q),Q}function Mn(C){let{element:P,boundary:Y,rootBoundary:Q,strategy:ie}=C;const oe=[...Y==="clippingAncestors"?or(P,this._c):[].concat(Y),Q],_e=oe[0],Re=oe.reduce((Te,Xe)=>{const ze=Vi(P,Xe,ie);return Te.top=d(ze.top,Te.top),Te.right=u(ze.right,Te.right),Te.bottom=u(ze.bottom,Te.bottom),Te.left=d(ze.left,Te.left),Te},Vi(P,_e,ie));return{width:Re.right-Re.left,height:Re.bottom-Re.top,x:Re.left,y:Re.top}}function _i(C){return se(C)}function Si(C,P,Y){const Q=Le(P),ie=Ne(P),ue=Y==="fixed",oe=at(C,!0,ue,P);let _e={scrollLeft:0,scrollTop:0};const Re=p(0);if(Q||!Q&&!ue)if((ne(P)!=="body"||Ie(ie))&&(_e=Se(P)),Q){const Te=at(P,!0,ue,P);Re.x=Te.x+P.clientLeft,Re.y=Te.y+P.clientTop}else ie&&(Re.x=ui(ie));return{x:oe.left+_e.scrollLeft-Re.x,y:oe.top+_e.scrollTop-Re.y,width:oe.width,height:oe.height}}function ri(C,P){return!Le(C)||re(C).position==="fixed"?null:P?P(C):C.offsetParent}function di(C,P){const Y=fe(C);if(!Le(C))return Y;let Q=ri(C,P);for(;Q&&be(Q)&&re(Q).position==="static";)Q=ri(Q,P);return Q&&(ne(Q)==="html"||ne(Q)==="body"&&re(Q).position==="static"&&!pt(Q))?Y:Q||ot(C)||Y}var Ri=async function(C){let{reference:P,floating:Y,strategy:Q}=C;const ie=this.getOffsetParent||di,ue=this.getDimensions;return{reference:Si(P,await ie(Y),Q),floating:{x:0,y:0,...await ue(Y)}}};function jt(C){return re(C).direction==="rtl"}var Ti={convertOffsetParentRelativeRectToViewportRelativeRect:Ft,getDocumentElement:Ne,getClippingRect:Mn,getOffsetParent:di,getElementRects:Ri,getClientRects:ht,getDimensions:_i,getScale:Ee,isElement:pe,isRTL:jt};function zt(C,P){let Y=null,Q;const ie=Ne(C);function ue(){clearTimeout(Q),Y&&Y.disconnect(),Y=null}function oe(_e,Re){_e===void 0&&(_e=!1),Re===void 0&&(Re=1),ue();const{left:Te,top:Xe,width:ze,height:et}=C.getBoundingClientRect();if(_e||P(),!ze||!et)return;const Fe=_(Xe),je=_(ie.clientWidth-(Te+ze)),Ke=_(ie.clientHeight-(Xe+et)),ut=_(Te),vt={rootMargin:-Fe+"px "+-je+"px "+-Ke+"px "+-ut+"px",threshold:d(0,u(1,Re))||1};let He=!0;function Zt(Tt){const yi=Tt[0].intersectionRatio;if(yi!==Re){if(!He)return oe();yi?oe(!1,yi):Q=setTimeout(()=>{oe(!1,1e-7)},100)}He=!1}try{Y=new IntersectionObserver(Zt,{...vt,root:ie.ownerDocument})}catch{Y=new IntersectionObserver(Zt,vt)}Y.observe(C)}return oe(!0),ue}function si(C,P,Y,Q){Q===void 0&&(Q={});const{ancestorScroll:ie=!0,ancestorResize:ue=!0,elementResize:oe=typeof ResizeObserver=="function",layoutShift:_e=typeof IntersectionObserver=="function",animationFrame:Re=!1}=Q,Te=he(C),Xe=ie||ue?[...Te?ye(Te):[],...ye(P)]:[];Xe.forEach(Je=>{ie&&Je.addEventListener("scroll",Y,{passive:!0}),ue&&Je.addEventListener("resize",Y)});const ze=Te&&_e?zt(Te,Y):null;let et=-1,Fe=null;oe&&(Fe=new ResizeObserver(Je=>{let[vt]=Je;vt&&vt.target===Te&&Fe&&(Fe.unobserve(P),cancelAnimationFrame(et),et=requestAnimationFrame(()=>{Fe&&Fe.observe(P)})),Y()}),Te&&!Re&&Fe.observe(Te),Fe.observe(P));let je,Ke=Re?at(C):null;Re&&ut();function ut(){const Je=at(C);Ke&&(Je.x!==Ke.x||Je.y!==Ke.y||Je.width!==Ke.width||Je.height!==Ke.height)&&Y(),Ke=Je,je=requestAnimationFrame(ut)}return Y(),()=>{Xe.forEach(Je=>{ie&&Je.removeEventListener("scroll",Y),ue&&Je.removeEventListener("resize",Y)}),ze&&ze(),Fe&&Fe.disconnect(),Fe=null,Re&&cancelAnimationFrame(je)}}var Ut=(C,P,Y)=>{const Q=new Map,ie={platform:Ti,...Y},ue={...ie.platform,_c:Q};return K(C,P,{...ie,platform:ue})};function Li(C){C.magic("anchor",P=>{if(!P._x_anchor)throw"Alpine: No x-anchor directive found on element using $anchor...";return P._x_anchor}),C.directive("anchor",(P,{expression:Y,modifiers:Q,value:ie},{cleanup:ue,evaluate:oe})=>{P._x_anchor=C.reactive({x:0,y:0});let _e=oe(Y);if(!_e)throw"Alpine: no element provided to x-anchor...";let Te=["top","top-start","top-end","right","right-start","right-end","bottom","bottom-start","bottom-end","left","left-start","left-end"].find(Fe=>Q.includes(Fe)),Xe=0,ze=Q.includes("no-style");if(Q.includes("offset")){let Fe=Q.findIndex(je=>je==="offset");Xe=Q[Fe+1]!==void 0?Number(Q[Fe+1]):Xe}let et=si(_e,P,()=>{let Fe;Ut(_e,P,{placement:Te,middleware:[q(),J({padding:5}),ce(Xe)]}).then(({x:je,y:Ke})=>{JSON.stringify({x:je,y:Ke})!==Fe&&(ze||Ki(P,je,Ke),P._x_anchor.x=je,P._x_anchor.y=Ke),Fe=JSON.stringify({x:je,y:Ke})})});ue(()=>et())})}function Ki(C,P,Y){Object.assign(C.style,{left:P+"px",top:Y+"px",position:"absolute"})}var gt=Li}}),Gp=ln({"node_modules/nprogress/nprogress.js"(n,e){(function(t,i){typeof define=="function"&&define.amd?define(i):typeof n=="object"?e.exports=i():t.NProgress=i()})(n,function(){var t={};t.version="0.2.0";var i=t.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};t.configure=function(p){var m,y;for(m in p)y=p[m],y!==void 0&&p.hasOwnProperty(m)&&(i[m]=y);return this},t.status=null,t.set=function(p){var m=t.isStarted();p=r(p,i.minimum,1),t.status=p===1?null:p;var y=t.render(!m),v=y.querySelector(i.barSelector),A=i.speed,x=i.easing;return y.offsetWidth,a(function(E){i.positionUsing===""&&(i.positionUsing=t.getPositioningCSS()),l(v,o(p,A,x)),p===1?(l(y,{transition:"none",opacity:1}),y.offsetWidth,setTimeout(function(){l(y,{transition:"all "+A+"ms linear",opacity:0}),setTimeout(function(){t.remove(),E()},A)},A)):setTimeout(E,A)}),this},t.isStarted=function(){return typeof t.status=="number"},t.start=function(){t.status||t.set(0);var p=function(){setTimeout(function(){!t.status||(t.trickle(),p())},i.trickleSpeed)};return i.trickle&&p(),this},t.done=function(p){return!p&&!t.status?this:t.inc(.3+.5*Math.random()).set(1)},t.inc=function(p){var m=t.status;return m?(typeof p!="number"&&(p=(1-m)*r(Math.random()*m,.1,.95)),m=r(m+p,0,.994),t.set(m)):t.start()},t.trickle=function(){return t.inc(Math.random()*i.trickleRate)},function(){var p=0,m=0;t.promise=function(y){return!y||y.state()==="resolved"?this:(m===0&&t.start(),p++,m++,y.always(function(){m--,m===0?(p=0,t.done()):t.set((p-m)/p)}),this)}}(),t.render=function(p){if(t.isRendered())return document.getElementById("nprogress");u(document.documentElement,"nprogress-busy");var m=document.createElement("div");m.id="nprogress",m.innerHTML=i.template;var y=m.querySelector(i.barSelector),v=p?"-100":s(t.status||0),A=document.querySelector(i.parent),x;return l(y,{transition:"all 0 linear",transform:"translate3d("+v+"%,0,0)"}),i.showSpinner||(x=m.querySelector(i.spinnerSelector),x&&_(x)),A!=document.body&&u(A,"nprogress-custom-parent"),A.appendChild(m),m},t.remove=function(){d(document.documentElement,"nprogress-busy"),d(document.querySelector(i.parent),"nprogress-custom-parent");var p=document.getElementById("nprogress");p&&_(p)},t.isRendered=function(){return!!document.getElementById("nprogress")},t.getPositioningCSS=function(){var p=document.body.style,m="WebkitTransform"in p?"Webkit":"MozTransform"in p?"Moz":"msTransform"in p?"ms":"OTransform"in p?"O":"";return m+"Perspective"in p?"translate3d":m+"Transform"in p?"translate":"margin"};function r(p,m,y){return p<m?m:p>y?y:p}function s(p){return(-1+p)*100}function o(p,m,y){var v;return i.positionUsing==="translate3d"?v={transform:"translate3d("+s(p)+"%,0,0)"}:i.positionUsing==="translate"?v={transform:"translate("+s(p)+"%,0)"}:v={"margin-left":s(p)+"%"},v.transition="all "+m+"ms "+y,v}var a=function(){var p=[];function m(){var y=p.shift();y&&y(m)}return function(y){p.push(y),p.length==1&&m()}}(),l=function(){var p=["Webkit","O","Moz","ms"],m={};function y(E){return E.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(M,L){return L.toUpperCase()})}function v(E){var M=document.body.style;if(E in M)return E;for(var L=p.length,R=E.charAt(0).toUpperCase()+E.slice(1),S;L--;)if(S=p[L]+R,S in M)return S;return E}function A(E){return E=y(E),m[E]||(m[E]=v(E))}function x(E,M,L){M=A(M),E.style[M]=L}return function(E,M){var L=arguments,R,S;if(L.length==2)for(R in M)S=M[R],S!==void 0&&M.hasOwnProperty(R)&&x(E,R,S);else x(E,L[1],L[2])}}();function c(p,m){var y=typeof p=="string"?p:f(p);return y.indexOf(" "+m+" ")>=0}function u(p,m){var y=f(p),v=y+m;c(y,m)||(p.className=v.substring(1))}function d(p,m){var y=f(p),v;!c(p,m)||(v=y.replace(" "+m+" "," "),p.className=v.substring(1,v.length-1))}function f(p){return(" "+(p.className||"")+" ").replace(/\s+/gi," ")}function _(p){p&&p.parentNode&&p.parentNode.removeChild(p)}return t})}}),jp=ln({"../alpine/packages/morph/dist/module.cjs.js"(n,e){var t=Object.defineProperty,i=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,o=(L,R)=>{for(var S in R)t(L,S,{get:R[S],enumerable:!0})},a=(L,R,S,B)=>{if(R&&typeof R=="object"||typeof R=="function")for(let U of r(R))!s.call(L,U)&&U!==S&&t(L,U,{get:()=>R[U],enumerable:!(B=i(R,U))||B.enumerable});return L},l=L=>a(t({},"__esModule",{value:!0}),L),c={};o(c,{default:()=>M,morph:()=>u}),e.exports=l(c);function u(L,R,S){A();let B,U,z,X,V,Ae,ee,F,N;function G(le={}){let pe=We=>We.getAttribute("key"),Le=()=>{};X=le.updating||Le,V=le.updated||Le,Ae=le.removing||Le,ee=le.removed||Le,F=le.adding||Le,N=le.added||Le,U=le.key||pe,z=le.lookahead||!1}function K(le,pe){if(H(le,pe))return q(le,pe);let Le=!1;if(!d(X,le,pe,()=>Le=!0)){if(le.nodeType===1&&window.Alpine&&window.Alpine.cloneNode(le,pe),p(pe)){D(le,pe),V(le,pe);return}Le||ce(le,pe),V(le,pe),J(le,pe)}}function H(le,pe){return le.nodeType!=pe.nodeType||le.nodeName!=pe.nodeName||ne(le)!=ne(pe)}function q(le,pe){if(d(Ae,le))return;let Le=pe.cloneNode(!0);d(F,Le)||(le.replaceWith(Le),ee(le),N(Le))}function D(le,pe){let Le=pe.nodeValue;le.nodeValue!==Le&&(le.nodeValue=Le)}function ce(le,pe){if(le._x_transitioning||le._x_isShown&&!pe._x_isShown||!le._x_isShown&&pe._x_isShown)return;let Le=Array.from(le.attributes),We=Array.from(pe.attributes);for(let Ie=Le.length-1;Ie>=0;Ie--){let be=Le[Ie].name;pe.hasAttribute(be)||le.removeAttribute(be)}for(let Ie=We.length-1;Ie>=0;Ie--){let be=We[Ie].name,pt=We[Ie].value;le.getAttribute(be)!==pt&&le.setAttribute(be,pt)}}function J(le,pe){le._x_teleport&&(le=le._x_teleport),pe._x_teleport&&(pe=pe._x_teleport);let Le=fe(le.children),We={},Ie=y(pe),be=y(le);for(;Ie;){x(Ie,be);let ot=ne(Ie),xe=ne(be);if(!be)if(ot&&We[ot]){let de=We[ot];le.appendChild(de),be=de}else{if(!d(F,Ie)){let de=Ie.cloneNode(!0);le.appendChild(de),N(de)}Ie=v(pe,Ie);continue}let Z=de=>de&&de.nodeType===8&&de.textContent==="[if BLOCK]><![endif]",re=de=>de&&de.nodeType===8&&de.textContent==="[if ENDBLOCK]><![endif]";if(Z(Ie)&&Z(be)){let de=0,it=be;for(;be;){let Pe=v(le,be);if(Z(Pe))de++;else if(re(Pe)&&de>0)de--;else if(re(Pe)&&de===0){be=Pe;break}be=Pe}let ye=be;de=0;let se=Ie;for(;Ie;){let Pe=v(pe,Ie);if(Z(Pe))de++;else if(re(Pe)&&de>0)de--;else if(re(Pe)&&de===0){Ie=Pe;break}Ie=Pe}let he=Ie,Ee=new m(it,ye),Ye=new m(se,he);J(Ee,Ye);continue}if(be.nodeType===1&&z&&!be.isEqualNode(Ie)){let de=v(pe,Ie),it=!1;for(;!it&&de;)de.nodeType===1&&be.isEqualNode(de)&&(it=!0,be=Ne(le,Ie,be),xe=ne(be)),de=v(pe,de)}if(ot!==xe){if(!ot&&xe){We[xe]=be,be=Ne(le,Ie,be),We[xe].remove(),be=v(le,be),Ie=v(pe,Ie);continue}if(ot&&!xe&&Le[ot]&&(be.replaceWith(Le[ot]),be=Le[ot]),ot&&xe){let de=Le[ot];if(de)We[xe]=be,be.replaceWith(de),be=de;else{We[xe]=be,be=Ne(le,Ie,be),We[xe].remove(),be=v(le,be),Ie=v(pe,Ie);continue}}}let Se=be&&v(le,be);K(be,Ie),Ie=Ie&&v(pe,Ie),be=Se}let pt=[];for(;be;)d(Ae,be)||pt.push(be),be=v(le,be);for(;pt.length;){let ot=pt.shift();ot.remove(),ee(ot)}}function ne(le){return le&&le.nodeType===1&&U(le)}function fe(le){let pe={};for(let Le of le){let We=ne(Le);We&&(pe[We]=Le)}return pe}function Ne(le,pe,Le){if(!d(F,pe)){let We=pe.cloneNode(!0);return le.insertBefore(We,Le),N(We),We}return pe}return G(S),B=typeof R=="string"?_(R):R,window.Alpine&&window.Alpine.closestDataStack&&!L._x_dataStack&&(B._x_dataStack=window.Alpine.closestDataStack(L),B._x_dataStack&&window.Alpine.cloneNode(L,B)),K(L,B),B=void 0,L}u.step=()=>{},u.log=()=>{};function d(L,...R){let S=!1;return L(...R,()=>S=!0),S}var f=!1;function _(L){const R=document.createElement("template");return R.innerHTML=L,R.content.firstElementChild}function p(L){return L.nodeType===3||L.nodeType===8}var m=class{constructor(L,R){this.startComment=L,this.endComment=R}get children(){let L=[],R=this.startComment.nextSibling;for(;R&&R!==this.endComment;)L.push(R),R=R.nextSibling;return L}appendChild(L){this.endComment.before(L)}get firstChild(){let L=this.startComment.nextSibling;if(L!==this.endComment)return L}nextNode(L){let R=L.nextSibling;if(R!==this.endComment)return R}insertBefore(L,R){return R.before(L),L}};function y(L){return L.firstChild}function v(L,R){let S;return L instanceof m?S=L.nextNode(R):S=R.nextSibling,S}function A(){if(f)return;f=!0;let L=Element.prototype.setAttribute,R=document.createElement("div");Element.prototype.setAttribute=function(B,U){if(!B.includes("@"))return L.call(this,B,U);R.innerHTML=`<span ${B}="${U}"></span>`;let z=R.firstElementChild.getAttributeNode(B);R.firstElementChild.removeAttributeNode(z),this.setAttributeNode(z)}}function x(L,R){let S=R&&R._x_bindings&&R._x_bindings.id;!S||(L.setAttribute("id",S),L.id=S)}function E(L){L.morph=u}var M=E}}),zp=ln({"../alpine/packages/mask/dist/module.cjs.js"(n,e){var t=Object.defineProperty,i=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,o=(y,v)=>{for(var A in v)t(y,A,{get:v[A],enumerable:!0})},a=(y,v,A,x)=>{if(v&&typeof v=="object"||typeof v=="function")for(let E of r(v))!s.call(y,E)&&E!==A&&t(y,E,{get:()=>v[E],enumerable:!(x=i(v,E))||x.enumerable});return y},l=y=>a(t({},"__esModule",{value:!0}),y),c={};o(c,{default:()=>m,stripDown:()=>f}),e.exports=l(c);function u(y){y.directive("mask",(v,{value:A,expression:x},{effect:E,evaluateLater:M})=>{let L=()=>x,R="";queueMicrotask(()=>{if(["function","dynamic"].includes(A)){let U=M(x);E(()=>{L=z=>{let X;return y.dontAutoEvaluateFunctions(()=>{U(V=>{X=typeof V=="function"?V(z):V},{scope:{$input:z,$money:p.bind({el:v})}})}),X},S(v,!1)})}else S(v,!1);v._x_model&&v._x_model.set(v.value)}),v.addEventListener("input",()=>S(v)),v.addEventListener("blur",()=>S(v,!1));function S(U,z=!0){let X=U.value,V=L(X);if(!V||V==="false")return!1;if(R.length-U.value.length===1)return R=U.value;let Ae=()=>{R=U.value=B(X,V)};z?d(U,V,()=>{Ae()}):Ae()}function B(U,z){if(U==="")return"";let X=f(z,U);return _(z,X)}}).before("model")}function d(y,v,A){let x=y.selectionStart,E=y.value;A();let M=E.slice(0,x),L=_(v,f(v,M)).length;y.setSelectionRange(L,L)}function f(y,v){let A=v,x="",E={9:/[0-9]/,a:/[a-zA-Z]/,"*":/[a-zA-Z0-9]/},M="";for(let L=0;L<y.length;L++){if(["9","a","*"].includes(y[L])){M+=y[L];continue}for(let R=0;R<A.length;R++)if(A[R]===y[L]){A=A.slice(0,R)+A.slice(R+1);break}}for(let L=0;L<M.length;L++){let R=!1;for(let S=0;S<A.length;S++)if(E[M[L]].test(A[S])){x+=A[S],A=A.slice(0,S)+A.slice(S+1),R=!0;break}if(!R)break}return x}function _(y,v){let A=Array.from(v),x="";for(let E=0;E<y.length;E++){if(!["9","a","*"].includes(y[E])){x+=y[E];continue}if(A.length===0)break;x+=A.shift()}return x}function p(y,v=".",A,x=2){if(y==="-")return"-";if(/^\D+$/.test(y))return"9";A==null&&(A=v===","?".":",");let E=(S,B)=>{let U="",z=0;for(let X=S.length-1;X>=0;X--)S[X]!==B&&(z===3?(U=S[X]+B+U,z=0):U=S[X]+U,z++);return U},M=y.startsWith("-")?"-":"",L=y.replaceAll(new RegExp(`[^0-9\\${v}]`,"g"),""),R=Array.from({length:L.split(v)[0].length}).fill("9").join("");return R=`${M}${E(R,A)}`,x>0&&y.includes(v)&&(R+=`${v}`+"9".repeat(x)),queueMicrotask(()=>{this.el.value.endsWith(v)||this.el.value[this.el.selectionStart-1]===v&&this.el.setSelectionRange(this.el.selectionStart-1,this.el.selectionStart-1)}),R}var m=u}}),ad=class{constructor(){this.arrays=new WeakMap}add(n,e){this.arrays.has(n)||this.arrays.set(n,[]),this.arrays.get(n).push(e)}get(n){return this.arrays.has(n)?this.arrays.get(n):[]}each(n,e){return this.get(n).forEach(e)}};function Za(n,e,t={},i=!0){n.dispatchEvent(new CustomEvent(e,{detail:t,bubbles:i,composed:!0,cancelable:!0}))}function ld(n){return typeof n=="object"&&n!==null}function Ih(n){return ld(n)&&!Al(n)}function Al(n){return Array.isArray(n)}function Up(n){return typeof n=="function"}function Sh(n){return typeof n!="object"||n===null}function jn(n){return JSON.parse(JSON.stringify(n))}function tn(n,e){return e===""?n:e.split(".").reduce((t,i)=>{if(t!==void 0)return t[i]},n)}function Jo(n,e,t){let i=e.split(".");if(i.length===1)return n[e]=t;let r=i.shift(),s=i.join(".");n[r]===void 0&&(n[r]={}),Jo(n[r],s,t)}function ic(n,e,t={},i=""){if(n===e)return t;if(typeof n!=typeof e||Ih(n)&&Al(e)||Al(n)&&Ih(e)||Sh(n)||Sh(e))return t[i]=e,t;let r=Object.keys(n);return Object.entries(e).forEach(([s,o])=>{t={...t,...ic(n[s],e[s],t,i===""?s:`${i}.${s}`)},r=r.filter(a=>a!==s)}),r.forEach(s=>{t[`${i}.${s}`]="__rm__"}),t}function Sr(n){let e=Rh(n)?n[0]:n;return Rh(n)&&n[1],ld(e)&&Object.entries(e).forEach(([t,i])=>{e[t]=Sr(i)}),e}function Rh(n){return Array.isArray(n)&&n.length===2&&typeof n[1]=="object"&&Object.keys(n[1]).includes("s")}function cd(){var n;if(document.querySelector('meta[name="csrf-token"]'))return document.querySelector('meta[name="csrf-token"]').getAttribute("content");if(document.querySelector("[data-csrf]"))return document.querySelector("[data-csrf]").getAttribute("data-csrf");if((n=window.livewireScriptConfig.csrf)!=null&&n)return window.livewireScriptConfig.csrf;throw"Livewire: No CSRF token detected"}function hd(n){return!!n.match(/<script>Sfdump\(".+"\)<\/script>/)}function Wp(n){let e=n.match(/.*<script>Sfdump\(".+"\)<\/script>/s);return[e,n.replace(e,"")]}function ud(n){let e=document.createElement("html");e.innerHTML=n,e.querySelectorAll("a").forEach(r=>r.setAttribute("target","_top"));let t=document.getElementById("livewire-error");typeof t!="undefined"&&t!=null?t.innerHTML="":(t=document.createElement("div"),t.id="livewire-error",t.style.position="fixed",t.style.width="100vw",t.style.height="100vh",t.style.padding="50px",t.style.backgroundColor="rgba(0, 0, 0, .6)",t.style.zIndex=2e5);let i=document.createElement("iframe");i.style.backgroundColor="#17161A",i.style.borderRadius="5px",i.style.width="100%",i.style.height="100%",t.appendChild(i),document.body.prepend(t),document.body.style.overflow="hidden",i.contentWindow.document.open(),i.contentWindow.document.write(e.outerHTML),i.contentWindow.document.close(),t.addEventListener("click",()=>Th(t)),t.setAttribute("tabindex",0),t.addEventListener("keydown",r=>{r.key==="Escape"&&Th(t)}),t.focus()}function Th(n){n.outerHTML="",document.body.style.overflow="visible"}var Rr=[];function Ct(n,e){return Rr[n]||(Rr[n]=[]),Rr[n].push(e),()=>{Rr[n]=Rr[n].filter(t=>t!==e)}}function Bt(n,...e){let t=Rr[n]||[],i=[];for(let r=0;r<t.length;r++){let s=t[r](...e);Up(s)&&i.push(s)}return r=>{let s=r;for(let o=0;o<i.length;o++){let a=i[o](s);a!==void 0&&(s=a)}return s}}var id,nd,rd,Lh=(rd=(nd=(id=document.querySelector("[data-uri]"))==null?void 0:id.getAttribute("data-uri"))!=null?nd:window.livewireScriptConfig.uri)!=null?rd:null;function dd(){Yp(()=>{Xp()})}var qa;function Yp(n){qa||(qa=setTimeout(()=>{n(),qa=void 0},5))}async function Xp(){Hp(),await $p(async()=>{let[n,e,t]=Qp(),i={method:"POST",body:JSON.stringify({_token:cd(),components:n}),headers:{"Content-type":"application/json","X-Livewire":""}},r=[],s=[],o=[],a=m=>r.forEach(y=>y(m)),l=m=>s.forEach(y=>y(m)),c=m=>o.forEach(y=>y(m)),u=Bt("request.profile",i);Bt("request",{url:Lh,options:i,payload:i.body,respond:m=>o.push(m),succeed:m=>r.push(m),fail:m=>s.push(m)});let d=await fetch(Lh,i),f={status:d.status,response:d};c(f),d=f.response;let _=await d.text();if(!d.ok){u({content:"{}",failed:!0});let m=!1;return t(),l({status:d.status,content:_,preventDefault:()=>m=!0}),m?void 0:(d.status===419&&Vp(),Kp(_))}d.redirected&&(window.location.href=d.url),hd(_)?([dump,_]=Wp(_),ud(dump),u({content:"{}",failed:!0})):u({content:_,failed:!1});let{components:p}=JSON.parse(_);e(p),a({status:d.status,json:JSON.parse(_)})})}function Hp(){Zp().forEach(e=>e.prepare())}function Qp(){let n=[],e=[],t=[];return qp(s=>{let[o,a,l]=s.toRequestPayload();n.push(o),e.push(a),t.push(l)}),[n,s=>e.forEach(o=>o(s.shift())),()=>t.forEach(s=>s())]}function Vp(){confirm(`This page has expired.
Would you like to refresh the page?`)&&window.location.reload()}function Kp(n){ud(n)}var xl=!1,El=[];async function fd(n){return new Promise(e=>{xl?El.push(()=>e(n())):e(n())})}async function $p(n){for(xl=!0,await n(),xl=!1;El.length>0;)El.shift()()}var As=[];function Zp(){return As}function qp(n){for(;As.length>0;)n(As.shift())}function gd(n){let e=As.find(t=>t.component.id===n.id);return e||As.push(e=new em(n)),e}async function pd(n){return await fd(()=>{let e=gd(n);return dd(),new Promise((t,i)=>{e.addResolver(t)})})}async function Jp(n,e,t){return await fd(()=>{let i=gd(n);return dd(),new Promise((r,s)=>{i.addCall(e,t,o=>r(o))})})}var em=class{constructor(n){this.component=n,this.calls=[],this.receivers=[],this.resolvers=[]}addResolver(n){this.resolvers.push(n)}addCall(n,e,t){this.calls.push({path:"",method:n,params:e,handleReturn(i){t(i)}})}prepare(){Bt("commit.prepare",{component:this.component})}toRequestPayload(){let n=ic(this.component.canonical,this.component.ephemeral),e={snapshot:this.component.snapshotEncoded,updates:n,calls:this.calls.map(d=>({path:d.path,method:d.method,params:d.params}))},t=[],i=[],r=[],s=d=>t.forEach(f=>f(d)),o=()=>i.forEach(d=>d()),a=()=>r.forEach(d=>d()),l=Bt("commit",{component:this.component,commit:e,succeed:d=>{t.push(d)},fail:d=>{i.push(d)},respond:d=>{r.push(d)}});return[e,d=>{let{snapshot:f,effects:_}=d;if(a(),this.component.mergeNewSnapshot(f,_,n),bl(this.component,this.component.effects),_.returns){let m=_.returns;this.calls.map(({handleReturn:v})=>v).forEach((v,A)=>{v(m[A])})}let p=JSON.parse(f);l({snapshot:p,effects:_}),this.resolvers.forEach(m=>m()),s(d)},()=>{a(),o()}]}};function bl(n,e){Bt("effects",n,e)}var Oh=_t(Pt());function md(n,e){return e||(e=()=>{}),(t,i=!1)=>{let r=i,s=t,o=n.$wire,a=o.get(s);return Oh.default.interceptor((c,u,d,f,_)=>{if(typeof a=="undefined"){console.error(`Livewire Entangle Error: Livewire property ['${s}'] cannot be found on component: ['${n.name}']`);return}let p=Oh.default.entangle({get(){return o.get(t)},set(m){o.set(t,m,r)}},{get(){return u()},set(m){d(m)}});return e(()=>p()),o.get(t)},c=>{Object.defineProperty(c,"live",{get(){return r=!0,c}})})(a)}}var _d=_t(Pt()),Ja=new WeakMap;function ea(n){if(!Ja.has(n)){let e=new im(n);Ja.set(n,e),e.registerListeners()}return Ja.get(n)}function tm(n,e,t,i){let r=ea(t),s=()=>n.dispatchEvent(new CustomEvent("livewire-upload-start",{bubbles:!0,detail:{id:t.id,property:e}})),o=()=>n.dispatchEvent(new CustomEvent("livewire-upload-finish",{bubbles:!0,detail:{id:t.id,property:e}})),a=()=>n.dispatchEvent(new CustomEvent("livewire-upload-error",{bubbles:!0,detail:{id:t.id,property:e}})),l=d=>{var f=Math.round(d.loaded*100/d.total);n.dispatchEvent(new CustomEvent("livewire-upload-progress",{bubbles:!0,detail:{progress:f}}))},c=d=>{d.target.files.length!==0&&(s(),d.target.multiple?r.uploadMultiple(e,d.target.files,o,a,l):r.upload(e,d.target.files[0],o,a,l))};n.addEventListener("change",c);let u=()=>{n.value=null};n.addEventListener("click",u),i(()=>{n.removeEventListener("change",c),n.removeEventListener("click",u)})}var im=class{constructor(n){this.component=n,this.uploadBag=new Mh,this.removeBag=new Mh}registerListeners(){this.component.$wire.$on("upload:generatedSignedUrl",({name:n,url:e})=>{this.component,this.handleSignedUrl(n,e)}),this.component.$wire.$on("upload:generatedSignedUrlForS3",({name:n,payload:e})=>{this.component,this.handleS3PreSignedUrl(n,e)}),this.component.$wire.$on("upload:finished",({name:n,tmpFilenames:e})=>this.markUploadFinished(n,e)),this.component.$wire.$on("upload:errored",({name:n})=>this.markUploadErrored(n)),this.component.$wire.$on("upload:removed",({name:n,tmpFilename:e})=>this.removeBag.shift(n).finishCallback(e))}upload(n,e,t,i,r){this.setUpload(n,{files:[e],multiple:!1,finishCallback:t,errorCallback:i,progressCallback:r})}uploadMultiple(n,e,t,i,r){this.setUpload(n,{files:Array.from(e),multiple:!0,finishCallback:t,errorCallback:i,progressCallback:r})}removeUpload(n,e,t){this.removeBag.push(n,{tmpFilename:e,finishCallback:t}),this.component.$wire.call("_removeUpload",n,e)}setUpload(n,e){this.uploadBag.add(n,e),this.uploadBag.get(n).length===1&&this.startUpload(n,e)}handleSignedUrl(n,e){let t=new FormData;Array.from(this.uploadBag.first(n).files).forEach(s=>t.append("files[]",s,s.name));let i={Accept:"application/json"},r=cd();r&&(i["X-CSRF-TOKEN"]=r),this.makeRequest(n,t,"post",e,i,s=>s.paths)}handleS3PreSignedUrl(n,e){let t=this.uploadBag.first(n).files[0],i=e.headers;"Host"in i&&delete i.Host;let r=e.url;this.makeRequest(n,t,"put",r,i,s=>[e.path])}makeRequest(n,e,t,i,r,s){let o=new XMLHttpRequest;o.open(t,i),Object.entries(r).forEach(([a,l])=>{o.setRequestHeader(a,l)}),o.upload.addEventListener("progress",a=>{a.detail={},a.detail.progress=Math.round(a.loaded*100/a.total),this.uploadBag.first(n).progressCallback(a)}),o.addEventListener("load",()=>{if((o.status+"")[0]==="2"){let l=s(o.response&&JSON.parse(o.response));this.component.$wire.call("_finishUpload",n,l,this.uploadBag.first(n).multiple);return}let a=null;o.status===422&&(a=o.response),this.component.$wire.call("_uploadErrored",n,a,this.uploadBag.first(n).multiple)}),o.send(e)}startUpload(n,e){let t=e.files.map(i=>({name:i.name,size:i.size,type:i.type}));this.component.$wire.call("_startUpload",n,t,e.multiple),this.component}markUploadFinished(n,e){this.component;let t=this.uploadBag.shift(n);t.finishCallback(t.multiple?e:e[0]),this.uploadBag.get(n).length>0&&this.startUpload(n,this.uploadBag.last(n))}markUploadErrored(n){this.component,this.uploadBag.shift(n).errorCallback(),this.uploadBag.get(n).length>0&&this.startUpload(n,this.uploadBag.last(n))}},Mh=class{constructor(){this.bag={}}add(n,e){this.bag[n]||(this.bag[n]=[]),this.bag[n].push(e)}push(n,e){this.add(n,e)}first(n){return this.bag[n]?this.bag[n][0]:null}last(n){return this.bag[n].slice(-1)[0]}get(n){return this.bag[n]}shift(n){return this.bag[n].shift()}call(n,...e){(this.listeners[n]||[]).forEach(t=>{t(...e)})}has(n){return Object.keys(this.listeners).includes(n)}};function nm(n,e,t,i=()=>{},r=()=>{},s=()=>{}){ea(n).upload(e,t,i,r,s)}function rm(n,e,t,i=()=>{},r=()=>{},s=()=>{}){ea(n).uploadMultiple(e,t,i,r,s)}function sm(n,e,t,i=()=>{},r=()=>{}){ea(n).removeUpload(e,t,i,r)}var nc={},yd;function $t(n,e,t=null){nc[n]=e}function om(n){yd=n}var Ph={on:"$on",get:"$get",set:"$set",call:"$call",commit:"$commit",watch:"$watch",entangle:"$entangle",dispatch:"$dispatch",dispatchTo:"$dispatchTo",dispatchSelf:"$dispatchSelf",upload:"$upload",uploadMultiple:"$uploadMultiple",removeUpload:"$removeUpload"};function am(n,e){return new Proxy({},{get(t,i){if(i==="__instance")return n;if(i in Ph)return Fh(n,Ph[i]);if(i in nc)return Fh(n,i);if(i in e)return e[i];if(!["then"].includes(i))return lm(n)(i)},set(t,i,r){return i in e&&(e[i]=r),!0}})}function Fh(n,e){return nc[e](n)}function lm(n){return yd(n)}_d.default.magic("wire",(n,{cleanup:e})=>{let t;return new Proxy({},{get(i,r){return t||(t=Cn(n)),["$entangle","entangle"].includes(r)?md(t,e):t.$wire[r]},set(i,r,s){return t||(t=Cn(n)),t.$wire[r]=s,!0}})});$t("__instance",n=>n);$t("$get",n=>(e,t=!0)=>tn(t?n.reactive:n.ephemeral,e));$t("$set",n=>async(e,t,i=!0)=>(Jo(n.reactive,e,t),i?await pd(n):Promise.resolve()));$t("$call",n=>async(e,...t)=>await n.$wire[e](...t));$t("$entangle",n=>(e,t=!1)=>md(n)(e,t));$t("$toggle",n=>(e,t=!0)=>n.$wire.set(e,!n.$wire.get(e),t));$t("$watch",n=>(e,t)=>{let i=!0,r;_d.default.effect(()=>{let s=tn(n.reactive,e);JSON.stringify(s),i?r=s:queueMicrotask(()=>{t(s,r),r=s}),i=!1})});$t("$refresh",n=>n.$wire.$commit);$t("$commit",n=>async()=>await pd(n));$t("$on",n=>(...e)=>Am(n,...e));$t("$dispatch",n=>(...e)=>wd(n,...e));$t("$dispatchSelf",n=>(...e)=>Fr(n,...e));$t("$dispatchTo",n=>(...e)=>rc(n,...e));$t("$upload",n=>(...e)=>nm(n,...e));$t("$uploadMultiple",n=>(...e)=>rm(n,...e));$t("$removeUpload",n=>(...e)=>sm(n,...e));var el=new WeakMap;$t("$parent",n=>{if(el.has(n))return el.get(n).$wire;let e=Cn(n.el.parentElement);return el.set(n,e),e.$wire});var Pr=new WeakMap;function cm(n,e,t){Pr.has(n)||Pr.set(n,{});let i=Pr.get(n);i[e]=t,Pr.set(n,i)}om(n=>e=>async(...t)=>{if(t.length===1&&t[0]instanceof Event&&(t=[]),Pr.has(n)){let i=Pr.get(n);if(typeof i[e]=="function")return i[e](t)}return await Jp(n,e,t)});var hm=class{constructor(n){if(n.__livewire)throw"Component already initialized";if(n.__livewire=this,this.el=n,this.id=n.getAttribute("wire:id"),this.__livewireId=this.id,this.snapshotEncoded=n.getAttribute("wire:snapshot"),this.snapshot=JSON.parse(this.snapshotEncoded),!this.snapshot)throw"Snapshot missing on Livewire component with id: "+this.id;this.name=this.snapshot.memo.name,this.effects=JSON.parse(n.getAttribute("wire:effects")),this.originalEffects=jn(this.effects),this.canonical=Sr(jn(this.snapshot.data)),this.ephemeral=Sr(jn(this.snapshot.data)),this.reactive=Alpine.reactive(this.ephemeral),this.$wire=am(this,this.reactive),this.cleanups=[],bl(this,this.effects)}mergeNewSnapshot(n,e,t={}){let i=JSON.parse(n),r=jn(this.canonical),s=this.applyUpdates(r,t),o=Sr(jn(i.data)),a=ic(s,o);this.snapshotEncoded=n,this.snapshot=i,this.effects=e,this.canonical=Sr(jn(i.data));let l=Sr(jn(i.data));return Object.entries(a).forEach(([c,u])=>{let d=c.split(".")[0];this.reactive[d]=l[d]}),a}applyUpdates(n,e){for(let t in e)Jo(n,t,e[t]);return n}replayUpdate(n,e){let t={...this.effects,html:e};this.mergeNewSnapshot(JSON.stringify(n),t),bl(this,{html:e})}get children(){let n=this.snapshot.memo;return Object.values(n.children).map(t=>t[1]).map(t=>fm(t))}inscribeSnapshotAndEffectsOnElement(){let n=this.el;n.setAttribute("wire:snapshot",this.snapshotEncoded);let e=this.originalEffects.listeners?{listeners:this.originalEffects.listeners}:{};this.originalEffects.url&&(e.url=this.originalEffects.url),n.setAttribute("wire:effects",JSON.stringify(e))}addCleanup(n){this.cleanups.push(n)}cleanup(){for(;this.cleanups.length>0;)this.cleanups.pop()()}},on={};function um(n){let e=new hm(n);if(on[e.id])throw"Component already registered";return Bt("component.init",{component:e,cleanup:i=>e.addCleanup(i)}),on[e.id]=e,e}function dm(n){let e=on[n];!e||(e.cleanup(),delete on[n])}function fm(n){let e=on[n];if(!e)throw"Component not found: "+n;return e}function Cn(n,e=!0){let t=Alpine.findClosest(n,i=>i.__livewire);if(!t){if(e)throw"Could not find Livewire component in DOM tree";return}return t.__livewire}function vd(n){return Object.values(on).filter(e=>n==e.name)}function gm(n){return vd(n).map(e=>e.$wire)}function pm(n){let e=on[n];return e&&e.$wire}function mm(){return Object.values(on)[0].$wire}function _m(){return Object.values(on)}_t(Pt());Ct("effects",(n,e)=>{ym(n,e.listeners||[]),vm(n,e.dispatches||[])});function ym(n,e){e.forEach(t=>{let i=r=>{r.__livewire&&r.__livewire.receivedBy.push(n),n.$wire.call("__dispatch",t,r.detail||{})};window.addEventListener(t,i),n.addCleanup(()=>window.removeEventListener(t,i)),n.el.addEventListener(t,r=>{!r.__livewire||r.bubbles||(r.__livewire&&r.__livewire.receivedBy.push(n.id),n.$wire.call("__dispatch",t,r.detail||{}))})})}function vm(n,e){e.forEach(({name:t,params:i={},self:r=!1,to:s})=>{r?Fr(n,t,i):s?rc(n,s,t,i):wd(n,t,i)})}function ta(n,e,t,i=!0){let r=new CustomEvent(e,{bubbles:i,detail:t});r.__livewire={name:e,params:t,receivedBy:[]},n.dispatchEvent(r)}function wd(n,e,t){ta(n.el,e,t)}function wm(n,e){ta(window,n,e)}function Fr(n,e,t){ta(n.el,e,t,!1)}function rc(n,e,t,i){vd(e).forEach(s=>{ta(s.el,t,i,!1)})}function Am(n,e,t){n.el.addEventListener(e,i=>{t(i.detail)})}function xm(n,e){window.addEventListener(n,t=>{!t.__livewire||e(t.detail)})}_t(Pt());function Cl(n){return n.match(new RegExp("wire:"))}function Il(n,e){let[t,...i]=e.replace(new RegExp("wire:"),"").split(".");return new bm(t,i,e,n)}function Ci(n,e){Ct("directive.init",({el:t,component:i,directive:r,cleanup:s})=>{r.value===n&&e({el:t,directive:r,component:i,cleanup:s})})}function ia(n){return new Em(n)}var Em=class{constructor(n){this.el=n,this.directives=this.extractTypeModifiersAndValue()}all(){return this.directives}has(n){return this.directives.map(e=>e.value).includes(n)}missing(n){return!this.has(n)}get(n){return this.directives.find(e=>e.value===n)}extractTypeModifiersAndValue(){return Array.from(this.el.getAttributeNames().filter(n=>Cl(n)).map(n=>Il(this.el,n)))}},bm=class{constructor(n,e,t,i){this.rawName=this.raw=t,this.el=i,this.eventContext,this.value=n,this.modifiers=e,this.expression=this.el.getAttribute(this.rawName)}get method(){const{method:n}=this.parseOutMethodAndParams(this.expression);return n}get params(){const{params:n}=this.parseOutMethodAndParams(this.expression);return n}parseOutMethodAndParams(n){let e=n,t=[];const i=e.match(/(.*?)\((.*)\)/s);return i&&(e=i[1],t=new Function("$event",`return (function () {
                for (var l=arguments.length, p=new Array(l), k=0; k<l; k++) {
                    p[k] = arguments[k];
                }
                return [].concat(p);
            })(${i[2]})`)(this.eventContext)),{method:e,params:t}}},Cm=_t(Fp()),Im=_t(Dp()),Sm=_t(kp()),Rm=_t(Np()),Tm=_t(Bp());function Lm(){let n=new URL(window.location.href,document.baseURI);Fm(n,document.documentElement.outerHTML)}function Om(n){window.addEventListener("popstate",e=>{let i=(e.state||{}).alpine||{};if(!i._html)return;let r=Dm(i._html);n(r)})}function Mm(n,e){Pm(e,n)}function Pm(n,e){Ad("pushState",n,e)}function Fm(n,e){Ad("replaceState",n,e)}function Ad(n,e,t){let i=new Date().getTime();xd(i,t);let r=history.state||{};r.alpine||(r.alpine={}),r.alpine._html=i;try{history[n](r,document.title,e)}catch(s){s instanceof DOMException&&s.name==="SecurityError"&&console.error("Livewire: You can't use wire:navigate with a link to a different root domain: "+e),console.error(s)}}function Dm(n){return JSON.parse(sessionStorage.getItem("alpine:"+n))}function xd(n,e){try{sessionStorage.setItem("alpine:"+n,JSON.stringify(e))}catch(t){if(![22,1,2,3,4,5,6,7,8,9,10,11,12,13,14].includes(t.code))return;let i=Object.keys(sessionStorage).map(r=>Number(r.replace("alpine:",""))).sort().shift();if(!i)return;sessionStorage.removeItem("alpine:"+i),xd(n,e)}}var Ni={};function Dh(n,e){let t=n.pathname;Ni[t]||(Ni[t]={finished:!1,html:null,whenFinished:()=>{}},fetch(t).then(i=>i.text()).then(i=>{e(i)}))}function kh(n,e){let t=Ni[e.pathname];t.html=n,t.finished=!0,t.whenFinished()}function km(n,e,t){let i=n.pathname+n.search;if(!Ni[i])return t();if(Ni[i].finished){let r=Ni[i].html;return delete Ni[i],e(r)}else Ni[i].whenFinished=()=>{let r=Ni[i].html;delete Ni[i],e(r)}}function Nm(n,e){let t=r=>r.which>1||r.altKey||r.ctrlKey||r.metaKey||r.shiftKey,i=r=>r.which!==13||r.altKey||r.ctrlKey||r.metaKey||r.shiftKey;n.addEventListener("click",r=>{t(r)||r.preventDefault()}),n.addEventListener("mousedown",r=>{t(r)||(r.preventDefault(),e(s=>{let o=a=>{a.preventDefault(),s(),n.removeEventListener("mouseup",o)};n.addEventListener("mouseup",o)}))}),n.addEventListener("keydown",r=>{i(r)||(r.preventDefault(),e(s=>{s()}))})}function Bm(n,e=60,t){n.addEventListener("mouseenter",i=>{let r=setTimeout(()=>{t(i)},e),s=()=>{clearTimeout(r),n.removeEventListener("mouseleave",s)};n.addEventListener("mouseleave",s)})}function Nh(n){return Ed(n.getAttribute("href"))}function Ed(n){return new URL(n,document.baseURI)}var sc=_t(Pt());function Bh(n){sc.default.mutateDom(()=>{n.querySelectorAll("[data-teleport-template]").forEach(e=>e._x_teleport.remove())})}function Gh(n){sc.default.mutateDom(()=>{n.querySelectorAll("[data-teleport-target]").forEach(e=>e.remove())})}function jh(n){sc.default.walk(n,(e,t)=>{!e._x_teleport||(e._x_teleportPutBack(),t())})}function zh(){document.body.setAttribute("data-scroll-x",document.body.scrollLeft),document.body.setAttribute("data-scroll-y",document.body.scrollTop),document.querySelectorAll(["[x-navigate\\:scroll]","[wire\\:scroll]"]).forEach(n=>{n.setAttribute("data-scroll-x",n.scrollLeft),n.setAttribute("data-scroll-y",n.scrollTop)})}function Uh(){let n=e=>{e.hasAttribute("data-scroll-x")?(e.scrollTo({top:Number(e.getAttribute("data-scroll-x")),left:Number(e.getAttribute("data-scroll-y")),behavior:"instant"}),e.removeAttribute("data-scroll-x"),e.removeAttribute("data-scroll-y")):window.scrollTo({top:0,left:0,behavior:"instant"})};queueMicrotask(()=>{n(document.body),document.querySelectorAll(["[x-navigate\\:scroll]","[wire\\:scroll]"]).forEach(n)})}var Sl=_t(Pt()),ms={};function Wh(n){ms={},document.querySelectorAll("[x-persist]").forEach(e=>{ms[e.getAttribute("x-persist")]=e,n(e),Sl.default.mutateDom(()=>{e.remove()})})}function Yh(n){let e=[];document.querySelectorAll("[x-persist]").forEach(t=>{let i=ms[t.getAttribute("x-persist")];!i||(e.push(t.getAttribute("x-persist")),i._x_wasPersisted=!0,n(i,t),Sl.default.mutateDom(()=>{t.replaceWith(i)}))}),Object.entries(ms).forEach(([t,i])=>{e.includes(t)||Sl.default.destroyTree(i)}),ms={}}var xs=_t(Gp());xs.default.configure({minimum:.1});xs.default.configure({trickleSpeed:200});zm();var Rl=!1;function Gm(){Rl=!0,setTimeout(()=>{!Rl||xs.default.start()},150)}function jm(){Rl=!1,xs.default.done(),xs.default.remove()}function zm(){let n=document.createElement("style");n.innerHTML=`/* Make clicks pass-through */

    #nprogress {
      pointer-events: none;
    }

    #nprogress .bar {
      background: var(--livewire-progress-bar-color, #29d);

      position: fixed;
      z-index: 1031;
      top: 0;
      left: 0;

      width: 100%;
      height: 2px;
    }

    /* Fancy blur effect */
    #nprogress .peg {
      display: block;
      position: absolute;
      right: 0px;
      width: 100px;
      height: 100%;
      box-shadow: 0 0 10px #29d, 0 0 5px #29d;
      opacity: 1.0;

      -webkit-transform: rotate(3deg) translate(0px, -4px);
          -ms-transform: rotate(3deg) translate(0px, -4px);
              transform: rotate(3deg) translate(0px, -4px);
    }

    /* Remove these to get rid of the spinner */
    #nprogress .spinner {
      display: block;
      position: fixed;
      z-index: 1031;
      top: 15px;
      right: 15px;
    }

    #nprogress .spinner-icon {
      width: 18px;
      height: 18px;
      box-sizing: border-box;

      border: solid 2px transparent;
      border-top-color: var(--livewire-progress-bar-color, #29d);
      border-left-color: var(--livewire-progress-bar-color, #29d);
      border-radius: 50%;

      -webkit-animation: nprogress-spinner 400ms linear infinite;
              animation: nprogress-spinner 400ms linear infinite;
    }

    .nprogress-custom-parent {
      overflow: hidden;
      position: relative;
    }

    .nprogress-custom-parent #nprogress .spinner,
    .nprogress-custom-parent #nprogress .bar {
      position: absolute;
    }

    @-webkit-keyframes nprogress-spinner {
      0%   { -webkit-transform: rotate(0deg); }
      100% { -webkit-transform: rotate(360deg); }
    }
    @keyframes nprogress-spinner {
      0%   { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    `,document.head.appendChild(n)}var tl=[],bd=["data-csrf"];function Xh(n,e){let t=new DOMParser().parseFromString(n,"text/html"),i=document.adoptNode(t.body),r=document.adoptNode(t.head);tl=tl.concat(Array.from(document.body.querySelectorAll("script")).map(o=>Rd(Td(o.outerHTML,bd)))),Wm(r),Um(i,tl);let s=document.body;document.body.replaceWith(i),Alpine.destroyTree(s),e()}function Um(n,e){n.querySelectorAll("script").forEach(t=>{if(t.hasAttribute("data-navigate-once")){let i=Rd(Td(t.outerHTML,bd));if(e.includes(i))return}t.replaceWith(Cd(t))})}function Wm(n){let e=Array.from(document.head.children),t=e.map(r=>r.outerHTML),i=document.createDocumentFragment();for(let r of Array.from(n.children))Qh(r)&&(t.includes(r.outerHTML)?i.appendChild(r):(Id(r)&&Ym(r,e)&&setTimeout(()=>window.location.reload()),Sd(r)?document.head.appendChild(Cd(r)):document.head.appendChild(r)));for(let r of Array.from(document.head.children))Qh(r)||r.remove();for(let r of Array.from(n.children))document.head.appendChild(r)}function Cd(n){let e=document.createElement("script");e.textContent=n.textContent,e.async=n.async;for(let t of n.attributes)e.setAttribute(t.name,t.value);return e}function Id(n){return n.hasAttribute("data-navigate-track")}function Ym(n,e){let[t,i]=Hh(n);return e.some(r=>{if(!Id(r))return!1;let[s,o]=Hh(r);if(s===t&&i!==o)return!0})}function Hh(n){return(Sd(n)?n.src:n.href).split("?")}function Qh(n){return n.tagName.toLowerCase()==="link"&&n.getAttribute("rel").toLowerCase()==="stylesheet"||n.tagName.toLowerCase()==="style"||n.tagName.toLowerCase()==="script"}function Sd(n){return n.tagName.toLowerCase()==="script"}function Rd(n){return n.split("").reduce((e,t)=>(e=(e<<5)-e+t.charCodeAt(0),e&e),0)}function Td(n,e){let t=n;return e.forEach(i=>{const r=new RegExp(`${i}="[^"]*"|${i}='[^']*'`,"g");t=t.replace(r,"")}),t.trim()}function Xm(n,e){let t=n.pathname+n.search;fetch(t).then(i=>i.text()).then(i=>{e(i)})}_t(Pt());var il=!0;function Hm(n){n.navigate=t=>{e(Ed(t))},n.navigate.disableProgressBar=()=>{il=!1},n.addInitSelector(()=>`[${n.prefixed("navigate")}]`),n.directive("navigate",(t,{value:i,expression:r,modifiers:s},{evaluateLater:o,cleanup:a})=>{s.includes("hover")&&Bm(t,60,()=>{let c=Nh(t);Dh(c,u=>{kh(u,c)})}),Nm(t,c=>{let u=Nh(t);Dh(u,d=>{kh(d,u)}),c(()=>{e(u)})})});function e(t){il&&Gm(),Qm(t,i=>{po("alpine:navigating"),zh(),il&&jm(),Lm(),Vh(n,r=>{Wh(s=>{Bh(s)}),Xh(i,()=>{Gh(document.body),Yh((s,o)=>{jh(s)}),Uh(),po("alpine:navigated"),Mm(i,t),r(()=>{Kh(n)})})})})}Om(t=>{zh(),Vh(n,i=>{Wh(r=>{Bh(r)}),Xh(t,()=>{Gh(document.body),Yh((r,s)=>{jh(r)}),Uh(),po("alpine:navigated"),i(()=>{Kh(n)})})})}),setTimeout(()=>{po("alpine:navigated")})}function Qm(n,e){km(n,e,()=>{Xm(n,e)})}function Vh(n,e){n.stopObservingMutations(),e(t=>{n.startObservingMutations(),setTimeout(()=>{t()})})}function po(n){document.dispatchEvent(new CustomEvent(n,{bubbles:!0}))}function Kh(n){n.initTree(document.body,void 0,(e,t)=>{e._x_wasPersisted&&t()})}function Vm(n){n.magic("queryString",(e,{interceptor:t})=>{let i,r=!1,s=!1;return t((o,a,l,c,u)=>{let d=i||c,{initial:f,replace:_,push:p,pop:m}=Tl(d,o,r);return l(f),s?(n.effect(()=>p(a())),m(async y=>{l(y),await(()=>Promise.resolve())()})):n.effect(()=>_(a())),f},o=>{o.alwaysShow=()=>(r=!0,o),o.usePush=()=>(s=!0,o),o.as=a=>(i=a,o)})}),n.history={track:Tl}}function Tl(n,e,t=!1){let{has:i,get:r,set:s,remove:o}=$m(),a=new URL(window.location.href),l=i(a,n),c=l?r(a,n):e,u=JSON.stringify(c),d=p=>JSON.stringify(p)===u;t&&(a=s(a,n,c)),$h(a,n,{value:c});let f=!1,_=(p,m)=>{if(f)return;let y=new URL(window.location.href);!t&&!l&&d(m)?y=o(y,n):y=s(y,n,m),p(y,n,{value:m})};return{initial:c,replace(p){_($h,p)},push(p){_(Km,p)},pop(p){let m=y=>{!y.state||!y.state.alpine||Object.entries(y.state.alpine).forEach(([v,{value:A}])=>{if(v!==n)return;f=!0;let x=p(A);x instanceof Promise?x.finally(()=>f=!1):f=!1})};return window.addEventListener("popstate",m),()=>window.removeEventListener("popstate",m)}}}function $h(n,e,t){let i=window.history.state||{};i.alpine||(i.alpine={}),i.alpine[e]=Ld(t),window.history.replaceState(i,"",n.toString())}function Km(n,e,t){let i=window.history.state||{};i.alpine||(i.alpine={}),i={alpine:{...i.alpine,[e]:Ld(t)}},window.history.pushState(i,"",n.toString())}function Ld(n){return JSON.parse(JSON.stringify(n))}function $m(){return{has(n,e){let t=n.search;if(!t)return!1;let i=mo(t);return Object.keys(i).includes(e)},get(n,e){let t=n.search;return t?mo(t)[e]:!1},set(n,e,t){let i=mo(n.search);return i[e]=t,n.search=Zh(i),n},remove(n,e){let t=mo(n.search);return delete t[e],n.search=Zh(t),n}}}function Zh(n){let e=r=>typeof r=="object"&&r!==null,t=(r,s={},o="")=>(Object.entries(r).forEach(([a,l])=>{let c=o===""?a:`${o}[${a}]`;e(l)?s={...s,...t(l,s,c)}:s[c]=encodeURIComponent(l).replaceAll("%20","+").replaceAll("%2C",",")}),s),i=t(n);return Object.entries(i).map(([r,s])=>`${r}=${s}`).join("&")}function mo(n){if(n=n.replace("?",""),n==="")return{};let e=(r,s,o)=>{let[a,l,...c]=r.split(".");if(!l)return o[r]=s;o[a]===void 0&&(o[a]=isNaN(l)?{}:[]),e([l,...c].join("."),s,o[a])},t=n.split("&").map(r=>r.split("=")),i={};return t.forEach(([r,s])=>{if(!!s)if(s=decodeURIComponent(s.replaceAll("+","%20")),!r.includes("["))i[r]=s;else{let o=r.replaceAll("[",".").replaceAll("]","");e(o,s,i)}}),i}var Zm=_t(jp()),qm=_t(zp()),Qt=_t(Pt());function Jm(){Za(document,"livewire:init"),Za(document,"livewire:initializing"),Qt.default.plugin(Zm.default),Qt.default.plugin(Vm),Qt.default.plugin(Rm.default),Qt.default.plugin(Cm.default),Qt.default.plugin(Tm.default),Qt.default.plugin(Im.default),Qt.default.plugin(Sm.default),Qt.default.plugin(Hm),Qt.default.plugin(qm.default),Qt.default.addRootSelector(()=>"[wire\\:id]"),Qt.default.onAttributesAdded((n,e)=>{let t=Cn(n,!1);!t||e.forEach(i=>{if(!Cl(i.name))return;let r=Il(n,i.name);Bt("directive.init",{el:n,component:t,directive:r,cleanup:s=>{Qt.default.onAttributeRemoved(n,r.raw,s)}})})}),Qt.default.interceptInit(Qt.default.skipDuringClone(n=>{if(n.hasAttribute("wire:id")){let t=um(n);Qt.default.onAttributeRemoved(n,"wire:id",()=>{dm(t.id)})}let e=Cn(n,!1);e&&(Bt("element.init",{el:n,component:e}),Array.from(n.getAttributeNames()).filter(i=>Cl(i)).map(i=>Il(n,i)).forEach(i=>{Bt("directive.init",{el:n,component:e,directive:i,cleanup:r=>{Qt.default.onAttributeRemoved(n,i.raw,r)}})}))})),Qt.default.start(),setTimeout(()=>window.Livewire.initialRenderIsFinished=!0),Za(document,"livewire:initialized")}function e_(){}function t_(){}var Od=_t(Pt());Ct("commit.prepare",({component:n})=>{n.children.forEach(e=>{i_(e)&&e.$wire.$commit()})});function i_(n){return!!n.snapshot.memo.bindings}var n_=_t(Pt()),Br={};Ct("element.init",({el:n,component:e})=>{ia(n).missing("submit")||n.addEventListener("submit",()=>{Br[e.id]=[],n_.default.walk(e.el,(i,r)=>{if(!!n.contains(i)){if(i.hasAttribute("wire:ignore"))return r();i.tagName.toLowerCase()==="button"&&i.type==="submit"||i.tagName.toLowerCase()==="select"||i.tagName.toLowerCase()==="input"&&(i.type==="checkbox"||i.type==="radio")?(i.disabled||Br[e.id].push(()=>i.disabled=!1),i.disabled=!0):(i.tagName.toLowerCase()==="input"||i.tagName.toLowerCase()==="textarea")&&(i.readOnly||Br[e.id].push(()=>i.readOnly=!1),i.readOnly=!0)}})})});Ct("commit",({component:n,respond:e})=>{e(()=>{r_(n)})});function r_(n){if(!!Br[n.id])for(;Br[n.id].length>0;)Br[n.id].shift()()}Ct("commit",({component:n,succeed:e})=>{e(({effects:t})=>{let i=t.download;if(!i)return;let r=window.webkitURL||window.URL,s=r.createObjectURL(s_(i.content,i.contentType)),o=document.createElement("a");o.style.display="none",o.href=s,o.download=i.name,document.body.appendChild(o),o.click(),setTimeout(function(){r.revokeObjectURL(s)},0)})});function s_(n,e="",t=512){const i=atob(n),r=[];e===null&&(e="");for(let s=0;s<i.length;s+=t){let o=i.slice(s,s+t),a=new Array(o.length);for(let c=0;c<o.length;c++)a[c]=o.charCodeAt(c);let l=new Uint8Array(a);r.push(l)}return new Blob(r,{type:e})}var qh=_t(Pt());Ct("effects",(n,e)=>{let t=e.js,i=e.xjs;t&&Object.entries(t).forEach(([r,s])=>{cm(n,r,()=>{qh.default.evaluate(n.el,s)})}),i&&i.forEach(r=>{qh.default.evaluate(n.el,r)})});var Jh=_t(Pt());Ct("component.init",({component:n,cleanup:e})=>{let i=n.effects.url;!i||Object.entries(i).forEach(([r,s])=>{let{name:o,as:a,use:l,alwaysShow:c}=o_(r,s);a||(a=o);let u=tn(n.ephemeral,o),{initial:d,replace:f,push:_,pop:p}=Tl(a,u,c);if(l==="replace"){let m=Jh.default.effect(()=>{f(tn(n.reactive,o))});e(()=>Jh.default.release(m))}else if(l==="push"){let m=Ct("commit",({component:v,succeed:A})=>{let x=tn(v.canonical,o);A(()=>{let E=tn(v.canonical,o);JSON.stringify(x)!==JSON.stringify(E)&&_(E)})}),y=p(async v=>{await n.$wire.set(o,v),document.querySelectorAll("input").forEach(A=>{A._x_forceModelUpdate&&A._x_forceModelUpdate(A._x_model.get())})});e(()=>{m(),y()})}})});function o_(n,e){let t={use:"replace",alwaysShow:!1};return typeof e=="string"?{...t,name:e,as:e}:{...{...t,name:n,as:n},...e}}Ct("request",({options:n})=>{window.Echo&&(n.headers["X-Socket-ID"]=window.Echo.socketId())});Ct("effects",(n,e)=>{(e.listeners||[]).forEach(i=>{if(i.startsWith("echo")){if(typeof window.Echo=="undefined"){console.warn("Laravel Echo cannot be found");return}let r=i.split(/(echo:|echo-)|:|,/);r[1]=="echo:"&&r.splice(2,0,"channel",void 0),r[2]=="notification"&&r.push(void 0,void 0);let[s,o,a,l,c,u,d]=r;["channel","private","encryptedPrivate"].includes(a)?window.Echo[a](c).listen(d,f=>{Fr(n,i,[f])}):a=="presence"?["here","joining","leaving"].includes(d)?window.Echo.join(c)[d](f=>{Fr(n,i,[f])}):window.Echo.join(c).listen(d,f=>{Fr(n,i,[f])}):a=="notification"?window.Echo.private(c).notification(f=>{Fr(n,i,[f])}):console.warn("Echo channel type not yet supported")}})});l_()&&Alpine.navigate.disableProgressBar();document.addEventListener("alpine:navigated",n=>{document.dispatchEvent(new CustomEvent("livewire:navigated",{bubbles:!0}))});document.addEventListener("alpine:navigating",n=>{document.dispatchEvent(new CustomEvent("livewire:navigating",{bubbles:!0}))});function a_(n,e,t){n.redirectUsingNavigate?Alpine.navigate(e):t()}function l_(){return!!(document.querySelector("[data-no-progress-bar]")||window.livewireScriptConfig&&window.livewireScriptConfig.progressBar===!1)}Ct("effects",(n,e)=>{if(!e.redirect)return;let t=e.redirect;a_(e,t,()=>{window.location.href=t})});var c_=_t(Pt());function h_(n,e,t){let i=e.parentElement?e.parentElement.tagName.toLowerCase():"div",r=document.createElement(i);r.innerHTML=t;let s;try{s=Cn(e.parentElement)}catch{}s&&(r.__livewire=s);let o=r.firstElementChild;o.__livewire=n,Bt("morph",{el:e,toEl:o,component:n}),c_.default.morph(e,o,{updating:(a,l,c,u)=>{if(!Ar(a)){if(Bt("morph.updating",{el:a,toEl:l,component:n,skip:u,childrenOnly:c}),a.__livewire_ignore===!0||(a.__livewire_ignore_self===!0&&c(),eu(a)&&a.getAttribute("wire:id")!==n.id))return u();eu(a)&&(l.__livewire=n)}},updated:(a,l)=>{Ar(a)||Bt("morph.updated",{el:a,component:n})},removing:(a,l)=>{Ar(a)||Bt("morph.removing",{el:a,component:n,skip:l})},removed:a=>{Ar(a)||Bt("morph.removed",{el:a,component:n})},adding:a=>{Bt("morph.adding",{el:a,component:n})},added:a=>{Ar(a)||(Cn(a).id,Bt("morph.added",{el:a}))},key:a=>{if(!Ar(a))return a.hasAttribute("wire:key")?a.getAttribute("wire:key"):a.hasAttribute("wire:id")?a.getAttribute("wire:id"):a.id},lookahead:!1})}function Ar(n){return typeof n.hasAttribute!="function"}function eu(n){return n.hasAttribute("wire:id")}Ct("effects",(n,e)=>{let t=e.html;!t||queueMicrotask(()=>{h_(n,n.el,t)})});Ct("commit.prepare",({component:n})=>{Md(n,e=>{e.snapshot.memo.props&&e.$wire.$commit()})});function Md(n,e){n.children.forEach(t=>{e(t),Md(t,e)})}var tu=_t(Pt());Ct("morph.added",({el:n})=>{n.__addedByMorph=!0});Ci("transition",({el:n,directive:e,component:t,cleanup:i})=>{let r=tu.default.reactive({state:!n.__addedByMorph});tu.default.bind(n,{[e.rawName.replace("wire:","x-")]:"","x-show"(){return r.state}}),n.__addedByMorph&&setTimeout(()=>r.state=!0);let s=[];s.push(Ct("morph.removing",({el:o,skip:a})=>{a(),o.addEventListener("transitionend",()=>{o.remove()}),r.state=!1,s.push(Ct("morph",({component:l})=>{l===t&&(o.remove(),s.forEach(c=>c()))}))})),i(()=>s.forEach(o=>o()))});var u_=new ad;function d_(n,e){u_.each(n,t=>{t.callback(),t.callback=()=>{}}),e()}var iu=_t(Pt());Ct("directive.init",({el:n,directive:e,cleanup:t,component:i})=>{if(["snapshot","effects","model","init","loading","poll","ignore","id","data","key","target","dirty"].includes(e.value))return;let r=e.rawName.replace("wire:","x-on:");e.value==="submit"&&!e.modifiers.includes("prevent")&&(r=r+".prevent");let s=iu.default.bind(n,{[r](o){let a=()=>{d_(i,()=>{iu.default.evaluate(n,"$wire."+e.expression,{scope:{$event:o}})})};n.__livewire_confirm?n.__livewire_confirm(()=>{a()}):a()}});t(s)});var Dr=_t(Pt());Dr.default.addInitSelector(()=>"[wire\\:navigate]");Dr.default.addInitSelector(()=>"[wire\\:navigate\\.hover]");Dr.default.interceptInit(Dr.default.skipDuringClone(n=>{n.hasAttribute("wire:navigate")?Dr.default.bind(n,{["x-navigate"]:!0}):n.hasAttribute("wire:navigate.hover")&&Dr.default.bind(n,{["x-navigate.hover"]:!0})}));document.addEventListener("alpine:navigating",()=>{Livewire.all().forEach(n=>{n.inscribeSnapshotAndEffectsOnElement()})});Ci("confirm",({el:n,directive:e})=>{let t=e.expression,i=e.modifiers.includes("prompt");t=t.replaceAll("\\n",`
`),t===""&&(t="Are you sure?"),n.__livewire_confirm=r=>{if(i){let[s,o]=t.split("|");o?prompt(s)===o&&r():console.warn("Livewire: Must provide expectation with wire:confirm.prompt")}else confirm(t)&&r()}});function Qn(n,e,t,i=null){if(t=e.modifiers.includes("remove")?!t:t,e.modifiers.includes("class")){let r=e.expression.split(" ");t?n.classList.add(...r):n.classList.remove(...r)}else if(e.modifiers.includes("attr"))t?n.setAttribute(e.expression,!0):n.removeAttribute(e.expression);else{let r=i!=null?i:window.getComputedStyle(n,null).getPropertyValue("display"),s=["inline","block","table","flex","grid","inline-flex"].filter(o=>e.modifiers.includes(o))[0]||"inline-block";s=e.modifiers.includes("remove")?r:s,n.style.display=t?s:"none"}}var Ll=new Set,Ol=new Set;window.addEventListener("offline",()=>Ll.forEach(n=>n()));window.addEventListener("online",()=>Ol.forEach(n=>n()));Ci("offline",({el:n,directive:e,cleanup:t})=>{let i=()=>Qn(n,e,!0),r=()=>Qn(n,e,!1);Ll.add(i),Ol.add(r),t(()=>{Ll.delete(i),Ol.delete(r)})});Ci("loading",({el:n,directive:e,component:t})=>{let i=__(n),[r,s]=f_(e);g_(t,i,[()=>r(()=>Qn(n,e,!0)),()=>s(()=>Qn(n,e,!1))]),p_(t,i,[()=>r(()=>Qn(n,e,!0)),()=>s(()=>Qn(n,e,!1))])});function f_(n){if(!n.modifiers.includes("delay")||n.modifiers.includes("none"))return[s=>s(),s=>s()];let e=200,t={shortest:50,shorter:100,short:150,default:200,long:300,longer:500,longest:1e3};Object.keys(t).some(s=>{if(n.modifiers.includes(s))return e=t[s],!0});let i,r=!1;return[s=>{i=setTimeout(()=>{s(),r=!0},e)},async s=>{r?(await s(),r=!1):clearTimeout(i)}]}function g_(n,e,[t,i]){Ct("commit",({component:r,commit:s,respond:o})=>{r===n&&(e.length>0&&!m_(s,e)||(t(),o(()=>{i()})))})}function p_(n,e,[t,i]){let r=s=>{let{id:o,property:a}=s.detail;return o!==n.id||e.length>0&&!e.map(l=>l.target).includes(a)};window.addEventListener("livewire-upload-start",s=>{r(s)||t()}),window.addEventListener("livewire-upload-finish",s=>{r(s)||i()}),window.addEventListener("livewire-upload-error",s=>{r(s)||i()})}function m_(n,e){let{updates:t,calls:i}=n;return e.some(({target:r,params:s})=>{if(s)return i.some(({method:a,params:l})=>r===a&&s===Pd(JSON.stringify(l)));if(Object.keys(t).some(a=>a.startsWith(r))||i.map(a=>a.method).includes(r))return!0})}function __(n){let e=ia(n),t=[];if(e.has("target")){let i=e.get("target"),r=i.expression;r.includes("(")&&r.includes(")")?t.push({target:i.method,params:Pd(JSON.stringify(i.params))}):r.includes(",")?r.split(",").map(s=>s.trim()).forEach(s=>{t.push({target:s})}):t.push({target:r})}else{let i=["init","dirty","offline","target","loading","poll","ignore","key","id"];e.all().filter(r=>!i.includes(r.value)).map(r=>r.expression.split("(")[0]).forEach(r=>t.push({target:r}))}return t}function Pd(n){return btoa(encodeURIComponent(n))}Ci("stream",({el:n,directive:e,component:t,cleanup:i})=>{let{expression:r,modifiers:s}=e,o=Ct("stream",({name:a,content:l,replace:c})=>{a===r&&(s.includes("replace")||c?n.innerHTML=l:n.innerHTML=n.innerHTML+l)});i(o)});Ct("request",({respond:n})=>{n(e=>{let t=e.response;!t.headers.has("X-Livewire-Stream")||(e.response={ok:!0,redirected:!1,status:200,async text(){let i=await y_(t,r=>{Bt("stream",r)});return hd(i)&&(this.ok=!1),i}})})});async function y_(n,e){let t=n.body.getReader(),i="";for(;;){let{done:r,value:s}=await t.read(),a=new TextDecoder().decode(s),[l,c]=v_(i+a);if(l.forEach(u=>{e(u)}),i=c,r)return i}}function v_(n){let e=/({"stream":true.*?"endStream":true})/g,t=n.match(e),i=[];if(t)for(let s=0;s<t.length;s++)i.push(JSON.parse(t[s]).body);let r=n.replace(e,"");return[i,r]}Ci("ignore",({el:n,directive:e})=>{e.modifiers.includes("self")?n.__livewire_ignore_self=!0:n.__livewire_ignore=!0});var Fd=new ad;Ct("commit",({component:n,respond:e})=>{e(()=>{setTimeout(()=>{Fd.each(n,t=>t(!1))})})});Ci("dirty",({el:n,directive:e,component:t})=>{let i=w_(n);Alpine.reactive({state:!1});let r=!1,s=n.style.display,o=a=>{Qn(n,e,a,s),r=a};Fd.add(t,o),Alpine.effect(()=>{let a=!1;if(i.length===0)a=JSON.stringify(t.canonical)!==JSON.stringify(t.reactive);else for(let l=0;l<i.length&&!a;l++){let c=i[l];a=JSON.stringify(tn(t.canonical,c))!==JSON.stringify(tn(t.reactive,c))}r!==a&&o(a),r=a})});function w_(n){let e=ia(n),t=[];return e.has("model")&&t.push(e.get("model").expression),e.has("target")&&(t=t.concat(e.get("target").expression.split(",").map(i=>i.trim()))),t}var A_=_t(Pt());Ci("model",({el:n,directive:e,component:t,cleanup:i})=>{let{expression:r,modifiers:s}=e;if(!r)return console.warn("Livewire: [wire:model] is missing a value.",n);if(Dd(t,r))return console.warn('Livewire: [wire:model="'+r+'"] property does not exist on component: ['+t.name+"]",n);if(n.type&&n.type.toLowerCase()==="file")return tm(n,r,t,i);let o=s.includes("live"),a=s.includes("lazy")||s.includes("change"),l=s.includes("blur"),c=s.includes("debounce"),u=r.startsWith("$parent")?()=>t.$wire.$parent.$commit():()=>t.$wire.$commit(),d=E_(n)&&!c&&o?b_(u,150):u;A_.default.bind(n,{["@change"](){a&&u()},["@blur"](){l&&u()},["x-model"+x_(s)](){return{get(){return tn(t.$wire,r)},set(f){Jo(t.$wire,r,f),o&&!a&&!l&&d()}}}})});function x_(n){return n=n.filter(e=>!["lazy","defer"].includes(e)),n.length===0?"":"."+n.join(".")}function E_(n){return["INPUT","TEXTAREA"].includes(n.tagName.toUpperCase())&&!["checkbox","radio"].includes(n.type)}function Dd(n,e){if(e.startsWith("$parent")){let i=Cn(n.el.parentElement,!1);return i?Dd(i,e.split("$parent.")[1]):!0}let t=e.split(".")[0];return!Object.keys(n.canonical).includes(t)}function b_(n,e){var t;return function(){var i=this,r=arguments,s=function(){t=null,n.apply(i,r)};clearTimeout(t),t=setTimeout(s,e)}}var C_=_t(Pt());Ci("init",({el:n,directive:e})=>{var i;let t=(i=e.expression)!=null?i:"$refresh";C_.default.evaluate(n,`$wire.${t}`)});var I_=_t(Pt());Ci("poll",({el:n,directive:e,component:t})=>{let i=N_(e.modifiers,2e3),{start:r,pauseWhile:s,throttleWhile:o,stopWhen:a}=R_(()=>{S_(n,e)},i);r(),o(()=>O_()&&P_(e)),s(()=>F_(e)&&D_(n)),s(()=>M_(n)),s(()=>L_()),a(()=>k_(n))});function S_(n,e){I_.default.evaluate(n,e.expression?"$wire."+e.expression:"$wire.$commit()")}function R_(n,e=2e3){let t=[],i=[],r=[];return{start(){let s=T_(e,()=>{if(r.some(o=>o()))return s();t.some(o=>o())||i.some(o=>o())&&Math.random()<.95||n()})},pauseWhile(s){t.push(s)},throttleWhile(s){i.push(s)},stopWhen(s){r.push(s)}}}var zn=[];function T_(n,e){if(!zn[n]){let t={timer:setInterval(()=>t.callbacks.forEach(i=>i()),n),callbacks:new Set};zn[n]=t}return zn[n].callbacks.add(e),()=>{zn[n].callbacks.delete(e),zn[n].callbacks.size===0&&(clearInterval(zn[n].timer),delete zn[n])}}var oc=!1;window.addEventListener("offline",()=>oc=!0);window.addEventListener("online",()=>oc=!1);function L_(){return oc}var kd=!1;document.addEventListener("visibilitychange",()=>{kd=document.hidden},!1);function O_(){return kd}function M_(n){return!ia(n).has("poll")}function P_(n){return!n.modifiers.includes("keep-alive")}function F_(n){return n.modifiers.includes("visible")}function D_(n){let e=n.getBoundingClientRect();return!(e.top<(window.innerHeight||document.documentElement.clientHeight)&&e.left<(window.innerWidth||document.documentElement.clientWidth)&&e.bottom>0&&e.right>0)}function k_(n){return n.isConnected===!1}function N_(n,e){let t,i=n.find(s=>s.match(/([0-9]+)ms/)),r=n.find(s=>s.match(/([0-9]+)s/));return i?t=Number(i.replace("ms","")):r&&(t=Number(r.replace("s",""))*1e3),t||e}var ac={directive:Ci,dispatchTo:rc,start:Jm,stop:e_,rescan:t_,first:mm,find:pm,getByName:gm,all:_m,hook:Ct,trigger:Bt,dispatch:wm,on:xm};window.Livewire&&console.warn("Detected multiple instances of Livewire running");window.Alpine&&console.warn("Detected multiple instances of Alpine running");window.Livewire=ac;window.Alpine=Od.default;window.livewireScriptConfig===void 0&&document.addEventListener("DOMContentLoaded",()=>{ac.start()});var Nd=Od.default;/* NProgress, (c) 2013, 2014 Rico Sta. Cruz - http://ricostacruz.com/nprogress
 * @license MIT *//*! Bundled license information:

tabbable/dist/index.js:
  (*!
  * tabbable 5.3.3
  * @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
  *)

focus-trap/dist/focus-trap.js:
  (*!
  * focus-trap 6.9.4
  * @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
  *)
*/let Bd=()=>{};const nu=n=>(typeof n=="function"&&(n=n()),typeof n=="object"&&(n=JSON.stringify(n)),window.navigator.clipboard.writeText(n).then(Bd));function Ml(n){n.magic("clipboard",()=>nu),n.directive("clipboard",(e,{modifiers:t,expression:i},{evaluateLater:r,cleanup:s})=>{const o=t.includes("raw")?l=>l(i):r(i),a=()=>o(nu);e.addEventListener("click",a),s(()=>{e.removeEventListener("click",a)})})}Ml.configure=n=>(n.hasOwnProperty("onCopy")&&typeof n.onCopy=="function"&&(Bd=n.onCopy),Ml);/*! image-blob-reduce 4.1.0 https://github.com/nodeca/image-blob-reduce @license MIT */function _o(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var na={};na.assign=function(e){for(var t,i=1;i<arguments.length;i++){t=Object(arguments[i]);for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e};function Gd(n,e){var t={};return e.forEach(function(i){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}),t}function B_(n){return Gd(n,["alpha","unsharpAmount","unsharpRadius","unsharpThreshold","cancelToken"])}na.pick=Gd;na.pick_pica_resize_options=B_;var jd={exports:{}};/*!

pica
https://github.com/nodeca/pica

*/(function(n,e){(function(t){n.exports=t()})(function(){return function(){function t(i,r,s){function o(c,u){if(!r[c]){if(!i[c]){var d=typeof _o=="function"&&_o;if(!u&&d)return d(c,!0);if(a)return a(c,!0);var f=new Error("Cannot find module '"+c+"'");throw f.code="MODULE_NOT_FOUND",f}var _=r[c]={exports:{}};i[c][0].call(_.exports,function(p){var m=i[c][1][p];return o(m||p)},_,_.exports,t,i,r,s)}return r[c].exports}for(var a=typeof _o=="function"&&_o,l=0;l<s.length;l++)o(s[l]);return o}return t}()({1:[function(t,i,r){var s=t("multimath"),o=t("./mm_unsharp_mask"),a=t("./mm_resize");function l(c){var u=c||[],d={js:u.indexOf("js")>=0,wasm:u.indexOf("wasm")>=0};s.call(this,d),this.features={js:d.js,wasm:d.wasm&&this.has_wasm()},this.use(o),this.use(a)}l.prototype=Object.create(s.prototype),l.prototype.constructor=l,l.prototype.resizeAndUnsharp=function(u,d){var f=this.resize(u,d);return u.unsharpAmount&&this.unsharp_mask(f,u.toWidth,u.toHeight,u.unsharpAmount,u.unsharpRadius,u.unsharpThreshold),f},i.exports=l},{"./mm_resize":4,"./mm_unsharp_mask":9,multimath:19}],2:[function(t,i,r){function s(d){return d<0?0:d>255?255:d}function o(d){return d>=0?d:0}function a(d,f,_,p,m,y){var v,A,x,E,M,L,R,S,B,U,z,X=0,V=0;for(B=0;B<p;B++){for(M=0,U=0;U<m;U++){for(L=y[M++],R=y[M++],S=X+L*4|0,v=A=x=E=0;R>0;R--)z=y[M++],E=E+z*d[S+3]|0,x=x+z*d[S+2]|0,A=A+z*d[S+1]|0,v=v+z*d[S]|0,S=S+4|0;f[V+3]=o(E>>7),f[V+2]=o(x>>7),f[V+1]=o(A>>7),f[V]=o(v>>7),V=V+p*4|0}V=(B+1)*4|0,X=(B+1)*_*4|0}}function l(d,f,_,p,m,y){var v,A,x,E,M,L,R,S,B,U,z,X=0,V=0;for(B=0;B<p;B++){for(M=0,U=0;U<m;U++){for(L=y[M++],R=y[M++],S=X+L*4|0,v=A=x=E=0;R>0;R--)z=y[M++],E=E+z*d[S+3]|0,x=x+z*d[S+2]|0,A=A+z*d[S+1]|0,v=v+z*d[S]|0,S=S+4|0;v>>=7,A>>=7,x>>=7,E>>=7,f[V+3]=s(E+(1<<13)>>14),f[V+2]=s(x+(1<<13)>>14),f[V+1]=s(A+(1<<13)>>14),f[V]=s(v+(1<<13)>>14),V=V+p*4|0}V=(B+1)*4|0,X=(B+1)*_*4|0}}function c(d,f,_,p,m,y){var v,A,x,E,M,L,R,S,B,U,z,X,V=0,Ae=0;for(U=0;U<p;U++){for(L=0,z=0;z<m;z++){for(R=y[L++],S=y[L++],B=V+R*4|0,v=A=x=E=0;S>0;S--)X=y[L++],M=d[B+3],E=E+X*M|0,x=x+X*d[B+2]*M|0,A=A+X*d[B+1]*M|0,v=v+X*d[B]*M|0,B=B+4|0;x=x/255|0,A=A/255|0,v=v/255|0,f[Ae+3]=o(E>>7),f[Ae+2]=o(x>>7),f[Ae+1]=o(A>>7),f[Ae]=o(v>>7),Ae=Ae+p*4|0}Ae=(U+1)*4|0,V=(U+1)*_*4|0}}function u(d,f,_,p,m,y){var v,A,x,E,M,L,R,S,B,U,z,X=0,V=0;for(B=0;B<p;B++){for(M=0,U=0;U<m;U++){for(L=y[M++],R=y[M++],S=X+L*4|0,v=A=x=E=0;R>0;R--)z=y[M++],E=E+z*d[S+3]|0,x=x+z*d[S+2]|0,A=A+z*d[S+1]|0,v=v+z*d[S]|0,S=S+4|0;v>>=7,A>>=7,x>>=7,E>>=7,E=s(E+(1<<13)>>14),E>0&&(v=v*255/E|0,A=A*255/E|0,x=x*255/E|0),f[V+3]=E,f[V+2]=s(x+(1<<13)>>14),f[V+1]=s(A+(1<<13)>>14),f[V]=s(v+(1<<13)>>14),V=V+p*4|0}V=(B+1)*4|0,X=(B+1)*_*4|0}}i.exports={convolveHor:a,convolveVert:l,convolveHorWithPre:c,convolveVertWithPre:u}},{}],3:[function(t,i,r){i.exports="AGFzbQEAAAAADAZkeWxpbmsAAAAAAAEYA2AGf39/f39/AGAAAGAIf39/f39/f38AAg8BA2VudgZtZW1vcnkCAAADBwYBAAAAAAIGBgF/AEEACweUAQgRX193YXNtX2NhbGxfY3RvcnMAAAtjb252b2x2ZUhvcgABDGNvbnZvbHZlVmVydAACEmNvbnZvbHZlSG9yV2l0aFByZQADE2NvbnZvbHZlVmVydFdpdGhQcmUABApjb252b2x2ZUhWAAUMX19kc29faGFuZGxlAwAYX193YXNtX2FwcGx5X2RhdGFfcmVsb2NzAAAKyA4GAwABC4wDARB/AkAgA0UNACAERQ0AIANBAnQhFQNAQQAhE0EAIQsDQCALQQJqIQcCfyALQQF0IAVqIgYuAQIiC0UEQEEAIQhBACEGQQAhCUEAIQogBwwBCyASIAYuAQBqIQhBACEJQQAhCiALIRRBACEOIAchBkEAIQ8DQCAFIAZBAXRqLgEAIhAgACAIQQJ0aigCACIRQRh2bCAPaiEPIBFB/wFxIBBsIAlqIQkgEUEQdkH/AXEgEGwgDmohDiARQQh2Qf8BcSAQbCAKaiEKIAhBAWohCCAGQQFqIQYgFEEBayIUDQALIAlBB3UhCCAKQQd1IQYgDkEHdSEJIA9BB3UhCiAHIAtqCyELIAEgDEEBdCIHaiAIQQAgCEEAShs7AQAgASAHQQJyaiAGQQAgBkEAShs7AQAgASAHQQRyaiAJQQAgCUEAShs7AQAgASAHQQZyaiAKQQAgCkEAShs7AQAgDCAVaiEMIBNBAWoiEyAERw0ACyANQQFqIg0gAmwhEiANQQJ0IQwgAyANRw0ACwsL2gMBD38CQCADRQ0AIARFDQAgAkECdCEUA0AgCyEMQQAhE0EAIQIDQCACQQJqIQYCfyACQQF0IAVqIgcuAQIiAkUEQEEAIQhBACEHQQAhCkEAIQkgBgwBCyAHLgEAQQJ0IBJqIQhBACEJIAIhCkEAIQ0gBiEHQQAhDkEAIQ8DQCAFIAdBAXRqLgEAIhAgACAIQQF0IhFqLwEAbCAJaiEJIAAgEUEGcmovAQAgEGwgDmohDiAAIBFBBHJqLwEAIBBsIA9qIQ8gACARQQJyai8BACAQbCANaiENIAhBBGohCCAHQQFqIQcgCkEBayIKDQALIAlBB3UhCCANQQd1IQcgDkEHdSEKIA9BB3UhCSACIAZqCyECIAEgDEECdGogB0GAQGtBDnUiBkH/ASAGQf8BSBsiBkEAIAZBAEobQQh0QYD+A3EgCUGAQGtBDnUiBkH/ASAGQf8BSBsiBkEAIAZBAEobQRB0QYCA/AdxIApBgEBrQQ51IgZB/wEgBkH/AUgbIgZBACAGQQBKG0EYdHJyIAhBgEBrQQ51IgZB/wEgBkH/AUgbIgZBACAGQQBKG3I2AgAgAyAMaiEMIBNBAWoiEyAERw0ACyAUIAtBAWoiC2whEiADIAtHDQALCwuSAwEQfwJAIANFDQAgBEUNACADQQJ0IRUDQEEAIRNBACEGA0AgBkECaiEIAn8gBkEBdCAFaiIGLgECIgdFBEBBACEJQQAhDEEAIQ1BACEOIAgMAQsgEiAGLgEAaiEJQQAhDkEAIQ1BACEMIAchFEEAIQ8gCCEGA0AgBSAGQQF0ai4BACAAIAlBAnRqKAIAIhBBGHZsIhEgD2ohDyARIBBBEHZB/wFxbCAMaiEMIBEgEEEIdkH/AXFsIA1qIQ0gESAQQf8BcWwgDmohDiAJQQFqIQkgBkEBaiEGIBRBAWsiFA0ACyAPQQd1IQkgByAIagshBiABIApBAXQiCGogDkH/AW1BB3UiB0EAIAdBAEobOwEAIAEgCEECcmogDUH/AW1BB3UiB0EAIAdBAEobOwEAIAEgCEEEcmogDEH/AW1BB3UiB0EAIAdBAEobOwEAIAEgCEEGcmogCUEAIAlBAEobOwEAIAogFWohCiATQQFqIhMgBEcNAAsgC0EBaiILIAJsIRIgC0ECdCEKIAMgC0cNAAsLC4IEAQ9/AkAgA0UNACAERQ0AIAJBAnQhFANAIAshDEEAIRJBACEHA0AgB0ECaiEKAn8gB0EBdCAFaiICLgECIhNFBEBBACEIQQAhCUEAIQYgCiEHQQAMAQsgAi4BAEECdCARaiEJQQAhByATIQJBACENIAohBkEAIQ5BACEPA0AgBSAGQQF0ai4BACIIIAAgCUEBdCIQai8BAGwgB2ohByAAIBBBBnJqLwEAIAhsIA5qIQ4gACAQQQRyai8BACAIbCAPaiEPIAAgEEECcmovAQAgCGwgDWohDSAJQQRqIQkgBkEBaiEGIAJBAWsiAg0ACyAHQQd1IQggDUEHdSEJIA9BB3UhBiAKIBNqIQcgDkEHdQtBgEBrQQ51IgJB/wEgAkH/AUgbIgJBACACQQBKGyIKQf8BcQRAIAlB/wFsIAJtIQkgCEH/AWwgAm0hCCAGQf8BbCACbSEGCyABIAxBAnRqIAlBgEBrQQ51IgJB/wEgAkH/AUgbIgJBACACQQBKG0EIdEGA/gNxIAZBgEBrQQ51IgJB/wEgAkH/AUgbIgJBACACQQBKG0EQdEGAgPwHcSAKQRh0ciAIQYBAa0EOdSICQf8BIAJB/wFIGyICQQAgAkEAShtycjYCACADIAxqIQwgEkEBaiISIARHDQALIBQgC0EBaiILbCERIAMgC0cNAAsLC0AAIAcEQEEAIAIgAyAEIAUgABADIAJBACAEIAUgBiABEAQPC0EAIAIgAyAEIAUgABABIAJBACAEIAUgBiABEAIL"},{}],4:[function(t,i,r){i.exports={name:"resize",fn:t("./resize"),wasm_fn:t("./resize_wasm"),wasm_src:t("./convolve_wasm_base64")}},{"./convolve_wasm_base64":3,"./resize":5,"./resize_wasm":8}],5:[function(t,i,r){var s=t("./resize_filter_gen"),o=t("./convolve"),a=o.convolveHor,l=o.convolveVert,c=o.convolveHorWithPre,u=o.convolveVertWithPre;function d(_,p,m){for(var y=3,v=p*m*4|0;y<v;){if(_[y]!==255)return!0;y=y+4|0}return!1}function f(_,p,m){for(var y=3,v=p*m*4|0;y<v;)_[y]=255,y=y+4|0}i.exports=function(p){var m=p.src,y=p.width,v=p.height,A=p.toWidth,x=p.toHeight,E=p.scaleX||p.toWidth/p.width,M=p.scaleY||p.toHeight/p.height,L=p.offsetX||0,R=p.offsetY||0,S=p.dest||new Uint8Array(A*x*4),B=typeof p.filter=="undefined"?"mks2013":p.filter,U=s(B,y,A,E,L),z=s(B,v,x,M,R),X=new Uint16Array(A*v*4);return d(m,y,v)?(c(m,X,y,v,A,U),u(X,S,v,A,x,z)):(a(m,X,y,v,A,U),l(X,S,v,A,x,z),f(S,A,x)),S}},{"./convolve":2,"./resize_filter_gen":6}],6:[function(t,i,r){var s=t("./resize_filter_info"),o=14;function a(l){return Math.round(l*((1<<o)-1))}i.exports=function(c,u,d,f,_){var p=s.filter[c].fn,m=1/f,y=Math.min(1,f),v=s.filter[c].win/y,A,x,E,M,L,R,S,B,U,z,X,V,Ae,ee,F,N,G,K=Math.floor((v+1)*2),H=new Int16Array((K+2)*d),q=0,D=!H.subarray||!H.set;for(A=0;A<d;A++){for(x=(A+.5)*m+_,E=Math.max(0,Math.floor(x-v)),M=Math.min(u-1,Math.ceil(x+v)),L=M-E+1,R=new Float32Array(L),S=new Int16Array(L),B=0,U=E,z=0;U<=M;U++,z++)X=p((U+.5-x)*y),B+=X,R[z]=X;for(V=0,z=0;z<R.length;z++)Ae=R[z]/B,V+=Ae,S[z]=a(Ae);for(S[d>>1]+=a(1-V),ee=0;ee<S.length&&S[ee]===0;)ee++;if(ee<S.length){for(F=S.length-1;F>0&&S[F]===0;)F--;if(N=E+ee,G=F-ee+1,H[q++]=N,H[q++]=G,!D)H.set(S.subarray(ee,F+1),q),q+=G;else for(z=ee;z<=F;z++)H[q++]=S[z]}else H[q++]=0,H[q++]=0}return H}},{"./resize_filter_info":7}],7:[function(t,i,r){var s={box:{win:.5,fn:function(a){return a<0&&(a=-a),a<.5?1:0}},hamming:{win:1,fn:function(a){if(a<0&&(a=-a),a>=1)return 0;if(a<11920929e-14)return 1;var l=a*Math.PI;return Math.sin(l)/l*(.54+.46*Math.cos(l/1))}},lanczos2:{win:2,fn:function(a){if(a<0&&(a=-a),a>=2)return 0;if(a<11920929e-14)return 1;var l=a*Math.PI;return Math.sin(l)/l*Math.sin(l/2)/(l/2)}},lanczos3:{win:3,fn:function(a){if(a<0&&(a=-a),a>=3)return 0;if(a<11920929e-14)return 1;var l=a*Math.PI;return Math.sin(l)/l*Math.sin(l/3)/(l/3)}},mks2013:{win:2.5,fn:function(a){return a<0&&(a=-a),a>=2.5?0:a>=1.5?-.125*(a-2.5)*(a-2.5):a>=.5?.25*(4*a*a-11*a+7):1.0625-1.75*a*a}}};i.exports={filter:s,f2q:{box:0,hamming:1,lanczos2:2,lanczos3:3},q2f:["box","hamming","lanczos2","lanczos3"]}},{}],8:[function(t,i,r){var s=t("./resize_filter_gen");function o(d,f,_){for(var p=3,m=f*_*4|0;p<m;){if(d[p]!==255)return!0;p=p+4|0}return!1}function a(d,f,_){for(var p=3,m=f*_*4|0;p<m;)d[p]=255,p=p+4|0}function l(d){return new Uint8Array(d.buffer,0,d.byteLength)}var c=!0;try{c=new Uint32Array(new Uint8Array([1,0,0,0]).buffer)[0]===1}catch{}function u(d,f,_){if(c){f.set(l(d),_);return}for(var p=_,m=0;m<d.length;m++){var y=d[m];f[p++]=y&255,f[p++]=y>>8&255}}i.exports=function(f){var _=f.src,p=f.width,m=f.height,y=f.toWidth,v=f.toHeight,A=f.scaleX||f.toWidth/f.width,x=f.scaleY||f.toHeight/f.height,E=f.offsetX||0,M=f.offsetY||0,L=f.dest||new Uint8Array(y*v*4),R=typeof f.filter=="undefined"?"mks2013":f.filter,S=s(R,p,y,A,E),B=s(R,m,v,x,M),U=0,z=Math.max(_.byteLength,L.byteLength),X=this.__align(U+z),V=m*y*4*2,Ae=this.__align(X+V),ee=this.__align(Ae+S.byteLength),F=ee+B.byteLength,N=this.__instance("resize",F),G=new Uint8Array(this.__memory.buffer),K=new Uint32Array(this.__memory.buffer),H=new Uint32Array(_.buffer);K.set(H),u(S,G,Ae),u(B,G,ee);var q=N.exports.convolveHV||N.exports._convolveHV;o(_,p,m)?q(Ae,ee,X,p,m,y,v,1):(q(Ae,ee,X,p,m,y,v,0),a(L,y,v));var D=new Uint32Array(L.buffer);return D.set(new Uint32Array(this.__memory.buffer,0,v*y)),L}},{"./resize_filter_gen":6}],9:[function(t,i,r){i.exports={name:"unsharp_mask",fn:t("./unsharp_mask"),wasm_fn:t("./unsharp_mask_wasm"),wasm_src:t("./unsharp_mask_wasm_base64")}},{"./unsharp_mask":10,"./unsharp_mask_wasm":11,"./unsharp_mask_wasm_base64":12}],10:[function(t,i,r){var s=t("glur/mono16");function o(a,l,c){for(var u=l*c,d=new Uint16Array(u),f,_,p,m,y=0;y<u;y++)f=a[4*y],_=a[4*y+1],p=a[4*y+2],m=f>=_&&f>=p?f:_>=p&&_>=f?_:p,d[y]=m<<8;return d}i.exports=function(l,c,u,d,f,_){var p,m,y,v,A;if(!(d===0||f<.5)){f>2&&(f=2);var x=o(l,c,u),E=new Uint16Array(x);s(E,c,u,f);for(var M=d/100*4096+.5|0,L=_<<8,R=c*u,S=0;S<R;S++)p=x[S],v=p-E[S],Math.abs(v)>=L&&(m=p+(M*v+2048>>12),m=m>65280?65280:m,m=m<0?0:m,p=p!==0?p:1,y=(m<<12)/p|0,A=S*4,l[A]=l[A]*y+2048>>12,l[A+1]=l[A+1]*y+2048>>12,l[A+2]=l[A+2]*y+2048>>12)}}},{"glur/mono16":18}],11:[function(t,i,r){i.exports=function(o,a,l,c,u,d){if(!(c===0||u<.5)){u>2&&(u=2);var f=a*l,_=f*4,p=f*2,m=f*2,y=Math.max(a,l)*4,v=8*4,A=0,x=_,E=x+p,M=E+m,L=M+m,R=L+y,S=this.__instance("unsharp_mask",_+p+m*2+y+v,{exp:Math.exp}),B=new Uint32Array(o.buffer),U=new Uint32Array(this.__memory.buffer);U.set(B);var z=S.exports.hsv_v16||S.exports._hsv_v16;z(A,x,a,l),z=S.exports.blurMono16||S.exports._blurMono16,z(x,E,M,L,R,a,l,u),z=S.exports.unsharp||S.exports._unsharp,z(A,A,x,E,a,l,c,d),B.set(new Uint32Array(this.__memory.buffer,0,f))}}},{}],12:[function(t,i,r){i.exports="AGFzbQEAAAAADAZkeWxpbmsAAAAAAAE0B2AAAGAEf39/fwBgBn9/f39/fwBgCH9/f39/f39/AGAIf39/f39/f30AYAJ9fwBgAXwBfAIZAgNlbnYDZXhwAAYDZW52Bm1lbW9yeQIAAAMHBgAFAgQBAwYGAX8AQQALB4oBCBFfX3dhc21fY2FsbF9jdG9ycwABFl9fYnVpbGRfZ2F1c3NpYW5fY29lZnMAAg5fX2dhdXNzMTZfbGluZQADCmJsdXJNb25vMTYABAdoc3ZfdjE2AAUHdW5zaGFycAAGDF9fZHNvX2hhbmRsZQMAGF9fd2FzbV9hcHBseV9kYXRhX3JlbG9jcwABCsUMBgMAAQvWAQEHfCABRNuGukOCGvs/IAC7oyICRAAAAAAAAADAohAAIgW2jDgCFCABIAKaEAAiAyADoCIGtjgCECABRAAAAAAAAPA/IAOhIgQgBKIgAyACIAKgokQAAAAAAADwP6AgBaGjIgS2OAIAIAEgBSAEmqIiB7Y4AgwgASADIAJEAAAAAAAA8D+gIASioiIItjgCCCABIAMgAkQAAAAAAADwv6AgBKKiIgK2OAIEIAEgByAIoCAFRAAAAAAAAPA/IAahoCIDo7Y4AhwgASAEIAKgIAOjtjgCGAuGBQMGfwl8An0gAyoCDCEVIAMqAgghFiADKgIUuyERIAMqAhC7IRACQCAEQQFrIghBAEgiCQRAIAIhByAAIQYMAQsgAiAALwEAuCIPIAMqAhi7oiIMIBGiIg0gDCAQoiAPIAMqAgS7IhOiIhQgAyoCALsiEiAPoqCgoCIOtjgCACACQQRqIQcgAEECaiEGIAhFDQAgCEEBIAhBAUgbIgpBf3MhCwJ/IAQgCmtBAXFFBEAgDiENIAgMAQsgAiANIA4gEKIgFCASIAAvAQK4Ig+ioKCgIg22OAIEIAJBCGohByAAQQRqIQYgDiEMIARBAmsLIQIgC0EAIARrRg0AA0AgByAMIBGiIA0gEKIgDyAToiASIAYvAQC4Ig6ioKCgIgy2OAIAIAcgDSARoiAMIBCiIA4gE6IgEiAGLwECuCIPoqCgoCINtjgCBCAHQQhqIQcgBkEEaiEGIAJBAkohACACQQJrIQIgAA0ACwsCQCAJDQAgASAFIAhsQQF0aiIAAn8gBkECay8BACICuCINIBW7IhKiIA0gFrsiE6KgIA0gAyoCHLuiIgwgEKKgIAwgEaKgIg8gB0EEayIHKgIAu6AiDkQAAAAAAADwQWMgDkQAAAAAAAAAAGZxBEAgDqsMAQtBAAs7AQAgCEUNACAGQQRrIQZBACAFa0EBdCEBA0ACfyANIBKiIAJB//8DcbgiDSAToqAgDyIOIBCioCAMIBGioCIPIAdBBGsiByoCALugIgxEAAAAAAAA8EFjIAxEAAAAAAAAAABmcQRAIAyrDAELQQALIQMgBi8BACECIAAgAWoiACADOwEAIAZBAmshBiAIQQFKIQMgDiEMIAhBAWshCCADDQALCwvRAgIBfwd8AkAgB0MAAAAAWw0AIARE24a6Q4Ia+z8gB0MAAAA/l7ujIglEAAAAAAAAAMCiEAAiDLaMOAIUIAQgCZoQACIKIAqgIg22OAIQIAREAAAAAAAA8D8gCqEiCyALoiAKIAkgCaCiRAAAAAAAAPA/oCAMoaMiC7Y4AgAgBCAMIAuaoiIOtjgCDCAEIAogCUQAAAAAAADwP6AgC6KiIg+2OAIIIAQgCiAJRAAAAAAAAPC/oCALoqIiCbY4AgQgBCAOIA+gIAxEAAAAAAAA8D8gDaGgIgqjtjgCHCAEIAsgCaAgCqO2OAIYIAYEQANAIAAgBSAIbEEBdGogAiAIQQF0aiADIAQgBSAGEAMgCEEBaiIIIAZHDQALCyAFRQ0AQQAhCANAIAIgBiAIbEEBdGogASAIQQF0aiADIAQgBiAFEAMgCEEBaiIIIAVHDQALCwtxAQN/IAIgA2wiBQRAA0AgASAAKAIAIgRBEHZB/wFxIgIgAiAEQQh2Qf8BcSIDIAMgBEH/AXEiBEkbIAIgA0sbIgYgBiAEIAIgBEsbIAMgBEsbQQh0OwEAIAFBAmohASAAQQRqIQAgBUEBayIFDQALCwuZAgIDfwF8IAQgBWwhBAJ/IAazQwAAgEWUQwAAyEKVu0QAAAAAAADgP6AiC5lEAAAAAAAA4EFjBEAgC6oMAQtBgICAgHgLIQUgBARAIAdBCHQhCUEAIQYDQCAJIAIgBkEBdCIHai8BACIBIAMgB2ovAQBrIgcgB0EfdSIIaiAIc00EQCAAIAZBAnQiCGoiCiAFIAdsQYAQakEMdSABaiIHQYD+AyAHQYD+A0gbIgdBACAHQQBKG0EMdCABQQEgARtuIgEgCi0AAGxBgBBqQQx2OgAAIAAgCEEBcmoiByABIActAABsQYAQakEMdjoAACAAIAhBAnJqIgcgASAHLQAAbEGAEGpBDHY6AAALIAZBAWoiBiAERw0ACwsL"},{}],13:[function(t,i,r){var s=100;function o(a,l){this.create=a,this.available=[],this.acquired={},this.lastId=1,this.timeoutId=0,this.idle=l||2e3}o.prototype.acquire=function(){var a=this,l;return this.available.length!==0?l=this.available.pop():(l=this.create(),l.id=this.lastId++,l.release=function(){return a.release(l)}),this.acquired[l.id]=l,l},o.prototype.release=function(a){var l=this;delete this.acquired[a.id],a.lastUsed=Date.now(),this.available.push(a),this.timeoutId===0&&(this.timeoutId=setTimeout(function(){return l.gc()},s))},o.prototype.gc=function(){var a=this,l=Date.now();this.available=this.available.filter(function(c){return l-c.lastUsed>a.idle?(c.destroy(),!1):!0}),this.available.length!==0?this.timeoutId=setTimeout(function(){return a.gc()},s):this.timeoutId=0},i.exports=o},{}],14:[function(t,i,r){var s=2;i.exports=function(a,l,c,u,d,f){var _=c/a,p=u/l,m=(2*f+s+1)/d;if(m>.5)return[[c,u]];var y=Math.ceil(Math.log(Math.min(_,p))/Math.log(m));if(y<=1)return[[c,u]];for(var v=[],A=0;A<y;A++){var x=Math.round(Math.pow(Math.pow(a,y-A-1)*Math.pow(c,A+1),1/y)),E=Math.round(Math.pow(Math.pow(l,y-A-1)*Math.pow(u,A+1),1/y));v.push([x,E])}return v}},{}],15:[function(t,i,r){var s=1e-5;function o(l){var c=Math.round(l);return Math.abs(l-c)<s?c:Math.floor(l)}function a(l){var c=Math.round(l);return Math.abs(l-c)<s?c:Math.ceil(l)}i.exports=function(c){var u=c.toWidth/c.width,d=c.toHeight/c.height,f=o(c.srcTileSize*u)-2*c.destTileBorder,_=o(c.srcTileSize*d)-2*c.destTileBorder;if(f<1||_<1)throw new Error("Internal error in pica: target tile width/height is too small.");var p,m,y,v,A,x,E=[],M;for(v=0;v<c.toHeight;v+=_)for(y=0;y<c.toWidth;y+=f)p=y-c.destTileBorder,p<0&&(p=0),A=y+f+c.destTileBorder-p,p+A>=c.toWidth&&(A=c.toWidth-p),m=v-c.destTileBorder,m<0&&(m=0),x=v+_+c.destTileBorder-m,m+x>=c.toHeight&&(x=c.toHeight-m),M={toX:p,toY:m,toWidth:A,toHeight:x,toInnerX:y,toInnerY:v,toInnerWidth:f,toInnerHeight:_,offsetX:p/u-o(p/u),offsetY:m/d-o(m/d),scaleX:u,scaleY:d,x:o(p/u),y:o(m/d),width:a(A/u),height:a(x/d)},E.push(M);return E}},{}],16:[function(t,i,r){function s(o){return Object.prototype.toString.call(o)}i.exports.isCanvas=function(a){var l=s(a);return l==="[object HTMLCanvasElement]"||l==="[object OffscreenCanvas]"||l==="[object Canvas]"},i.exports.isImage=function(a){return s(a)==="[object HTMLImageElement]"},i.exports.isImageBitmap=function(a){return s(a)==="[object ImageBitmap]"},i.exports.limiter=function(a){var l=0,c=[];function u(){l<a&&c.length&&(l++,c.shift()())}return function(f){return new Promise(function(_,p){c.push(function(){f().then(function(m){_(m),l--,u()},function(m){p(m),l--,u()})}),u()})}},i.exports.cib_quality_name=function(a){switch(a){case 0:return"pixelated";case 1:return"low";case 2:return"medium"}return"high"},i.exports.cib_support=function(a){return Promise.resolve().then(function(){if(typeof createImageBitmap=="undefined")return!1;var l=a(100,100);return createImageBitmap(l,0,0,100,100,{resizeWidth:10,resizeHeight:10,resizeQuality:"high"}).then(function(c){var u=c.width===10;return c.close(),l=null,u})}).catch(function(){return!1})},i.exports.worker_offscreen_canvas_support=function(){return new Promise(function(a,l){if(typeof OffscreenCanvas=="undefined"){a(!1);return}function c(f){if(typeof createImageBitmap=="undefined"){f.postMessage(!1);return}Promise.resolve().then(function(){var _=new OffscreenCanvas(10,10),p=_.getContext("2d");return p.rect(0,0,1,1),createImageBitmap(_,0,0,1,1)}).then(function(){return f.postMessage(!0)},function(){return f.postMessage(!1)})}var u=btoa("(".concat(c.toString(),")(self);")),d=new Worker("data:text/javascript;base64,".concat(u));d.onmessage=function(f){return a(f.data)},d.onerror=l}).then(function(a){return a},function(){return!1})},i.exports.can_use_canvas=function(a){var l=!1;try{var c=a(2,1),u=c.getContext("2d"),d=u.createImageData(2,1);d.data[0]=12,d.data[1]=23,d.data[2]=34,d.data[3]=255,d.data[4]=45,d.data[5]=56,d.data[6]=67,d.data[7]=255,u.putImageData(d,0,0),d=null,d=u.getImageData(0,0,2,1),d.data[0]===12&&d.data[1]===23&&d.data[2]===34&&d.data[3]===255&&d.data[4]===45&&d.data[5]===56&&d.data[6]===67&&d.data[7]===255&&(l=!0)}catch{}return l},i.exports.cib_can_use_region=function(){return new Promise(function(a){if(typeof createImageBitmap=="undefined"){a(!1);return}var l=new Image;l.src="data:image/jpeg;base64,/9j/4QBiRXhpZgAATU0AKgAAAAgABQESAAMAAAABAAYAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAAAAABIAAAAAQAAAEgAAAAB/9sAQwAEAwMEAwMEBAMEBQQEBQYKBwYGBgYNCQoICg8NEBAPDQ8OERMYFBESFxIODxUcFRcZGRsbGxAUHR8dGh8YGhsa/9sAQwEEBQUGBQYMBwcMGhEPERoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoa/8IAEQgAAQACAwERAAIRAQMRAf/EABQAAQAAAAAAAAAAAAAAAAAAAAf/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAF/P//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAQUCf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Bf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Bf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEABj8Cf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAT8hf//aAAwDAQACAAMAAAAQH//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Qf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Qf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAT8Qf//Z",l.onload=function(){createImageBitmap(l,0,0,l.width,l.height).then(function(c){c.width===l.width&&c.height===l.height?a(!0):a(!1)},function(){return a(!1)})},l.onerror=function(){return a(!1)}})}},{}],17:[function(t,i,r){i.exports=function(){var s=t("./mathlib"),o;onmessage=function(l){var c=l.data.opts;if(!c.src&&c.srcBitmap){var u=new OffscreenCanvas(c.width,c.height),d=u.getContext("2d");d.drawImage(c.srcBitmap,0,0),c.src=d.getImageData(0,0,c.width,c.height).data,u.width=u.height=0,u=null,c.srcBitmap.close(),c.srcBitmap=null}o||(o=new s(l.data.features));var f=o.resizeAndUnsharp(c);postMessage({data:f},[f.buffer])}}},{"./mathlib":1}],18:[function(t,i,r){var s,o,a,l,c,u,d,f;function _(y){y<.5&&(y=.5);var v=Math.exp(.726*.726)/y,A=Math.exp(-v),x=Math.exp(-2*v),E=(1-A)*(1-A)/(1+2*v*A-x);return s=E,o=E*(v-1)*A,a=E*(v+1)*A,l=-E*x,c=2*A,u=-x,d=(s+o)/(1-c-u),f=(a+l)/(1-c-u),new Float32Array([s,o,a,l,c,u,d,f])}function p(y,v,A,x,E,M){var L,R,S,B,U,z,X,V,Ae,ee,F,N,G,K;for(Ae=0;Ae<M;Ae++){for(z=Ae*E,X=Ae,V=0,L=y[z],U=L*x[6],B=U,F=x[0],N=x[1],G=x[4],K=x[5],ee=0;ee<E;ee++)R=y[z],S=R*F+L*N+B*G+U*K,U=B,B=S,L=R,A[V]=B,V++,z++;for(z--,V--,X+=M*(E-1),L=y[z],U=L*x[7],B=U,R=L,F=x[2],N=x[3],ee=E-1;ee>=0;ee--)S=R*F+L*N+B*G+U*K,U=B,B=S,L=R,R=y[z],v[X]=A[V]+B,z--,V--,X-=M}}function m(y,v,A,x){if(!!x){var E=new Uint16Array(y.length),M=new Float32Array(Math.max(v,A)),L=_(x);p(y,E,M,L,v,A),p(E,y,M,L,A,v)}}i.exports=m},{}],19:[function(t,i,r){var s=t("object-assign"),o=t("./lib/base64decode"),a=t("./lib/wa_detect"),l={js:!0,wasm:!0};function c(u){if(!(this instanceof c))return new c(u);var d=s({},l,u||{});if(this.options=d,this.__cache={},this.__init_promise=null,this.__modules=d.modules||{},this.__memory=null,this.__wasm={},this.__isLE=new Uint32Array(new Uint8Array([1,0,0,0]).buffer)[0]===1,!this.options.js&&!this.options.wasm)throw new Error('mathlib: at least "js" or "wasm" should be enabled')}c.prototype.has_wasm=a,c.prototype.use=function(u){return this.__modules[u.name]=u,this.options.wasm&&this.has_wasm()&&u.wasm_fn?this[u.name]=u.wasm_fn:this[u.name]=u.fn,this},c.prototype.init=function(){if(this.__init_promise)return this.__init_promise;if(!this.options.js&&this.options.wasm&&!this.has_wasm())return Promise.reject(new Error(`mathlib: only "wasm" was enabled, but it's not supported`));var u=this;return this.__init_promise=Promise.all(Object.keys(u.__modules).map(function(d){var f=u.__modules[d];return!u.options.wasm||!u.has_wasm()||!f.wasm_fn||u.__wasm[d]?null:WebAssembly.compile(u.__base64decode(f.wasm_src)).then(function(_){u.__wasm[d]=_})})).then(function(){return u}),this.__init_promise},c.prototype.__base64decode=o,c.prototype.__reallocate=function(d){if(!this.__memory)return this.__memory=new WebAssembly.Memory({initial:Math.ceil(d/(64*1024))}),this.__memory;var f=this.__memory.buffer.byteLength;return f<d&&this.__memory.grow(Math.ceil((d-f)/(64*1024))),this.__memory},c.prototype.__instance=function(d,f,_){if(f&&this.__reallocate(f),!this.__wasm[d]){var p=this.__modules[d];this.__wasm[d]=new WebAssembly.Module(this.__base64decode(p.wasm_src))}if(!this.__cache[d]){var m={memoryBase:0,memory:this.__memory,tableBase:0,table:new WebAssembly.Table({initial:0,element:"anyfunc"})};this.__cache[d]=new WebAssembly.Instance(this.__wasm[d],{env:s(m,_||{})})}return this.__cache[d]},c.prototype.__align=function(d,f){f=f||8;var _=d%f;return d+(_?f-_:0)},i.exports=c},{"./lib/base64decode":20,"./lib/wa_detect":21,"object-assign":22}],20:[function(t,i,r){var s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";i.exports=function(a){for(var l=a.replace(/[\r\n=]/g,""),c=l.length,u=new Uint8Array(c*3>>2),d=0,f=0,_=0;_<c;_++)_%4===0&&_&&(u[f++]=d>>16&255,u[f++]=d>>8&255,u[f++]=d&255),d=d<<6|s.indexOf(l.charAt(_));var p=c%4*6;return p===0?(u[f++]=d>>16&255,u[f++]=d>>8&255,u[f++]=d&255):p===18?(u[f++]=d>>10&255,u[f++]=d>>2&255):p===12&&(u[f++]=d>>4&255),u}},{}],21:[function(t,i,r){var s;i.exports=function(){if(typeof s!="undefined"||(s=!1,typeof WebAssembly=="undefined"))return s;try{var a=new Uint8Array([0,97,115,109,1,0,0,0,1,6,1,96,1,127,1,127,3,2,1,0,5,3,1,0,1,7,8,1,4,116,101,115,116,0,0,10,16,1,14,0,32,0,65,1,54,2,0,32,0,40,2,0,11]),l=new WebAssembly.Module(a),c=new WebAssembly.Instance(l,{});return c.exports.test(4)!==0&&(s=!0),s}catch{}return s}},{}],22:[function(t,i,r){var s=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;function l(u){if(u==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(u)}function c(){try{if(!Object.assign)return!1;var u=new String("abc");if(u[5]="de",Object.getOwnPropertyNames(u)[0]==="5")return!1;for(var d={},f=0;f<10;f++)d["_"+String.fromCharCode(f)]=f;var _=Object.getOwnPropertyNames(d).map(function(m){return d[m]});if(_.join("")!=="0123456789")return!1;var p={};return"abcdefghijklmnopqrst".split("").forEach(function(m){p[m]=m}),Object.keys(Object.assign({},p)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}i.exports=c()?Object.assign:function(u,d){for(var f,_=l(u),p,m=1;m<arguments.length;m++){f=Object(arguments[m]);for(var y in f)o.call(f,y)&&(_[y]=f[y]);if(s){p=s(f);for(var v=0;v<p.length;v++)a.call(f,p[v])&&(_[p[v]]=f[p[v]])}}return _}},{}],23:[function(t,i,r){var s=arguments[3],o=arguments[4],a=arguments[5],l=JSON.stringify;i.exports=function(c,u){for(var d,f=Object.keys(a),_=0,p=f.length;_<p;_++){var m=f[_],y=a[m].exports;if(y===c||y&&y.default===c){d=m;break}}if(!d){d=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var v={},_=0,p=f.length;_<p;_++){var m=f[_];v[m]=m}o[d]=["function(require,module,exports){"+c+"(self); }",v]}var A=Math.floor(Math.pow(16,8)*Math.random()).toString(16),x={};x[d]=d,o[A]=["function(require,module,exports){var f = require("+l(d)+");(f.default ? f.default : f)(self);}",x];var E={};M(A);function M(z){E[z]=!0;for(var X in o[z][1]){var V=o[z][1][X];E[V]||M(V)}}var L="("+s+")({"+Object.keys(E).map(function(z){return l(z)+":["+o[z][0]+","+l(o[z][1])+"]"}).join(",")+"},{},["+l(A)+"])",R=window.URL||window.webkitURL||window.mozURL||window.msURL,S=new Blob([L],{type:"text/javascript"});if(u&&u.bare)return S;var B=R.createObjectURL(S),U=new Worker(B);return U.objectURL=B,U}},{}],"/index.js":[function(t,i,r){function s(F,N){return u(F)||c(F,N)||a(F,N)||o()}function o(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function a(F,N){if(!!F){if(typeof F=="string")return l(F,N);var G=Object.prototype.toString.call(F).slice(8,-1);if(G==="Object"&&F.constructor&&(G=F.constructor.name),G==="Map"||G==="Set")return Array.from(F);if(G==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(G))return l(F,N)}}function l(F,N){(N==null||N>F.length)&&(N=F.length);for(var G=0,K=new Array(N);G<N;G++)K[G]=F[G];return K}function c(F,N){var G=F==null?null:typeof Symbol!="undefined"&&F[Symbol.iterator]||F["@@iterator"];if(G!=null){var K=[],H=!0,q=!1,D,ce;try{for(G=G.call(F);!(H=(D=G.next()).done)&&(K.push(D.value),!(N&&K.length===N));H=!0);}catch(J){q=!0,ce=J}finally{try{!H&&G.return!=null&&G.return()}finally{if(q)throw ce}}return K}}function u(F){if(Array.isArray(F))return F}var d=t("object-assign"),f=t("webworkify"),_=t("./lib/mathlib"),p=t("./lib/pool"),m=t("./lib/utils"),y=t("./lib/worker"),v=t("./lib/stepper"),A=t("./lib/tiler"),x=t("./lib/mm_resize/resize_filter_info"),E={},M=!1;try{typeof navigator!="undefined"&&navigator.userAgent&&(M=navigator.userAgent.indexOf("Safari")>=0)}catch{}var L=1;typeof navigator!="undefined"&&(L=Math.min(navigator.hardwareConcurrency||1,4));var R={tile:1024,concurrency:L,features:["js","wasm","ww"],idle:2e3,createCanvas:function(N,G){var K=document.createElement("canvas");return K.width=N,K.height=G,K}},S={filter:"mks2013",unsharpAmount:0,unsharpRadius:0,unsharpThreshold:0},B=!1,U=!1,z=!1,X=!1,V=!1;function Ae(){return{value:f(y),destroy:function(){if(this.value.terminate(),typeof window!="undefined"){var N=window.URL||window.webkitURL||window.mozURL||window.msURL;N&&N.revokeObjectURL&&this.value.objectURL&&N.revokeObjectURL(this.value.objectURL)}}}}function ee(F){if(!(this instanceof ee))return new ee(F);this.options=d({},R,F||{});var N="lk_".concat(this.options.concurrency);this.__limit=E[N]||m.limiter(this.options.concurrency),E[N]||(E[N]=this.__limit),this.features={js:!1,wasm:!1,cib:!1,ww:!1},this.__workersPool=null,this.__requested_features=[],this.__mathlib=null}ee.prototype.init=function(){var F=this;if(this.__initPromise)return this.__initPromise;if(typeof ImageData!="undefined"&&typeof Uint8ClampedArray!="undefined")try{new ImageData(new Uint8ClampedArray(400),10,10),B=!0}catch{}typeof ImageBitmap!="undefined"&&(ImageBitmap.prototype&&ImageBitmap.prototype.close?U=!0:this.debug("ImageBitmap does not support .close(), disabled"));var N=this.options.features.slice();if(N.indexOf("all")>=0&&(N=["cib","wasm","js","ww"]),this.__requested_features=N,this.__mathlib=new _(N),N.indexOf("ww")>=0&&typeof window!="undefined"&&"Worker"in window)try{var G=t("webworkify")(function(){});G.terminate(),this.features.ww=!0;var K="wp_".concat(JSON.stringify(this.options));E[K]?this.__workersPool=E[K]:(this.__workersPool=new p(Ae,this.options.idle),E[K]=this.__workersPool)}catch{}var H=this.__mathlib.init().then(function(J){d(F.features,J.features)}),q;U?q=m.cib_support(this.options.createCanvas).then(function(J){if(F.features.cib&&N.indexOf("cib")<0){F.debug("createImageBitmap() resize supported, but disabled by config");return}N.indexOf("cib")>=0&&(F.features.cib=J)}):q=Promise.resolve(!1),z=m.can_use_canvas(this.options.createCanvas);var D;U&&B&&N.indexOf("ww")!==-1?D=m.worker_offscreen_canvas_support():D=Promise.resolve(!1),D=D.then(function(J){X=J});var ce=m.cib_can_use_region().then(function(J){V=J});return this.__initPromise=Promise.all([H,q,D,ce]).then(function(){return F}),this.__initPromise},ee.prototype.__invokeResize=function(F,N){var G=this;return N.__mathCache=N.__mathCache||{},Promise.resolve().then(function(){return G.features.ww?new Promise(function(K,H){var q=G.__workersPool.acquire();N.cancelToken&&N.cancelToken.catch(function(ce){return H(ce)}),q.value.onmessage=function(ce){q.release(),ce.data.err?H(ce.data.err):K(ce.data)};var D=[];F.src&&D.push(F.src.buffer),F.srcBitmap&&D.push(F.srcBitmap),q.value.postMessage({opts:F,features:G.__requested_features,preload:{wasm_nodule:G.__mathlib.__}},D)}):{data:G.__mathlib.resizeAndUnsharp(F,N.__mathCache)}})},ee.prototype.__extractTileData=function(F,N,G,K,H){if(this.features.ww&&X&&(m.isCanvas(N)||V))return this.debug("Create tile for OffscreenCanvas"),createImageBitmap(K.srcImageBitmap||N,F.x,F.y,F.width,F.height).then(function(ce){return H.srcBitmap=ce,H});if(m.isCanvas(N))return K.srcCtx||(K.srcCtx=N.getContext("2d")),this.debug("Get tile pixel data"),H.src=K.srcCtx.getImageData(F.x,F.y,F.width,F.height).data,H;this.debug("Draw tile imageBitmap/image to temporary canvas");var q=this.options.createCanvas(F.width,F.height),D=q.getContext("2d");return D.globalCompositeOperation="copy",D.drawImage(K.srcImageBitmap||N,F.x,F.y,F.width,F.height,0,0,F.width,F.height),this.debug("Get tile pixel data"),H.src=D.getImageData(0,0,F.width,F.height).data,q.width=q.height=0,H},ee.prototype.__landTileData=function(F,N,G){var K;if(this.debug("Convert raw rgba tile result to ImageData"),N.bitmap)return G.toCtx.drawImage(N.bitmap,F.toX,F.toY),null;if(B)K=new ImageData(new Uint8ClampedArray(N.data),F.toWidth,F.toHeight);else if(K=G.toCtx.createImageData(F.toWidth,F.toHeight),K.data.set)K.data.set(N.data);else for(var H=K.data.length-1;H>=0;H--)K.data[H]=N.data[H];return this.debug("Draw tile"),M?G.toCtx.putImageData(K,F.toX,F.toY,F.toInnerX-F.toX,F.toInnerY-F.toY,F.toInnerWidth+1e-5,F.toInnerHeight+1e-5):G.toCtx.putImageData(K,F.toX,F.toY,F.toInnerX-F.toX,F.toInnerY-F.toY,F.toInnerWidth,F.toInnerHeight),null},ee.prototype.__tileAndResize=function(F,N,G){var K=this,H={srcCtx:null,srcImageBitmap:null,isImageBitmapReused:!1,toCtx:null},q=function(ce){return K.__limit(function(){if(G.canceled)return G.cancelToken;var J={width:ce.width,height:ce.height,toWidth:ce.toWidth,toHeight:ce.toHeight,scaleX:ce.scaleX,scaleY:ce.scaleY,offsetX:ce.offsetX,offsetY:ce.offsetY,filter:G.filter,unsharpAmount:G.unsharpAmount,unsharpRadius:G.unsharpRadius,unsharpThreshold:G.unsharpThreshold};return K.debug("Invoke resize math"),Promise.resolve(J).then(function(ne){return K.__extractTileData(ce,F,G,H,ne)}).then(function(ne){return K.debug("Invoke resize math"),K.__invokeResize(ne,G)}).then(function(ne){return G.canceled?G.cancelToken:(H.srcImageData=null,K.__landTileData(ce,ne,H))})})};return Promise.resolve().then(function(){if(H.toCtx=N.getContext("2d"),m.isCanvas(F))return null;if(m.isImageBitmap(F))return H.srcImageBitmap=F,H.isImageBitmapReused=!0,null;if(m.isImage(F))return U?(K.debug("Decode image via createImageBitmap"),createImageBitmap(F).then(function(D){H.srcImageBitmap=D}).catch(function(D){return null})):null;throw new Error('Pica: ".from" should be Image, Canvas or ImageBitmap')}).then(function(){if(G.canceled)return G.cancelToken;K.debug("Calculate tiles");var D=A({width:G.width,height:G.height,srcTileSize:K.options.tile,toWidth:G.toWidth,toHeight:G.toHeight,destTileBorder:G.__destTileBorder}),ce=D.map(function(ne){return q(ne)});function J(ne){ne.srcImageBitmap&&(ne.isImageBitmapReused||ne.srcImageBitmap.close(),ne.srcImageBitmap=null)}return K.debug("Process tiles"),Promise.all(ce).then(function(){return K.debug("Finished!"),J(H),N},function(ne){throw J(H),ne})})},ee.prototype.__processStages=function(F,N,G,K){var H=this;if(K.canceled)return K.cancelToken;var q=F.shift(),D=s(q,2),ce=D[0],J=D[1],ne=F.length===0,fe;ne||x.q2f.indexOf(K.filter)<0?fe=K.filter:K.filter==="box"?fe="box":fe="hamming",K=d({},K,{toWidth:ce,toHeight:J,filter:fe});var Ne;return ne||(Ne=this.options.createCanvas(ce,J)),this.__tileAndResize(N,ne?G:Ne,K).then(function(){return ne?G:(K.width=ce,K.height=J,H.__processStages(F,Ne,G,K))}).then(function(le){return Ne&&(Ne.width=Ne.height=0),le})},ee.prototype.__resizeViaCreateImageBitmap=function(F,N,G){var K=this,H=N.getContext("2d");return this.debug("Resize via createImageBitmap()"),createImageBitmap(F,{resizeWidth:G.toWidth,resizeHeight:G.toHeight,resizeQuality:m.cib_quality_name(x.f2q[G.filter])}).then(function(q){if(G.canceled)return G.cancelToken;if(!G.unsharpAmount)return H.drawImage(q,0,0),q.close(),H=null,K.debug("Finished!"),N;K.debug("Unsharp result");var D=K.options.createCanvas(G.toWidth,G.toHeight),ce=D.getContext("2d");ce.drawImage(q,0,0),q.close();var J=ce.getImageData(0,0,G.toWidth,G.toHeight);return K.__mathlib.unsharp_mask(J.data,G.toWidth,G.toHeight,G.unsharpAmount,G.unsharpRadius,G.unsharpThreshold),H.putImageData(J,0,0),D.width=D.height=0,J=ce=D=H=null,K.debug("Finished!"),N})},ee.prototype.resize=function(F,N,G){var K=this;this.debug("Start resize...");var H=d({},S);if(isNaN(G)?G&&(H=d(H,G)):H=d(H,{quality:G}),H.toWidth=N.width,H.toHeight=N.height,H.width=F.naturalWidth||F.width,H.height=F.naturalHeight||F.height,Object.prototype.hasOwnProperty.call(H,"quality")){if(H.quality<0||H.quality>3)throw new Error("Pica: .quality should be [0..3], got ".concat(H.quality));H.filter=x.q2f[H.quality]}if(N.width===0||N.height===0)return Promise.reject(new Error("Invalid output size: ".concat(N.width,"x").concat(N.height)));H.unsharpRadius>2&&(H.unsharpRadius=2),H.canceled=!1,H.cancelToken&&(H.cancelToken=H.cancelToken.then(function(D){throw H.canceled=!0,D},function(D){throw H.canceled=!0,D}));var q=3;return H.__destTileBorder=Math.ceil(Math.max(q,2.5*H.unsharpRadius|0)),this.init().then(function(){if(H.canceled)return H.cancelToken;if(K.features.cib){if(x.q2f.indexOf(H.filter)>=0)return K.__resizeViaCreateImageBitmap(F,N,H);K.debug("cib is enabled, but not supports provided filter, fallback to manual math")}if(!z){var D=new Error("Pica: cannot use getImageData on canvas, make sure fingerprinting protection isn't enabled");throw D.code="ERR_GET_IMAGE_DATA",D}var ce=v(H.width,H.height,H.toWidth,H.toHeight,K.options.tile,H.__destTileBorder);return K.__processStages(ce,F,N,H)})},ee.prototype.resizeBuffer=function(F){var N=this,G=d({},S,F);if(Object.prototype.hasOwnProperty.call(G,"quality")){if(G.quality<0||G.quality>3)throw new Error("Pica: .quality should be [0..3], got ".concat(G.quality));G.filter=x.q2f[G.quality]}return this.init().then(function(){return N.__mathlib.resizeAndUnsharp(G)})},ee.prototype.toBlob=function(F,N,G){return N=N||"image/png",new Promise(function(K){if(F.toBlob){F.toBlob(function(J){return K(J)},N,G);return}if(F.convertToBlob){K(F.convertToBlob({type:N,quality:G}));return}for(var H=atob(F.toDataURL(N,G).split(",")[1]),q=H.length,D=new Uint8Array(q),ce=0;ce<q;ce++)D[ce]=H.charCodeAt(ce);K(new Blob([D],{type:N}))})},ee.prototype.debug=function(){},i.exports=ee},{"./lib/mathlib":1,"./lib/mm_resize/resize_filter_info":7,"./lib/pool":13,"./lib/stepper":14,"./lib/tiler":15,"./lib/utils":16,"./lib/worker":17,"object-assign":22,webworkify:23}]},{},[])("/index.js")})})(jd);var Fs={},zd={exports:{}};(function(n){function e(a,l){var c=new Error(a);return c.code=l,c}function t(a){for(var l=a.toString(16).toUpperCase(),c=2-l.length;c>0;c--)l="0"+l;return"0x"+l}function i(a){try{return unescape(encodeURIComponent(a))}catch{return a}}function r(a){try{return decodeURIComponent(escape(a))}catch{return a}}function s(a){return Object.prototype.toString.call(a)==="[object Uint8Array]"}function o(a,l,c){this.input=a.subarray(l,c),this.start=l;var u=String.fromCharCode.apply(null,this.input.subarray(0,4));if(u!=="II*\0"&&u!=="MM\0*")throw e("invalid TIFF signature","EBADDATA");this.big_endian=u[0]==="M"}o.prototype.each=function(a){this.aborted=!1;var l=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:l}];this.ifds_to_read.length>0&&!this.aborted;){var c=this.ifds_to_read.shift();!c.offset||this.scan_ifd(c.id,c.offset,a)}},o.prototype.filter=function(a){var l={};l.ifd0={id:0,entries:[]},this.each(function(f){a(f)===!1&&!f.is_subifd_link||f.is_subifd_link&&f.count!==1&&f.format!==4||(l["ifd"+f.ifd]||(l["ifd"+f.ifd]={id:f.ifd,entries:[]}),l["ifd"+f.ifd].entries.push(f))}),delete l.ifd1;var c=8;Object.keys(l).forEach(function(f){c+=2,l[f].entries.forEach(function(_){c+=12+(_.data_length>4?Math.ceil(_.data_length/2)*2:0)}),c+=4}),this.output=new Uint8Array(c),this.output[0]=this.output[1]=(this.big_endian?"M":"I").charCodeAt(0),this.write_uint16(2,42);var u=8,d=this;if(this.write_uint32(4,u),Object.keys(l).forEach(function(f){l[f].written_offset=u;var _=u,p=_+2+l[f].entries.length*12+4;u=p,d.write_uint16(_,l[f].entries.length),l[f].entries.sort(function(y,v){return y.tag-v.tag}).forEach(function(y,v){var A=_+2+v*12;d.write_uint16(A,y.tag),d.write_uint16(A+2,y.format),d.write_uint32(A+4,y.count),y.is_subifd_link?l["ifd"+y.tag]&&(l["ifd"+y.tag].link_offset=A+8):y.data_length<=4?d.output.set(d.input.subarray(y.data_offset-d.start,y.data_offset-d.start+4),A+8):(d.write_uint32(A+8,u),d.output.set(d.input.subarray(y.data_offset-d.start,y.data_offset-d.start+y.data_length),u),u+=Math.ceil(y.data_length/2)*2)});var m=l["ifd"+(l[f].id+1)];m&&(m.link_offset=p-4)}),Object.keys(l).forEach(function(f){l[f].written_offset&&l[f].link_offset&&d.write_uint32(l[f].link_offset,l[f].written_offset)}),this.output.length!==u)throw e("internal error: incorrect buffer size allocated");return this.output},o.prototype.read_uint16=function(a){var l=this.input;if(a+2>l.length)throw e("unexpected EOF","EBADDATA");return this.big_endian?l[a]*256+l[a+1]:l[a]+l[a+1]*256},o.prototype.read_uint32=function(a){var l=this.input;if(a+4>l.length)throw e("unexpected EOF","EBADDATA");return this.big_endian?l[a]*16777216+l[a+1]*65536+l[a+2]*256+l[a+3]:l[a]+l[a+1]*256+l[a+2]*65536+l[a+3]*16777216},o.prototype.write_uint16=function(a,l){var c=this.output;this.big_endian?(c[a]=l>>>8&255,c[a+1]=l&255):(c[a]=l&255,c[a+1]=l>>>8&255)},o.prototype.write_uint32=function(a,l){var c=this.output;this.big_endian?(c[a]=l>>>24&255,c[a+1]=l>>>16&255,c[a+2]=l>>>8&255,c[a+3]=l&255):(c[a]=l&255,c[a+1]=l>>>8&255,c[a+2]=l>>>16&255,c[a+3]=l>>>24&255)},o.prototype.is_subifd_link=function(a,l){return a===0&&l===34665||a===0&&l===34853||a===34665&&l===40965},o.prototype.exif_format_length=function(a){switch(a){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},o.prototype.exif_format_read=function(a,l){var c;switch(a){case 1:case 2:return c=this.input[l],c;case 6:return c=this.input[l],c|(c&128)*33554430;case 3:return c=this.read_uint16(l),c;case 8:return c=this.read_uint16(l),c|(c&32768)*131070;case 4:return c=this.read_uint32(l),c;case 9:return c=this.read_uint32(l),c|0;case 5:case 10:case 11:case 12:return null;case 7:return null;default:return null}},o.prototype.scan_ifd=function(a,l,c){var u=this.read_uint16(l);l+=2;for(var d=0;d<u;d++){var f=this.read_uint16(l),_=this.read_uint16(l+2),p=this.read_uint32(l+4),m=this.exif_format_length(_),y=p*m,v=y<=4?l+8:this.read_uint32(l+8),A=!1;if(v+y>this.input.length)throw e("unexpected EOF","EBADDATA");for(var x=[],E=v,M=0;M<p;M++,E+=m){var L=this.exif_format_read(_,E);if(L===null){x=null;break}x.push(L)}if(Array.isArray(x)&&_===2){try{x=r(String.fromCharCode.apply(null,x))}catch{x=null}x&&x[x.length-1]==="\0"&&(x=x.slice(0,-1))}this.is_subifd_link(a,f)&&Array.isArray(x)&&Number.isInteger(x[0])&&x[0]>0&&(this.ifds_to_read.push({id:f,offset:x[0]}),A=!0);var R={is_big_endian:this.big_endian,ifd:a,tag:f,format:_,count:p,entry_offset:l+this.start,data_length:y,data_offset:v+this.start,value:x,is_subifd_link:A};if(c(R)===!1){this.aborted=!0;return}l+=12}a===0&&this.ifds_to_read.push({id:1,offset:this.read_uint32(l)})},n.exports.is_jpeg=function(a){return a.length>=4&&a[0]===255&&a[1]===216&&a[2]===255},n.exports.jpeg_segments_each=function(a,l){if(!s(a))throw e("Invalid argument (jpeg_bin), Uint8Array expected","EINVAL");if(typeof l!="function")throw e("Invalid argument (on_segment), Function expected","EINVAL");if(!n.exports.is_jpeg(a))throw e("Unknown file format","ENOTJPEG");for(var c=0,u=a.length,d=!1;;){var f,_;if(c+1>=u)throw e("Unexpected EOF","EBADDATA");var p=a[c],m=a[c+1];if(p===255&&m===255)f=255,_=1;else if(p===255&&m!==0){if(f=m,_=2,!(208<=f&&f<=217||f===1)){if(c+3>=u)throw e("Unexpected EOF","EBADDATA");if(_+=a[c+2]*256+a[c+3],_<2)throw e("Invalid segment length","EBADDATA");if(c+_-1>=u)throw e("Unexpected EOF","EBADDATA")}d&&(f>=208&&f<=215||(d=!1)),f===218&&(d=!0)}else if(d)for(var y=c+1;;y++){if(y>=u)throw e("Unexpected EOF","EBADDATA");if(a[y]===255){if(y+1>=u)throw e("Unexpected EOF","EBADDATA");if(a[y+1]!==0){f=0,_=y-c;break}}}else throw e("Unexpected byte at segment start: "+t(p)+" (offset "+t(c)+")","EBADDATA");if(l({code:f,offset:c,length:_})===!1||f===217)break;c+=_}},n.exports.jpeg_segments_filter=function(a,l){if(!s(a))throw e("Invalid argument (jpeg_bin), Uint8Array expected","EINVAL");if(typeof l!="function")throw e("Invalid argument (on_segment), Function expected","EINVAL");var c=[],u=0;n.exports.jpeg_segments_each(a,function(_){var p=l(_);if(s(p))c.push({data:p}),u+=p.length;else if(Array.isArray(p))p.filter(s).forEach(function(y){c.push({data:y}),u+=y.length});else if(p!==!1){var m={start:_.offset,end:_.offset+_.length};c.length>0&&c[c.length-1].end===m.start?c[c.length-1].end=m.end:c.push(m),u+=_.length}});var d=new Uint8Array(u),f=0;return c.forEach(function(_){var p=_.data||a.subarray(_.start,_.end);d.set(p,f),f+=p.length}),d},n.exports.jpeg_exif_tags_each=function(a,l){if(!s(a))throw e("Invalid argument (jpeg_bin), Uint8Array expected","EINVAL");if(typeof l!="function")throw e("Invalid argument (on_exif_entry), Function expected","EINVAL");n.exports.jpeg_segments_each(a,function(c){if(c.code===218)return!1;if(c.code===225&&c.length>=10&&a[c.offset+4]===69&&a[c.offset+5]===120&&a[c.offset+6]===105&&a[c.offset+7]===102&&a[c.offset+8]===0&&a[c.offset+9]===0)return new o(a,c.offset+10,c.offset+c.length).each(l),!1})},n.exports.jpeg_exif_tags_filter=function(a,l){if(!s(a))throw e("Invalid argument (jpeg_bin), Uint8Array expected","EINVAL");if(typeof l!="function")throw e("Invalid argument (on_exif_entry), Function expected","EINVAL");var c=!1;return n.exports.jpeg_segments_filter(a,function(u){if(!c&&(u.code===218&&(c=!0),u.code===225&&u.length>=10&&a[u.offset+4]===69&&a[u.offset+5]===120&&a[u.offset+6]===105&&a[u.offset+7]===102&&a[u.offset+8]===0&&a[u.offset+9]===0)){var d=new o(a,u.offset+10,u.offset+u.length).filter(l);if(!d)return!1;var f=new Uint8Array(10);return f.set(a.slice(u.offset,u.offset+10)),f[2]=d.length+8>>>8&255,f[3]=d.length+8&255,c=!0,[f,d]}})},n.exports.jpeg_add_comment=function(a,l){var c=!1,u=0;return n.exports.jpeg_segments_filter(a,function(d){if(u++,!(u===1&&d.code===216)&&!(u===2&&d.code===224)&&!c){l=i(l);var f=new Uint8Array(5+l.length),_=0;return f[_++]=255,f[_++]=254,f[_++]=l.length+3>>>8&255,f[_++]=l.length+3&255,l.split("").forEach(function(p){f[_++]=p.charCodeAt(0)&255}),f[_++]=0,c=!0,[f,a.subarray(d.offset,d.offset+d.length)]}})}})(zd);var Do=zd.exports;function Ud(n){return this._getUint8Array(n.blob).then(function(e){if(n.is_jpeg=Do.is_jpeg(e),!n.is_jpeg)return Promise.resolve(n);n.orig_blob=n.blob;try{var t,i;if(Do.jpeg_exif_tags_each(e,function(s){if(s.ifd===0&&s.tag===274&&Array.isArray(s.value))return n.orientation=s.value[0]||1,t=s.is_big_endian,i=s.data_offset,!1}),i){var r=t?new Uint8Array([0,1]):new Uint8Array([1,0]);n.blob=new Blob([e.slice(0,i),r,e.slice(i+2)],{type:"image/jpeg"})}}catch{}return n})}function Wd(n){if(!n.is_jpeg)return Promise.resolve(n);var e=n.orientation-1;if(!e)return Promise.resolve(n);var t;e&4?t=this.pica.options.createCanvas(n.out_canvas.height,n.out_canvas.width):t=this.pica.options.createCanvas(n.out_canvas.width,n.out_canvas.height);var i=t.getContext("2d");return i.save(),e&1&&i.transform(-1,0,0,1,t.width,0),e&2&&i.transform(-1,0,0,-1,t.width,t.height),e&4&&i.transform(0,1,1,0,0,0),i.drawImage(n.out_canvas,0,0),i.restore(),n.out_canvas.width=n.out_canvas.height=0,n.out_canvas=t,Promise.resolve(n)}function Yd(n){return n.is_jpeg?Promise.all([this._getUint8Array(n.blob),this._getUint8Array(n.out_blob)]).then(function(e){var t=e[0],i=e[1];if(!Do.is_jpeg(t))return Promise.resolve(n);var r=[];return Do.jpeg_segments_each(t,function(s){if(s.code===218)return!1;r.push(s)}),r=r.filter(function(s){return s.code===226?!1:s.code>=224&&s.code<240||s.code===254}).map(function(s){return t.slice(s.offset,s.offset+s.length)}),n.out_blob=new Blob([i.slice(0,2)].concat(r).concat([i.slice(20)]),{type:"image/jpeg"}),n}):Promise.resolve(n)}function G_(n){n.before("_blob_to_image",Ud),n.after("_transform",Wd),n.after("_create_blob",Yd)}Fs.jpeg_patch_exif=Ud;Fs.jpeg_rotate_canvas=Wd;Fs.jpeg_attach_orig_segments=Yd;Fs.assign=G_;var lc=na,Xd=jd.exports;function ei(n){if(!(this instanceof ei))return new ei(n);n=n||{},this.pica=n.pica||Xd({}),this.initialized=!1,this.utils=lc}ei.prototype.use=function(n){var e=[this].concat(Array.prototype.slice.call(arguments,1));return n.apply(n,e),this};ei.prototype.init=function(){this.use(Fs.assign)};ei.prototype.toBlob=function(n,e){var t=lc.assign({max:1/0},e),i={blob:n,opts:t};return this.initialized||(this.init(),this.initialized=!0),Promise.resolve(i).then(this._blob_to_image).then(this._calculate_size).then(this._transform).then(this._cleanup).then(this._create_blob).then(function(r){return r.out_canvas.width=r.out_canvas.height=0,r.out_blob})};ei.prototype.toCanvas=function(n,e){var t=lc.assign({max:1/0},e),i={blob:n,opts:t};return this.initialized||(this.init(),this.initialized=!0),Promise.resolve(i).then(this._blob_to_image).then(this._calculate_size).then(this._transform).then(this._cleanup).then(function(r){return r.out_canvas})};ei.prototype.before=function(n,e){if(!this[n])throw new Error('Method "'+n+'" does not exist');if(typeof e!="function")throw new Error('Invalid argument "fn", function expected');var t=this[n],i=this;return this[n]=function(r){return e.call(i,r).then(function(s){return t.call(i,s)})},this};ei.prototype.after=function(n,e){if(!this[n])throw new Error('Method "'+n+'" does not exist');if(typeof e!="function")throw new Error('Invalid argument "fn", function expected');var t=this[n],i=this;return this[n]=function(r){return t.call(i,r).then(function(s){return e.call(i,s)})},this};ei.prototype._blob_to_image=function(n){var e=window.URL||window.webkitURL||window.mozURL||window.msURL;return n.image=document.createElement("img"),n.image_url=e.createObjectURL(n.blob),n.image.src=n.image_url,new Promise(function(t,i){n.image.onerror=function(){i(new Error("ImageBlobReduce: failed to create Image() from blob"))},n.image.onload=function(){t(n)}})};ei.prototype._calculate_size=function(n){var e=n.opts.max/Math.max(n.image.width,n.image.height);return e>1&&(e=1),n.transform_width=Math.max(Math.round(n.image.width*e),1),n.transform_height=Math.max(Math.round(n.image.height*e),1),n.scale_factor=e,Promise.resolve(n)};ei.prototype._transform=function(n){n.out_canvas=this.pica.options.createCanvas(n.transform_width,n.transform_height),n.transform_width=null,n.transform_height=null;var e={alpha:n.blob.type==="image/png"};return this.utils.assign(e,this.utils.pick_pica_resize_options(n.opts)),this.pica.resize(n.image,n.out_canvas,e).then(function(){return n})};ei.prototype._cleanup=function(n){n.image.src="",n.image=null;var e=window.URL||window.webkitURL||window.mozURL||window.msURL;return e.revokeObjectURL&&e.revokeObjectURL(n.image_url),n.image_url=null,Promise.resolve(n)};ei.prototype._create_blob=function(n){return this.pica.toBlob(n.out_canvas,n.blob.type).then(function(e){return n.out_blob=e,n})};ei.prototype._getUint8Array=function(n){return n.arrayBuffer?n.arrayBuffer().then(function(e){return new Uint8Array(e)}):new Promise(function(e,t){var i=new FileReader;i.readAsArrayBuffer(n),i.onload=function(){e(new Uint8Array(i.result))},i.onerror=function(){t(new Error("ImageBlobReduce: failed to load data from input blob")),i.abort()},i.onabort=function(){t(new Error("ImageBlobReduce: failed to load data from input blob (aborted)"))}})};ei.pica=Xd;var j_=ei,yo,z_=new Uint8Array(16);function U_(){if(!yo&&(yo=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!yo))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return yo(z_)}var W_=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Y_(n){return typeof n=="string"&&W_.test(n)}var Vt=[];for(var nl=0;nl<256;++nl)Vt.push((nl+256).toString(16).substr(1));function X_(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(Vt[n[e+0]]+Vt[n[e+1]]+Vt[n[e+2]]+Vt[n[e+3]]+"-"+Vt[n[e+4]]+Vt[n[e+5]]+"-"+Vt[n[e+6]]+Vt[n[e+7]]+"-"+Vt[n[e+8]]+Vt[n[e+9]]+"-"+Vt[n[e+10]]+Vt[n[e+11]]+Vt[n[e+12]]+Vt[n[e+13]]+Vt[n[e+14]]+Vt[n[e+15]]).toLowerCase();if(!Y_(t))throw TypeError("Stringified UUID is invalid");return t}var ru,rl,sl=0,ol=0;function H_(n,e,t){var i=e&&t||0,r=e||new Array(16);n=n||{};var s=n.node||ru,o=n.clockseq!==void 0?n.clockseq:rl;if(s==null||o==null){var a=n.random||(n.rng||U_)();s==null&&(s=ru=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),o==null&&(o=rl=(a[6]<<8|a[7])&16383)}var l=n.msecs!==void 0?n.msecs:Date.now(),c=n.nsecs!==void 0?n.nsecs:ol+1,u=l-sl+(c-ol)/1e4;if(u<0&&n.clockseq===void 0&&(o=o+1&16383),(u<0||l>sl)&&n.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");sl=l,ol=c,rl=o,l+=122192928e5;var d=((l&268435455)*1e4+c)%4294967296;r[i++]=d>>>24&255,r[i++]=d>>>16&255,r[i++]=d>>>8&255,r[i++]=d&255;var f=l/4294967296*1e4&268435455;r[i++]=f>>>8&255,r[i++]=f&255,r[i++]=f>>>24&15|16,r[i++]=f>>>16&255,r[i++]=o>>>8|128,r[i++]=o&255;for(var _=0;_<6;++_)r[i+_]=s[_];return e||X_(r)}class Q_{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}var Xi=Q_,zr={PROPERTYCHANGE:"propertychange"};class V_{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}var cc=V_;function K_(n,e,t){let i,r;t=t||tr;let s=0,o=n.length,a=!1;for(;s<o;)i=s+(o-s>>1),r=+t(n[i],e),r<0?s=i+1:(o=i,a=!r);return a?s:~s}function tr(n,e){return n>e?1:n<e?-1:0}function hc(n,e,t){const i=n.length;if(n[0]<=e)return 0;if(e<=n[i-1])return i-1;let r;if(t>0){for(r=1;r<i;++r)if(n[r]<e)return r-1}else if(t<0){for(r=1;r<i;++r)if(n[r]<=e)return r}else for(r=1;r<i;++r){if(n[r]==e)return r;if(n[r]<e)return typeof t=="function"?t(e,n[r-1],n[r])>0?r-1:r:n[r-1]-e<e-n[r]?r-1:r}return i-1}function $_(n,e,t){for(;e<t;){const i=n[e];n[e]=n[t],n[t]=i,++e,--t}}function zi(n,e){const t=Array.isArray(e)?e:[e],i=t.length;for(let r=0;r<i;r++)n[n.length]=t[r]}function Rn(n,e){const t=n.length;if(t!==e.length)return!1;for(let i=0;i<t;i++)if(n[i]!==e[i])return!1;return!0}function Z_(n,e,t){const i=e||tr;return n.every(function(r,s){if(s===0)return!0;const o=i(n[s-1],r);return!(o>0||t&&o===0)})}function Es(){return!0}function ra(){return!1}function Ur(){}function q_(n){let e=!1,t,i,r;return function(){const s=Array.prototype.slice.call(arguments);return(!e||this!==r||!Rn(s,i))&&(e=!0,r=this,i=s,t=n.apply(this,arguments)),t}}function Ds(n){for(const e in n)delete n[e]}function Wr(n){let e;for(e in n)return!1;return!e}class J_ extends cc{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const i=this.listeners_||(this.listeners_={}),r=i[e]||(i[e]=[]);r.includes(t)||r.push(t)}dispatchEvent(e){const t=typeof e=="string",i=t?e:e.type,r=this.listeners_&&this.listeners_[i];if(!r)return;const s=t?new Xi(e):e;s.target||(s.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});i in o||(o[i]=0,a[i]=0),++o[i];let l;for(let c=0,u=r.length;c<u;++c)if("handleEvent"in r[c]?l=r[c].handleEvent(s):l=r[c].call(this,s),l===!1||s.propagationStopped){l=!1;break}if(--o[i]===0){let c=a[i];for(delete a[i];c--;)this.removeEventListener(i,Ur);delete o[i]}return l}disposeInternal(){this.listeners_&&Ds(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){const i=this.listeners_&&this.listeners_[e];if(i){const r=i.indexOf(t);r!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(i[r]=Ur,++this.pendingRemovals_[e]):(i.splice(r,1),i.length===0&&delete this.listeners_[e]))}}}var sa=J_,Ue={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function tt(n,e,t,i,r){if(i&&i!==n&&(t=t.bind(i)),r){const o=t;t=function(){n.removeEventListener(e,t),o.apply(this,arguments)}}const s={target:n,type:e,listener:t};return n.addEventListener(e,t),s}function ko(n,e,t,i){return tt(n,e,t,i,!0)}function xt(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),Ds(n))}class oa extends sa{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(Ue.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const i=e.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=tt(this,e[s],t);return r}return tt(this,e,t)}onceInternal(e,t){let i;if(Array.isArray(e)){const r=e.length;i=new Array(r);for(let s=0;s<r;++s)i[s]=ko(this,e[s],t)}else i=ko(this,e,t);return t.ol_key=i,i}unInternal(e,t){const i=t.ol_key;if(i)ey(i);else if(Array.isArray(e))for(let r=0,s=e.length;r<s;++r)this.removeEventListener(e[r],t);else this.removeEventListener(e,t)}}oa.prototype.on;oa.prototype.once;oa.prototype.un;function ey(n){if(Array.isArray(n))for(let e=0,t=n.length;e<t;++e)xt(n[e]);else xt(n)}var Hd=oa;function Ge(){throw new Error("Unimplemented abstract method.")}let ty=0;function ct(n){return n.ol_uid||(n.ol_uid=String(++ty))}class su extends Xi{constructor(e,t,i){super(e),this.key=t,this.oldValue=i}}class iy extends Hd{constructor(e){super(),this.on,this.once,this.un,ct(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}hasProperties(){return!!this.values_}notify(e,t){let i;i=`change:${e}`,this.hasListener(i)&&this.dispatchEvent(new su(i,e,t)),i=zr.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new su(i,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,i){const r=this.values_||(this.values_={});if(i)r[e]=t;else{const s=r[e];r[e]=t,s!==t&&this.notify(e,s)}}setProperties(e,t){for(const i in e)this.set(i,e[i],t)}applyProperties(e){!e.values_||Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const i=this.values_[e];delete this.values_[e],Wr(this.values_)&&(this.values_=null),t||this.notify(e,i)}}}var Ii=iy;const ny={1:"The view center is not defined",2:"The view resolution is not defined",3:"The view rotation is not defined",4:"`image` and `src` cannot be provided at the same time",5:"`imgSize` must be set when `image` is provided",7:"`format` must be set when `url` is set",8:"Unknown `serverType` configured",9:"`url` must be configured or set using `#setUrl()`",10:"The default `geometryFunction` can only handle `Point` geometries",11:"`options.featureTypes` must be an Array",12:"`options.geometryName` must also be provided when `options.bbox` is set",13:"Invalid corner",14:"Invalid color",15:"Tried to get a value for a key that does not exist in the cache",16:"Tried to set a value for a key that is used already",17:"`resolutions` must be sorted in descending order",18:"Either `origin` or `origins` must be configured, never both",19:"Number of `tileSizes` and `resolutions` must be equal",20:"Number of `origins` and `resolutions` must be equal",22:"Either `tileSize` or `tileSizes` must be configured, never both",24:"Invalid extent or geometry provided as `geometry`",25:"Cannot fit empty extent provided as `geometry`",26:"Features must have an id set",27:"Features must have an id set",28:'`renderMode` must be `"hybrid"` or `"vector"`',30:"The passed `feature` was already added to the source",31:"Tried to enqueue an `element` that was already added to the queue",32:"Transformation matrix cannot be inverted",33:"Invalid units",34:"Invalid geometry layout",36:"Unknown SRS type",37:"Unknown geometry type found",38:"`styleMapValue` has an unknown type",39:"Unknown geometry type",40:"Expected `feature` to have a geometry",41:"Expected an `ol/style/Style` or an array of `ol/style/Style.js`",42:"Question unknown, the answer is 42",43:"Expected `layers` to be an array or a `Collection`",47:"Expected `controls` to be an array or an `ol/Collection`",48:"Expected `interactions` to be an array or an `ol/Collection`",49:"Expected `overlays` to be an array or an `ol/Collection`",50:"`options.featureTypes` should be an Array",51:"Either `url` or `tileJSON` options must be provided",52:"Unknown `serverType` configured",53:"Unknown `tierSizeCalculation` configured",55:"The {-y} placeholder requires a tile grid with extent",56:"mapBrowserEvent must originate from a pointer event",57:"At least 2 conditions are required",59:"Invalid command found in the PBF",60:"Missing or invalid `size`",61:"Cannot determine IIIF Image API version from provided image information JSON",62:"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`",64:"Layer opacity must be a number",66:"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`",67:"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both",68:"A VectorTile source can only be rendered if it has a projection compatible with the view projection",69:"`width` or `height` cannot be provided together with `scale`"};class ry extends Error{constructor(e){const t=ny[e];super(t),this.code=e,this.name="AssertionError",this.message=t}}var Qd=ry,ai={ADD:"add",REMOVE:"remove"};const ou={LENGTH:"length"};class vo extends Xi{constructor(e,t,i){super(e),this.element=t,this.index=i}}class sy extends Ii{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e||[],this.unique_)for(let i=0,r=this.array_.length;i<r;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,i=e.length;t<i;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let i=0,r=t.length;i<r;++i)e(t[i],i,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(ou.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new vo(ai.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let i=0,r=t.length;i<r;++i)if(t[i]===e)return this.removeAt(i)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new vo(ai.REMOVE,t,e)),t}setAt(e,t){const i=this.getLength();if(e>=i){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const r=this.array_[e];this.array_[e]=t,this.dispatchEvent(new vo(ai.REMOVE,r,e)),this.dispatchEvent(new vo(ai.ADD,t,e))}updateLength_(){this.set(ou.LENGTH,this.array_.length)}assertUnique_(e,t){for(let i=0,r=this.array_.length;i<r;++i)if(this.array_[i]===e&&i!==t)throw new Qd(58)}}var Gi=sy;const In=typeof navigator!="undefined"&&typeof navigator.userAgent!="undefined"?navigator.userAgent.toLowerCase():"",oy=In.includes("firefox"),ay=In.includes("safari")&&!In.includes("chrom");ay&&(In.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(In));const ly=In.includes("webkit")&&!In.includes("edge"),cy=In.includes("macintosh"),Vd=typeof devicePixelRatio!="undefined"?devicePixelRatio:1,uc=typeof WorkerGlobalScope!="undefined"&&typeof OffscreenCanvas!="undefined"&&self instanceof WorkerGlobalScope,hy=typeof Image!="undefined"&&Image.prototype.decode,Kd=function(){let n=!1;try{const e=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return n}();function Ve(n,e){if(!n)throw new Qd(e)}new Array(6);function Ui(){return[1,0,0,1,0,0]}function uy(n,e,t,i,r,s,o){return n[0]=e,n[1]=t,n[2]=i,n[3]=r,n[4]=s,n[5]=o,n}function dy(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n}function Nt(n,e){const t=e[0],i=e[1];return e[0]=n[0]*t+n[2]*i+n[4],e[1]=n[1]*t+n[3]*i+n[5],e}function fy(n,e,t){return uy(n,e,0,0,t,0,0)}function Sn(n,e,t,i,r,s,o,a){const l=Math.sin(s),c=Math.cos(s);return n[0]=i*c,n[1]=r*l,n[2]=-i*l,n[3]=r*c,n[4]=o*i*c-a*i*l+e,n[5]=o*r*l+a*r*c+t,n}function dc(n,e){const t=gy(e);Ve(t!==0,32);const i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5];return n[0]=o/t,n[1]=-r/t,n[2]=-s/t,n[3]=i/t,n[4]=(s*l-o*a)/t,n[5]=-(i*l-r*a)/t,n}function gy(n){return n[0]*n[3]-n[1]*n[2]}let au;function $d(n){const e="matrix("+n.join(", ")+")";if(uc)return e;const t=au||(au=document.createElement("div"));return t.style.transform=e,t.style.transform}var kt={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function lu(n){const e=pi();for(let t=0,i=n.length;t<i;++t)_s(e,n[t]);return e}function fc(n,e,t){return t?(t[0]=n[0]-e,t[1]=n[1]-e,t[2]=n[2]+e,t[3]=n[3]+e,t):[n[0]-e,n[1]-e,n[2]+e,n[3]+e]}function Zd(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n.slice()}function nr(n,e,t){let i,r;return e<n[0]?i=n[0]-e:n[2]<e?i=e-n[2]:i=0,t<n[1]?r=n[1]-t:n[3]<t?r=t-n[3]:r=0,i*i+r*r}function aa(n,e){return gc(n,e[0],e[1])}function kr(n,e){return n[0]<=e[0]&&e[2]<=n[2]&&n[1]<=e[1]&&e[3]<=n[3]}function gc(n,e,t){return n[0]<=e&&e<=n[2]&&n[1]<=t&&t<=n[3]}function Pl(n,e){const t=n[0],i=n[1],r=n[2],s=n[3],o=e[0],a=e[1];let l=kt.UNKNOWN;return o<t?l=l|kt.LEFT:o>r&&(l=l|kt.RIGHT),a<i?l=l|kt.BELOW:a>s&&(l=l|kt.ABOVE),l===kt.UNKNOWN&&(l=kt.INTERSECTING),l}function pi(){return[1/0,1/0,-1/0,-1/0]}function an(n,e,t,i,r){return r?(r[0]=n,r[1]=e,r[2]=t,r[3]=i,r):[n,e,t,i]}function ks(n){return an(1/0,1/0,-1/0,-1/0,n)}function py(n,e){const t=n[0],i=n[1];return an(t,i,t,i,e)}function qd(n,e,t,i,r){const s=ks(r);return ef(s,n,e,t,i)}function bs(n,e){return n[0]==e[0]&&n[2]==e[2]&&n[1]==e[1]&&n[3]==e[3]}function Jd(n,e){return e[0]<n[0]&&(n[0]=e[0]),e[2]>n[2]&&(n[2]=e[2]),e[1]<n[1]&&(n[1]=e[1]),e[3]>n[3]&&(n[3]=e[3]),n}function _s(n,e){e[0]<n[0]&&(n[0]=e[0]),e[0]>n[2]&&(n[2]=e[0]),e[1]<n[1]&&(n[1]=e[1]),e[1]>n[3]&&(n[3]=e[1])}function ef(n,e,t,i,r){for(;t<i;t+=r)my(n,e[t],e[t+1]);return n}function my(n,e,t){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}function tf(n,e){let t;return t=e(la(n)),t||(t=e(ca(n)),t)||(t=e(ha(n)),t)||(t=e(rr(n)),t)?t:!1}function Fl(n){let e=0;return pc(n)||(e=At(n)*Wi(n)),e}function la(n){return[n[0],n[1]]}function ca(n){return[n[2],n[1]]}function ir(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function _y(n,e){let t;return e==="bottom-left"?t=la(n):e==="bottom-right"?t=ca(n):e==="top-left"?t=rr(n):e==="top-right"?t=ha(n):Ve(!1,13),t}function Dl(n,e,t,i,r){const[s,o,a,l,c,u,d,f]=kl(n,e,t,i);return an(Math.min(s,a,c,d),Math.min(o,l,u,f),Math.max(s,a,c,d),Math.max(o,l,u,f),r)}function kl(n,e,t,i){const r=e*i[0]/2,s=e*i[1]/2,o=Math.cos(t),a=Math.sin(t),l=r*o,c=r*a,u=s*o,d=s*a,f=n[0],_=n[1];return[f-l+d,_-c-u,f-l-d,_-c+u,f+l-d,_+c+u,f+l+d,_+c-u,f-l+d,_-c-u]}function Wi(n){return n[3]-n[1]}function ys(n,e,t){const i=t||pi();return ti(n,e)?(n[0]>e[0]?i[0]=n[0]:i[0]=e[0],n[1]>e[1]?i[1]=n[1]:i[1]=e[1],n[2]<e[2]?i[2]=n[2]:i[2]=e[2],n[3]<e[3]?i[3]=n[3]:i[3]=e[3]):ks(i),i}function rr(n){return[n[0],n[3]]}function ha(n){return[n[2],n[3]]}function At(n){return n[2]-n[0]}function ti(n,e){return n[0]<=e[2]&&n[2]>=e[0]&&n[1]<=e[3]&&n[3]>=e[1]}function pc(n){return n[2]<n[0]||n[3]<n[1]}function yy(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n}function vy(n,e,t){let i=!1;const r=Pl(n,e),s=Pl(n,t);if(r===kt.INTERSECTING||s===kt.INTERSECTING)i=!0;else{const o=n[0],a=n[1],l=n[2],c=n[3],u=e[0],d=e[1],f=t[0],_=t[1],p=(_-d)/(f-u);let m,y;!!(s&kt.ABOVE)&&!(r&kt.ABOVE)&&(m=f-(_-c)/p,i=m>=o&&m<=l),!i&&!!(s&kt.RIGHT)&&!(r&kt.RIGHT)&&(y=_-(f-l)*p,i=y>=a&&y<=c),!i&&!!(s&kt.BELOW)&&!(r&kt.BELOW)&&(m=f-(_-a)/p,i=m>=o&&m<=l),!i&&!!(s&kt.LEFT)&&!(r&kt.LEFT)&&(y=_-(f-o)*p,i=y>=a&&y<=c)}return i}function nf(n,e){const t=e.getExtent(),i=ir(n);if(e.canWrapX()&&(i[0]<t[0]||i[0]>=t[2])){const r=At(t),o=Math.floor((i[0]-t[0])/r)*r;n[0]-=o,n[2]-=o}return n}function wy(n,e){if(e.canWrapX()){const t=e.getExtent();if(!isFinite(n[0])||!isFinite(n[2]))return[[t[0],n[1],t[2],n[3]]];nf(n,e);const i=At(t);if(At(n)>i)return[[t[0],n[1],t[2],n[3]]];if(n[0]<t[0])return[[n[0]+i,n[1],t[2],n[3]],[t[0],n[1],n[2],n[3]]];if(n[2]>t[2])return[[n[0],n[1],t[2],n[3]],[t[0],n[1],n[2]-i,n[3]]]}return[n]}function Ot(n,e,t){return Math.min(Math.max(n,e),t)}function Ay(n,e,t,i,r,s){const o=r-t,a=s-i;if(o!==0||a!==0){const l=((n-t)*o+(e-i)*a)/(o*o+a*a);l>1?(t=r,i=s):l>0&&(t+=o*l,i+=a*l)}return Zn(n,e,t,i)}function Zn(n,e,t,i){const r=t-n,s=i-e;return r*r+s*s}function xy(n){const e=n.length;for(let i=0;i<e;i++){let r=i,s=Math.abs(n[i][i]);for(let a=i+1;a<e;a++){const l=Math.abs(n[a][i]);l>s&&(s=l,r=a)}if(s===0)return null;const o=n[r];n[r]=n[i],n[i]=o;for(let a=i+1;a<e;a++){const l=-n[a][i]/n[i][i];for(let c=i;c<e+1;c++)i==c?n[a][c]=0:n[a][c]+=l*n[i][c]}}const t=new Array(e);for(let i=e-1;i>=0;i--){t[i]=n[i][e]/n[i][i];for(let r=i-1;r>=0;r--)n[r][e]-=n[r][i]*t[i]}return t}function cu(n){return n*180/Math.PI}function qn(n){return n*Math.PI/180}function Jn(n,e){const t=n%e;return t*e<0?t+e:t}function li(n,e,t){return n+t*(e-n)}function mc(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}function wo(n,e){return Math.floor(mc(n,e))}function Ao(n,e){return Math.ceil(mc(n,e))}const Ey=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,by=/^([a-z]*)$|^hsla?\(.*\)$/i;function rf(n){return typeof n=="string"?n:sf(n)}function Cy(n){const e=document.createElement("div");if(e.style.color=n,e.style.color!==""){document.body.appendChild(e);const t=getComputedStyle(e).color;return document.body.removeChild(e),t}return""}const Iy=function(){const e={};let t=0;return function(i){let r;if(e.hasOwnProperty(i))r=e[i];else{if(t>=1024){let s=0;for(const o in e)(s++&3)===0&&(delete e[o],--t)}r=Sy(i),e[i]=r,++t}return r}}();function No(n){return Array.isArray(n)?n:Iy(n)}function Sy(n){let e,t,i,r,s;if(by.exec(n)&&(n=Cy(n)),Ey.exec(n)){const o=n.length-1;let a;o<=4?a=1:a=2;const l=o===4||o===8;e=parseInt(n.substr(1+0*a,a),16),t=parseInt(n.substr(1+1*a,a),16),i=parseInt(n.substr(1+2*a,a),16),l?r=parseInt(n.substr(1+3*a,a),16):r=255,a==1&&(e=(e<<4)+e,t=(t<<4)+t,i=(i<<4)+i,l&&(r=(r<<4)+r)),s=[e,t,i,r/255]}else n.startsWith("rgba(")?(s=n.slice(5,-1).split(",").map(Number),hu(s)):n.startsWith("rgb(")?(s=n.slice(4,-1).split(",").map(Number),s.push(1),hu(s)):Ve(!1,14);return s}function hu(n){return n[0]=Ot(n[0]+.5|0,0,255),n[1]=Ot(n[1]+.5|0,0,255),n[2]=Ot(n[2]+.5|0,0,255),n[3]=Ot(n[3],0,1),n}function sf(n){let e=n[0];e!=(e|0)&&(e=e+.5|0);let t=n[1];t!=(t|0)&&(t=t+.5|0);let i=n[2];i!=(i|0)&&(i=i+.5|0);const r=n[3]===void 0?1:Math.round(n[3]*100)/100;return"rgba("+e+","+t+","+i+","+r+")"}class Ry{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const i=this.cache_[t];(e++&3)===0&&!i.hasListener()&&(delete this.cache_[t],--this.cacheSize_)}}}get(e,t,i){const r=uu(e,t,i);return r in this.cache_?this.cache_[r]:null}set(e,t,i,r){const s=uu(e,t,i);this.cache_[s]=r,++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function uu(n,e,t){const i=t?rf(t):"null";return e+":"+n+":"+i}const Bo=new Ry;var dt={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class Ty extends Ii{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[dt.OPACITY]=e.opacity!==void 0?e.opacity:1,Ve(typeof t[dt.OPACITY]=="number",64),t[dt.VISIBLE]=e.visible!==void 0?e.visible:!0,t[dt.Z_INDEX]=e.zIndex,t[dt.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[dt.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[dt.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[dt.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},i=this.getZIndex();return t.opacity=Ot(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=i===void 0&&!t.managed?1/0:i,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return Ge()}getLayerStatesArray(e){return Ge()}getExtent(){return this.get(dt.EXTENT)}getMaxResolution(){return this.get(dt.MAX_RESOLUTION)}getMinResolution(){return this.get(dt.MIN_RESOLUTION)}getMinZoom(){return this.get(dt.MIN_ZOOM)}getMaxZoom(){return this.get(dt.MAX_ZOOM)}getOpacity(){return this.get(dt.OPACITY)}getSourceState(){return Ge()}getVisible(){return this.get(dt.VISIBLE)}getZIndex(){return this.get(dt.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(dt.EXTENT,e)}setMaxResolution(e){this.set(dt.MAX_RESOLUTION,e)}setMinResolution(e){this.set(dt.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(dt.MAX_ZOOM,e)}setMinZoom(e){this.set(dt.MIN_ZOOM,e)}setOpacity(e){Ve(typeof e=="number",64),this.set(dt.OPACITY,e)}setVisible(e){this.set(dt.VISIBLE,e)}setZIndex(e){this.set(dt.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}var of=Ty,bn={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},Jt={ANIMATING:0,INTERACTING:1},Ei={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};const Ly=42,_c=256,Yr={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class Oy{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Yr[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}var af=Oy;const Ns=6378137,Nr=Math.PI*Ns,My=[-Nr,-Nr,Nr,Nr],Py=[-180,-85,180,85],xo=Ns*Math.log(Math.tan(Math.PI/2));class xr extends af{constructor(e){super({code:e,units:"m",extent:My,global:!0,worldExtent:Py,getPointResolution:function(t,i){return t/Math.cosh(i[1]/Ns)}})}}const du=[new xr("EPSG:3857"),new xr("EPSG:102100"),new xr("EPSG:102113"),new xr("EPSG:900913"),new xr("http://www.opengis.net/def/crs/EPSG/0/3857"),new xr("http://www.opengis.net/gml/srs/epsg.xml#3857")];function Fy(n,e,t){const i=n.length;t=t>1?t:2,e===void 0&&(t>2?e=n.slice():e=new Array(i));for(let r=0;r<i;r+=t){e[r]=Nr*n[r]/180;let s=Ns*Math.log(Math.tan(Math.PI*(+n[r+1]+90)/360));s>xo?s=xo:s<-xo&&(s=-xo),e[r+1]=s}return e}function Dy(n,e,t){const i=n.length;t=t>1?t:2,e===void 0&&(t>2?e=n.slice():e=new Array(i));for(let r=0;r<i;r+=t)e[r]=180*n[r]/Nr,e[r+1]=360*Math.atan(Math.exp(n[r+1]/Ns))/Math.PI-90;return e}const ky=6378137,fu=[-180,-90,180,90],Ny=Math.PI*ky/180;class Un extends af{constructor(e,t){super({code:e,units:"degrees",extent:fu,axisOrientation:t,global:!0,metersPerUnit:Ny,worldExtent:fu})}}const gu=[new Un("CRS:84"),new Un("EPSG:4326","neu"),new Un("urn:ogc:def:crs:OGC:1.3:CRS84"),new Un("urn:ogc:def:crs:OGC:2:84"),new Un("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Un("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Un("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let Nl={};function By(n){return Nl[n]||Nl[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function Gy(n,e){Nl[n]=e}let Gr={};function Go(n,e,t){const i=n.getCode(),r=e.getCode();i in Gr||(Gr[i]={}),Gr[i][r]=t}function jy(n,e){let t;return n in Gr&&e in Gr[n]&&(t=Gr[n][e]),t}function zy(n,e){return n[0]+=+e[0],n[1]+=+e[1],n}function jo(n,e){let t=!0;for(let i=n.length-1;i>=0;--i)if(n[i]!=e[i]){t=!1;break}return t}function yc(n,e){const t=Math.cos(e),i=Math.sin(e),r=n[0]*t-n[1]*i,s=n[1]*t+n[0]*i;return n[0]=r,n[1]=s,n}function Uy(n,e){return n[0]*=e,n[1]*=e,n}function lf(n,e){if(e.canWrapX()){const t=At(e.getExtent()),i=Wy(n,e,t);i&&(n[0]-=i*t)}return n}function Wy(n,e,t){const i=e.getExtent();let r=0;return e.canWrapX()&&(n[0]<i[0]||n[0]>i[2])&&(t=t||At(i),r=Math.floor((n[0]-i[0])/t)),r}const cf=63710088e-1;function pu(n,e,t){t=t||cf;const i=qn(n[1]),r=qn(e[1]),s=(r-i)/2,o=qn(e[0]-n[0])/2,a=Math.sin(s)*Math.sin(s)+Math.sin(o)*Math.sin(o)*Math.cos(i)*Math.cos(r);return 2*t*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}function Yy(n,e,t,i){i=i||cf;const r=qn(n[1]),s=qn(n[0]),o=e/i,a=Math.asin(Math.sin(r)*Math.cos(o)+Math.cos(r)*Math.sin(o)*Math.cos(t)),l=s+Math.atan2(Math.sin(t)*Math.sin(o)*Math.cos(r),Math.cos(o)-Math.sin(r)*Math.sin(a));return[cu(l),cu(a)]}const hf={info:1,warn:2,error:3,none:4};let Xy=hf.info;function uf(...n){Xy>hf.warn||console.warn(...n)}let Bl=!0;function df(n){Bl=!(n===void 0?!0:n)}function vc(n,e){if(e!==void 0){for(let t=0,i=n.length;t<i;++t)e[t]=n[t];e=e}else e=n.slice();return e}function wc(n,e){if(e!==void 0&&n!==e){for(let t=0,i=n.length;t<i;++t)e[t]=n[t];n=e}return n}function Hy(n){Gy(n.getCode(),n),Go(n,n,vc)}function Qy(n){n.forEach(Hy)}function St(n){return typeof n=="string"?By(n):n||null}function zo(n,e,t,i){n=St(n);let r;const s=n.getPointResolutionFunc();if(s){if(r=s(e,t),i&&i!==n.getUnits()){const o=n.getMetersPerUnit();o&&(r=r*o/Yr[i])}}else{const o=n.getUnits();if(o=="degrees"&&!i||i=="degrees")r=e;else{const a=ua(n,St("EPSG:4326"));if(a===wc&&o!=="degrees")r=e*n.getMetersPerUnit();else{let c=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];c=a(c,c,2);const u=pu(c.slice(0,2),c.slice(2,4)),d=pu(c.slice(4,6),c.slice(6,8));r=(u+d)/2}const l=i?Yr[i]:n.getMetersPerUnit();l!==void 0&&(r/=l)}}return r}function mu(n){Qy(n),n.forEach(function(e){n.forEach(function(t){e!==t&&Go(e,t,vc)})})}function Vy(n,e,t,i){n.forEach(function(r){e.forEach(function(s){Go(r,s,t),Go(s,r,i)})})}function Ac(n,e){if(n){if(typeof n=="string")return St(n)}else return St(e);return n}function gi(n,e){return df(),xc(n,"EPSG:4326",e!==void 0?e:"EPSG:3857")}function nn(n,e){const t=xc(n,e!==void 0?e:"EPSG:3857","EPSG:4326"),i=t[0];return(i<-180||i>180)&&(t[0]=Jn(i+180,360)-180),t}function Hn(n,e){if(n===e)return!0;const t=n.getUnits()===e.getUnits();return(n.getCode()===e.getCode()||ua(n,e)===vc)&&t}function ua(n,e){const t=n.getCode(),i=e.getCode();let r=jy(t,i);return r||(r=wc),r}function Uo(n,e){const t=St(n),i=St(e);return ua(t,i)}function xc(n,e,t){return Uo(e,t)(n,void 0,n.length)}function Gl(n,e){return n}function Ji(n,e){return Bl&&!jo(n,[0,0])&&n[0]>=-180&&n[0]<=180&&n[1]>=-90&&n[1]<=90&&(Bl=!1,uf("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),n}function Ec(n,e){return n}function An(n,e){return n}function Ky(n,e){return n}function $y(){mu(du),mu(gu),Vy(gu,du,Fy,Dy)}$y();function _u(n,e,t){return function(i,r,s,o,a){if(!i)return;if(!r&&!e)return i;const l=e?0:s[0]*r,c=e?0:s[1]*r,u=a?a[0]:0,d=a?a[1]:0;let f=n[0]+l/2+u,_=n[2]-l/2+u,p=n[1]+c/2+d,m=n[3]-c/2+d;f>_&&(f=(_+f)/2,_=f),p>m&&(p=(m+p)/2,m=p);let y=Ot(i[0],f,_),v=Ot(i[1],p,m);if(o&&t&&r){const A=30*r;y+=-A*Math.log(1+Math.max(0,f-i[0])/A)+A*Math.log(1+Math.max(0,i[0]-_)/A),v+=-A*Math.log(1+Math.max(0,p-i[1])/A)+A*Math.log(1+Math.max(0,i[1]-m)/A)}return[y,v]}}function Zy(n){return n}function bc(n,e,t,i){const r=At(e)/t[0],s=Wi(e)/t[1];return i?Math.min(n,Math.max(r,s)):Math.min(n,Math.min(r,s))}function Cc(n,e,t){let i=Math.min(n,e);const r=50;return i*=Math.log(1+r*Math.max(0,n/e-1))/r+1,t&&(i=Math.max(i,t),i/=Math.log(1+r*Math.max(0,t/n-1))/r+1),Ot(i,t/2,e*2)}function qy(n,e,t,i){return e=e!==void 0?e:!0,function(r,s,o,a){if(r!==void 0){const l=n[0],c=n[n.length-1],u=t?bc(l,t,o,i):l;if(a)return e?Cc(r,u,c):Ot(r,c,u);const d=Math.min(u,r),f=Math.floor(hc(n,d,s));return n[f]>u&&f<n.length-1?n[f+1]:n[f]}}}function Jy(n,e,t,i,r,s){return i=i!==void 0?i:!0,t=t!==void 0?t:0,function(o,a,l,c){if(o!==void 0){const u=r?bc(e,r,l,s):e;if(c)return i?Cc(o,u,t):Ot(o,t,u);const d=1e-9,f=Math.ceil(Math.log(e/u)/Math.log(n)-d),_=-a*(.5-d)+.5,p=Math.min(u,o),m=Math.floor(Math.log(e/p)/Math.log(n)+_),y=Math.max(f,m),v=e/Math.pow(n,y);return Ot(v,t,u)}}}function yu(n,e,t,i,r){return t=t!==void 0?t:!0,function(s,o,a,l){if(s!==void 0){const c=i?bc(n,i,a,r):n;return!t||!l?Ot(s,e,c):Cc(s,c,e)}}}function Ic(n){if(n!==void 0)return 0}function vu(n){if(n!==void 0)return n}function ev(n){const e=2*Math.PI/n;return function(t,i){if(i)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t}}function tv(n){return n=n||qn(5),function(e,t){if(t)return e;if(e!==void 0)return Math.abs(e)<=n?0:e}}function ff(n){return Math.pow(n,3)}function Qr(n){return 1-ff(1-n)}function iv(n){return 3*n*n-2*n*n*n}function nv(n){return n}function er(n,e,t,i,r,s){s=s||[];let o=0;for(let a=e;a<t;a+=i){const l=n[a],c=n[a+1];s[o++]=r[0]*l+r[2]*c+r[4],s[o++]=r[1]*l+r[3]*c+r[5]}return s&&s.length!=o&&(s.length=o),s}function gf(n,e,t,i,r,s,o){o=o||[];const a=Math.cos(r),l=Math.sin(r),c=s[0],u=s[1];let d=0;for(let f=e;f<t;f+=i){const _=n[f]-c,p=n[f+1]-u;o[d++]=c+_*a-p*l,o[d++]=u+_*l+p*a;for(let m=f+2;m<f+i;++m)o[d++]=n[m]}return o&&o.length!=d&&(o.length=d),o}function rv(n,e,t,i,r,s,o,a){a=a||[];const l=o[0],c=o[1];let u=0;for(let d=e;d<t;d+=i){const f=n[d]-l,_=n[d+1]-c;a[u++]=l+r*f,a[u++]=c+s*_;for(let p=d+2;p<d+i;++p)a[u++]=n[p]}return a&&a.length!=u&&(a.length=u),a}function sv(n,e,t,i,r,s,o){o=o||[];let a=0;for(let l=e;l<t;l+=i){o[a++]=n[l]+r,o[a++]=n[l+1]+s;for(let c=l+2;c<l+i;++c)o[a++]=n[c]}return o&&o.length!=a&&(o.length=a),o}const wu=Ui();class ov extends Ii{constructor(){super(),this.extent_=pi(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=q_(function(e,t,i){if(!i)return this.getSimplifiedGeometry(t);const r=this.clone();return r.applyTransform(i),r.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return Ge()}closestPointXY(e,t,i,r){return Ge()}containsXY(e,t){const i=this.getClosestPoint([e,t]);return i[0]===e&&i[1]===t}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return Ge()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&ks(t),this.extentRevision_=this.getRevision()}return yy(this.extent_,e)}rotate(e,t){Ge()}scale(e,t,i){Ge()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return Ge()}getType(){return Ge()}applyTransform(e){Ge()}intersectsExtent(e){return Ge()}translate(e,t){Ge()}transform(e,t){const i=St(e),r=i.getUnits()=="tile-pixels"?function(s,o,a){const l=i.getExtent(),c=i.getWorldExtent(),u=Wi(c)/Wi(l);return Sn(wu,c[0],c[3],u,-u,0,0,0),er(s,0,s.length,a,wu,o),Uo(i,t)(s,o,a)}:Uo(i,t);return this.applyTransform(r),this}}var pf=ov;class av extends pf{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(e){return qd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return Ge()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=Au(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){Ge()}setLayout(e,t,i){let r;if(e)r=Au(e);else{for(let s=0;s<i;++s){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}r=t.length,e=lv(r)}this.layout=e,this.stride=r}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(e,t){const i=this.getFlatCoordinates();if(i){const r=this.getStride();gf(i,0,i.length,r,e,t,i),this.changed()}}scale(e,t,i){t===void 0&&(t=e),i||(i=ir(this.getExtent()));const r=this.getFlatCoordinates();if(r){const s=this.getStride();rv(r,0,r.length,s,e,t,i,r),this.changed()}}translate(e,t){const i=this.getFlatCoordinates();if(i){const r=this.getStride();sv(i,0,i.length,r,e,t,i),this.changed()}}}function lv(n){let e;return n==2?e="XY":n==3?e="XYZ":n==4&&(e="XYZM"),e}function Au(n){let e;return n=="XY"?e=2:n=="XYZ"||n=="XYM"?e=3:n=="XYZM"&&(e=4),e}function cv(n,e,t){const i=n.getFlatCoordinates();if(!i)return null;const r=n.getStride();return er(i,0,i.length,r,e,t)}var sr=av;function xu(n,e,t,i,r,s,o){const a=n[e],l=n[e+1],c=n[t]-a,u=n[t+1]-l;let d;if(c===0&&u===0)d=e;else{const f=((r-a)*c+(s-l)*u)/(c*c+u*u);if(f>1)d=t;else if(f>0){for(let _=0;_<i;++_)o[_]=li(n[e+_],n[t+_],f);o.length=i;return}else d=e}for(let f=0;f<i;++f)o[f]=n[d+f];o.length=i}function Sc(n,e,t,i,r){let s=n[e],o=n[e+1];for(e+=i;e<t;e+=i){const a=n[e],l=n[e+1],c=Zn(s,o,a,l);c>r&&(r=c),s=a,o=l}return r}function Rc(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s){const a=t[s];r=Sc(n,e,a,i,r),e=a}return r}function hv(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s){const a=t[s];r=Rc(n,e,a,i,r),e=a[a.length-1]}return r}function Tc(n,e,t,i,r,s,o,a,l,c,u){if(e==t)return c;let d,f;if(r===0){if(f=Zn(o,a,n[e],n[e+1]),f<c){for(d=0;d<i;++d)l[d]=n[e+d];return l.length=i,f}return c}u=u||[NaN,NaN];let _=e+i;for(;_<t;)if(xu(n,_-i,_,i,o,a,u),f=Zn(o,a,u[0],u[1]),f<c){for(c=f,d=0;d<i;++d)l[d]=u[d];l.length=i,_+=i}else _+=i*Math.max((Math.sqrt(f)-Math.sqrt(c))/r|0,1);if(s&&(xu(n,t-i,e,i,o,a,u),f=Zn(o,a,u[0],u[1]),f<c)){for(c=f,d=0;d<i;++d)l[d]=u[d];l.length=i}return c}function Lc(n,e,t,i,r,s,o,a,l,c,u){u=u||[NaN,NaN];for(let d=0,f=t.length;d<f;++d){const _=t[d];c=Tc(n,e,_,i,r,s,o,a,l,c,u),e=_}return c}function uv(n,e,t,i,r,s,o,a,l,c,u){u=u||[NaN,NaN];for(let d=0,f=t.length;d<f;++d){const _=t[d];c=Lc(n,e,_,i,r,s,o,a,l,c,u),e=_[_.length-1]}return c}function dv(n,e,t,i){for(let r=0,s=t.length;r<s;++r)n[e++]=t[r];return e}function da(n,e,t,i){for(let r=0,s=t.length;r<s;++r){const o=t[r];for(let a=0;a<i;++a)n[e++]=o[a]}return e}function Oc(n,e,t,i,r){r=r||[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=da(n,e,t[o],i);r[s++]=l,e=l}return r.length=s,r}function fv(n,e,t,i,r){r=r||[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=Oc(n,e,t[o],i,r[s]);l.length===0&&(l[0]=e),r[s++]=l,e=l[l.length-1]}return r.length=s,r}function Mc(n,e,t,i,r,s,o){const a=(t-e)/i;if(a<3){for(;e<t;e+=i)s[o++]=n[e],s[o++]=n[e+1];return o}const l=new Array(a);l[0]=1,l[a-1]=1;const c=[e,t-i];let u=0;for(;c.length>0;){const d=c.pop(),f=c.pop();let _=0;const p=n[f],m=n[f+1],y=n[d],v=n[d+1];for(let A=f+i;A<d;A+=i){const x=n[A],E=n[A+1],M=Ay(x,E,p,m,y,v);M>_&&(u=A,_=M)}_>r&&(l[(u-e)/i]=1,f+i<u&&c.push(f,u),u+i<d&&c.push(u,d))}for(let d=0;d<a;++d)l[d]&&(s[o++]=n[e+d*i],s[o++]=n[e+d*i+1]);return o}function gv(n,e,t,i,r,s,o,a){for(let l=0,c=t.length;l<c;++l){const u=t[l];o=Mc(n,e,u,i,r,s,o),a.push(o),e=u}return o}function Xn(n,e){return e*Math.round(n/e)}function pv(n,e,t,i,r,s,o){if(e==t)return o;let a=Xn(n[e],r),l=Xn(n[e+1],r);e+=i,s[o++]=a,s[o++]=l;let c,u;do if(c=Xn(n[e],r),u=Xn(n[e+1],r),e+=i,e==t)return s[o++]=c,s[o++]=u,o;while(c==a&&u==l);for(;e<t;){const d=Xn(n[e],r),f=Xn(n[e+1],r);if(e+=i,d==c&&f==u)continue;const _=c-a,p=u-l,m=d-a,y=f-l;if(_*y==p*m&&(_<0&&m<_||_==m||_>0&&m>_)&&(p<0&&y<p||p==y||p>0&&y>p)){c=d,u=f;continue}s[o++]=c,s[o++]=u,a=c,l=u,c=d,u=f}return s[o++]=c,s[o++]=u,o}function mf(n,e,t,i,r,s,o,a){for(let l=0,c=t.length;l<c;++l){const u=t[l];o=pv(n,e,u,i,r,s,o),a.push(o),e=u}return o}function mv(n,e,t,i,r,s,o,a){for(let l=0,c=t.length;l<c;++l){const u=t[l],d=[];o=mf(n,e,u,i,r,s,o,d),a.push(d),e=u[u.length-1]}return o}function xn(n,e,t,i,r){r=r!==void 0?r:[];let s=0;for(let o=e;o<t;o+=i)r[s++]=n.slice(o,o+i);return r.length=s,r}function Cs(n,e,t,i,r){r=r!==void 0?r:[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=t[o];r[s++]=xn(n,e,l,i,r[s]),e=l}return r.length=s,r}function jl(n,e,t,i,r){r=r!==void 0?r:[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=t[o];r[s++]=l.length===1&&l[0]===e?[]:Cs(n,e,l,i,r[s]),e=l[l.length-1]}return r.length=s,r}function _f(n,e,t,i){let r=0,s=n[t-i],o=n[t-i+1];for(;e<t;e+=i){const a=n[e],l=n[e+1];r+=o*a-s*l,s=a,o=l}return r/2}function yf(n,e,t,i){let r=0;for(let s=0,o=t.length;s<o;++s){const a=t[s];r+=_f(n,e,a,i),e=a}return r}function _v(n,e,t,i){let r=0;for(let s=0,o=t.length;s<o;++s){const a=t[s];r+=yf(n,e,a,i),e=a[a.length-1]}return r}class Wo extends sr{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new Wo(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,i,r){return r<nr(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Sc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Tc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,i,r))}getArea(){return _f(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return xn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=Mc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new Wo(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=da(this.flatCoordinates,0,e,this.stride),this.changed()}}var Eu=Wo;class Pc extends sr{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new Pc(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){const s=this.flatCoordinates,o=Zn(e,t,s[0],s[1]);if(o<r){const a=this.stride;for(let l=0;l<a;++l)i[l]=s[l];return i.length=a,o}return r}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(e){return py(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return gc(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=dv(this.flatCoordinates,0,e,this.stride),this.changed()}}var Yi=Pc;function yv(n,e,t,i,r){return!tf(r,function(o){return!Vn(n,e,t,i,o[0],o[1])})}function Vn(n,e,t,i,r,s){let o=0,a=n[t-i],l=n[t-i+1];for(;e<t;e+=i){const c=n[e],u=n[e+1];l<=s?u>s&&(c-a)*(s-l)-(r-a)*(u-l)>0&&o++:u<=s&&(c-a)*(s-l)-(r-a)*(u-l)<0&&o--,a=c,l=u}return o!==0}function Fc(n,e,t,i,r,s){if(t.length===0||!Vn(n,e,t[0],i,r,s))return!1;for(let o=1,a=t.length;o<a;++o)if(Vn(n,t[o-1],t[o],i,r,s))return!1;return!0}function vv(n,e,t,i,r,s){if(t.length===0)return!1;for(let o=0,a=t.length;o<a;++o){const l=t[o];if(Fc(n,e,l,i,r,s))return!0;e=l[l.length-1]}return!1}function vf(n,e,t,i,r,s,o){let a,l,c,u,d,f,_;const p=r[s+1],m=[];for(let A=0,x=t.length;A<x;++A){const E=t[A];for(u=n[E-i],f=n[E-i+1],a=e;a<E;a+=i)d=n[a],_=n[a+1],(p<=f&&_<=p||f<=p&&p<=_)&&(c=(p-f)/(_-f)*(d-u)+u,m.push(c)),u=d,f=_}let y=NaN,v=-1/0;for(m.sort(tr),u=m[0],a=1,l=m.length;a<l;++a){d=m[a];const A=Math.abs(d-u);A>v&&(c=(u+d)/2,Fc(n,e,t,i,c,p)&&(y=c,v=A)),u=d}return isNaN(y)&&(y=r[s]),o?(o.push(y,p,v),o):[y,p,v]}function wv(n,e,t,i,r){let s=[];for(let o=0,a=t.length;o<a;++o){const l=t[o];s=vf(n,e,l,i,r,2*o,s),e=l[l.length-1]}return s}function wf(n,e,t,i,r){let s;for(e+=i;e<t;e+=i)if(s=r(n.slice(e-i,e),n.slice(e,e+i)),s)return s;return!1}function fa(n,e,t,i,r){const s=ef(pi(),n,e,t,i);return ti(r,s)?kr(r,s)||s[0]>=r[0]&&s[2]<=r[2]||s[1]>=r[1]&&s[3]<=r[3]?!0:wf(n,e,t,i,function(o,a){return vy(r,o,a)}):!1}function Av(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s){if(fa(n,e,t[s],i,r))return!0;e=t[s]}return!1}function Af(n,e,t,i,r){return!!(fa(n,e,t,i,r)||Vn(n,e,t,i,r[0],r[1])||Vn(n,e,t,i,r[0],r[3])||Vn(n,e,t,i,r[2],r[1])||Vn(n,e,t,i,r[2],r[3]))}function xf(n,e,t,i,r){if(!Af(n,e,t[0],i,r))return!1;if(t.length===1)return!0;for(let s=1,o=t.length;s<o;++s)if(yv(n,t[s-1],t[s],i,r)&&!fa(n,t[s-1],t[s],i,r))return!1;return!0}function xv(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s){const a=t[s];if(xf(n,e,a,i,r))return!0;e=a[a.length-1]}return!1}function Ev(n,e,t,i){for(;e<t-i;){for(let r=0;r<i;++r){const s=n[e+r];n[e+r]=n[t-i+r],n[t-i+r]=s}e+=i,t-=i}}function Ef(n,e,t,i){let r=0,s=n[t-i],o=n[t-i+1];for(;e<t;e+=i){const a=n[e],l=n[e+1];r+=(a-s)*(l+o),s=a,o=l}return r===0?void 0:r>0}function bf(n,e,t,i,r){r=r!==void 0?r:!1;for(let s=0,o=t.length;s<o;++s){const a=t[s],l=Ef(n,e,a,i);if(s===0){if(r&&l||!r&&!l)return!1}else if(r&&!l||!r&&l)return!1;e=a}return!0}function bv(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s){const a=t[s];if(!bf(n,e,a,i,r))return!1;a.length&&(e=a[a.length-1])}return!0}function zl(n,e,t,i,r){r=r!==void 0?r:!1;for(let s=0,o=t.length;s<o;++s){const a=t[s],l=Ef(n,e,a,i);(s===0?r&&l||!r&&!l:r&&!l||!r&&l)&&Ev(n,e,a,i),e=a}return e}function bu(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s)e=zl(n,e,t[s],i,r);return e}class Xr extends sr{constructor(e,t,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&i?(this.setFlatCoordinates(t,e),this.ends_=i):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?zi(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Xr(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<nr(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Rc(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Lc(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,i,r))}containsXY(e,t){return Fc(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return yf(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),zl(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,Cs(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=ir(this.getExtent());this.flatInteriorPoint_=vf(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Yi(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new Eu(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,i=this.ends_,r=[];let s=0;for(let o=0,a=i.length;o<a;++o){const l=i[o],c=new Eu(t.slice(s,l),e);r.push(c),s=l}return r}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;bf(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=zl(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=mf(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,i),new Xr(t,"XY",i)}getType(){return"Polygon"}intersectsExtent(e){return xf(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=Oc(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}var Yo=Xr;function Cv(n,e,t,i){t=t||32;const r=[];for(let s=0;s<t;++s)zi(r,Yy(n,e,2*Math.PI*s/t,i));return r.push(r[0],r[1]),new Xr(r,"XY",[r.length])}function Cu(n){const e=n[0],t=n[1],i=n[2],r=n[3],s=[e,t,e,r,i,r,i,t,e,t];return new Xr(s,"XY",[s.length])}const al=0;class Iv extends Ii{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=Ac(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&df(),e.center&&(e.center=Ji(e.center,this.projection_)),e.extent&&(e.extent=An(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const a in Ei)delete t[a];this.setProperties(t,!0);const i=Rv(e);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=i.minZoom;const r=Sv(e),s=i.constraint,o=Tv(e);this.constraints_={center:r,resolution:s,rotation:o},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const i=this.getCenterInternal();if(i){const r=e||[0,0,0,0];t=t||[0,0,0,0];const s=this.getResolution(),o=s/2*(r[3]-t[3]+t[1]-r[1]),a=s/2*(r[0]-t[0]+t[2]-r[2]);this.setCenterInternal([i[0]+o,i[1]-a])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let i=0;i<t.length;++i){let r=arguments[i];r.center&&(r=Object.assign({},r),r.center=Ji(r.center,this.getProjection())),r.anchor&&(r=Object.assign({},r),r.anchor=Ji(r.anchor,this.getProjection())),t[i]=r}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,i;t>1&&typeof arguments[t-1]=="function"&&(i=arguments[t-1],--t);let r=0;for(;r<t&&!this.isDef();++r){const u=arguments[r];u.center&&this.setCenterInternal(u.center),u.zoom!==void 0?this.setZoom(u.zoom):u.resolution&&this.setResolution(u.resolution),u.rotation!==void 0&&this.setRotation(u.rotation)}if(r===t){i&&Eo(i,!0);return}let s=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_;const c=[];for(;r<t;++r){const u=arguments[r],d={start:s,complete:!1,anchor:u.anchor,duration:u.duration!==void 0?u.duration:1e3,easing:u.easing||iv,callback:i};if(u.center&&(d.sourceCenter=o,d.targetCenter=u.center.slice(),o=d.targetCenter),u.zoom!==void 0?(d.sourceResolution=a,d.targetResolution=this.getResolutionForZoom(u.zoom),a=d.targetResolution):u.resolution&&(d.sourceResolution=a,d.targetResolution=u.resolution,a=d.targetResolution),u.rotation!==void 0){d.sourceRotation=l;const f=Jn(u.rotation-l+Math.PI,2*Math.PI)-Math.PI;d.targetRotation=l+f,l=d.targetRotation}Lv(d)?d.complete=!0:s+=d.duration,c.push(d)}this.animations_.push(c),this.setHint(Jt.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[Jt.ANIMATING]>0}getInteracting(){return this.hints_[Jt.INTERACTING]>0}cancelAnimations(){this.setHint(Jt.ANIMATING,-this.hints_[Jt.ANIMATING]);let e;for(let t=0,i=this.animations_.length;t<i;++t){const r=this.animations_[t];if(r[0].callback&&Eo(r[0].callback,!1),!e)for(let s=0,o=r.length;s<o;++s){const a=r[s];if(!a.complete){e=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let i=this.animations_.length-1;i>=0;--i){const r=this.animations_[i];let s=!0;for(let o=0,a=r.length;o<a;++o){const l=r[o];if(l.complete)continue;const c=e-l.start;let u=l.duration>0?c/l.duration:1;u>=1?(l.complete=!0,u=1):s=!1;const d=l.easing(u);if(l.sourceCenter){const f=l.sourceCenter[0],_=l.sourceCenter[1],p=l.targetCenter[0],m=l.targetCenter[1];this.nextCenter_=l.targetCenter;const y=f+d*(p-f),v=_+d*(m-_);this.targetCenter_=[y,v]}if(l.sourceResolution&&l.targetResolution){const f=d===1?l.targetResolution:l.sourceResolution+d*(l.targetResolution-l.sourceResolution);if(l.anchor){const _=this.getViewportSize_(this.getRotation()),p=this.constraints_.resolution(f,0,_,!0);this.targetCenter_=this.calculateCenterZoom(p,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=f,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){const f=d===1?Jn(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+d*(l.targetRotation-l.sourceRotation);if(l.anchor){const _=this.constraints_.rotation(f,!0);this.targetCenter_=this.calculateCenterRotate(_,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=f}if(this.applyTargetState_(!0),t=!0,!l.complete)break}if(s){this.animations_[i]=null,this.setHint(Jt.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const o=r[0].callback;o&&Eo(o,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let i;const r=this.getCenterInternal();return r!==void 0&&(i=[r[0]-t[0],r[1]-t[1]],yc(i,e-this.getRotation()),zy(i,t)),i}calculateCenterZoom(e,t){let i;const r=this.getCenterInternal(),s=this.getResolution();if(r!==void 0&&s!==void 0){const o=t[0]-e*(t[0]-r[0])/s,a=t[1]-e*(t[1]-r[1])/s;i=[o,a]}return i}getViewportSize_(e){const t=this.viewportSize_;if(e){const i=t[0],r=t[1];return[Math.abs(i*Math.cos(e))+Math.abs(r*Math.sin(e)),Math.abs(i*Math.sin(e))+Math.abs(r*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&Gl(e,this.getProjection())}getCenterInternal(){return this.get(Ei.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return Ec(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();Ve(t,1);const i=this.getResolution();Ve(i!==void 0,2);const r=this.getRotation();return Ve(r!==void 0,3),Dl(t,i,r,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(Ei.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(An(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const i=At(e)/t[0],r=Wi(e)/t[1];return Math.max(i,r)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,r=Math.log(t/i)/Math.log(e);return function(s){return t/Math.pow(e,s*r)}}getRotation(){return this.get(Ei.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),i=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,s=Math.log(i/r)/t;return function(o){return Math.log(i/o)/t/s}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const i=this.padding_;return i&&(t=[t[0]-i[1]-i[3],t[1]-i[0]-i[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),i=this.getRotation();let r=this.getCenterInternal();const s=this.padding_;if(s){const o=this.getViewportSizeMinusPadding_();r=ll(r,this.getViewportSize_(),[o[0]/2+s[3],o[1]/2+s[0]],t,i)}return{center:r.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,i,r;if(this.resolutions_){const s=hc(this.resolutions_,e,1);t=s,i=this.resolutions_[s],s==this.resolutions_.length-1?r=2:r=i/this.resolutions_[s+1]}else i=this.maxResolution_,r=this.zoomFactor_;return t+Math.log(i/e)/Math.log(r)}getResolutionForZoom(e){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const t=Ot(Math.floor(e),0,this.resolutions_.length-2),i=this.resolutions_[t]/this.resolutions_[t+1];return this.resolutions_[t]/Math.pow(i,Ot(e-t,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let i;if(Ve(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function",24),Array.isArray(e)){Ve(!pc(e),25);const r=An(e,this.getProjection());i=Cu(r)}else if(e.getType()==="Circle"){const r=An(e.getExtent(),this.getProjection());i=Cu(r),i.rotate(this.getRotation(),ir(r))}else i=e;this.fitInternal(i,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),i=Math.cos(t),r=Math.sin(-t),s=e.getFlatCoordinates(),o=e.getStride();let a=1/0,l=1/0,c=-1/0,u=-1/0;for(let d=0,f=s.length;d<f;d+=o){const _=s[d]*i-s[d+1]*r,p=s[d]*r+s[d+1]*i;a=Math.min(a,_),l=Math.min(l,p),c=Math.max(c,_),u=Math.max(u,p)}return[a,l,c,u]}fitInternal(e,t){t=t||{};let i=t.size;i||(i=this.getViewportSizeMinusPadding_());const r=t.padding!==void 0?t.padding:[0,0,0,0],s=t.nearest!==void 0?t.nearest:!1;let o;t.minResolution!==void 0?o=t.minResolution:t.maxZoom!==void 0?o=this.getResolutionForZoom(t.maxZoom):o=0;const a=this.rotatedExtentForGeometry(e);let l=this.getResolutionForExtentInternal(a,[i[0]-r[1]-r[3],i[1]-r[0]-r[2]]);l=isNaN(l)?o:Math.max(l,o),l=this.getConstrainedResolution(l,s?0:1);const c=this.getRotation(),u=Math.sin(c),d=Math.cos(c),f=ir(a);f[0]+=(r[1]-r[3])/2*l,f[1]+=(r[0]-r[2])/2*l;const _=f[0]*d-f[1]*u,p=f[1]*d+f[0]*u,m=this.getConstrainedCenter([_,p],l),y=t.callback?t.callback:Ur;t.duration!==void 0?this.animateInternal({resolution:l,center:m,duration:t.duration,easing:t.easing},y):(this.targetResolution_=l,this.targetCenter_=m,this.applyTargetState_(!1,!0),Eo(y,!0))}centerOn(e,t,i){this.centerOnInternal(Ji(e,this.getProjection()),t,i)}centerOnInternal(e,t,i){this.setCenterInternal(ll(e,t,i,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,i,r){let s;const o=this.padding_;if(o&&e){const a=this.getViewportSizeMinusPadding_(-i),l=ll(e,r,[a[0]/2+o[3],a[1]/2+o[0]],t,i);s=[e[0]-l[0],e[1]-l[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=Gl(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&Ji(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const i=this.getAnimating()||this.getInteracting(),r=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*e,0,r,i);t&&(this.targetCenter_=this.calculateCenterZoom(s,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=Ji(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const i=this.getAnimating()||this.getInteracting(),r=this.constraints_.rotation(this.targetRotation_+e,i);t&&(this.targetCenter_=this.calculateCenterRotate(r,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&Ji(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const i=this.getAnimating()||this.getInteracting()||t,r=this.constraints_.rotation(this.targetRotation_,i),s=this.getViewportSize_(r),o=this.constraints_.resolution(this.targetResolution_,0,s,i),a=this.constraints_.center(this.targetCenter_,o,s,i,this.calculateCenterShift(this.targetCenter_,o,r,s));this.get(Ei.ROTATION)!==r&&this.set(Ei.ROTATION,r),this.get(Ei.RESOLUTION)!==o&&(this.set(Ei.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(Ei.CENTER)||!jo(this.get(Ei.CENTER),a))&&this.set(Ei.CENTER,a),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,i){e=e!==void 0?e:200;const r=t||0,s=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(s),a=this.constraints_.resolution(this.targetResolution_,r,o),l=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,s,o));if(e===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=s,this.targetCenter_=l,this.applyTargetState_();return}i=i||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==s||!this.getCenterInternal()||!jo(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:l,resolution:a,duration:e,easing:Qr,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Jt.INTERACTING,1)}endInteraction(e,t,i){i=i&&Ji(i,this.getProjection()),this.endInteractionInternal(e,t,i)}endInteractionInternal(e,t,i){!this.getInteracting()||(this.setHint(Jt.INTERACTING,-1),this.resolveConstraints(e,t,i))}getConstrainedCenter(e,t){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),i)}getConstrainedZoom(e,t){const i=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(i,t))}getConstrainedResolution(e,t){t=t||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,i)}}function Eo(n,e){setTimeout(function(){n(e)},0)}function Sv(n){if(n.extent!==void 0){const t=n.smoothExtentConstraint!==void 0?n.smoothExtentConstraint:!0;return _u(n.extent,n.constrainOnlyCenter,t)}const e=Ac(n.projection,"EPSG:3857");if(n.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,_u(t,!1,!1)}return Zy}function Rv(n){let e,t,i,o=n.minZoom!==void 0?n.minZoom:al,a=n.maxZoom!==void 0?n.maxZoom:28;const l=n.zoomFactor!==void 0?n.zoomFactor:2,c=n.multiWorld!==void 0?n.multiWorld:!1,u=n.smoothResolutionConstraint!==void 0?n.smoothResolutionConstraint:!0,d=n.showFullExtent!==void 0?n.showFullExtent:!1,f=Ac(n.projection,"EPSG:3857"),_=f.getExtent();let p=n.constrainOnlyCenter,m=n.extent;if(!c&&!m&&f.isGlobal()&&(p=!1,m=_),n.resolutions!==void 0){const y=n.resolutions;t=y[o],i=y[a]!==void 0?y[a]:y[y.length-1],n.constrainResolution?e=qy(y,u,!p&&m,d):e=yu(t,i,u,!p&&m,d)}else{const v=(_?Math.max(At(_),Wi(_)):360*Yr.degrees/f.getMetersPerUnit())/_c/Math.pow(2,al),A=v/Math.pow(2,28-al);t=n.maxResolution,t!==void 0?o=0:t=v/Math.pow(l,o),i=n.minResolution,i===void 0&&(n.maxZoom!==void 0?n.maxResolution!==void 0?i=t/Math.pow(l,a):i=v/Math.pow(l,a):i=A),a=o+Math.floor(Math.log(t/i)/Math.log(l)),i=t/Math.pow(l,a-o),n.constrainResolution?e=Jy(l,t,i,u,!p&&m,d):e=yu(t,i,u,!p&&m,d)}return{constraint:e,maxResolution:t,minResolution:i,minZoom:o,zoomFactor:l}}function Tv(n){if(n.enableRotation!==void 0?n.enableRotation:!0){const t=n.constrainRotation;return t===void 0||t===!0?tv():t===!1?vu:typeof t=="number"?ev(t):vu}return Ic}function Lv(n){return!(n.sourceCenter&&n.targetCenter&&!jo(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}function ll(n,e,t,i,r){const s=Math.cos(-r);let o=Math.sin(-r),a=n[0]*s-n[1]*o,l=n[1]*s+n[0]*o;a+=(e[0]/2-t[0])*i,l+=(t[1]-e[1]/2)*i,o=-o;const c=a*s-l*o,u=l*s+a*o;return[c,u]}var ci=Iv;class Ov extends of{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(dt.SOURCE,this.handleSourcePropertyChange_);const i=e.source?e.source:null;this.setSource(i)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(dt.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(xt(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=tt(e,Ue.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;e instanceof ci?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e;const i=this.getExtent();return this.getVisible()&&Dc(this.getLayerState(),t.viewState)&&(!i||ti(i,t.extent))}getAttributions(e){if(!this.isVisible(e))return[];let t;const i=this.getSource();if(i&&(t=i.getAttributions()),!t)return[];const r=e instanceof ci?e.getViewStateAndExtent():e;let s=t(r);return Array.isArray(s)||(s=[s]),s}render(e,t){const i=this.getRenderer();if(i.prepareFrame(e))return this.rendered=!0,i.renderFrame(e,t)}unrender(){this.rendered=!1}setMapInternal(e){e||this.unrender(),this.set(dt.MAP,e)}getMapInternal(){return this.get(dt.MAP)}setMap(e){this.mapPrecomposeKey_&&(xt(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(xt(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=tt(e,bn.PRECOMPOSE,function(t){const r=t.frameState.layerStatesArray,s=this.getLayerState(!1);Ve(!r.some(function(o){return o.layer===s.layer}),67),r.push(s)},this),this.mapRenderKey_=tt(this,Ue.CHANGE,e.render,e),this.changed())}setSource(e){this.set(dt.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function Dc(n,e){if(!n.visible)return!1;const t=e.resolution;if(t<n.minResolution||t>=n.maxResolution)return!1;const i=e.zoom;return i>n.minZoom&&i<=n.maxZoom}var ga=Ov;class Mv extends cc{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){Ge()}calculateMatrices2D(e){const t=e.viewState,i=e.coordinateToPixelTransform,r=e.pixelToCoordinateTransform;Sn(i,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),dc(r,i)}forEachFeatureAtCoordinate(e,t,i,r,s,o,a,l){let c;const u=t.viewState;function d(E,M,L,R){return s.call(o,M,E?L:null,R)}const f=u.projection,_=lf(e.slice(),f),p=[[0,0]];if(f.canWrapX()&&r){const E=f.getExtent(),M=At(E);p.push([-M,0],[M,0])}const m=t.layerStatesArray,y=m.length,v=[],A=[];for(let E=0;E<p.length;E++)for(let M=y-1;M>=0;--M){const L=m[M],R=L.layer;if(R.hasRenderer()&&Dc(L,u)&&a.call(l,R)){const S=R.getRenderer(),B=R.getSource();if(S&&B){const U=B.getWrapX()?_:e,z=d.bind(null,L.managed);A[0]=U[0]+p[E][0],A[1]=U[1]+p[E][1],c=S.forEachFeatureAtCoordinate(A,t,i,z,v)}if(c)return c}}if(v.length===0)return;const x=1/v.length;return v.forEach((E,M)=>E.distanceSq+=M*x),v.sort((E,M)=>E.distanceSq-M.distanceSq),v.some(E=>c=E.callback(E.feature,E.layer,E.geometry)),c}hasFeatureAtCoordinate(e,t,i,r,s,o){return this.forEachFeatureAtCoordinate(e,t,i,r,Es,this,s,o)!==void 0}getMap(){return this.map_}renderFrame(e){Ge()}scheduleExpireIconCache(e){Bo.canExpireCache()&&e.postRenderFunctions.push(Pv)}}function Pv(n,e){Bo.expire()}var Fv=Mv;class Dv extends Xi{constructor(e,t,i,r){super(e),this.inversePixelTransform=t,this.frameState=i,this.context=r}}var Cf=Dv;const bo="ol-hidden",Bs="ol-unselectable",kc="ol-control",Iu="ol-collapsed",kv=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),Su=["style","variant","weight","size","lineHeight","family"],If=function(n){const e=n.match(kv);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let i=0,r=Su.length;i<r;++i){const s=e[i+1];s!==void 0&&(t[Su[i]]=s)}return t.families=t.family.split(/,\s?/),t};function ni(n,e,t,i){let r;return t&&t.length?r=t.shift():uc?r=new OffscreenCanvas(n||300,e||300):r=document.createElement("canvas"),n&&(r.width=n),e&&(r.height=e),r.getContext("2d",i)}function pa(n){const e=n.canvas;e.width=1,e.height=1,n.clearRect(0,0,1,1)}function Ru(n,e){const t=e.parentNode;t&&t.replaceChild(n,e)}function Ul(n){return n&&n.parentNode?n.parentNode.removeChild(n):null}function Nv(n){for(;n.lastChild;)n.removeChild(n.lastChild)}function Bv(n,e){const t=n.childNodes;for(let i=0;;++i){const r=t[i],s=e[i];if(!r&&!s)break;if(r!==s){if(!r){n.appendChild(s);continue}if(!s){n.removeChild(r),--i;continue}n.insertBefore(s,r)}}}const Sf="10px sans-serif",rn="#000",Xo="round",Is=[],Ss=0,Hr="round",Rs=10,Ts="#000",Ls="center",Ho="middle",Kn=[0,0,0,0],Os=1,en=new Ii;let Tr=null,Wl;const Yl={},Gv=function(){const e="32px ",t=["monospace","serif"],i=t.length,r="wmytzilWMYTZIL@#/&?$%10\uF013";let s,o;function a(c,u,d){let f=!0;for(let _=0;_<i;++_){const p=t[_];if(o=Qo(c+" "+u+" "+e+p,r),d!=p){const m=Qo(c+" "+u+" "+e+d+","+p,r);f=f&&m!=o}}return!!f}function l(){let c=!0;const u=en.getKeys();for(let d=0,f=u.length;d<f;++d){const _=u[d];en.get(_)<100&&(a.apply(this,_.split(`
`))?(Ds(Yl),Tr=null,Wl=void 0,en.set(_,100)):(en.set(_,en.get(_)+1,!0),c=!1))}c&&(clearInterval(s),s=void 0)}return function(c){const u=If(c);if(!u)return;const d=u.families;for(let f=0,_=d.length;f<_;++f){const p=d[f],m=u.style+`
`+u.weight+`
`+p;en.get(m)===void 0&&(en.set(m,100,!0),a(u.style,u.weight,p)||(en.set(m,0,!0),s===void 0&&(s=setInterval(l,32))))}}}(),jv=function(){let n;return function(e){let t=Yl[e];if(t==null){if(uc){const i=If(e),r=Rf(e,"\u017Dg");t=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else n||(n=document.createElement("div"),n.innerHTML="M",n.style.minHeight="0",n.style.maxHeight="none",n.style.height="auto",n.style.padding="0",n.style.border="none",n.style.position="absolute",n.style.display="block",n.style.left="-99999px"),n.style.font=e,document.body.appendChild(n),t=n.offsetHeight,document.body.removeChild(n);Yl[e]=t}return t}}();function Rf(n,e){return Tr||(Tr=ni(1,1)),n!=Wl&&(Tr.font=n,Wl=Tr.font),Tr.measureText(e)}function Qo(n,e){return Rf(n,e).width}function Tu(n,e,t){if(e in t)return t[e];const i=e.split(`
`).reduce((r,s)=>Math.max(r,Qo(n,s)),0);return t[e]=i,i}function zv(n,e){const t=[],i=[],r=[];let s=0,o=0,a=0,l=0;for(let c=0,u=e.length;c<=u;c+=2){const d=e[c];if(d===`
`||c===u){s=Math.max(s,o),r.push(o),o=0,a+=l;continue}const f=e[c+1]||n.font,_=Qo(f,d);t.push(_),o+=_;const p=jv(f);i.push(p),l=Math.max(l,p)}return{width:s,height:a,widths:t,heights:i,lineWidths:r}}function Uv(n,e,t,i,r,s,o,a,l,c,u){n.save(),t!==1&&(n.globalAlpha*=t),e&&n.setTransform.apply(n,e),i.contextInstructions?(n.translate(l,c),n.scale(u[0],u[1]),Wv(i,n)):u[0]<0||u[1]<0?(n.translate(l,c),n.scale(u[0],u[1]),n.drawImage(i,r,s,o,a,0,0,o,a)):n.drawImage(i,r,s,o,a,l,c,o*u[0],a*u[1]),n.restore()}function Wv(n,e){const t=n.contextInstructions;for(let i=0,r=t.length;i<r;i+=2)Array.isArray(t[i+1])?e[t[i]].apply(e,t[i+1]):e[t[i]]=t[i+1]}class Yv extends Fv{constructor(e){super(e),this.fontChangeListenerKey_=tt(en,zr.PROPERTYCHANGE,e.redrawText.bind(e)),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=Bs+" ol-layers";const i=e.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const i=this.getMap();if(i.hasListener(e)){const r=new Cf(e,void 0,t);i.dispatchEvent(r)}}disposeInternal(){xt(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(bn.PRECOMPOSE,e);const t=e.layerStatesArray.sort(function(o,a){return o.zIndex-a.zIndex}),i=e.viewState;this.children_.length=0;const r=[];let s=null;for(let o=0,a=t.length;o<a;++o){const l=t[o];e.layerIndex=o;const c=l.layer,u=c.getSourceState();if(!Dc(l,i)||u!="ready"&&u!="undefined"){c.unrender();continue}const d=c.render(e,s);!d||(d!==s&&(this.children_.push(d),s=d),"getDeclutter"in c&&r.push(c))}for(let o=r.length-1;o>=0;--o)r[o].renderDeclutter(e);Bv(this.element_,this.children_),this.dispatchRenderEvent(bn.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}}var Xv=Yv;class wn extends Xi{constructor(e,t){super(e),this.layer=t}}const cl={LAYERS:"layers"};class Nc extends of{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let i=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(cl.LAYERS,this.handleLayersChanged_),i?Array.isArray(i)?i=new Gi(i.slice(),{unique:!0}):Ve(typeof i.getArray=="function",43):i=new Gi(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(xt),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(tt(e,ai.ADD,this.handleLayersAdd_,this),tt(e,ai.REMOVE,this.handleLayersRemove_,this));for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach(xt);Ds(this.listenerKeys_);const t=e.getArray();for(let i=0,r=t.length;i<r;i++){const s=t[i];this.registerLayerListeners_(s),this.dispatchEvent(new wn("addlayer",s))}this.changed()}registerLayerListeners_(e){const t=[tt(e,zr.PROPERTYCHANGE,this.handleLayerChange_,this),tt(e,Ue.CHANGE,this.handleLayerChange_,this)];e instanceof Nc&&t.push(tt(e,"addlayer",this.handleLayerGroupAdd_,this),tt(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[ct(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new wn("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new wn("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new wn("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,i=ct(t);this.listenerKeys_[i].forEach(xt),delete this.listenerKeys_[i],this.dispatchEvent(new wn("removelayer",t)),this.changed()}getLayers(){return this.get(cl.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const i=t.getArray();for(let r=0,s=i.length;r<s;++r)this.dispatchEvent(new wn("removelayer",i[r]))}this.set(cl.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],i=t.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(t)});const r=this.getLayerState();let s=r.zIndex;!e&&r.zIndex===void 0&&(s=0);for(let o=i,a=t.length;o<a;o++){const l=t[o];l.opacity*=r.opacity,l.visible=l.visible&&r.visible,l.maxResolution=Math.min(l.maxResolution,r.maxResolution),l.minResolution=Math.max(l.minResolution,r.minResolution),l.minZoom=Math.max(l.minZoom,r.minZoom),l.maxZoom=Math.min(l.maxZoom,r.maxZoom),r.extent!==void 0&&(l.extent!==void 0?l.extent=ys(l.extent,r.extent):l.extent=r.extent),l.zIndex===void 0&&(l.zIndex=s)}return t}getSourceState(){return"ready"}}var ma=Nc;class Hv extends Xi{constructor(e,t,i){super(e),this.map=t,this.frameState=i!==void 0?i:null}}var Lr=Hv;class Qv extends Lr{constructor(e,t,i,r,s,o){super(e,t,s),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=r!==void 0?r:!1,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}var yn=Qv,It={SINGLECLICK:"singleclick",CLICK:Ue.CLICK,DBLCLICK:Ue.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Xl={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class Vv extends sa{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=tt(i,Xl.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=tt(i,Xl.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(Ue.TOUCHMOVE,this.boundHandleTouchMove_,Kd?{passive:!1}:!1)}emulateClick_(e){let t=new yn(It.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new yn(It.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const i=new yn(It.SINGLECLICK,this.map_,e);this.dispatchEvent(i)},250)}updateActivePointers_(e){const t=e,i=t.pointerId;if(t.type==It.POINTERUP||t.type==It.POINTERCANCEL){delete this.trackedTouches_[i];for(const r in this.trackedTouches_)if(this.trackedTouches_[r].target!==t.target){delete this.trackedTouches_[r];break}}else(t.type==It.POINTERDOWN||t.type==It.POINTERMOVE)&&(this.trackedTouches_[i]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new yn(It.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(xt),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new yn(It.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(tt(i,It.POINTERMOVE,this.handlePointerMove_,this),tt(i,It.POINTERUP,this.handlePointerUp_,this),tt(this.element_,It.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(tt(this.element_.getRootNode(),It.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new yn(It.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new yn(It.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(xt(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(Ue.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(xt(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(xt),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}var Kv=Vv,vn={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},qt={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};const Vo=1/0;class $v{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,Ds(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,i=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const r=this.keyFunction_(i);return delete this.queuedElements_[r],i}enqueue(e){Ve(!(this.keyFunction_(e)in this.queuedElements_),31);const t=this.priorityFunction_(e);return t!=Vo?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,i=this.priorities_,r=t.length,s=t[e],o=i[e],a=e;for(;e<r>>1;){const l=this.getLeftChildIndex_(e),c=this.getRightChildIndex_(e),u=c<r&&i[c]<i[l]?c:l;t[e]=t[u],i[e]=i[u],e=u}t[e]=s,i[e]=o,this.siftDown_(a,e)}siftDown_(e,t){const i=this.elements_,r=this.priorities_,s=i[t],o=r[t];for(;t>e;){const a=this.getParentIndex_(t);if(r[a]>o)i[t]=i[a],r[t]=r[a],t=a;else break}i[t]=s,r[t]=o}reprioritize(){const e=this.priorityFunction_,t=this.elements_,i=this.priorities_;let r=0;const s=t.length;let o,a,l;for(a=0;a<s;++a)o=t[a],l=e(o),l==Vo?delete this.queuedElements_[this.keyFunction_(o)]:(i[r]=l,t[r++]=o);t.length=r,i.length=r,this.heapify_()}}var Zv=$v,De={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class qv extends Zv{constructor(e,t){super(function(i){return e.apply(null,i)},function(i){return i[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(Ue.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,i=t.getState();if(i===De.LOADED||i===De.ERROR||i===De.EMPTY){i!==De.ERROR&&t.removeEventListener(Ue.CHANGE,this.boundHandleTileChange_);const r=t.getKey();r in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[r],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let i=0,r,s,o;for(;this.tilesLoading_<e&&i<t&&this.getCount()>0;)s=this.dequeue()[0],o=s.getKey(),r=s.getState(),r===De.IDLE&&!(o in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++i,s.load())}}var Jv=qv;function e0(n,e,t,i,r){if(!n||!(t in n.wantedTiles)||!n.wantedTiles[t][e.getKey()])return Vo;const s=n.viewState.center,o=i[0]-s[0],a=i[1]-s[1];return 65536*Math.log(r)+Math.sqrt(o*o+a*a)/r}class t0 extends Ii{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){Ul(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&Ul(this.element);for(let t=0,i=this.listenerKeys.length;t<i;++t)xt(this.listenerKeys[t]);this.listenerKeys.length=0,this.map_=e,e&&((this.target_?this.target_:e.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==Ur&&this.listenerKeys.push(tt(e,vn.POSTRENDER,this.render,this)),e.render())}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}var _a=t0;class i0 extends _a{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1);const t=e.className!==void 0?e.className:"ol-attribution",i=e.tipLabel!==void 0?e.tipLabel:"Attributions",r=e.expandClassName!==void 0?e.expandClassName:t+"-expand",s=e.collapseLabel!==void 0?e.collapseLabel:"\u203A",o=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=o):this.collapseLabel_=s;const a=e.label!==void 0?e.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=r):this.label_=a;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(Ue.CLICK,this.handleClick_.bind(this),!1);const c=t+" "+Bs+" "+kc+(this.collapsed_&&this.collapsible_?" "+Iu:"")+(this.collapsible_?"":" ol-uncollapsible"),u=this.element;u.className=c,u.appendChild(this.toggleButton_),u.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=Array.from(new Set(this.getMap().getAllLayers().flatMap(r=>r.getAttributions(e)))),i=!this.getMap().getAllLayers().some(r=>r.getSource()&&r.getSource().getAttributionsCollapsible()===!1);return this.overrideCollapsible_||this.setCollapsible(i),t}updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=this.collectSourceAttributions_(e),i=t.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!Rn(t,this.renderedAttributions_)){Nv(this.ulElement_);for(let r=0,s=t.length;r<s;++r){const o=document.createElement("li");o.innerHTML=t[r],this.ulElement_.appendChild(o)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(Iu),this.collapsed_?Ru(this.collapseLabel_,this.label_):Ru(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}var n0=i0;class r0 extends _a{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",i=e.label!==void 0?e.label:"\u21E7",r=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof i=="string"?(this.label_=document.createElement("span"),this.label_.className=r,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(r));const s=e.tipLabel?e.tipLabel:"Reset rotation",o=document.createElement("button");o.className=t+"-reset",o.setAttribute("type","button"),o.title=s,o.appendChild(this.label_),o.addEventListener(Ue.CLICK,this.handleClick_.bind(this),!1);const a=t+" "+Bs+" "+kc,l=this.element;l.className=a,l.appendChild(o),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(bo)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const i=t.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:Qr}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const i=t.viewState.rotation;if(i!=this.rotation_){const r="rotate("+i+"rad)";if(this.autoHide_){const s=this.element.classList.contains(bo);!s&&i===0?this.element.classList.add(bo):s&&i!==0&&this.element.classList.remove(bo)}this.label_.style.transform=r}this.rotation_=i}}var s0=r0;class o0 extends _a{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",i=e.delta!==void 0?e.delta:1,r=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",s=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",o=e.zoomInLabel!==void 0?e.zoomInLabel:"+",a=e.zoomOutLabel!==void 0?e.zoomOutLabel:"\u2013",l=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",c=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",u=document.createElement("button");u.className=r,u.setAttribute("type","button"),u.title=l,u.appendChild(typeof o=="string"?document.createTextNode(o):o),u.addEventListener(Ue.CLICK,this.handleClick_.bind(this,i),!1);const d=document.createElement("button");d.className=s,d.setAttribute("type","button"),d.title=c,d.appendChild(typeof a=="string"?document.createTextNode(a):a),d.addEventListener(Ue.CLICK,this.handleClick_.bind(this,-i),!1);const f=t+" "+Bs+" "+kc,_=this.element;_.className=f,_.appendChild(u),_.appendChild(d),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const i=this.getMap().getView();if(!i)return;const r=i.getZoom();if(r!==void 0){const s=i.getConstrainedZoom(r+e);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:s,duration:this.duration_,easing:Qr})):i.setZoom(s)}}}var a0=o0;function Gs(n){n=n||{};const e=new Gi;return(n.zoom!==void 0?n.zoom:!0)&&e.push(new a0(n.zoomOptions)),(n.rotate!==void 0?n.rotate:!0)&&e.push(new s0(n.rotateOptions)),(n.attribution!==void 0?n.attribution:!0)&&e.push(new n0(n.attributionOptions)),e}var Lu={ACTIVE:"active"};class l0 extends Ii{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(Lu.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(Lu.ACTIVE,e)}setMap(e){this.map_=e}}function c0(n,e,t){const i=n.getCenterInternal();if(i){const r=[i[0]+e[0],i[1]+e[1]];n.animateInternal({duration:t!==void 0?t:250,easing:nv,center:n.getConstrainedCenter(r)})}}function Bc(n,e,t,i){const r=n.getZoom();if(r===void 0)return;const s=n.getConstrainedZoom(r+e),o=n.getResolutionForZoom(s);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:o,anchor:t,duration:i!==void 0?i:250,easing:Qr})}var js=l0;class h0 extends js{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==It.DBLCLICK){const i=e.originalEvent,r=e.map,s=e.coordinate,o=i.shiftKey?-this.delta_:this.delta_,a=r.getView();Bc(a,o,s,this.duration_),i.preventDefault(),t=!0}return!t}}var u0=h0;class d0 extends js{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==It.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==It.POINTERUP){const i=this.handleUpEvent(e);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(e.type==It.POINTERDOWN){const i=this.handleDownEvent(e);this.handlingDownUpSequence=i,t=this.stopDown(i)}else e.type==It.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function Gc(n){const e=n.length;let t=0,i=0;for(let r=0;r<e;r++)t+=n[r].clientX,i+=n[r].clientY;return{clientX:t/e,clientY:i/e}}var zs=d0;function Hl(n){const e=arguments;return function(t){let i=!0;for(let r=0,s=e.length;r<s&&(i=i&&e[r](t),!!i);++r);return i}}const f0=function(n){const e=n.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},g0=function(n){const e=n.map.getTargetElement(),t=n.map.getOwnerDocument().activeElement;return e.contains(t)},Tf=function(n){return n.map.getTargetElement().hasAttribute("tabindex")?g0(n):!0},p0=Es,Lf=function(n){const e=n.originalEvent;return e.button==0&&!(ly&&cy&&e.ctrlKey)},Of=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},m0=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Mf=function(n){const e=n.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},hl=function(n){const e=n.originalEvent;return Ve(e!==void 0,56),e.pointerType=="mouse"},_0=function(n){const e=n.originalEvent;return Ve(e!==void 0,56),e.isPrimary&&e.button===0};class y0 extends zs{constructor(e){super({stopDown:ra}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:Hl(Of,_0);this.condition_=e.onFocusOnly?Hl(Tf,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const i=this.targetPointers,r=t.getEventPixel(Gc(i));if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){const s=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],a=e.map.getView();Uy(s,a.getResolution()),yc(s,a.getRotation()),a.adjustCenterInternal(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=i.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,i=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const r=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),o=i.getCenterInternal(),a=t.getPixelFromCoordinateInternal(o),l=t.getCoordinateFromPixelInternal([a[0]-r*Math.cos(s),a[1]-r*Math.sin(s)]);i.animateInternal({center:i.getConstrainedCenter(l),duration:500,easing:Qr})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const i=e.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}var v0=y0;class w0 extends zs{constructor(e){e=e||{},super({stopDown:ra}),this.condition_=e.condition?e.condition:f0,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!hl(e))return;const t=e.map,i=t.getView();if(i.getConstraints().rotation===Ic)return;const r=t.getSize(),s=e.pixel,o=Math.atan2(r[1]/2-s[1],s[0]-r[0]/2);if(this.lastAngle_!==void 0){const a=o-this.lastAngle_;i.adjustRotationInternal(-a)}this.lastAngle_=o}handleUpEvent(e){return hl(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return hl(e)&&Lf(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}var A0=w0;class x0 extends cc{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,i="px",r=this.element_.style;r.left=Math.min(e[0],t[0])+i,r.top=Math.min(e[1],t[1])+i,r.width=Math.abs(t[0]-e[0])+i,r.height=Math.abs(t[1]-e[1])+i}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const e=this.startPixel_,t=this.endPixel_,r=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new Yo([r])}getGeometry(){return this.geometry_}}var E0=x0;const Co={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class ul extends Xi{constructor(e,t,i){super(e),this.coordinate=t,this.mapBrowserEvent=i}}class b0 extends zs{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.box_=new E0(e.className||"ol-dragbox"),this.minArea_=e.minArea!==void 0?e.minArea:64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition?e.condition:Lf,this.boxEndCondition_=e.boxEndCondition?e.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,i){const r=i[0]-t[0],s=i[1]-t[1];return r*r+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new ul(Co.BOXDRAG,e.coordinate,e))}handleUpEvent(e){this.box_.setMap(null);const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new ul(t?Co.BOXEND:Co.BOXCANCEL,e.coordinate,e)),!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new ul(Co.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}}var C0=b0;class I0 extends C0{constructor(e){e=e||{};const t=e.condition?e.condition:m0;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const i=this.getMap().getView();let r=this.getGeometry();if(this.out_){const s=i.rotatedExtentForGeometry(r),o=i.getResolutionForExtentInternal(s),a=i.getResolution()/o;r=r.clone(),r.scale(a*a)}i.fitInternal(r,{duration:this.duration_,easing:Qr})}}var S0=I0,Wn={LEFT:37,UP:38,RIGHT:39,DOWN:40};class R0 extends js{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return Of(t)&&Mf(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==Ue.KEYDOWN){const i=e.originalEvent,r=i.keyCode;if(this.condition_(e)&&(r==Wn.DOWN||r==Wn.LEFT||r==Wn.RIGHT||r==Wn.UP)){const o=e.map.getView(),a=o.getResolution()*this.pixelDelta_;let l=0,c=0;r==Wn.DOWN?c=-a:r==Wn.LEFT?l=-a:r==Wn.RIGHT?l=a:c=a;const u=[l,c];yc(u,o.getRotation()),c0(o,u,this.duration_),i.preventDefault(),t=!0}}return!t}}var T0=R0;class L0 extends js{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:Mf,this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==Ue.KEYDOWN||e.type==Ue.KEYPRESS){const i=e.originalEvent,r=i.key;if(this.condition_(e)&&(r==="+"||r==="-")){const s=e.map,o=r==="+"?this.delta_:-this.delta_,a=s.getView();Bc(a,o,void 0,this.duration_),i.preventDefault(),t=!0}}return!t}}var O0=L0;class M0{constructor(e,t,i){this.decay_=e,this.minVelocity_=t,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let i=t-3;for(;i>0&&this.points_[i+2]>e;)i-=3;const r=this.points_[t+2]-this.points_[i+2];if(r<1e3/60)return!1;const s=this.points_[t]-this.points_[i],o=this.points_[t+1]-this.points_[i+1];return this.angle_=Math.atan2(o,s),this.initialVelocity_=Math.sqrt(s*s+o*o)/r,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}var P0=M0;class F0 extends js{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:p0;this.condition_=e.onFocusOnly?Hl(Tf,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(e){if(!this.condition_(e)||e.type!==Ue.WHEEL)return!0;const i=e.map,r=e.originalEvent;r.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.coordinate);let s;if(e.type==Ue.WHEEL&&(s=r.deltaY,oy&&r.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(s/=Vd),r.deltaMode===WheelEvent.DOM_DELTA_LINE&&(s*=40)),s===0)return!1;this.lastDelta_=s;const o=Date.now();this.startTime_===void 0&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const a=i.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=o,!1;this.totalDelta_+=s;const l=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),l),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let i=-Ot(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),Bc(t,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}var D0=F0;class k0 extends zs{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=ra),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const i=this.targetPointers[0],r=this.targetPointers[1],s=Math.atan2(r.clientY-i.clientY,r.clientX-i.clientX);if(this.lastAngle_!==void 0){const l=s-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=l}this.lastAngle_=s;const o=e.map,a=o.getView();a.getConstraints().rotation!==Ic&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(Gc(this.targetPointers))),this.rotating_&&(o.render(),a.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}var N0=k0;class B0 extends zs{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=ra),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const i=this.targetPointers[0],r=this.targetPointers[1],s=i.clientX-r.clientX,o=i.clientY-r.clientY,a=Math.sqrt(s*s+o*o);this.lastDistance_!==void 0&&(t=this.lastDistance_/a),this.lastDistance_=a;const l=e.map,c=l.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(Gc(this.targetPointers))),l.render(),c.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const i=e.map.getView(),r=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,r),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}var G0=B0;function j0(n){n=n||{};const e=new Gi,t=new P0(-.005,.05,100);return(n.altShiftDragRotate!==void 0?n.altShiftDragRotate:!0)&&e.push(new A0),(n.doubleClickZoom!==void 0?n.doubleClickZoom:!0)&&e.push(new u0({delta:n.zoomDelta,duration:n.zoomDuration})),(n.dragPan!==void 0?n.dragPan:!0)&&e.push(new v0({onFocusOnly:n.onFocusOnly,kinetic:t})),(n.pinchRotate!==void 0?n.pinchRotate:!0)&&e.push(new N0),(n.pinchZoom!==void 0?n.pinchZoom:!0)&&e.push(new G0({duration:n.zoomDuration})),(n.keyboard!==void 0?n.keyboard:!0)&&(e.push(new T0),e.push(new O0({delta:n.zoomDelta,duration:n.zoomDuration}))),(n.mouseWheelZoom!==void 0?n.mouseWheelZoom:!0)&&e.push(new D0({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(n.shiftDragZoom!==void 0?n.shiftDragZoom:!0)&&e.push(new S0({duration:n.zoomDuration})),e}function Ou(n){return n[0]>0&&n[1]>0}function z0(n,e,t){return t===void 0&&(t=[0,0]),t[0]=n[0]*e+.5|0,t[1]=n[1]*e+.5|0,t}function hi(n,e){return Array.isArray(n)?n:(e===void 0?e=[n,n]:(e[0]=n,e[1]=n),e)}function Pf(n){if(n instanceof ga){n.setMapInternal(null);return}n instanceof ma&&n.getLayers().forEach(Pf)}function Ff(n,e){if(n instanceof ga){n.setMapInternal(e);return}if(n instanceof ma){const t=n.getLayers().getArray();for(let i=0,r=t.length;i<r;++i)Ff(t[i],e)}}class U0 extends Ii{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=W0(e);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:Vd,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Ui(),this.pixelToCoordinateTransform_=Ui(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=t.controls||Gs(),this.interactions=t.interactions||j0({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new Jv(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(qt.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(qt.VIEW,this.handleViewChanged_),this.addChangeListener(qt.SIZE,this.handleSizeChanged_),this.addChangeListener(qt.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const i=this;e.view&&!(e.view instanceof ci)&&e.view.then(function(r){i.setView(new ci(r))}),this.controls.addEventListener(ai.ADD,r=>{r.element.setMap(this)}),this.controls.addEventListener(ai.REMOVE,r=>{r.element.setMap(null)}),this.interactions.addEventListener(ai.ADD,r=>{r.element.setMap(this)}),this.interactions.addEventListener(ai.REMOVE,r=>{r.element.setMap(null)}),this.overlays_.addEventListener(ai.ADD,r=>{this.addOverlayInternal_(r.element)}),this.overlays_.addEventListener(ai.REMOVE,r=>{const s=r.element.getId();s!==void 0&&delete this.overlayIdIndex_[s.toString()],r.element.setMap(null)}),this.controls.forEach(r=>{r.setMap(this)}),this.interactions.forEach(r=>{r.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){Ff(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,i){if(!this.frameState_||!this.renderer_)return;const r=this.getCoordinateFromPixelInternal(e);i=i!==void 0?i:{};const s=i.hitTolerance!==void 0?i.hitTolerance:0,o=i.layerFilter!==void 0?i.layerFilter:Es,a=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,s,a,t,null,o,null)}getFeaturesAtPixel(e,t){const i=[];return this.forEachFeatureAtPixel(e,function(r){i.push(r)},t),i}getAllLayers(){const e=[];function t(i){i.forEach(function(r){r instanceof ma?t(r.getLayers()):e.push(r)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const r=t.layerFilter!==void 0?t.layerFilter:Es,s=t.hitTolerance!==void 0?t.hitTolerance:0,o=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,s,o,r,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const i=this.viewport_.getBoundingClientRect(),r=this.getSize(),s=i.width/r[0],o=i.height/r[1],a="changedTouches"in e?e.changedTouches[0]:e;return[(a.clientX-i.left)/s,(a.clientY-i.top)/o]}getTarget(){return this.get(qt.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return Gl(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?Nt(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(qt.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof Gi){t.setLayers(e);return}const i=t.getLayers();i.clear(),i.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,i=e.length;t<i;++t){const r=e[t];if(!r.visible)continue;const s=r.layer.getRenderer();if(s&&!s.ready)return!0;const o=r.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(e){const t=Ji(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?Nt(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(qt.SIZE)}getView(){return this.get(qt.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,i,r){return e0(this.frameState_,e,t,i,r)}handleBrowserEvent(e,t){t=t||e.type;const i=new yn(t,this,e);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,i=t.type;if(i===Xl.POINTERDOWN||i===Ue.WHEEL||i===Ue.KEYDOWN){const r=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():r,o=t.target;if(this.overlayContainerStopEvent_.contains(o)||!(s===r?r.documentElement:s).contains(o))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const r=this.getInteractions().getArray().slice();for(let s=r.length-1;s>=0;s--){const o=r[s];if(o.getMap()!==this||!o.getActive()||!this.getTargetElement())continue;if(!o.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let r=this.maxTilesLoading_,s=r;if(e){const o=e.viewHints;if(o[Jt.ANIMATING]||o[Jt.INTERACTING]){const a=Date.now()-e.time>8;r=a?0:8,s=a?0:2}}t.getTilesLoading()<r&&(t.reprioritize(),t.loadMoreTiles(r,s))}e&&this.renderer_&&!e.animate&&(this.renderComplete_===!0?(this.hasListener(bn.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(bn.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new Lr(vn.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new Lr(vn.LOADSTART,this,e))));const i=this.postRenderFunctions_;for(let r=0,s=i.length;r<s;++r)i[r](this,e);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let i=0,r=this.targetChangeHandlerKeys_.length;i<r;++i)xt(this.targetChangeHandlerKeys_[i]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(Ue.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(Ue.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,Ul(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const i=this.targetElement_.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.unobserve(i.host)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new Xv(this)),this.mapBrowserEventHandler_=new Kv(this,this.moveTolerance_);for(const s in It)this.mapBrowserEventHandler_.addEventListener(It[s],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(Ue.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(Ue.WHEEL,this.boundHandleBrowserEvent_,Kd?{passive:!1}:!1);const i=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.targetChangeHandlerKeys_=[tt(i,Ue.KEYDOWN,this.handleBrowserEvent,this),tt(i,Ue.KEYPRESS,this.handleBrowserEvent,this)];const r=t.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.observe(r.host),this.resizeObserver_.observe(t)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(xt(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(xt(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=tt(e,zr.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=tt(e,Ue.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(xt),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new wn("addlayer",e)),this.layerGroupPropertyListenerKeys_=[tt(e,zr.PROPERTYCHANGE,this.render,this),tt(e,Ue.CHANGE,this.render,this),tt(e,"addlayer",this.handleLayerAdd_,this),tt(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,i=e.length;t<i;++t){const r=e[t].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){Pf(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),i=this.getView(),r=this.frameState_;let s=null;if(t!==void 0&&Ou(t)&&i&&i.isDef()){const o=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=i.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:Dl(a.center,a.resolution,a.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{},mapId:ct(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const l=isNaN(a.nextRotation)?a.rotation:a.nextRotation;s.nextExtent=Dl(a.nextCenter,a.nextResolution,l,t)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),r&&(!this.previousExtent_||!pc(this.previousExtent_)&&!bs(s.extent,this.previousExtent_))&&(this.dispatchEvent(new Lr(vn.MOVESTART,this,r)),this.previousExtent_=ks(this.previousExtent_)),this.previousExtent_&&!s.viewHints[Jt.ANIMATING]&&!s.viewHints[Jt.INTERACTING]&&!bs(s.extent,this.previousExtent_)&&(this.dispatchEvent(new Lr(vn.MOVEEND,this,s)),Zd(s.extent,this.previousExtent_))),this.dispatchEvent(new Lr(vn.POSTRENDER,this,s)),this.renderComplete_=this.hasListener(vn.LOADSTART)||this.hasListener(vn.LOADEND)||this.hasListener(bn.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new wn("removelayer",t)),this.set(qt.LAYERGROUP,e)}setSize(e){this.set(qt.SIZE,e)}setTarget(e){this.set(qt.TARGET,e)}setView(e){if(!e||e instanceof ci){this.set(qt.VIEW,e);return}this.set(qt.VIEW,new ci);const t=this;e.then(function(i){t.setView(new ci(i))})}updateSize(){const e=this.getTargetElement();let t;if(e){const r=getComputedStyle(e),s=e.offsetWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight)-parseFloat(r.borderRightWidth),o=e.offsetHeight-parseFloat(r.borderTopWidth)-parseFloat(r.paddingTop)-parseFloat(r.paddingBottom)-parseFloat(r.borderBottomWidth);!isNaN(s)&&!isNaN(o)&&(t=[s,o],!Ou(t)&&!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&uf("No map visible because the map container's width or height are 0."))}const i=this.getSize();t&&(!i||!Rn(t,i))&&(this.setSize(t),this.updateViewportSize_())}updateViewportSize_(){const e=this.getView();if(e){let t;const i=getComputedStyle(this.viewport_);i.width&&i.height&&(t=[parseInt(i.width,10),parseInt(i.height,10)]),e.setViewportSize(t)}}}function W0(n){let e=null;n.keyboardEventTarget!==void 0&&(e=typeof n.keyboardEventTarget=="string"?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);const t={},i=n.layers&&typeof n.layers.getLayers=="function"?n.layers:new ma({layers:n.layers});t[qt.LAYERGROUP]=i,t[qt.TARGET]=n.target,t[qt.VIEW]=n.view instanceof ci?n.view:new ci;let r;n.controls!==void 0&&(Array.isArray(n.controls)?r=new Gi(n.controls.slice()):(Ve(typeof n.controls.getArray=="function",47),r=n.controls));let s;n.interactions!==void 0&&(Array.isArray(n.interactions)?s=new Gi(n.interactions.slice()):(Ve(typeof n.interactions.getArray=="function",48),s=n.interactions));let o;return n.overlays!==void 0?Array.isArray(n.overlays)?o=new Gi(n.overlays.slice()):(Ve(typeof n.overlays.getArray=="function",49),o=n.overlays):o=new Gi,{controls:r,interactions:s,keyboardEventTarget:e,overlays:o,values:t}}var ya=U0;class jc extends Ii{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new jc(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const i=this.getStyle();return i&&e.setStyle(i),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(xt(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=tt(e,Ue.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?Y0(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function Y0(n){if(typeof n=="function")return n;let e;return Array.isArray(n)?e=n:(Ve(typeof n.getZIndex=="function",41),e=[n]),function(){return e}}var sn=jc,Mt={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class zc{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=hi(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new zc({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return Ge()}getImage(e){return Ge()}getHitDetectionImage(){return Ge()}getPixelRatio(e){return 1}getImageState(){return Ge()}getImageSize(){return Ge()}getOrigin(){return Ge()}getSize(){return Ge()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=hi(e)}listenImageChange(e){Ge()}load(){Ge()}unlistenImageChange(e){Ge()}}var Df=zc;function ji(n){return Array.isArray(n)?sf(n):n}class Uc extends Df{constructor(e){const t=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:1,rotateWithView:t,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius_=e.radius!==void 0?e.radius:e.radius1,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){const e=this.getScale(),t=new Uc({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_;if(!e)return null;const t=this.getDisplacement(),i=this.getScaleArray();return[e[0]/2-t[0]/i[0],e[1]/2+t[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(e){let t=this.canvas_[e];if(!t){const i=this.renderOptions_,r=ni(i.size*e,i.size*e);this.draw_(i,r,e),t=r.canvas,this.canvas_[e]=t}return t}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return Mt.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,i){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let r=this.radius_,s=this.radius2_===void 0?r:this.radius2_;if(r<s){const L=r;r=s,s=L}const o=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/o,l=s*Math.sin(a),c=Math.sqrt(s*s-l*l),u=r-c,d=Math.sqrt(l*l+u*u),f=d/l;if(e==="miter"&&f<=i)return f*t;const _=t/2/f,p=t/2*(u/d),y=Math.sqrt((r+_)*(r+_)+p*p)-r;if(this.radius2_===void 0||e==="bevel")return y*2;const v=r*Math.sin(a),A=Math.sqrt(r*r-v*v),x=s-A,M=Math.sqrt(v*v+x*x)/v;if(M<=i){const L=M*t/2-s-r;return 2*Math.max(y,L)}return y*2}createRenderOptions(){let e=Hr,t=0,i=null,r=0,s,o=0;this.stroke_&&(s=this.stroke_.getColor(),s===null&&(s=Ts),s=ji(s),o=this.stroke_.getWidth(),o===void 0&&(o=Os),i=this.stroke_.getLineDash(),r=this.stroke_.getLineDashOffset(),e=this.stroke_.getLineJoin(),e===void 0&&(e=Hr),t=this.stroke_.getMiterLimit(),t===void 0&&(t=Rs));const a=this.calculateLineJoinSize_(e,o,t),l=Math.max(this.radius_,this.radius2_||0),c=Math.ceil(2*l+a);return{strokeStyle:s,strokeWidth:o,size:c,lineDash:i,lineDashOffset:r,lineJoin:e,miterLimit:t}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.canvas_={},this.size_=[e,e]}draw_(e,t,i){if(t.scale(i,i),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let r=this.fill_.getColor();r===null&&(r=rn),t.fillStyle=ji(r),t.fill()}this.stroke_&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){if(this.fill_){let t=this.fill_.getColor(),i=0;if(typeof t=="string"&&(t=No(t)),t===null?i=1:Array.isArray(t)&&(i=t.length===4?t[3]:1),i===0){const r=ni(e.size,e.size);this.hitDetectionCanvas_=r.canvas,this.drawHitDetectionCanvas_(e,r)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(e){let t=this.points_;const i=this.radius_;if(t===1/0)e.arc(0,0,i,0,2*Math.PI);else{const r=this.radius2_===void 0?i:this.radius2_;this.radius2_!==void 0&&(t*=2);const s=this.angle_-Math.PI/2,o=2*Math.PI/t;for(let a=0;a<t;a++){const l=s+a*o,c=a%2===0?i:r;e.lineTo(c*Math.cos(l),c*Math.sin(l))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=rn,t.fill(),this.stroke_&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}}var kf=Uc;class Wc extends kf{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new Wc({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius_=e,this.render()}}var Kt=Wc;class Yc{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null}clone(){const e=this.getColor();return new Yc({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){this.color_=e}}var Gt=Yc;function Nf(n,e,t){const i=n;let r=!0,s=!1,o=!1;const a=[ko(i,Ue.LOAD,function(){o=!0,s||e()})];return i.src&&hy?(s=!0,i.decode().then(function(){r&&e()}).catch(function(l){r&&(o?e():t())})):a.push(ko(i,Ue.ERROR,t)),function(){r=!1,a.forEach(xt)}}let hs=null;class X0 extends sa{constructor(e,t,i,r,s,o){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=r,this.canvas_={},this.color_=o,this.unlisten_=null,this.imageState_=s,this.size_=i,this.src_=t,this.tainted_}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===Mt.LOADED){hs||(hs=ni(1,1,void 0,{willReadFrequently:!0})),hs.drawImage(this.image_,0,0);try{hs.getImageData(0,0,1,1),this.tainted_=!1}catch{hs=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(Ue.CHANGE)}handleImageError_(){this.imageState_=Mt.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=Mt.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],i=ni(e,t);i.fillRect(0,0,e,t),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===Mt.IDLE){this.image_||this.initializeImage_(),this.imageState_=Mt.LOADING;try{this.image_.src=this.src_}catch{this.handleImageError_()}this.unlisten_=Nf(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==Mt.LOADED)return;const t=this.image_,i=document.createElement("canvas");i.width=Math.ceil(t.width*e),i.height=Math.ceil(t.height*e);const r=i.getContext("2d");r.scale(e,e),r.drawImage(t,0,0),r.globalCompositeOperation="multiply",r.fillStyle=rf(this.color_),r.fillRect(0,0,i.width/e,i.height/e),r.globalCompositeOperation="destination-in",r.drawImage(t,0,0),this.canvas_[e]=i}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function H0(n,e,t,i,r,s){let o=Bo.get(e,i,s);return o||(o=new X0(n,e,t,i,r,s),Bo.set(e,i,s,o)),o}class Xc extends Df{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,i=e.rotation!==void 0?e.rotation:0,r=e.scale!==void 0?e.scale:1,s=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:i,scale:r,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:s,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const o=e.img!==void 0?e.img:null;this.imgSize_=e.imgSize;let a=e.src;Ve(!(a!==void 0&&o),4),Ve(!o||o&&this.imgSize_,5),(a===void 0||a.length===0)&&o&&(a=o.src||ct(o)),Ve(a!==void 0&&a.length>0,6),Ve(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),69);const l=e.src!==void 0?Mt.IDLE:Mt.LOADED;if(this.color_=e.color!==void 0?No(e.color):null,this.iconImage_=H0(o,a,this.imgSize_!==void 0?this.imgSize_:null,this.crossOrigin_,l,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.width_=e.width,this.height_=e.height,this.width_!==void 0||this.height_!==void 0){const c=this.getImage(1),u=()=>{this.updateScaleFromWidthAndHeight(this.width_,this.height_)};c.width>0?this.updateScaleFromWidthAndHeight(this.width_,this.height_):c.addEventListener("load",u)}}clone(){let e=this.getScale();return e=Array.isArray(e)?e.slice():e,(this.width_!==void 0||this.height_!==void 0)&&(e=void 0),new Xc({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode(),width:this.width_,height:this.height_})}updateScaleFromWidthAndHeight(e,t){const i=this.getImage(1);e!==void 0&&t!==void 0?super.setScale([e/i.width,t/i.height]):e!==void 0?super.setScale([e/i.width,e/i.width]):t!==void 0?super.setScale([t/i.height,t/i.height]):super.setScale([1,1])}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const r=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!r)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=r[0]),this.anchorYUnits_=="fraction"&&(e[1]*=r[1])}if(this.anchorOrigin_!="top-left"){if(!r)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+r[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+r[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),i=this.getScaleArray();return[e[0]-t[0]/i[0],e[1]+t[1]/i[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),i=this.iconImage_.getSize();if(!t||!i)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=i[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=i[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){return this.width_}getHeight(){return this.height_}setWidth(e){this.width_=e,this.updateScaleFromWidthAndHeight(e,this.height_)}setHeight(e){this.height_=e,this.updateScaleFromWidthAndHeight(this.width_,e)}setScale(e){super.setScale(e);const t=this.getImage(1);if(t){const i=Array.isArray(e)?e[0]:e;i!==void 0&&(this.width_=i*t.width);const r=Array.isArray(e)?e[1]:e;r!==void 0&&(this.height_=r*t.height)}}listenImageChange(e){this.iconImage_.addEventListener(Ue.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(Ue.CHANGE,e)}}var Bf=Xc;class Hc{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new Hc({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}var ii=Hc;class va{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=Mu,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new va({geometry:e,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=Mu,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function Q0(n){let e;if(typeof n=="function")e=n;else{let t;Array.isArray(n)?t=n:(Ve(typeof n.getZIndex=="function",41),t=[n]),e=function(){return t}}return e}let dl=null;function V0(n,e){if(!dl){const t=new Gt({color:"rgba(255,255,255,0.4)"}),i=new ii({color:"#3399CC",width:1.25});dl=[new va({image:new Kt({fill:t,stroke:i,radius:5}),fill:t,stroke:i})]}return dl}function Mu(n){return n.getGeometry()}var Rt=va;const K0="#333";class Qc{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=hi(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new Gt({color:K0}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding}clone(){const e=this.getScale();return new Qc({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=hi(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}var $0=Qc;class Z0{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const i=this.entries_[e];return Ve(i!==void 0,15),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(e){const t=this.entries_[e];return Ve(t!==void 0,15),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.key_;return e}getValues(){const e=new Array(this.count_);let t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){if(!!this.containsKey(e))return this.entries_[e].value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){Ve(!(e in this.entries_),16);const i={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[e]=i,++this.count_}setSize(e){this.highWaterMark=e}}var q0=Z0;class J0 extends sa{constructor(e,t,i){super(),i=i||{},this.tileCoord=e,this.state=t,this.interimTile=null,this.key="",this.transition_=i.transition===void 0?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(Ue.CHANGE)}release(){this.state===De.ERROR&&this.setState(De.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let e=this.interimTile;do{if(e.getState()==De.LOADED)return this.transition_=0,e;e=e.interimTile}while(e);return this}refreshInterimChain(){if(!this.interimTile)return;let e=this.interimTile,t=this;do{if(e.getState()==De.LOADED){e.interimTile=null;break}else e.getState()==De.LOADING?t=e:e.getState()==De.IDLE?t.interimTile=e.interimTile:t=e;e=t.interimTile}while(e)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==De.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}load(){Ge()}getAlpha(e,t){if(!this.transition_)return 1;let i=this.transitionStarts_[e];if(!i)i=t,this.transitionStarts_[e]=i;else if(i===-1)return 1;const r=t-i+1e3/60;return r>=this.transition_?1:ff(r/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}}var Gf=J0;class ew extends Gf{constructor(e,t,i,r,s,o){super(e,t,o),this.crossOrigin_=r,this.src_=i,this.key=i,this.image_=new Image,r!==null&&(this.image_.crossOrigin=r),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(e){this.image_=e,this.state=De.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=De.ERROR,this.unlistenImage_(),this.image_=tw(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=De.LOADED:this.state=De.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==De.ERROR&&(this.state=De.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==De.IDLE&&(this.state=De.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=Nf(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function tw(){const n=ni(1,1);return n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1),n.canvas}var jf=ew;const iw=.5,nw=10,Pu=.25;class rw{constructor(e,t,i,r,s,o){this.sourceProj_=e,this.targetProj_=t;let a={};const l=Uo(this.targetProj_,this.sourceProj_);this.transformInv_=function(A){const x=A[0]+"/"+A[1];return a[x]||(a[x]=l(A)),a[x]},this.maxSourceExtent_=r,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&At(r)==At(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?At(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?At(this.targetProj_.getExtent()):null;const c=rr(i),u=ha(i),d=ca(i),f=la(i),_=this.transformInv_(c),p=this.transformInv_(u),m=this.transformInv_(d),y=this.transformInv_(f),v=nw+(o?Math.max(0,Math.ceil(Math.log2(Fl(i)/(o*o*256*256)))):0);if(this.addQuad_(c,u,d,f,_,p,m,y,v),this.wrapsXInSource_){let A=1/0;this.triangles_.forEach(function(x,E,M){A=Math.min(A,x.source[0][0],x.source[1][0],x.source[2][0])}),this.triangles_.forEach(x=>{if(Math.max(x.source[0][0],x.source[1][0],x.source[2][0])-A>this.sourceWorldWidth_/2){const E=[[x.source[0][0],x.source[0][1]],[x.source[1][0],x.source[1][1]],[x.source[2][0],x.source[2][1]]];E[0][0]-A>this.sourceWorldWidth_/2&&(E[0][0]-=this.sourceWorldWidth_),E[1][0]-A>this.sourceWorldWidth_/2&&(E[1][0]-=this.sourceWorldWidth_),E[2][0]-A>this.sourceWorldWidth_/2&&(E[2][0]-=this.sourceWorldWidth_);const M=Math.min(E[0][0],E[1][0],E[2][0]);Math.max(E[0][0],E[1][0],E[2][0])-M<this.sourceWorldWidth_/2&&(x.source=E)}})}a={}}addTriangle_(e,t,i,r,s,o){this.triangles_.push({source:[r,s,o],target:[e,t,i]})}addQuad_(e,t,i,r,s,o,a,l,c){const u=lu([s,o,a,l]),d=this.sourceWorldWidth_?At(u)/this.sourceWorldWidth_:null,f=this.sourceWorldWidth_,_=this.sourceProj_.canWrapX()&&d>.5&&d<1;let p=!1;if(c>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const y=lu([e,t,i,r]);p=At(y)/this.targetWorldWidth_>Pu||p}!_&&this.sourceProj_.isGlobal()&&d&&(p=d>Pu||p)}if(!p&&this.maxSourceExtent_&&isFinite(u[0])&&isFinite(u[1])&&isFinite(u[2])&&isFinite(u[3])&&!ti(u,this.maxSourceExtent_))return;let m=0;if(!p&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(l[0])||!isFinite(l[1]))){if(c>0)p=!0;else if(m=(!isFinite(s[0])||!isFinite(s[1])?8:0)+(!isFinite(o[0])||!isFinite(o[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),m!=1&&m!=2&&m!=4&&m!=8)return}if(c>0){if(!p){const y=[(e[0]+i[0])/2,(e[1]+i[1])/2],v=this.transformInv_(y);let A;_?A=(Jn(s[0],f)+Jn(a[0],f))/2-Jn(v[0],f):A=(s[0]+a[0])/2-v[0];const x=(s[1]+a[1])/2-v[1];p=A*A+x*x>this.errorThresholdSquared_}if(p){if(Math.abs(e[0]-i[0])<=Math.abs(e[1]-i[1])){const y=[(t[0]+i[0])/2,(t[1]+i[1])/2],v=this.transformInv_(y),A=[(r[0]+e[0])/2,(r[1]+e[1])/2],x=this.transformInv_(A);this.addQuad_(e,t,y,A,s,o,v,x,c-1),this.addQuad_(A,y,i,r,x,v,a,l,c-1)}else{const y=[(e[0]+t[0])/2,(e[1]+t[1])/2],v=this.transformInv_(y),A=[(i[0]+r[0])/2,(i[1]+r[1])/2],x=this.transformInv_(A);this.addQuad_(e,y,A,r,s,v,x,l,c-1),this.addQuad_(y,t,i,A,v,o,a,x,c-1)}return}}if(_){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(m&11)==0&&this.addTriangle_(e,i,r,s,a,l),(m&14)==0&&this.addTriangle_(e,i,t,s,a,o),m&&((m&13)==0&&this.addTriangle_(t,r,e,o,l,s),(m&7)==0&&this.addTriangle_(t,r,i,o,l,a))}calculateSourceExtent(){const e=pi();return this.triangles_.forEach(function(t,i,r){const s=t.source;_s(e,s[0]),_s(e,s[1]),_s(e,s[2])}),e}getTriangles(){return this.triangles_}}var sw=rw;let fl;const jr=[];function Fu(n,e,t,i,r){n.beginPath(),n.moveTo(0,0),n.lineTo(e,t),n.lineTo(i,r),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(e,i)+1,Math.max(t,r)),n.restore()}function gl(n,e){return Math.abs(n[e*4]-210)>2||Math.abs(n[e*4+3]-.75*255)>2}function ow(){if(fl===void 0){const n=ni(6,6,jr);n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",Fu(n,4,5,4,0),Fu(n,4,5,0,5);const e=n.getImageData(0,0,3,3).data;fl=gl(e,0)||gl(e,4)||gl(e,8),pa(n),jr.push(n.canvas)}return fl}function Du(n,e,t,i){const r=xc(t,e,n);let s=zo(e,i,t);const o=e.getMetersPerUnit();o!==void 0&&(s*=o);const a=n.getMetersPerUnit();a!==void 0&&(s/=a);const l=n.getExtent();if(!l||aa(l,r)){const c=zo(n,s,r)/s;isFinite(c)&&c>0&&(s/=c)}return s}function aw(n,e,t,i){const r=ir(t);let s=Du(n,e,r,i);return(!isFinite(s)||s<=0)&&tf(t,function(o){return s=Du(n,e,o,i),isFinite(s)&&s>0}),s}function lw(n,e,t,i,r,s,o,a,l,c,u,d){const f=ni(Math.round(t*n),Math.round(t*e),jr);if(d||(f.imageSmoothingEnabled=!1),l.length===0)return f.canvas;f.scale(t,t);function _(E){return Math.round(E*t)/t}f.globalCompositeOperation="lighter";const p=pi();l.forEach(function(E,M,L){Jd(p,E.extent)});const m=At(p),y=Wi(p),v=ni(Math.round(t*m/i),Math.round(t*y/i),jr);d||(v.imageSmoothingEnabled=!1);const A=t/i;l.forEach(function(E,M,L){const R=E.extent[0]-p[0],S=-(E.extent[3]-p[3]),B=At(E.extent),U=Wi(E.extent);E.image.width>0&&E.image.height>0&&v.drawImage(E.image,c,c,E.image.width-2*c,E.image.height-2*c,R*A,S*A,B*A,U*A)});const x=rr(o);return a.getTriangles().forEach(function(E,M,L){const R=E.source,S=E.target;let B=R[0][0],U=R[0][1],z=R[1][0],X=R[1][1],V=R[2][0],Ae=R[2][1];const ee=_((S[0][0]-x[0])/s),F=_(-(S[0][1]-x[1])/s),N=_((S[1][0]-x[0])/s),G=_(-(S[1][1]-x[1])/s),K=_((S[2][0]-x[0])/s),H=_(-(S[2][1]-x[1])/s),q=B,D=U;B=0,U=0,z-=q,X-=D,V-=q,Ae-=D;const ce=[[z,X,0,0,N-ee],[V,Ae,0,0,K-ee],[0,0,z,X,G-F],[0,0,V,Ae,H-F]],J=xy(ce);if(!!J){if(f.save(),f.beginPath(),ow()||!d){f.moveTo(N,G);const ne=4,fe=ee-N,Ne=F-G;for(let le=0;le<ne;le++)f.lineTo(N+_((le+1)*fe/ne),G+_(le*Ne/(ne-1))),le!=ne-1&&f.lineTo(N+_((le+1)*fe/ne),G+_((le+1)*Ne/(ne-1)));f.lineTo(K,H)}else f.moveTo(N,G),f.lineTo(ee,F),f.lineTo(K,H);f.clip(),f.transform(J[0],J[2],J[1],J[3],ee,F),f.translate(p[0]-q,p[3]-D),f.scale(i/t,-i/t),f.drawImage(v.canvas,0,0),f.restore()}}),pa(v),jr.push(v.canvas),u&&(f.save(),f.globalCompositeOperation="source-over",f.strokeStyle="black",f.lineWidth=1,a.getTriangles().forEach(function(E,M,L){const R=E.target,S=(R[0][0]-x[0])/s,B=-(R[0][1]-x[1])/s,U=(R[1][0]-x[0])/s,z=-(R[1][1]-x[1])/s,X=(R[2][0]-x[0])/s,V=-(R[2][1]-x[1])/s;f.beginPath(),f.moveTo(U,z),f.lineTo(S,B),f.lineTo(X,V),f.closePath(),f.stroke()}),f.restore()),f.canvas}class cw extends Gf{constructor(e,t,i,r,s,o,a,l,c,u,d,f){super(s,De.IDLE,{interpolate:!!f}),this.renderEdges_=d!==void 0?d:!1,this.pixelRatio_=a,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=r,this.wrappedTileCoord_=o||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const _=r.getTileCoordExtent(this.wrappedTileCoord_),p=this.targetTileGrid_.getExtent();let m=this.sourceTileGrid_.getExtent();const y=p?ys(_,p):_;if(Fl(y)===0){this.state=De.EMPTY;return}const v=e.getExtent();v&&(m?m=ys(m,v):m=v);const A=r.getResolution(this.wrappedTileCoord_[0]),x=aw(e,i,y,A);if(!isFinite(x)||x<=0){this.state=De.EMPTY;return}const E=u!==void 0?u:iw;if(this.triangulation_=new sw(e,i,y,m,x*E,A),this.triangulation_.getTriangles().length===0){this.state=De.EMPTY;return}this.sourceZ_=t.getZForResolution(x);let M=this.triangulation_.calculateSourceExtent();if(m&&(e.canWrapX()?(M[1]=Ot(M[1],m[1],m[3]),M[3]=Ot(M[3],m[1],m[3])):M=ys(M,m)),!Fl(M))this.state=De.EMPTY;else{const L=t.getTileRangeForExtentAndZ(M,this.sourceZ_);for(let R=L.minX;R<=L.maxX;R++)for(let S=L.minY;S<=L.maxY;S++){const B=c(this.sourceZ_,R,S,a);B&&this.sourceTiles_.push(B)}this.sourceTiles_.length===0&&(this.state=De.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{t&&t.getState()==De.LOADED&&e.push({extent:this.sourceTileGrid_.getTileCoordExtent(t.tileCoord),image:t.getImage()})}),this.sourceTiles_.length=0,e.length===0)this.state=De.ERROR;else{const t=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(t),r=typeof i=="number"?i:i[0],s=typeof i=="number"?i:i[1],o=this.targetTileGrid_.getResolution(t),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=lw(r,s,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=De.LOADED}this.changed()}load(){if(this.state==De.IDLE){this.state=De.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(t=>{const i=t.getState();if(i==De.IDLE||i==De.LOADING){e++;const r=tt(t,Ue.CHANGE,function(s){const o=t.getState();(o==De.LOADED||o==De.ERROR||o==De.EMPTY)&&(xt(r),e--,e===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(r)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(t,i,r){t.getState()==De.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(xt),this.sourcesListenerKeys_=null}release(){this.canvas_&&(pa(this.canvas_.getContext("2d")),jr.push(this.canvas_),this.canvas_=null),super.release()}}var Ql=cw;function ku(n,e,t,i){return i!==void 0?(i[0]=n,i[1]=e,i[2]=t,i):[n,e,t]}function wa(n,e,t){return n+"/"+e+"/"+t}function zf(n){return wa(n[0],n[1],n[2])}function hw(n){return n.split("/").map(Number)}function uw(n){return(n[1]<<n[0])+n[2]}function dw(n,e){const t=n[0],i=n[1],r=n[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const s=e.getFullTileRange(t);return s?s.containsXY(i,r):!0}class fw extends q0{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(e){for(;this.canExpireCache()&&!(this.peekLast().getKey()in e);)this.pop().release()}pruneExceptNewestZ(){if(this.getCount()===0)return;const e=this.peekFirstKey(),i=hw(e)[0];this.forEach(r=>{r.tileCoord[0]!==i&&(this.remove(zf(r.tileCoord)),r.release())})}}var Uf=fw,pl={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class gw extends Ii{constructor(e){super(),this.projection=St(e.projection),this.attributions_=Nu(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible!==void 0?e.attributionsCollapsible:!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(i,r){t.viewResolver=i,t.viewRejector=r})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=Nu(e),this.changed()}setState(e){this.state_=e,this.changed()}}function Nu(n){return n?Array.isArray(n)?function(e){return n}:typeof n=="function"?n:function(e){return[n]}:null}var Wf=gw;class Yf{constructor(e,t,i,r){this.minX=e,this.maxX=t,this.minY=i,this.maxY=r}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function Er(n,e,t,i,r){return r!==void 0?(r.minX=n,r.maxX=e,r.minY=t,r.maxY=i,r):new Yf(n,e,t,i)}var Xf=Yf;const br=[0,0,0],gn=5;class pw{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,Ve(Z_(this.resolutions_,function(r,s){return s-r},!0),17);let t;if(!e.origins){for(let r=0,s=this.resolutions_.length-1;r<s;++r)if(!t)t=this.resolutions_[r]/this.resolutions_[r+1];else if(this.resolutions_[r]/this.resolutions_[r+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,Ve(this.origins_.length==this.resolutions_.length,20));const i=e.extent;i!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=rr(i)),Ve(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,Ve(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:_c,Ve(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=i!==void 0?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map(function(r,s){const o=new Xf(Math.min(0,r[0]),Math.max(r[0]-1,-1),Math.min(0,r[1]),Math.max(r[1]-1,-1));if(i){const a=this.getTileRangeForExtentAndZ(i,s);o.minX=Math.max(a.minX,o.minX),o.maxX=Math.min(a.maxX,o.maxX),o.minY=Math.max(a.minY,o.minY),o.maxY=Math.min(a.maxY,o.maxY)}return o},this):i&&this.calculateTileRanges_(i)}forEachTileCoord(e,t,i){const r=this.getTileRangeForExtentAndZ(e,t);for(let s=r.minX,o=r.maxX;s<=o;++s)for(let a=r.minY,l=r.maxY;a<=l;++a)i([t,s,a])}forEachTileCoordParentTileRange(e,t,i,r){let s,o,a,l=null,c=e[0]-1;for(this.zoomFactor_===2?(o=e[1],a=e[2]):l=this.getTileCoordExtent(e,r);c>=this.minZoom;){if(this.zoomFactor_===2?(o=Math.floor(o/2),a=Math.floor(a/2),s=Er(o,o,a,a,i)):s=this.getTileRangeForExtentAndZ(l,c,i),t(c,s))return!0;--c}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,i){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const s=e[1]*2,o=e[2]*2;return Er(s,s+1,o,o+1,t)}const r=this.getTileCoordExtent(e,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,i){if(t>this.maxZoom||t<this.minZoom)return null;const r=e[0],s=e[1],o=e[2];if(t===r)return Er(s,o,s,o,i);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,t-r),c=Math.floor(s*l),u=Math.floor(o*l);if(t<r)return Er(c,c,u,u,i);const d=Math.floor(l*(s+1))-1,f=Math.floor(l*(o+1))-1;return Er(c,d,u,f,i)}const a=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,t,i)}getTileRangeExtent(e,t,i){const r=this.getOrigin(e),s=this.getResolution(e),o=hi(this.getTileSize(e),this.tmpSize_),a=r[0]+t.minX*o[0]*s,l=r[0]+(t.maxX+1)*o[0]*s,c=r[1]+t.minY*o[1]*s,u=r[1]+(t.maxY+1)*o[1]*s;return an(a,c,l,u,i)}getTileRangeForExtentAndZ(e,t,i){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,br);const r=br[1],s=br[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,br);const o=br[1],a=br[2];return Er(r,o,s,a,i)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),i=this.getResolution(e[0]),r=hi(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*r[0]*i,t[1]-(e[2]+.5)*r[1]*i]}getTileCoordExtent(e,t){const i=this.getOrigin(e[0]),r=this.getResolution(e[0]),s=hi(this.getTileSize(e[0]),this.tmpSize_),o=i[0]+e[1]*s[0]*r,a=i[1]-(e[2]+1)*s[1]*r,l=o+s[0]*r,c=a+s[1]*r;return an(o,a,l,c,t)}getTileCoordForCoordAndResolution(e,t,i){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,i)}getTileCoordForXYAndResolution_(e,t,i,r,s){const o=this.getZForResolution(i),a=i/this.getResolution(o),l=this.getOrigin(o),c=hi(this.getTileSize(o),this.tmpSize_);let u=a*(e-l[0])/i/c[0],d=a*(l[1]-t)/i/c[1];return r?(u=Ao(u,gn)-1,d=Ao(d,gn)-1):(u=wo(u,gn),d=wo(d,gn)),ku(o,u,d,s)}getTileCoordForXYAndZ_(e,t,i,r,s){const o=this.getOrigin(i),a=this.getResolution(i),l=hi(this.getTileSize(i),this.tmpSize_);let c=(e-o[0])/a/l[0],u=(o[1]-t)/a/l[1];return r?(c=Ao(c,gn)-1,u=Ao(u,gn)-1):(c=wo(c,gn),u=wo(u,gn)),ku(i,c,u,s)}getTileCoordForCoordAndZ(e,t,i){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,i)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const i=hc(this.resolutions_,e,t||0);return Ot(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return Af(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,i=new Array(t);for(let r=this.minZoom;r<t;++r)i[r]=this.getTileRangeForExtentAndZ(e,r);this.fullTileRanges_=i}}var Hf=pw;function Qf(n){let e=n.getDefaultTileGrid();return e||(e=yw(n),n.setDefaultTileGrid(e)),e}function mw(n,e,t){const i=e[0],r=n.getTileCoordCenter(e),s=Vc(t);if(!aa(s,r)){const o=At(s),a=Math.ceil((s[0]-r[0])/o);return r[0]+=o*a,n.getTileCoordForCoordAndZ(r,i)}return e}function _w(n,e,t,i){i=i!==void 0?i:"top-left";const r=Vf(n,e,t);return new Hf({extent:n,origin:_y(n,i),resolutions:r,tileSize:t})}function Aa(n){const e=n||{},t=e.extent||St("EPSG:3857").getExtent(),i={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:Vf(t,e.maxZoom,e.tileSize,e.maxResolution)};return new Hf(i)}function Vf(n,e,t,i){e=e!==void 0?e:Ly,t=hi(t!==void 0?t:_c);const r=Wi(n),s=At(n);i=i>0?i:Math.max(s/t[0],r/t[1]);const o=e+1,a=new Array(o);for(let l=0;l<o;++l)a[l]=i/Math.pow(2,l);return a}function yw(n,e,t,i){const r=Vc(n);return _w(r,e,t,i)}function Vc(n){n=St(n);let e=n.getExtent();if(!e){const t=180*Yr.degrees/n.getMetersPerUnit();e=an(-t,-t,t,t)}return e}class vw extends Wf{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.opaque_=e.opaque!==void 0?e.opaque:!1,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&hi(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tileCache=new Uf(e.cacheSize||0),this.tmpSize=[0,0],this.key_=e.key||"",this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(e,t){const i=this.getTileCacheForProjection(e);i&&i.expireCache(t)}forEachLoadedTile(e,t,i,r){const s=this.getTileCacheForProjection(e);if(!s)return!1;let o=!0,a,l,c;for(let u=i.minX;u<=i.maxX;++u)for(let d=i.minY;d<=i.maxY;++d)l=wa(t,u,d),c=!1,s.containsKey(l)&&(a=s.get(l),c=a.getState()===De.LOADED,c&&(c=r(a)!==!1)),c||(o=!1);return o}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getOpaque(e){return this.opaque_}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,i,r,s){return Ge()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:Qf(e)}getTileCacheForProjection(e){const t=this.getProjection();return Ve(t===null||Hn(t,e),68),this.tileCache}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,i){const r=this.getTileGridForProjection(i),s=this.getTilePixelRatio(t),o=hi(r.getTileSize(e),this.tmpSize);return s==1?o:z0(o,s,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){t=t!==void 0?t:this.getProjection();const i=this.getTileGridForProjection(t);return this.getWrapX()&&t.isGlobal()&&(e=mw(i,e,t)),dw(e,i)?e:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(e,t){const i=this.getTileCacheForProjection(t);e>i.highWaterMark&&(i.highWaterMark=e)}useTile(e,t,i,r){}}class ww extends Xi{constructor(e,t){super(e),this.tile=t}}var Aw=vw;function xw(n,e){const t=/\{z\}/g,i=/\{x\}/g,r=/\{y\}/g,s=/\{-y\}/g;return function(o,a,l){if(!!o)return n.replace(t,o[0].toString()).replace(i,o[1].toString()).replace(r,o[2].toString()).replace(s,function(){const c=o[0],u=e.getFullTileRange(c);return Ve(u,55),(u.getHeight()-o[2]-1).toString()})}}function Ew(n,e){const t=n.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=xw(n[r],e);return bw(i)}function bw(n){return n.length===1?n[0]:function(e,t,i){if(!e)return;const r=uw(e),s=Jn(r,n.length);return n[s](e,t,i)}}function Cw(n){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(n);if(t){const i=t[1].charCodeAt(0),r=t[2].charCodeAt(0);let s;for(s=i;s<=r;++s)e.push(n.replace(t[0],String.fromCharCode(s)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(n),t){const i=parseInt(t[2],10);for(let r=parseInt(t[1],10);r<=i;r++)e.push(n.replace(t[0],r.toString()));return e}return e.push(n),e}class Kc extends Aw{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===Kc.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,i=ct(t),r=t.getState();let s;r==De.LOADING?(this.tileLoadingKeys_[i]=!0,s=pl.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],s=r==De.ERROR?pl.TILELOADERROR:r==De.LOADED?pl.TILELOADEND:void 0),s!=null&&this.dispatchEvent(new ww(s,t))}setTileLoadFunction(e){this.tileCache.clear(),this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,this.tileCache.pruneExceptNewestZ(),typeof t!="undefined"?this.setKey(t):this.changed()}setUrl(e){const t=Cw(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(Ew(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,i){}useTile(e,t,i){const r=wa(e,t,i);this.tileCache.containsKey(r)&&this.tileCache.get(r)}}var Iw=Kc;class Sw extends Iw{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:Rw,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:jf,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1}expireCache(e,t){const i=this.getTileCacheForProjection(e);this.tileCache.expireCache(this.tileCache==i?t:{});for(const r in this.tileCacheForProjection){const s=this.tileCacheForProjection[r];s.expireCache(s==i?t:{})}}getGutterForProjection(e){return this.getProjection()&&e&&!Hn(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getOpaque(e){return this.getProjection()&&e&&!Hn(this.getProjection(),e)?!1:super.getOpaque(e)}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||Hn(t,e)))return this.tileGrid;const i=ct(e);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=Qf(e)),this.tileGridForProjection[i]}getTileCacheForProjection(e){const t=this.getProjection();if(!t||Hn(t,e))return this.tileCache;const i=ct(e);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new Uf(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]}createTile_(e,t,i,r,s,o){const a=[e,t,i],l=this.getTileCoordForTileUrlFunction(a,s),c=l?this.tileUrlFunction(l,r,s):void 0,u=new this.tileClass(a,c!==void 0?De.IDLE:De.EMPTY,c!==void 0?c:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return u.key=o,u.addEventListener(Ue.CHANGE,this.handleTileChange.bind(this)),u}getTile(e,t,i,r,s){const o=this.getProjection();if(!o||!s||Hn(o,s))return this.getTileInternal(e,t,i,r,o||s);const a=this.getTileCacheForProjection(s),l=[e,t,i];let c;const u=zf(l);a.containsKey(u)&&(c=a.get(u));const d=this.getKey();if(c&&c.key==d)return c;const f=this.getTileGridForProjection(o),_=this.getTileGridForProjection(s),p=this.getTileCoordForTileUrlFunction(l,s),m=new Ql(o,f,s,_,l,p,this.getTilePixelRatio(r),this.getGutter(),(y,v,A,x)=>this.getTileInternal(y,v,A,x,o),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return m.key=d,c?(m.interimTile=c,m.refreshInterimChain(),a.replace(u,m)):a.set(u,m),m}getTileInternal(e,t,i,r,s){let o=null;const a=wa(e,t,i),l=this.getKey();if(!this.tileCache.containsKey(a))o=this.createTile_(e,t,i,r,s,l),this.tileCache.set(a,o);else if(o=this.tileCache.get(a),o.key!=l){const c=o;o=this.createTile_(e,t,i,r,s,l),c.getState()==De.IDLE?o.interimTile=c.interimTile:o.interimTile=c,o.refreshInterimChain(),this.tileCache.replace(a,o)}return o}setRenderReprojectionEdges(e){if(this.renderReprojectionEdges_!=e){this.renderReprojectionEdges_=e;for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear();this.changed()}}setTileGridForProjection(e,t){const i=St(e);if(i){const r=ct(i);r in this.tileGridForProjection||(this.tileGridForProjection[r]=t)}}clear(){super.clear();for(const e in this.tileCacheForProjection)this.tileCacheForProjection[e].clear()}}function Rw(n,e){n.getImage().src=e}var Tw=Sw;class Lw extends Tw{constructor(e){e=e||{};const t=e.projection!==void 0?e.projection:"EPSG:3857",i=e.tileGrid!==void 0?e.tileGrid:Aa({extent:Vc(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,opaque:e.opaque,projection:t,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}}var Tn=Lw;function Ow(n,e,t,i,r){Kf(n,e,t||0,i||n.length-1,r||Mw)}function Kf(n,e,t,i,r){for(;i>t;){if(i-t>600){var s=i-t+1,o=e-t+1,a=Math.log(s),l=.5*Math.exp(2*a/3),c=.5*Math.sqrt(a*l*(s-l)/s)*(o-s/2<0?-1:1),u=Math.max(t,Math.floor(e-o*l/s+c)),d=Math.min(i,Math.floor(e+(s-o)*l/s+c));Kf(n,e,u,d,r)}var f=n[e],_=t,p=i;for(us(n,t,e),r(n[i],f)>0&&us(n,t,i);_<p;){for(us(n,_,p),_++,p--;r(n[_],f)<0;)_++;for(;r(n[p],f)>0;)p--}r(n[t],f)===0?us(n,t,p):(p++,us(n,p,i)),p<=e&&(t=p+1),e<=p&&(i=p-1)}}function us(n,e,t){var i=n[e];n[e]=n[t],n[t]=i}function Mw(n,e){return n<e?-1:n>e?1:0}class $f{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const i=[];if(!So(e,t))return i;const r=this.toBBox,s=[];for(;t;){for(let o=0;o<t.children.length;o++){const a=t.children[o],l=t.leaf?r(a):a;So(e,l)&&(t.leaf?i.push(a):_l(e,l)?this._all(a,i):s.push(a))}t=s.pop()}return i}collides(e){let t=this.data;if(!So(e,t))return!1;const i=[];for(;t;){for(let r=0;r<t.children.length;r++){const s=t.children[r],o=t.leaf?this.toBBox(s):s;if(So(e,o)){if(t.leaf||_l(e,o))return!0;i.push(s)}}t=i.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let i=0;i<e.length;i++)this.insert(e[i]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const i=this.data;this.data=t,t=i}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=Or([]),this}remove(e,t){if(!e)return this;let i=this.data;const r=this.toBBox(e),s=[],o=[];let a,l,c;for(;i||s.length;){if(i||(i=s.pop(),l=s[s.length-1],a=o.pop(),c=!0),i.leaf){const u=Pw(e,i.children,t);if(u!==-1)return i.children.splice(u,1),s.push(i),this._condense(s),this}!c&&!i.leaf&&_l(i,r)?(s.push(i),o.push(a),a=0,l=i,i=i.children[0]):l?(a++,i=l.children[a],c=!1):i=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const i=[];for(;e;)e.leaf?t.push(...e.children):i.push(...e.children),e=i.pop();return t}_build(e,t,i,r){const s=i-t+1;let o=this._maxEntries,a;if(s<=o)return a=Or(e.slice(t,i+1)),Cr(a,this.toBBox),a;r||(r=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,r-1))),a=Or([]),a.leaf=!1,a.height=r;const l=Math.ceil(s/o),c=l*Math.ceil(Math.sqrt(o));Bu(e,t,i,c,this.compareMinX);for(let u=t;u<=i;u+=c){const d=Math.min(u+c-1,i);Bu(e,u,d,l,this.compareMinY);for(let f=u;f<=d;f+=l){const _=Math.min(f+l-1,d);a.children.push(this._build(e,f,_,r-1))}}return Cr(a,this.toBBox),a}_chooseSubtree(e,t,i,r){for(;r.push(t),!(t.leaf||r.length-1===i);){let s=1/0,o=1/0,a;for(let l=0;l<t.children.length;l++){const c=t.children[l],u=ml(c),d=kw(e,c)-u;d<o?(o=d,s=u<s?u:s,a=c):d===o&&u<s&&(s=u,a=c)}t=a||t.children[0]}return t}_insert(e,t,i){const r=i?e:this.toBBox(e),s=[],o=this._chooseSubtree(r,this.data,t,s);for(o.children.push(e),gs(o,r);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(r,s,t)}_split(e,t){const i=e[t],r=i.children.length,s=this._minEntries;this._chooseSplitAxis(i,s,r);const o=this._chooseSplitIndex(i,s,r),a=Or(i.children.splice(o,i.children.length-o));a.height=i.height,a.leaf=i.leaf,Cr(i,this.toBBox),Cr(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(i,a)}_splitRoot(e,t){this.data=Or([e,t]),this.data.height=e.height+1,this.data.leaf=!1,Cr(this.data,this.toBBox)}_chooseSplitIndex(e,t,i){let r,s=1/0,o=1/0;for(let a=t;a<=i-t;a++){const l=fs(e,0,a,this.toBBox),c=fs(e,a,i,this.toBBox),u=Nw(l,c),d=ml(l)+ml(c);u<s?(s=u,r=a,o=d<o?d:o):u===s&&d<o&&(o=d,r=a)}return r||i-t}_chooseSplitAxis(e,t,i){const r=e.leaf?this.compareMinX:Fw,s=e.leaf?this.compareMinY:Dw,o=this._allDistMargin(e,t,i,r),a=this._allDistMargin(e,t,i,s);o<a&&e.children.sort(r)}_allDistMargin(e,t,i,r){e.children.sort(r);const s=this.toBBox,o=fs(e,0,t,s),a=fs(e,i-t,i,s);let l=Io(o)+Io(a);for(let c=t;c<i-t;c++){const u=e.children[c];gs(o,e.leaf?s(u):u),l+=Io(o)}for(let c=i-t-1;c>=t;c--){const u=e.children[c];gs(a,e.leaf?s(u):u),l+=Io(a)}return l}_adjustParentBBoxes(e,t,i){for(let r=i;r>=0;r--)gs(t[r],e)}_condense(e){for(let t=e.length-1,i;t>=0;t--)e[t].children.length===0?t>0?(i=e[t-1].children,i.splice(i.indexOf(e[t]),1)):this.clear():Cr(e[t],this.toBBox)}}function Pw(n,e,t){if(!t)return e.indexOf(n);for(let i=0;i<e.length;i++)if(t(n,e[i]))return i;return-1}function Cr(n,e){fs(n,0,n.children.length,e,n)}function fs(n,e,t,i,r){r||(r=Or(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let s=e;s<t;s++){const o=n.children[s];gs(r,n.leaf?i(o):o)}return r}function gs(n,e){return n.minX=Math.min(n.minX,e.minX),n.minY=Math.min(n.minY,e.minY),n.maxX=Math.max(n.maxX,e.maxX),n.maxY=Math.max(n.maxY,e.maxY),n}function Fw(n,e){return n.minX-e.minX}function Dw(n,e){return n.minY-e.minY}function ml(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function Io(n){return n.maxX-n.minX+(n.maxY-n.minY)}function kw(n,e){return(Math.max(e.maxX,n.maxX)-Math.min(e.minX,n.minX))*(Math.max(e.maxY,n.maxY)-Math.min(e.minY,n.minY))}function Nw(n,e){const t=Math.max(n.minX,e.minX),i=Math.max(n.minY,e.minY),r=Math.min(n.maxX,e.maxX),s=Math.min(n.maxY,e.maxY);return Math.max(0,r-t)*Math.max(0,s-i)}function _l(n,e){return n.minX<=e.minX&&n.minY<=e.minY&&e.maxX<=n.maxX&&e.maxY<=n.maxY}function So(n,e){return e.minX<=n.maxX&&e.minY<=n.maxY&&e.maxX>=n.minX&&e.maxY>=n.minY}function Or(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Bu(n,e,t,i,r){const s=[e,t];for(;s.length;){if(t=s.pop(),e=s.pop(),t-e<=i)continue;const o=e+Math.ceil((t-e)/i/2)*i;Ow(n,o,e,t,r),s.push(e,o,o,t)}}class Bw{constructor(e){this.rbush_=new $f(e),this.items_={}}insert(e,t){const i={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(i),this.items_[ct(t)]=i}load(e,t){const i=new Array(t.length);for(let r=0,s=t.length;r<s;r++){const o=e[r],a=t[r],l={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};i[r]=l,this.items_[ct(a)]=l}this.rbush_.load(i)}remove(e){const t=ct(e),i=this.items_[t];return delete this.items_[t],this.rbush_.remove(i)!==null}update(e,t){const i=this.items_[ct(t)],r=[i.minX,i.minY,i.maxX,i.maxY];bs(r,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(r){return r.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let i;for(let r=0,s=e.length;r<s;r++)if(i=t(e[r]),i)return i;return i}isEmpty(){return Wr(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return an(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}var Gu=Bw,bi={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function Gw(n,e){return[[-1/0,-1/0,1/0,1/0]]}function $c(n){return function(e,t,i){const r=n.getZForResolution(Ky(t)),s=n.getTileRangeForExtentAndZ(An(e),r),o=[],a=[r,0,0];for(a[1]=s.minX;a[1]<=s.maxX;++a[1])for(a[2]=s.minY;a[2]<=s.maxY;++a[2])o.push(Ec(n.getTileCoordExtent(a)));return o}}let jw=!1;function zw(n,e,t,i,r,s,o){const a=new XMLHttpRequest;a.open("GET",typeof n=="function"?n(t,i,r):n,!0),e.getType()=="arraybuffer"&&(a.responseType="arraybuffer"),a.withCredentials=jw,a.onload=function(l){if(!a.status||a.status>=200&&a.status<300){const c=e.getType();let u;c=="json"||c=="text"?u=a.responseText:c=="xml"?(u=a.responseXML,u||(u=new DOMParser().parseFromString(a.responseText,"application/xml"))):c=="arraybuffer"&&(u=a.response),u?s(e.readFeatures(u,{extent:t,featureProjection:r}),e.readProjection(u)):o()}else o()},a.onerror=o,a.send()}function ju(n,e){return function(t,i,r,s,o){const a=this;zw(n,e,t,i,r,function(l,c){a.addFeatures(l),s!==void 0&&s(l)},o||Ur)}}class pn extends Xi{constructor(e,t,i){super(e),this.feature=t,this.features=i}}class Uw extends Wf{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=Ur,this.format_=e.format,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(Ve(this.format_,7),this.loader_=ju(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:Gw;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new Gu:null,this.loadedExtentsRtree_=new Gu,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let i,r;Array.isArray(e.features)?r=e.features:e.features&&(i=e.features,r=i.getArray()),!t&&i===void 0&&(i=new Gi(r)),r!==void 0&&this.addFeaturesInternal(r),i!==void 0&&this.bindFeaturesCollection_(i)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=ct(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const i=e.getGeometry();if(i){const r=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(r,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new pn(bi.ADDFEATURE,e))}setupChangeEvents_(e,t){this.featureChangeKeys_[e]=[tt(t,Ue.CHANGE,this.handleFeatureChange_,this),tt(t,zr.PROPERTYCHANGE,this.handleFeatureChange_,this)]}addToIndex_(e,t){let i=!0;const r=t.getId();return r!==void 0&&(r.toString()in this.idIndex_?i=!1:this.idIndex_[r.toString()]=t),i&&(Ve(!(e in this.uidIndex_),30),this.uidIndex_[e]=t),i}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],i=[],r=[];for(let s=0,o=e.length;s<o;s++){const a=e[s],l=ct(a);this.addToIndex_(l,a)&&i.push(a)}for(let s=0,o=i.length;s<o;s++){const a=i[s],l=ct(a);this.setupChangeEvents_(l,a);const c=a.getGeometry();if(c){const u=c.getExtent();t.push(u),r.push(a)}else this.nullGeometryFeatures_[l]=a}if(this.featuresRtree_&&this.featuresRtree_.load(t,r),this.hasListener(bi.ADDFEATURE))for(let s=0,o=i.length;s<o;s++)this.dispatchEvent(new pn(bi.ADDFEATURE,i[s]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(bi.ADDFEATURE,function(i){t||(t=!0,e.push(i.feature),t=!1)}),this.addEventListener(bi.REMOVEFEATURE,function(i){t||(t=!0,e.remove(i.feature),t=!1)}),e.addEventListener(ai.ADD,i=>{t||(t=!0,this.addFeature(i.element),t=!1)}),e.addEventListener(ai.REMOVE,i=>{t||(t=!0,this.removeFeature(i.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach(xt);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const i=r=>{this.removeFeatureInternal(r)};this.featuresRtree_.forEach(i);for(const r in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new pn(bi.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const i=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(i,function(r){if(r.getGeometry().intersectsCoordinate(e))return t(r)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(i){if(i.getGeometry().intersectsExtent(e)){const s=t(i);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),Wr(this.nullGeometryFeatures_)||zi(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(i){t.push(i)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const r=wy(e,t);return[].concat(...r.map(s=>this.featuresRtree_.getInExtent(s)))}else if(this.featuresCollection_)return this.featuresCollection_.getArray().slice(0);return[]}getClosestFeatureToCoordinate(e,t){const i=e[0],r=e[1];let s=null;const o=[NaN,NaN];let a=1/0;const l=[-1/0,-1/0,1/0,1/0];return t=t||Es,this.featuresRtree_.forEachInExtent(l,function(c){if(t(c)){const u=c.getGeometry(),d=a;if(a=u.closestPointXY(i,r,o,a),a<d){s=c;const f=Math.sqrt(a);l[0]=i-f,l[1]=r-f,l[2]=i+f,l[3]=r+f}}}),s}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,i=ct(t),r=t.getGeometry();if(!r)i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[i]=t);else{const o=r.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(o,t)):this.featuresRtree_&&this.featuresRtree_.update(o,t)}const s=t.getId();if(s!==void 0){const o=s.toString();this.idIndex_[o]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[o]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[i]=t;this.changed(),this.dispatchEvent(new pn(bi.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:ct(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Wr(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,i){const r=this.loadedExtentsRtree_,s=this.strategy_(e,t,i);for(let o=0,a=s.length;o<a;++o){const l=s[o];r.forEachInExtent(l,function(u){return kr(u.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new pn(bi.FEATURESLOADSTART)),this.loader_.call(this,l,t,i,u=>{--this.loadingExtentsCount_,this.dispatchEvent(new pn(bi.FEATURESLOADEND,void 0,u))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new pn(bi.FEATURESLOADERROR))}),r.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_;let i;t.forEachInExtent(e,function(r){if(bs(r.extent,e))return i=r,!0}),i&&t.remove(i)}removeFeature(e){if(!e)return;const t=ct(e);t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=ct(e),i=this.featureChangeKeys_[t];if(!i)return;i.forEach(xt),delete this.featureChangeKeys_[t];const r=e.getId();return r!==void 0&&delete this.idIndex_[r.toString()],delete this.uidIndex_[t],this.dispatchEvent(new pn(bi.REMOVEFEATURE,e)),e}removeFromIdIndex_(e){let t=!1;for(const i in this.idIndex_)if(this.idIndex_[i]===e){delete this.idIndex_[i],t=!0;break}return t}setLoader(e){this.loader_=e}setUrl(e){Ve(this.format_,7),this.url_=e,this.setLoader(ju(e,this.format_))}}var Hi=Uw;const Ww='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class Yw extends Tn{constructor(e){e=e||{};let t;e.attributions!==void 0?t=e.attributions:t=[Ww];const i=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",r=e.url!==void 0?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:t,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:i,interpolate:e.interpolate,maxZoom:e.maxZoom!==void 0?e.maxZoom:19,opaque:e.opaque!==void 0?e.opaque:!0,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:r,wrapX:e.wrapX,zDirection:e.zDirection})}}var Xw=Yw;class Hw extends Hd{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.declutterExecutorGroup=null}getFeatures(e){return Ge()}getData(e){return null}prepareFrame(e){return Ge()}renderFrame(e,t){return Ge()}loadedTileCallback(e,t,i){e[t]||(e[t]={}),e[t][i.tileCoord.toString()]=i}createLoadedTileFinder(e,t,i){return(r,s)=>{const o=this.loadedTileCallback.bind(this,i,r);return e.forEachLoadedTile(t,r,s,o)}}forEachFeatureAtCoordinate(e,t,i,r,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){e.target.getState()===Mt.LOADED&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=Mt.LOADED&&t!=Mt.ERROR&&e.addEventListener(Ue.CHANGE,this.boundHandleImageChange_),t==Mt.IDLE&&(e.load(),t=e.getState()),t==Mt.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}}var Qw=Hw;const zu=[];let Mr=null;function Vw(){Mr=ni(1,1,void 0,{willReadFrequently:!0})}class Kw extends Qw{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=Ui(),this.pixelTransform=Ui(),this.inversePixelTransform=Ui(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(e,t,i){Mr||Vw(),Mr.clearRect(0,0,1,1);let r;try{Mr.drawImage(e,t,i,1,1,0,0,1,1),r=Mr.getImageData(0,0,1,1).data}catch{return Mr=null,null}return r}getBackground(e){let i=this.getLayer().getBackground();return typeof i=="function"&&(i=i(e.viewState.resolution)),i||void 0}useContainer(e,t,i){const r=this.getLayer().getClassName();let s,o;if(e&&e.className===r&&(!i||e&&e.style.backgroundColor&&Rn(No(e.style.backgroundColor),No(i)))){const a=e.firstElementChild;a instanceof HTMLCanvasElement&&(o=a.getContext("2d"))}if(o&&o.canvas.style.transform===t?(this.container=e,this.context=o,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){s=document.createElement("div"),s.className=r;let a=s.style;a.position="absolute",a.width="100%",a.height="100%",o=ni();const l=o.canvas;s.appendChild(l),a=l.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=s,this.context=o}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(e,t,i){const r=rr(i),s=ha(i),o=ca(i),a=la(i);Nt(t.coordinateToPixelTransform,r),Nt(t.coordinateToPixelTransform,s),Nt(t.coordinateToPixelTransform,o),Nt(t.coordinateToPixelTransform,a);const l=this.inversePixelTransform;Nt(l,r),Nt(l,s),Nt(l,o),Nt(l,a),e.save(),e.beginPath(),e.moveTo(Math.round(r[0]),Math.round(r[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.clip()}dispatchRenderEvent_(e,t,i){const r=this.getLayer();if(r.hasListener(e)){const s=new Cf(e,this.inversePixelTransform,i,t);r.dispatchEvent(s)}}preRender(e,t){this.frameState=t,this.dispatchRenderEvent_(bn.PRERENDER,e,t)}postRender(e,t){this.dispatchRenderEvent_(bn.POSTRENDER,e,t)}getRenderTransform(e,t,i,r,s,o,a){const l=s/2,c=o/2,u=r/t,d=-u,f=-e[0]+a,_=-e[1];return Sn(this.tempTransform,l,c,u,d,-i,f,_)}disposeInternal(){delete this.frameState,super.disposeInternal()}}var Zf=Kw,Ro={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class $w extends ga{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getPreload(){return this.get(Ro.PRELOAD)}setPreload(e){this.set(Ro.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(Ro.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(Ro.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}var Zw=$w;class qw extends Zf{constructor(e){super(e),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=pi(),this.tmpTileRange_=new Xf(0,0,0,0)}isDrawableTile(e){const t=this.getLayer(),i=e.getState(),r=t.getUseInterimTilesOnError();return i==De.LOADED||i==De.EMPTY||i==De.ERROR&&!r}getTile(e,t,i,r){const s=r.pixelRatio,o=r.viewState.projection,a=this.getLayer();let c=a.getSource().getTile(e,t,i,s,o);return c.getState()==De.ERROR&&a.getUseInterimTilesOnError()&&a.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(c)||(c=c.getInterimTile()),c}getData(e){const t=this.frameState;if(!t)return null;const i=this.getLayer(),r=Nt(t.pixelToCoordinateTransform,e.slice()),s=i.getExtent();if(s&&!aa(s,r))return null;const o=t.pixelRatio,a=t.viewState.projection,l=t.viewState,c=i.getRenderSource(),u=c.getTileGridForProjection(l.projection),d=c.getTilePixelRatio(t.pixelRatio);for(let f=u.getZForResolution(l.resolution);f>=u.getMinZoom();--f){const _=u.getTileCoordForCoordAndZ(r,f),p=c.getTile(f,_[1],_[2],o,a);if(!(p instanceof jf||p instanceof Ql)||p instanceof Ql&&p.getState()===De.EMPTY)return null;if(p.getState()!==De.LOADED)continue;const m=u.getOrigin(f),y=hi(u.getTileSize(f)),v=u.getResolution(f),A=Math.floor(d*((r[0]-m[0])/v-_[1]*y[0])),x=Math.floor(d*((m[1]-r[1])/v-_[2]*y[1])),E=Math.round(d*c.getGutterForProjection(l.projection));return this.getImageData(p.getImage(),A+E,x+E)}return null}loadedTileCallback(e,t,i){return this.isDrawableTile(i)?super.loadedTileCallback(e,t,i):!1}prepareFrame(e){return!!this.getLayer().getSource()}renderFrame(e,t){const i=e.layerStatesArray[e.layerIndex],r=e.viewState,s=r.projection,o=r.resolution,a=r.center,l=r.rotation,c=e.pixelRatio,u=this.getLayer(),d=u.getSource(),f=d.getRevision(),_=d.getTileGridForProjection(s),p=_.getZForResolution(o,d.zDirection),m=_.getResolution(p);let y=e.extent;const v=e.viewState.resolution,A=d.getTilePixelRatio(c),x=Math.round(At(y)/v*c),E=Math.round(Wi(y)/v*c),M=i.extent&&An(i.extent);M&&(y=ys(y,An(i.extent)));const L=m*x/2/A,R=m*E/2/A,S=[a[0]-L,a[1]-R,a[0]+L,a[1]+R],B=_.getTileRangeForExtentAndZ(y,p),U={};U[p]={};const z=this.createLoadedTileFinder(d,s,U),X=this.tmpExtent,V=this.tmpTileRange_;this.newTiles_=!1;const Ae=l?kl(r.center,v,l,e.size):void 0;for(let ce=B.minX;ce<=B.maxX;++ce)for(let J=B.minY;J<=B.maxY;++J){if(l&&!_.tileCoordIntersectsViewport([p,ce,J],Ae))continue;const ne=this.getTile(p,ce,J,e);if(this.isDrawableTile(ne)){const le=ct(this);if(ne.getState()==De.LOADED){U[p][ne.tileCoord.toString()]=ne;let pe=ne.inTransition(le);pe&&i.opacity!==1&&(ne.endTransition(le),pe=!1),!this.newTiles_&&(pe||!this.renderedTiles.includes(ne))&&(this.newTiles_=!0)}if(ne.getAlpha(le,e.time)===1)continue}const fe=_.getTileCoordChildTileRange(ne.tileCoord,V,X);let Ne=!1;fe&&(Ne=z(p+1,fe)),Ne||_.forEachTileCoordParentTileRange(ne.tileCoord,z,V,X)}const ee=m/o*c/A;Sn(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/c,1/c,l,-x/2,-E/2);const F=$d(this.pixelTransform);this.useContainer(t,F,this.getBackground(e));const N=this.context,G=N.canvas;dc(this.inversePixelTransform,this.pixelTransform),Sn(this.tempTransform,x/2,E/2,ee,ee,0,-x/2,-E/2),G.width!=x||G.height!=E?(G.width=x,G.height=E):this.containerReused||N.clearRect(0,0,x,E),M&&this.clipUnrotated(N,e,M),d.getInterpolate()||(N.imageSmoothingEnabled=!1),this.preRender(N,e),this.renderedTiles.length=0;let K=Object.keys(U).map(Number);K.sort(tr);let H,q,D;i.opacity===1&&(!this.containerReused||d.getOpaque(e.viewState.projection))?K=K.reverse():(H=[],q=[]);for(let ce=K.length-1;ce>=0;--ce){const J=K[ce],ne=d.getTilePixelSize(J,c,s),Ne=_.getResolution(J)/m,le=ne[0]*Ne*ee,pe=ne[1]*Ne*ee,Le=_.getTileCoordForCoordAndZ(rr(S),J),We=_.getTileCoordExtent(Le),Ie=Nt(this.tempTransform,[A*(We[0]-S[0])/m,A*(S[3]-We[3])/m]),be=A*d.getGutterForProjection(s),pt=U[J];for(const ot in pt){const xe=pt[ot],Z=xe.tileCoord,re=Le[1]-Z[1],Se=Math.round(Ie[0]-(re-1)*le),de=Le[2]-Z[2],it=Math.round(Ie[1]-(de-1)*pe),ye=Math.round(Ie[0]-re*le),se=Math.round(Ie[1]-de*pe),he=Se-ye,Ee=it-se,Ye=p===J,Pe=Ye&&xe.getAlpha(ct(this),e.time)!==1;let nt=!1;if(!Pe)if(H){D=[ye,se,ye+he,se,ye+he,se+Ee,ye,se+Ee];for(let at=0,Ft=H.length;at<Ft;++at)if(p!==J&&J<q[at]){const ht=H[at];ti([ye,se,ye+he,se+Ee],[ht[0],ht[3],ht[4],ht[7]])&&(nt||(N.save(),nt=!0),N.beginPath(),N.moveTo(D[0],D[1]),N.lineTo(D[2],D[3]),N.lineTo(D[4],D[5]),N.lineTo(D[6],D[7]),N.moveTo(ht[6],ht[7]),N.lineTo(ht[4],ht[5]),N.lineTo(ht[2],ht[3]),N.lineTo(ht[0],ht[1]),N.clip())}H.push(D),q.push(J)}else N.clearRect(ye,se,he,Ee);this.drawTileImage(xe,e,ye,se,he,Ee,be,Ye),H&&!Pe?(nt&&N.restore(),this.renderedTiles.unshift(xe)):this.renderedTiles.push(xe),this.updateUsedTiles(e.usedTiles,d,xe)}}return this.renderedRevision=f,this.renderedResolution=m,this.extentChanged=!this.renderedExtent_||!bs(this.renderedExtent_,S),this.renderedExtent_=S,this.renderedPixelRatio=c,this.renderedProjection=s,this.manageTilePyramid(e,d,_,c,s,y,p,u.getPreload()),this.scheduleExpireCache(e,d),this.postRender(N,e),i.extent&&N.restore(),N.imageSmoothingEnabled=!0,F!==G.style.transform&&(G.style.transform=F),this.container}drawTileImage(e,t,i,r,s,o,a,l){const c=this.getTileImage(e);if(!c)return;const u=ct(this),d=t.layerStatesArray[t.layerIndex],f=d.opacity*(l?e.getAlpha(u,t.time):1),_=f!==this.context.globalAlpha;_&&(this.context.save(),this.context.globalAlpha=f),this.context.drawImage(c,a,a,c.width-2*a,c.height-2*a,i,r,s,o),_&&this.context.restore(),f!==d.opacity?t.animate=!0:l&&e.endTransition(u)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}scheduleExpireCache(e,t){if(t.canExpireCache()){const i=function(r,s,o){const a=ct(r);a in o.usedTiles&&r.expireCache(o.viewState.projection,o.usedTiles[a])}.bind(null,t);e.postRenderFunctions.push(i)}}updateUsedTiles(e,t,i){const r=ct(t);r in e||(e[r]={}),e[r][i.getKey()]=!0}manageTilePyramid(e,t,i,r,s,o,a,l,c){const u=ct(t);u in e.wantedTiles||(e.wantedTiles[u]={});const d=e.wantedTiles[u],f=e.tileQueue,_=i.getMinZoom(),p=e.viewState.rotation,m=p?kl(e.viewState.center,e.viewState.resolution,p,e.size):void 0;let y=0,v,A,x,E,M,L;for(L=_;L<=a;++L)for(A=i.getTileRangeForExtentAndZ(o,L,A),x=i.getResolution(L),E=A.minX;E<=A.maxX;++E)for(M=A.minY;M<=A.maxY;++M)p&&!i.tileCoordIntersectsViewport([L,E,M],m)||(a-L<=l?(++y,v=t.getTile(L,E,M,r,s),v.getState()==De.IDLE&&(d[v.getKey()]=!0,f.isKeyQueued(v.getKey())||f.enqueue([v,u,i.getTileCoordCenter(v.tileCoord),x])),c!==void 0&&c(v)):t.useTile(L,E,M,s));t.updateCacheSize(y,s)}}var Jw=qw;class eA extends Zw{constructor(e){super(e)}createRenderer(){return new Jw(this)}}var Ln=eA;function qf(n,e,t,i,r,s,o){let a,l;const c=(t-e)/i;if(c===1)a=e;else if(c===2)a=e,l=r;else if(c!==0){let u=n[e],d=n[e+1],f=0;const _=[0];for(let y=e+i;y<t;y+=i){const v=n[y],A=n[y+1];f+=Math.sqrt((v-u)*(v-u)+(A-d)*(A-d)),_.push(f),u=v,d=A}const p=r*f,m=K_(_,p);m<0?(l=(p-_[-m-2])/(_[-m-1]-_[-m-2]),a=e+(-m-2)*i):a=e+m*i}o=o>1?o:2,s=s||new Array(o);for(let u=0;u<o;++u)s[u]=a===void 0?NaN:l===void 0?n[a+u]:li(n[a+u],n[a+i+u],l);return s}function Vl(n,e,t,i,r,s){if(t==e)return null;let o;if(r<n[e+i-1])return s?(o=n.slice(e,e+i),o[i-1]=r,o):null;if(n[t-1]<r)return s?(o=n.slice(t-i,t),o[i-1]=r,o):null;if(r==n[e+i-1])return n.slice(e,e+i);let a=e/i,l=t/i;for(;a<l;){const f=a+l>>1;r<n[(f+1)*i-1]?l=f:a=f+1}const c=n[a*i-1];if(r==c)return n.slice((a-1)*i,(a-1)*i+i);const u=n[(a+1)*i-1],d=(r-c)/(u-c);o=[];for(let f=0;f<i-1;++f)o.push(li(n[(a-1)*i+f],n[a*i+f],d));return o.push(r),o}function tA(n,e,t,i,r,s,o){if(o)return Vl(n,e,t[t.length-1],i,r,s);let a;if(r<n[i-1])return s?(a=n.slice(0,i),a[i-1]=r,a):null;if(n[n.length-1]<r)return s?(a=n.slice(n.length-i),a[i-1]=r,a):null;for(let l=0,c=t.length;l<c;++l){const u=t[l];if(e!=u){if(r<n[e+i-1])return null;if(r<=n[u-1])return Vl(n,e,u,i,r,!1);e=u}}return null}function Jf(n,e,t,i){let r=n[e],s=n[e+1],o=0;for(let a=e+i;a<t;a+=i){const l=n[a],c=n[a+1];o+=Math.sqrt((l-r)*(l-r)+(c-s)*(c-s)),r=l,s=c}return o}class Ko extends sr{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){this.flatCoordinates?zi(this.flatCoordinates,e):this.flatCoordinates=e.slice(),this.changed()}clone(){const e=new Ko(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<nr(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Sc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Tc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,i,r))}forEachSegment(e){return wf(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,Vl(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return xn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return qf(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return Jf(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=Mc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new Ko(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return fa(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=da(this.flatCoordinates,0,e,this.stride),this.changed()}}var Kl=Ko;function Uu(n){return new Rt({fill:Ms(n,""),stroke:Ps(n,""),text:iA(n),image:nA(n)})}function Ms(n,e){const t=n[e+"fill-color"];if(!!t)return new Gt({color:t})}function Ps(n,e){const t=n[e+"stroke-width"],i=n[e+"stroke-color"];if(!(!t&&!i))return new ii({width:t,color:i,lineCap:n[e+"stroke-line-cap"],lineJoin:n[e+"stroke-line-join"],lineDash:n[e+"stroke-line-dash"],lineDashOffset:n[e+"stroke-line-dash-offset"],miterLimit:n[e+"stroke-miter-limit"]})}function iA(n){const e=n["text-value"];return e?new $0({text:e,font:n["text-font"],maxAngle:n["text-max-angle"],offsetX:n["text-offset-x"],offsetY:n["text-offset-y"],overflow:n["text-overflow"],placement:n["text-placement"],repeat:n["text-repeat"],scale:n["text-scale"],rotateWithView:n["text-rotate-with-view"],rotation:n["text-rotation"],textAlign:n["text-align"],justify:n["text-justify"],textBaseline:n["text-baseline"],padding:n["text-padding"],fill:Ms(n,"text-"),backgroundFill:Ms(n,"text-background-"),stroke:Ps(n,"text-"),backgroundStroke:Ps(n,"text-background-")}):void 0}function nA(n){const e=n["icon-src"],t=n["icon-img"];if(e||t)return new Bf({src:e,img:t,imgSize:n["icon-img-size"],anchor:n["icon-anchor"],anchorOrigin:n["icon-anchor-origin"],anchorXUnits:n["icon-anchor-x-units"],anchorYUnits:n["icon-anchor-y-units"],color:n["icon-color"],crossOrigin:n["icon-cross-origin"],offset:n["icon-offset"],displacement:n["icon-displacement"],opacity:n["icon-opacity"],scale:n["icon-scale"],rotation:n["icon-rotation"],rotateWithView:n["icon-rotate-with-view"],size:n["icon-size"],declutterMode:n["icon-declutter-mode"]});const i=n["shape-points"];if(i){const s="shape-";return new kf({points:i,fill:Ms(n,s),stroke:Ps(n,s),radius:n["shape-radius"],radius1:n["shape-radius1"],radius2:n["shape-radius2"],angle:n["shape-angle"],displacement:n["shape-displacement"],rotation:n["shape-rotation"],rotateWithView:n["shape-rotate-with-view"],scale:n["shape-scale"],declutterMode:n["shape-declutter-mode"]})}const r=n["circle-radius"];if(r){const s="circle-";return new Kt({radius:r,fill:Ms(n,s),stroke:Ps(n,s),displacement:n["circle-displacement"],scale:n["circle-scale"],rotation:n["circle-rotation"],rotateWithView:n["circle-rotate-with-view"],declutterMode:n["circle-declutter-mode"]})}}const Wu={RENDER_ORDER:"renderOrder"};class rA extends ga{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter!==void 0?e.declutter:!1,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(Wu.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e){e.declutterTree||(e.declutterTree=new $f(9)),this.getRenderer().renderDeclutter(e)}setRenderOrder(e){this.set(Wu.RENDER_ORDER,e)}setStyle(e){let t;if(e===void 0)t=V0;else if(e===null)t=null;else if(typeof e=="function")t=e;else if(e instanceof Rt)t=e;else if(Array.isArray(e)){const i=e.length,r=new Array(i);for(let s=0;s<i;++s){const o=e[s];o instanceof Rt?r[s]=o:r[s]=Uu(o)}t=r}else t=Uu(e);this.style_=t,this.styleFunction_=e===null?void 0:Q0(this.style_),this.changed()}}var sA=rA;const Us={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},To=[Us.FILL],En=[Us.STROKE],$n=[Us.BEGIN_PATH],Yu=[Us.CLOSE_PATH];var Be=Us;class oA{drawCustom(e,t,i,r){}drawGeometry(e){}setStyle(e){}drawCircle(e,t){}drawFeature(e,t){}drawGeometryCollection(e,t){}drawLineString(e,t){}drawMultiLineString(e,t){}drawMultiPoint(e,t){}drawMultiPolygon(e,t){}drawPoint(e,t){}drawPolygon(e,t){}drawText(e,t){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}var eg=oA;class aA extends eg{constructor(e,t,i,r){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(i){return i*t})}appendFlatPointCoordinates(e,t){const i=this.getBufferedMaxExtent(),r=this.tmpCoordinate_,s=this.coordinates;let o=s.length;for(let a=0,l=e.length;a<l;a+=t)r[0]=e[a],r[1]=e[a+1],aa(i,r)&&(s[o++]=r[0],s[o++]=r[1]);return o}appendFlatLineCoordinates(e,t,i,r,s,o){const a=this.coordinates;let l=a.length;const c=this.getBufferedMaxExtent();o&&(t+=r);let u=e[t],d=e[t+1];const f=this.tmpCoordinate_;let _=!0,p,m,y;for(p=t+r;p<i;p+=r)f[0]=e[p],f[1]=e[p+1],y=Pl(c,f),y!==m?(_&&(a[l++]=u,a[l++]=d,_=!1),a[l++]=f[0],a[l++]=f[1]):y===kt.INTERSECTING?(a[l++]=f[0],a[l++]=f[1],_=!1):_=!0,u=f[0],d=f[1],m=y;return(s&&_||p===t+r)&&(a[l++]=u,a[l++]=d),l}drawCustomCoordinates_(e,t,i,r,s){for(let o=0,a=i.length;o<a;++o){const l=i[o],c=this.appendFlatLineCoordinates(e,t,l,r,!1,!1);s.push(c),t=l}return t}drawCustom(e,t,i,r){this.beginGeometry(e,t);const s=e.getType(),o=e.getStride(),a=this.coordinates.length;let l,c,u,d,f;switch(s){case"MultiPolygon":l=e.getOrientedFlatCoordinates(),d=[];const _=e.getEndss();f=0;for(let p=0,m=_.length;p<m;++p){const y=[];f=this.drawCustomCoordinates_(l,f,_[p],o,y),d.push(y)}this.instructions.push([Be.CUSTOM,a,d,e,i,jl]),this.hitDetectionInstructions.push([Be.CUSTOM,a,d,e,r||i,jl]);break;case"Polygon":case"MultiLineString":u=[],l=s=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),f=this.drawCustomCoordinates_(l,0,e.getEnds(),o,u),this.instructions.push([Be.CUSTOM,a,u,e,i,Cs]),this.hitDetectionInstructions.push([Be.CUSTOM,a,u,e,r||i,Cs]);break;case"LineString":case"Circle":l=e.getFlatCoordinates(),c=this.appendFlatLineCoordinates(l,0,l.length,o,!1,!1),this.instructions.push([Be.CUSTOM,a,c,e,i,xn]),this.hitDetectionInstructions.push([Be.CUSTOM,a,c,e,r||i,xn]);break;case"MultiPoint":l=e.getFlatCoordinates(),c=this.appendFlatPointCoordinates(l,o),c>a&&(this.instructions.push([Be.CUSTOM,a,c,e,i,xn]),this.hitDetectionInstructions.push([Be.CUSTOM,a,c,e,r||i,xn]));break;case"Point":l=e.getFlatCoordinates(),this.coordinates.push(l[0],l[1]),c=this.coordinates.length,this.instructions.push([Be.CUSTOM,a,c,e,i]),this.hitDetectionInstructions.push([Be.CUSTOM,a,c,e,r||i]);break}this.endGeometry(t)}beginGeometry(e,t){this.beginGeometryInstruction1_=[Be.BEGIN_GEOMETRY,t,0,e],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Be.BEGIN_GEOMETRY,t,0,e],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const i=e.length;let r,s,o=-1;for(t=0;t<i;++t)r=e[t],s=r[0],s==Be.END_GEOMETRY?o=t:s==Be.BEGIN_GEOMETRY&&(r[2]=t,$_(this.hitDetectionInstructions,o,t),o=-1)}setFillStrokeStyle(e,t){const i=this.state;if(e){const r=e.getColor();i.fillStyle=ji(r||rn)}else i.fillStyle=void 0;if(t){const r=t.getColor();i.strokeStyle=ji(r||Ts);const s=t.getLineCap();i.lineCap=s!==void 0?s:Xo;const o=t.getLineDash();i.lineDash=o?o.slice():Is;const a=t.getLineDashOffset();i.lineDashOffset=a||Ss;const l=t.getLineJoin();i.lineJoin=l!==void 0?l:Hr;const c=t.getWidth();i.lineWidth=c!==void 0?c:Os;const u=t.getMiterLimit();i.miterLimit=u!==void 0?u:Rs,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0}createFill(e){const t=e.fillStyle,i=[Be.SET_FILL_STYLE,t];return typeof t!="string"&&i.push(!0),i}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[Be.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const i=e.fillStyle;(typeof i!="string"||e.currentFillStyle!=i)&&(i!==void 0&&this.instructions.push(t.call(this,e)),e.currentFillStyle=i)}updateStrokeStyle(e,t){const i=e.strokeStyle,r=e.lineCap,s=e.lineDash,o=e.lineDashOffset,a=e.lineJoin,l=e.lineWidth,c=e.miterLimit;(e.currentStrokeStyle!=i||e.currentLineCap!=r||s!=e.currentLineDash&&!Rn(e.currentLineDash,s)||e.currentLineDashOffset!=o||e.currentLineJoin!=a||e.currentLineWidth!=l||e.currentMiterLimit!=c)&&(i!==void 0&&t.call(this,e),e.currentStrokeStyle=i,e.currentLineCap=r,e.currentLineDash=s,e.currentLineDashOffset=o,e.currentLineJoin=a,e.currentLineWidth=l,e.currentMiterLimit=c)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[Be.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Zd(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;fc(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}var Ws=aA;class lA extends Ws{constructor(e,t,i,r){super(e,t,i,r),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t){if(!this.image_)return;this.beginGeometry(e,t);const i=e.getFlatCoordinates(),r=e.getStride(),s=this.coordinates.length,o=this.appendFlatPointCoordinates(i,r);this.instructions.push([Be.DRAW_IMAGE,s,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Be.DRAW_IMAGE,s,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t){if(!this.image_)return;this.beginGeometry(e,t);const i=e.getFlatCoordinates(),r=e.getStride(),s=this.coordinates.length,o=this.appendFlatPointCoordinates(i,r);this.instructions.push([Be.DRAW_IMAGE,s,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Be.DRAW_IMAGE,s,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const i=e.getAnchor(),r=e.getSize(),s=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=r[1],this.opacity_=e.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=r[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}var cA=lA;class hA extends Ws{constructor(e,t,i,r){super(e,t,i,r)}drawFlatCoordinates_(e,t,i,r){const s=this.coordinates.length,o=this.appendFlatLineCoordinates(e,t,i,r,!1,!1),a=[Be.MOVE_TO_LINE_TO,s,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),i}drawLineString(e,t){const i=this.state,r=i.strokeStyle,s=i.lineWidth;if(r===void 0||s===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t),this.hitDetectionInstructions.push([Be.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Is,Ss],$n);const o=e.getFlatCoordinates(),a=e.getStride();this.drawFlatCoordinates_(o,0,o.length,a),this.hitDetectionInstructions.push(En),this.endGeometry(t)}drawMultiLineString(e,t){const i=this.state,r=i.strokeStyle,s=i.lineWidth;if(r===void 0||s===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t),this.hitDetectionInstructions.push([Be.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],$n);const o=e.getEnds(),a=e.getFlatCoordinates(),l=e.getStride();let c=0;for(let u=0,d=o.length;u<d;++u)c=this.drawFlatCoordinates_(a,c,o[u],l);this.hitDetectionInstructions.push(En),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(En),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(En),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push($n)}}var uA=hA;class dA extends Ws{constructor(e,t,i,r){super(e,t,i,r)}drawFlatCoordinatess_(e,t,i,r){const s=this.state,o=s.fillStyle!==void 0,a=s.strokeStyle!==void 0,l=i.length;this.instructions.push($n),this.hitDetectionInstructions.push($n);for(let c=0;c<l;++c){const u=i[c],d=this.coordinates.length,f=this.appendFlatLineCoordinates(e,t,u,r,!0,!a),_=[Be.MOVE_TO_LINE_TO,d,f];this.instructions.push(_),this.hitDetectionInstructions.push(_),a&&(this.instructions.push(Yu),this.hitDetectionInstructions.push(Yu)),t=u}return o&&(this.instructions.push(To),this.hitDetectionInstructions.push(To)),a&&(this.instructions.push(En),this.hitDetectionInstructions.push(En)),t}drawCircle(e,t){const i=this.state,r=i.fillStyle,s=i.strokeStyle;if(r===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Be.SET_FILL_STYLE,rn]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Be.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const o=e.getFlatCoordinates(),a=e.getStride(),l=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,a,!1,!1);const c=[Be.CIRCLE,l];this.instructions.push($n,c),this.hitDetectionInstructions.push($n,c),i.fillStyle!==void 0&&(this.instructions.push(To),this.hitDetectionInstructions.push(To)),i.strokeStyle!==void 0&&(this.instructions.push(En),this.hitDetectionInstructions.push(En)),this.endGeometry(t)}drawPolygon(e,t){const i=this.state,r=i.fillStyle,s=i.strokeStyle;if(r===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Be.SET_FILL_STYLE,rn]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Be.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const o=e.getEnds(),a=e.getOrientedFlatCoordinates(),l=e.getStride();this.drawFlatCoordinatess_(a,0,o,l),this.endGeometry(t)}drawMultiPolygon(e,t){const i=this.state,r=i.fillStyle,s=i.strokeStyle;if(r===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Be.SET_FILL_STYLE,rn]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Be.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const o=e.getEndss(),a=e.getOrientedFlatCoordinates(),l=e.getStride();let c=0;for(let u=0,d=o.length;u<d;++u)c=this.drawFlatCoordinatess_(a,c,o[u],l);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let i=0,r=t.length;i<r;++i)t[i]=Xn(t[i],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;e.fillStyle!==void 0&&this.updateFillStyle(e,this.createFill),e.strokeStyle!==void 0&&this.updateStrokeStyle(e,this.applyStroke)}}var Xu=dA;function fA(n,e,t,i,r){const s=[];let o=t,a=0,l=e.slice(t,2);for(;a<n&&o+r<i;){const[c,u]=l.slice(-2),d=e[o+r],f=e[o+r+1],_=Math.sqrt((d-c)*(d-c)+(f-u)*(f-u));if(a+=_,a>=n){const p=(n-a+_)/_,m=li(c,d,p),y=li(u,f,p);l.push(m,y),s.push(l),l=[m,y],a==n&&(o+=r),a=0}else if(a<n)l.push(e[o+r],e[o+r+1]),o+=r;else{const p=_-a,m=li(c,d,p/_),y=li(u,f,p/_);l.push(m,y),s.push(l),l=[m,y],a=0,o+=r}}return a>0&&s.push(l),s}function gA(n,e,t,i,r){let s=t,o=t,a=0,l=0,c=t,u,d,f,_,p,m,y,v,A,x;for(d=t;d<i;d+=r){const E=e[d],M=e[d+1];p!==void 0&&(A=E-p,x=M-m,_=Math.sqrt(A*A+x*x),y!==void 0&&(l+=f,u=Math.acos((y*A+v*x)/(f*_)),u>n&&(l>a&&(a=l,s=c,o=d),l=0,c=d-r)),f=_,y=A,v=x),p=E,m=M}return l+=_,l>a?[c,d]:[s,o]}const vs={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class pA extends Ws{constructor(e,t,i,r){super(e,t,i,r),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t){const i=this.textFillState_,r=this.textStrokeState_,s=this.textState_;if(this.text_===""||!s||!i&&!r)return;const o=this.coordinates;let a=o.length;const l=e.getType();let c=null,u=e.getStride();if(s.placement==="line"&&(l=="LineString"||l=="MultiLineString"||l=="Polygon"||l=="MultiPolygon")){if(!ti(this.getBufferedMaxExtent(),e.getExtent()))return;let d;if(c=e.getFlatCoordinates(),l=="LineString")d=[c.length];else if(l=="MultiLineString")d=e.getEnds();else if(l=="Polygon")d=e.getEnds().slice(0,1);else if(l=="MultiPolygon"){const m=e.getEndss();d=[];for(let y=0,v=m.length;y<v;++y)d.push(m[y][0])}this.beginGeometry(e,t);const f=s.repeat,_=f?void 0:s.textAlign;let p=0;for(let m=0,y=d.length;m<y;++m){let v;f?v=fA(f*this.resolution,c,p,d[m],u):v=[c.slice(p,d[m])];for(let A=0,x=v.length;A<x;++A){const E=v[A];let M=0,L=E.length;if(_==null){const S=gA(s.maxAngle,E,0,E.length,2);M=S[0],L=S[1]}for(let S=M;S<L;S+=u)o.push(E[S],E[S+1]);const R=o.length;p=d[m],this.drawChars_(a,R),a=R}}this.endGeometry(t)}else{let d=s.overflow?null:[];switch(l){case"Point":case"MultiPoint":c=e.getFlatCoordinates();break;case"LineString":c=e.getFlatMidpoint();break;case"Circle":c=e.getCenter();break;case"MultiLineString":c=e.getFlatMidpoints(),u=2;break;case"Polygon":c=e.getFlatInteriorPoint(),s.overflow||d.push(c[2]/this.resolution),u=3;break;case"MultiPolygon":const y=e.getFlatInteriorPoints();c=[];for(let v=0,A=y.length;v<A;v+=3)s.overflow||d.push(y[v+2]/this.resolution),c.push(y[v],y[v+1]);if(c.length===0)return;u=2;break}const f=this.appendFlatPointCoordinates(c,u);if(f===a)return;if(d&&(f-a)/2!==c.length/u){let y=a/2;d=d.filter((v,A)=>{const x=o[(y+A)*2]===c[A*u]&&o[(y+A)*2+1]===c[A*u+1];return x||--y,x})}this.saveTextStates_(),(s.backgroundFill||s.backgroundStroke)&&(this.setFillStrokeStyle(s.backgroundFill,s.backgroundStroke),s.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),s.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,t);let _=s.padding;if(_!=Kn&&(s.scale[0]<0||s.scale[1]<0)){let y=s.padding[0],v=s.padding[1],A=s.padding[2],x=s.padding[3];s.scale[0]<0&&(v=-v,x=-x),s.scale[1]<0&&(y=-y,A=-A),_=[y,v,A,x]}const p=this.pixelRatio;this.instructions.push([Be.DRAW_IMAGE,a,f,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,_==Kn?Kn:_.map(function(y){return y*p}),!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,d]);const m=1/p;this.hitDetectionInstructions.push([Be.DRAW_IMAGE,a,f,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[m,m],NaN,void 0,this.declutterImageWithText_,_,!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,d]),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,i=this.textFillState_,r=this.strokeKey_;e&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:t.font,textAlign:t.textAlign||Ls,justify:t.justify,textBaseline:t.textBaseline||Ho,scale:t.scale});const o=this.fillKey_;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))}drawChars_(e,t){const i=this.textStrokeState_,r=this.textState_,s=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();const l=this.pixelRatio,c=vs[r.textBaseline],u=this.textOffsetY_*l,d=this.text_,f=i?i.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([Be.DRAW_CHARS,e,t,c,r.overflow,a,r.maxAngle,l,u,s,f*l,d,o,1]),this.hitDetectionInstructions.push([Be.DRAW_CHARS,e,t,c,r.overflow,a,r.maxAngle,1,u,s,f,d,o,1/l])}setTextStyle(e,t){let i,r,s;if(!e)this.text_="";else{const o=e.getFill();o?(r=this.textFillState_,r||(r={},this.textFillState_=r),r.fillStyle=ji(o.getColor()||rn)):(r=null,this.textFillState_=r);const a=e.getStroke();if(!a)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const p=a.getLineDash(),m=a.getLineDashOffset(),y=a.getWidth(),v=a.getMiterLimit();s.lineCap=a.getLineCap()||Xo,s.lineDash=p?p.slice():Is,s.lineDashOffset=m===void 0?Ss:m,s.lineJoin=a.getLineJoin()||Hr,s.lineWidth=y===void 0?Os:y,s.miterLimit=v===void 0?Rs:v,s.strokeStyle=ji(a.getColor()||Ts)}i=this.textState_;const l=e.getFont()||Sf;Gv(l);const c=e.getScaleArray();i.overflow=e.getOverflow(),i.font=l,i.maxAngle=e.getMaxAngle(),i.placement=e.getPlacement(),i.textAlign=e.getTextAlign(),i.repeat=e.getRepeat(),i.justify=e.getJustify(),i.textBaseline=e.getTextBaseline()||Ho,i.backgroundFill=e.getBackgroundFill(),i.backgroundStroke=e.getBackgroundStroke(),i.padding=e.getPadding()||Kn,i.scale=c===void 0?[1,1]:c;const u=e.getOffsetX(),d=e.getOffsetY(),f=e.getRotateWithView(),_=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=u===void 0?0:u,this.textOffsetY_=d===void 0?0:d,this.textRotateWithView_=f===void 0?!1:f,this.textRotation_=_===void 0?0:_,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:ct(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=r?typeof r.fillStyle=="string"?r.fillStyle:"|"+ct(r.fillStyle):""}this.declutterImageWithText_=t}}const mA={Circle:Xu,Default:Ws,Image:cA,LineString:uA,Polygon:Xu,Text:pA};class _A{constructor(e,t,i,r){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=r,this.resolution_=i,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const i=this.buildersByZIndex_[t];for(const r in i){const s=i[r].finish();e[t][r]=s}}return e}getBuilder(e,t){const i=e!==void 0?e.toString():"0";let r=this.buildersByZIndex_[i];r===void 0&&(r={},this.buildersByZIndex_[i]=r);let s=r[t];if(s===void 0){const o=mA[t];s=new o(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[t]=s}return s}}var Hu=_A;function yA(n,e,t,i,r,s,o,a,l,c,u,d){let f=n[e],_=n[e+1],p=0,m=0,y=0,v=0;function A(){p=f,m=_,e+=i,f=n[e],_=n[e+1],v+=y,y=Math.sqrt((f-p)*(f-p)+(_-m)*(_-m))}do A();while(e<t-i&&v+y<s);let x=y===0?0:(s-v)/y;const E=li(p,f,x),M=li(m,_,x),L=e-i,R=v,S=s+a*l(c,r,u);for(;e<t-i&&v+y<S;)A();x=y===0?0:(S-v)/y;const B=li(p,f,x),U=li(m,_,x);let z;if(d){const F=[E,M,B,U];gf(F,0,4,2,d,F,F),z=F[0]>F[2]}else z=E>B;const X=Math.PI,V=[],Ae=L+i===e;e=L,y=0,v=R,f=n[e],_=n[e+1];let ee;if(Ae){A(),ee=Math.atan2(_-m,f-p),z&&(ee+=ee>0?-X:X);const F=(B+E)/2,N=(U+M)/2;return V[0]=[F,N,(S-s)/2,ee,r],V}r=r.replace(/\n/g," ");for(let F=0,N=r.length;F<N;){A();let G=Math.atan2(_-m,f-p);if(z&&(G+=G>0?-X:X),ee!==void 0){let J=G-ee;if(J+=J>X?-2*X:J<-X?2*X:0,Math.abs(J)>o)return null}ee=G;const K=F;let H=0;for(;F<N;++F){const J=z?N-F-1:F,ne=a*l(c,r[J],u);if(e+i<t&&v+y<s+H+ne/2)break;H+=ne}if(F===K)continue;const q=z?r.substring(N-K,N-F):r.substring(K,F);x=y===0?0:(s+H/2-v)/y;const D=li(p,f,x),ce=li(m,_,x);V.push([D,ce,H/2,G,q]),s+=H}return V}const Ir=pi(),mn=[],Zi=[],qi=[],_n=[];function Qu(n){return n[3].declutterBox}const vA=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function Vu(n,e){return(e==="start"||e==="end")&&!vA.test(n)&&(e=e==="start"?"left":"right"),vs[e]}function wA(n,e,t){return t>0&&n.push(`
`,""),n.push(e,""),n}class AA{constructor(e,t,i,r){this.overlaps=i,this.pixelRatio=t,this.resolution=e,this.alignFill_,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=Ui(),this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={}}createLabel(e,t,i,r){const s=e+t+i+r;if(this.labels_[s])return this.labels_[s];const o=r?this.strokeStates[r]:null,a=i?this.fillStates[i]:null,l=this.textStates[t],c=this.pixelRatio,u=[l.scale[0]*c,l.scale[1]*c],d=Array.isArray(e),f=l.justify?vs[l.justify]:Vu(Array.isArray(e)?e[0]:e,l.textAlign||Ls),_=r&&o.lineWidth?o.lineWidth:0,p=d?e:e.split(`
`).reduce(wA,[]),{width:m,height:y,widths:v,heights:A,lineWidths:x}=zv(l,p),E=m+_,M=[],L=(E+2)*u[0],R=(y+_)*u[1],S={width:L<0?Math.floor(L):Math.ceil(L),height:R<0?Math.floor(R):Math.ceil(R),contextInstructions:M};(u[0]!=1||u[1]!=1)&&M.push("scale",u),r&&(M.push("strokeStyle",o.strokeStyle),M.push("lineWidth",_),M.push("lineCap",o.lineCap),M.push("lineJoin",o.lineJoin),M.push("miterLimit",o.miterLimit),M.push("setLineDash",[o.lineDash]),M.push("lineDashOffset",o.lineDashOffset)),i&&M.push("fillStyle",a.fillStyle),M.push("textBaseline","middle"),M.push("textAlign","center");const B=.5-f;let U=f*E+B*_;const z=[],X=[];let V=0,Ae=0,ee=0,F=0,N;for(let G=0,K=p.length;G<K;G+=2){const H=p[G];if(H===`
`){Ae+=V,V=0,U=f*E+B*_,++F;continue}const q=p[G+1]||l.font;q!==N&&(r&&z.push("font",q),i&&X.push("font",q),N=q),V=Math.max(V,A[ee]);const D=[H,U+B*v[ee]+f*(v[ee]-x[F]),.5*(_+V)+Ae];U+=v[ee],r&&z.push("strokeText",D),i&&X.push("fillText",D),++ee}return Array.prototype.push.apply(M,z),Array.prototype.push.apply(M,X),this.labels_[s]=S,S}replayTextBackground_(e,t,i,r,s,o,a){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,i),e.lineTo.apply(e,r),e.lineTo.apply(e,s),e.lineTo.apply(e,t),o&&(this.alignFill_=o[2],this.fill_(e)),a&&(this.setStrokeStyle_(e,a),e.stroke())}calculateImageOrLabelDimensions_(e,t,i,r,s,o,a,l,c,u,d,f,_,p,m,y){a*=f[0],l*=f[1];let v=i-a,A=r-l;const x=s+c>e?e-c:s,E=o+u>t?t-u:o,M=p[3]+x*f[0]+p[1],L=p[0]+E*f[1]+p[2],R=v-p[3],S=A-p[0];(m||d!==0)&&(mn[0]=R,_n[0]=R,mn[1]=S,Zi[1]=S,Zi[0]=R+M,qi[0]=Zi[0],qi[1]=S+L,_n[1]=qi[1]);let B;return d!==0?(B=Sn(Ui(),i,r,1,1,d,-i,-r),Nt(B,mn),Nt(B,Zi),Nt(B,qi),Nt(B,_n),an(Math.min(mn[0],Zi[0],qi[0],_n[0]),Math.min(mn[1],Zi[1],qi[1],_n[1]),Math.max(mn[0],Zi[0],qi[0],_n[0]),Math.max(mn[1],Zi[1],qi[1],_n[1]),Ir)):an(Math.min(R,R+M),Math.min(S,S+L),Math.max(R,R+M),Math.max(S,S+L),Ir),_&&(v=Math.round(v),A=Math.round(A)),{drawImageX:v,drawImageY:A,drawImageW:x,drawImageH:E,originX:c,originY:u,declutterBox:{minX:Ir[0],minY:Ir[1],maxX:Ir[2],maxY:Ir[3],value:y},canvasTransform:B,scale:f}}replayImageOrLabel_(e,t,i,r,s,o,a){const l=!!(o||a),c=r.declutterBox,u=e.canvas,d=a?a[2]*r.scale[0]/2:0;return c.minX-d<=u.width/t&&c.maxX+d>=0&&c.minY-d<=u.height/t&&c.maxY+d>=0&&(l&&this.replayTextBackground_(e,mn,Zi,qi,_n,o,a),Uv(e,r.canvasTransform,s,i,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0}fill_(e){if(this.alignFill_){const t=Nt(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;e.save(),e.translate(t[0]%i,t[1]%i),e.rotate(this.viewRotation_)}e.fill(),this.alignFill_&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6])}drawLabelWithPointPlacement_(e,t,i,r){const s=this.textStates[t],o=this.createLabel(e,t,r,i),a=this.strokeStates[i],l=this.pixelRatio,c=Vu(Array.isArray(e)?e[0]:e,s.textAlign||Ls),u=vs[s.textBaseline||Ho],d=a&&a.lineWidth?a.lineWidth:0,f=o.width/l-2*s.scale[0],_=c*f+2*(.5-c)*d,p=u*o.height/l+2*(.5-u)*d;return{label:o,anchorX:_,anchorY:p}}execute_(e,t,i,r,s,o,a,l){let c;this.pixelCoordinates_&&Rn(i,this.renderedTransform_)?c=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),c=er(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),dy(this.renderedTransform_,i));let u=0;const d=r.length;let f=0,_,p,m,y,v,A,x,E,M,L,R,S,B=0,U=0,z=null,X=null;const V=this.coordinateCache_,Ae=this.viewRotation_,ee=Math.round(Math.atan2(-i[1],i[0])*1e12)/1e12,F={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:Ae},N=this.instructions!=r||this.overlaps?0:200;let G,K,H,q;for(;u<d;){const D=r[u];switch(D[0]){case Be.BEGIN_GEOMETRY:G=D[1],q=D[3],G.getGeometry()?a!==void 0&&!ti(a,q.getExtent())?u=D[2]+1:++u:u=D[2];break;case Be.BEGIN_PATH:B>N&&(this.fill_(e),B=0),U>N&&(e.stroke(),U=0),!B&&!U&&(e.beginPath(),y=NaN,v=NaN),++u;break;case Be.CIRCLE:f=D[1];const J=c[f],ne=c[f+1],fe=c[f+2],Ne=c[f+3],le=fe-J,pe=Ne-ne,Le=Math.sqrt(le*le+pe*pe);e.moveTo(J+Le,ne),e.arc(J,ne,Le,0,2*Math.PI,!0),++u;break;case Be.CLOSE_PATH:e.closePath(),++u;break;case Be.CUSTOM:f=D[1],_=D[2];const We=D[3],Ie=D[4],be=D.length==6?D[5]:void 0;F.geometry=We,F.feature=G,u in V||(V[u]=[]);const pt=V[u];be?be(c,f,_,2,pt):(pt[0]=c[f],pt[1]=c[f+1],pt.length=2),Ie(pt,F),++u;break;case Be.DRAW_IMAGE:f=D[1],_=D[2],E=D[3],p=D[4],m=D[5];let ot=D[6];const xe=D[7],Z=D[8],re=D[9],Se=D[10];let de=D[11];const it=D[12];let ye=D[13];const se=D[14],he=D[15];if(!E&&D.length>=20){M=D[19],L=D[20],R=D[21],S=D[22];const jt=this.drawLabelWithPointPlacement_(M,L,R,S);E=jt.label,D[3]=E;const Ti=D[23];p=(jt.anchorX-Ti)*this.pixelRatio,D[4]=p;const zt=D[24];m=(jt.anchorY-zt)*this.pixelRatio,D[5]=m,ot=E.height,D[6]=ot,ye=E.width,D[13]=ye}let Ee;D.length>25&&(Ee=D[25]);let Ye,Pe,nt;D.length>17?(Ye=D[16],Pe=D[17],nt=D[18]):(Ye=Kn,Pe=!1,nt=!1),Se&&ee?de+=Ae:!Se&&!ee&&(de-=Ae);let at=0;for(;f<_;f+=2){if(Ee&&Ee[at++]<ye/this.pixelRatio)continue;const jt=this.calculateImageOrLabelDimensions_(E.width,E.height,c[f],c[f+1],ye,ot,p,m,Z,re,de,it,s,Ye,Pe||nt,G),Ti=[e,t,E,jt,xe,Pe?z:null,nt?X:null];if(l){if(se==="none")continue;if(se==="obstacle"){l.insert(jt.declutterBox);continue}else{let zt,si;if(he){const Ut=_-f;if(!he[Ut]){he[Ut]=Ti;continue}if(zt=he[Ut],delete he[Ut],si=Qu(zt),l.collides(si))continue}if(l.collides(jt.declutterBox))continue;zt&&(l.insert(si),this.replayImageOrLabel_.apply(this,zt)),l.insert(jt.declutterBox)}}this.replayImageOrLabel_.apply(this,Ti)}++u;break;case Be.DRAW_CHARS:const Ft=D[1],ht=D[2],ui=D[3],On=D[4];S=D[5];const Qi=D[6],ft=D[7],Vi=D[8];R=D[9];const mi=D[10];M=D[11],L=D[12];const or=[D[13],D[13]],Mn=this.textStates[L],_i=Mn.font,Si=[Mn.scale[0]*ft,Mn.scale[1]*ft];let ri;_i in this.widths_?ri=this.widths_[_i]:(ri={},this.widths_[_i]=ri);const di=Jf(c,Ft,ht,2),Ri=Math.abs(Si[0])*Tu(_i,M,ri);if(On||Ri<=di){const jt=this.textStates[L].textAlign,Ti=(di-Ri)*vs[jt],zt=yA(c,Ft,ht,2,M,Ti,Qi,Math.abs(Si[0]),Tu,_i,ri,ee?0:this.viewRotation_);e:if(zt){const si=[];let Ut,Li,Ki,gt,C;if(R)for(Ut=0,Li=zt.length;Ut<Li;++Ut){C=zt[Ut],Ki=C[4],gt=this.createLabel(Ki,L,"",R),p=C[2]+(Si[0]<0?-mi:mi),m=ui*gt.height+(.5-ui)*2*mi*Si[1]/Si[0]-Vi;const P=this.calculateImageOrLabelDimensions_(gt.width,gt.height,C[0],C[1],gt.width,gt.height,p,m,0,0,C[3],or,!1,Kn,!1,G);if(l&&l.collides(P.declutterBox))break e;si.push([e,t,gt,P,1,null,null])}if(S)for(Ut=0,Li=zt.length;Ut<Li;++Ut){C=zt[Ut],Ki=C[4],gt=this.createLabel(Ki,L,S,""),p=C[2],m=ui*gt.height-Vi;const P=this.calculateImageOrLabelDimensions_(gt.width,gt.height,C[0],C[1],gt.width,gt.height,p,m,0,0,C[3],or,!1,Kn,!1,G);if(l&&l.collides(P.declutterBox))break e;si.push([e,t,gt,P,1,null,null])}l&&l.load(si.map(Qu));for(let P=0,Y=si.length;P<Y;++P)this.replayImageOrLabel_.apply(this,si[P])}}++u;break;case Be.END_GEOMETRY:if(o!==void 0){G=D[1];const jt=o(G,q);if(jt)return jt}++u;break;case Be.FILL:N?B++:this.fill_(e),++u;break;case Be.MOVE_TO_LINE_TO:for(f=D[1],_=D[2],K=c[f],H=c[f+1],A=K+.5|0,x=H+.5|0,(A!==y||x!==v)&&(e.moveTo(K,H),y=A,v=x),f+=2;f<_;f+=2)K=c[f],H=c[f+1],A=K+.5|0,x=H+.5|0,(f==_-2||A!==y||x!==v)&&(e.lineTo(K,H),y=A,v=x);++u;break;case Be.SET_FILL_STYLE:z=D,this.alignFill_=D[2],B&&(this.fill_(e),B=0,U&&(e.stroke(),U=0)),e.fillStyle=D[1],++u;break;case Be.SET_STROKE_STYLE:X=D,U&&(e.stroke(),U=0),this.setStrokeStyle_(e,D),++u;break;case Be.STROKE:N?U++:e.stroke(),++u;break;default:++u;break}}B&&this.fill_(e),U&&e.stroke()}execute(e,t,i,r,s,o){this.viewRotation_=r,this.execute_(e,t,i,this.instructions,s,void 0,void 0,o)}executeHitDetection(e,t,i,r,s){return this.viewRotation_=i,this.execute_(e,1,t,this.hitDetectionInstructions,!0,r,s)}}var xA=AA;const yl=["Polygon","Circle","LineString","Image","Text","Default"];class EA{constructor(e,t,i,r,s,o){this.maxExtent_=e,this.overlaps_=r,this.pixelRatio_=i,this.resolution_=t,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Ui(),this.createExecutors_(s)}clip(e,t){const i=this.getClipCoords(t);e.beginPath(),e.moveTo(i[0],i[1]),e.lineTo(i[2],i[3]),e.lineTo(i[4],i[5]),e.lineTo(i[6],i[7]),e.clip()}createExecutors_(e){for(const t in e){let i=this.executorsByZIndex_[t];i===void 0&&(i={},this.executorsByZIndex_[t]=i);const r=e[t];for(const s in r){const o=r[s];i[s]=new xA(this.resolution_,this.pixelRatio_,this.overlaps_,o)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const i=this.executorsByZIndex_[t];for(let r=0,s=e.length;r<s;++r)if(e[r]in i)return!0}return!1}forEachFeatureAtCoordinate(e,t,i,r,s,o){r=Math.round(r);const a=r*2+1,l=Sn(this.hitDetectionTransform_,r+.5,r+.5,1/t,-1/t,-i,-e[0],-e[1]),c=!this.hitDetectionContext_;c&&(this.hitDetectionContext_=ni(a,a,void 0,{willReadFrequently:!0}));const u=this.hitDetectionContext_;u.canvas.width!==a||u.canvas.height!==a?(u.canvas.width=a,u.canvas.height=a):c||u.clearRect(0,0,a,a);let d;this.renderBuffer_!==void 0&&(d=pi(),_s(d,e),fc(d,t*(this.renderBuffer_+r),d));const f=bA(r);let _;function p(M,L){const R=u.getImageData(0,0,a,a).data;for(let S=0,B=f.length;S<B;S++)if(R[f[S]]>0){if(!o||_!=="Image"&&_!=="Text"||o.includes(M)){const U=(f[S]-3)/4,z=r-U%a,X=r-(U/a|0),V=s(M,L,z*z+X*X);if(V)return V}u.clearRect(0,0,a,a);break}}const m=Object.keys(this.executorsByZIndex_).map(Number);m.sort(tr);let y,v,A,x,E;for(y=m.length-1;y>=0;--y){const M=m[y].toString();for(A=this.executorsByZIndex_[M],v=yl.length-1;v>=0;--v)if(_=yl[v],x=A[_],x!==void 0&&(E=x.executeHitDetection(u,l,i,p,d),E))return E}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const i=t[0],r=t[1],s=t[2],o=t[3],a=[i,r,i,o,s,o,s,r];return er(a,0,8,2,e,a),a}isEmpty(){return Wr(this.executorsByZIndex_)}execute(e,t,i,r,s,o,a){const l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(tr),this.maxExtent_&&(e.save(),this.clip(e,i)),o=o||yl;let c,u,d,f,_,p;for(a&&l.reverse(),c=0,u=l.length;c<u;++c){const m=l[c].toString();for(_=this.executorsByZIndex_[m],d=0,f=o.length;d<f;++d){const y=o[d];p=_[y],p!==void 0&&p.execute(e,t,i,r,s,a)}}this.maxExtent_&&e.restore()}}const vl={};function bA(n){if(vl[n]!==void 0)return vl[n];const e=n*2+1,t=n*n,i=new Array(t+1);for(let s=0;s<=n;++s)for(let o=0;o<=n;++o){const a=s*s+o*o;if(a>t)break;let l=i[a];l||(l=[],i[a]=l),l.push(((n+s)*e+(n+o))*4+3),s>0&&l.push(((n-s)*e+(n+o))*4+3),o>0&&(l.push(((n+s)*e+(n-o))*4+3),s>0&&l.push(((n-s)*e+(n-o))*4+3))}const r=[];for(let s=0,o=i.length;s<o;++s)i[s]&&r.push(...i[s]);return vl[n]=r,r}var Ku=EA;class CA extends eg{constructor(e,t,i,r,s,o,a){super(),this.context_=e,this.pixelRatio_=t,this.extent_=i,this.transform_=r,this.transformRotation_=r?mc(Math.atan2(r[1],r[0]),10):0,this.viewRotation_=s,this.squaredTolerance_=o,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Ui()}drawImages_(e,t,i,r){if(!this.image_)return;const s=er(e,t,i,r,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,l=o.globalAlpha;this.imageOpacity_!=1&&(o.globalAlpha=l*this.imageOpacity_);let c=this.imageRotation_;this.transformRotation_===0&&(c-=this.viewRotation_),this.imageRotateWithView_&&(c+=this.viewRotation_);for(let u=0,d=s.length;u<d;u+=2){const f=s[u]-this.imageAnchorX_,_=s[u+1]-this.imageAnchorY_;if(c!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const p=f+this.imageAnchorX_,m=_+this.imageAnchorY_;Sn(a,p,m,1,1,c,-p,-m),o.setTransform.apply(o,a),o.translate(p,m),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.setTransform(1,0,0,1,0,0)}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,f,_,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(o.globalAlpha=l)}drawText_(e,t,i,r){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=er(e,t,i,r,this.transform_,this.pixelCoordinates_),o=this.context_;let a=this.textRotation_;for(this.transformRotation_===0&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);t<i;t+=r){const l=s[t]+this.textOffsetX_,c=s[t+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(o.translate(l-this.textOffsetX_,c-this.textOffsetY_),o.rotate(a),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.setTransform(1,0,0,1,0,0)):(this.textStrokeState_&&o.strokeText(this.text_,l,c),this.textFillState_&&o.fillText(this.text_,l,c))}}moveToLineTo_(e,t,i,r,s){const o=this.context_,a=er(e,t,i,r,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);let l=a.length;s&&(l-=2);for(let c=2;c<l;c+=2)o.lineTo(a[c],a[c+1]);return s&&o.closePath(),i}drawRings_(e,t,i,r){for(let s=0,o=i.length;s<o;++s)t=this.moveToLineTo_(e,t,i[s],r,!0);return t}drawCircle(e){if(!!ti(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=cv(e,this.transform_,this.pixelCoordinates_),i=t[2]-t[0],r=t[3]-t[1],s=Math.sqrt(i*i+r*r),o=this.context_;o.beginPath(),o.arc(t[0],t[1],s,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const i=t.getGeometryFunction()(e);!i||!ti(this.extent_,i.getExtent())||(this.setStyle(t),this.drawGeometry(i))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let i=0,r=t.length;i<r;++i)this.drawGeometry(t[i])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),this.text_!==""&&this.drawText_(t,0,t.length,i)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),this.text_!==""&&this.drawText_(t,0,t.length,i)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ti(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(i,0,i.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(!!ti(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,r=e.getFlatCoordinates();let s=0;const o=e.getEnds(),a=e.getStride();i.beginPath();for(let l=0,c=o.length;l<c;++l)s=this.moveToLineTo_(r,s,o[l],a,!1);i.stroke()}if(this.text_!==""){const i=e.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ti(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ti(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getOrientedFlatCoordinates();let r=0;const s=e.getEndss(),o=e.getStride();t.beginPath();for(let a=0,l=s.length;a<l;++a){const c=s[a];r=this.drawRings_(i,r,c,o)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,i=this.contextFillState_;i?i.fillStyle!=e.fillStyle&&(i.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=e.lineCap&&(i.lineCap=e.lineCap,t.lineCap=e.lineCap),Rn(i.lineDash,e.lineDash)||t.setLineDash(i.lineDash=e.lineDash),i.lineDashOffset!=e.lineDashOffset&&(i.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),i.lineJoin!=e.lineJoin&&(i.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),i.lineWidth!=e.lineWidth&&(i.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),i.miterLimit!=e.miterLimit&&(i.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),i.strokeStyle!=e.strokeStyle&&(i.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,i=this.contextTextState_,r=e.textAlign?e.textAlign:Ls;i?(i.font!=e.font&&(i.font=e.font,t.font=e.font),i.textAlign!=r&&(i.textAlign=r,t.textAlign=r),i.textBaseline!=e.textBaseline&&(i.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=r,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:r,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const i=e.getColor();this.fillState_={fillStyle:ji(i||rn)}}if(!t)this.strokeState_=null;else{const i=t.getColor(),r=t.getLineCap(),s=t.getLineDash(),o=t.getLineDashOffset(),a=t.getLineJoin(),l=t.getWidth(),c=t.getMiterLimit(),u=s||Is;this.strokeState_={lineCap:r!==void 0?r:Xo,lineDash:this.pixelRatio_===1?u:u.map(d=>d*this.pixelRatio_),lineDashOffset:(o||Ss)*this.pixelRatio_,lineJoin:a!==void 0?a:Hr,lineWidth:(l!==void 0?l:Os)*this.pixelRatio_,miterLimit:c!==void 0?c:Rs,strokeStyle:ji(i||Ts)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const i=e.getPixelRatio(this.pixelRatio_),r=e.getAnchor(),s=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*i,this.imageAnchorY_=r[1]*i,this.imageHeight_=t[1]*i,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const o=e.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/i,o[1]*this.pixelRatio_/i],this.imageWidth_=t[0]*i}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const _=t.getColor();this.textFillState_={fillStyle:ji(_||rn)}}const i=e.getStroke();if(!i)this.textStrokeState_=null;else{const _=i.getColor(),p=i.getLineCap(),m=i.getLineDash(),y=i.getLineDashOffset(),v=i.getLineJoin(),A=i.getWidth(),x=i.getMiterLimit();this.textStrokeState_={lineCap:p!==void 0?p:Xo,lineDash:m||Is,lineDashOffset:y||Ss,lineJoin:v!==void 0?v:Hr,lineWidth:A!==void 0?A:Os,miterLimit:x!==void 0?x:Rs,strokeStyle:ji(_||Ts)}}const r=e.getFont(),s=e.getOffsetX(),o=e.getOffsetY(),a=e.getRotateWithView(),l=e.getRotation(),c=e.getScaleArray(),u=e.getText(),d=e.getTextAlign(),f=e.getTextBaseline();this.textState_={font:r!==void 0?r:Sf,textAlign:d!==void 0?d:Ls,textBaseline:f!==void 0?f:Ho},this.text_=u!==void 0?Array.isArray(u)?u.reduce((_,p,m)=>_+=m%2?" ":p,""):u:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=o!==void 0?this.pixelRatio_*o:0,this.textRotateWithView_=a!==void 0?a:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*c[0],this.pixelRatio_*c[1]]}}}var IA=CA;const Bi=.5;function SA(n,e,t,i,r,s,o){const a=n[0]*Bi,l=n[1]*Bi,c=ni(a,l);c.imageSmoothingEnabled=!1;const u=c.canvas,d=new IA(c,Bi,r,null,o),f=t.length,_=Math.floor((256*256*256-1)/f),p={};for(let y=1;y<=f;++y){const v=t[y-1],A=v.getStyleFunction()||i;if(!i)continue;let x=A(v,s);if(!x)continue;Array.isArray(x)||(x=[x]);const M=(y*_).toString(16).padStart(7,"#00000");for(let L=0,R=x.length;L<R;++L){const S=x[L],B=S.getGeometryFunction()(v);if(!B||!ti(r,B.getExtent()))continue;const U=S.clone(),z=U.getFill();z&&z.setColor(M);const X=U.getStroke();X&&(X.setColor(M),X.setLineDash(null)),U.setText(void 0);const V=S.getImage();if(V&&V.getOpacity()!==0){const N=V.getImageSize();if(!N)continue;const G=ni(N[0],N[1],void 0,{alpha:!1}),K=G.canvas;G.fillStyle=M,G.fillRect(0,0,K.width,K.height),U.setImage(new Bf({img:K,imgSize:N,anchor:V.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:V.getOrigin(),opacity:1,size:V.getSize(),scale:V.getScale(),rotation:V.getRotation(),rotateWithView:V.getRotateWithView()}))}const Ae=U.getZIndex()||0;let ee=p[Ae];ee||(ee={},p[Ae]=ee,ee.Polygon=[],ee.Circle=[],ee.LineString=[],ee.Point=[]);const F=B.getType();if(F==="GeometryCollection"){const N=B.getGeometriesArrayRecursive();for(let G=0,K=N.length;G<K;++G){const H=N[G];ee[H.getType().replace("Multi","")].push(H,U)}}else ee[F.replace("Multi","")].push(B,U)}}const m=Object.keys(p).map(Number).sort(tr);for(let y=0,v=m.length;y<v;++y){const A=p[m[y]];for(const x in A){const E=A[x];for(let M=0,L=E.length;M<L;M+=2){d.setStyle(E[M+1]);for(let R=0,S=e.length;R<S;++R)d.setTransform(e[R]),d.drawGeometry(E[M])}}}return c.getImageData(0,0,u.width,u.height)}function RA(n,e,t){const i=[];if(t){const r=Math.floor(Math.round(n[0])*Bi),s=Math.floor(Math.round(n[1])*Bi),o=(Ot(r,0,t.width-1)+Ot(s,0,t.height-1)*t.width)*4,a=t.data[o],l=t.data[o+1],u=t.data[o+2]+256*(l+256*a),d=Math.floor((256*256*256-1)/e.length);u&&u%d===0&&i.push(e[u/d-1])}return i}const TA=.5,tg={Point:BA,LineString:DA,Polygon:jA,MultiPoint:GA,MultiLineString:kA,MultiPolygon:NA,GeometryCollection:FA,Circle:MA};function LA(n,e){return parseInt(ct(n),10)-parseInt(ct(e),10)}function OA(n,e){const t=$l(n,e);return t*t}function $l(n,e){return TA*n/e}function MA(n,e,t,i,r){const s=t.getFill(),o=t.getStroke();if(s||o){const l=n.getBuilder(t.getZIndex(),"Circle");l.setFillStrokeStyle(s,o),l.drawCircle(e,i)}const a=t.getText();if(a&&a.getText()){const l=(r||n).getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,i)}}function $u(n,e,t,i,r,s,o){let a=!1;const l=t.getImage();if(l){const c=l.getImageState();c==Mt.LOADED||c==Mt.ERROR?l.unlistenImageChange(r):(c==Mt.IDLE&&l.load(),l.listenImageChange(r),a=!0)}return PA(n,e,t,i,s,o),a}function PA(n,e,t,i,r,s){const o=t.getGeometryFunction()(e);if(!o)return;const a=o.simplifyTransformed(i,r);if(t.getRenderer())ig(n,a,t,e);else{const c=tg[a.getType()];c(n,a,t,e,s)}}function ig(n,e,t,i){if(e.getType()=="GeometryCollection"){const s=e.getGeometries();for(let o=0,a=s.length;o<a;++o)ig(n,s[o],t,i);return}n.getBuilder(t.getZIndex(),"Default").drawCustom(e,i,t.getRenderer(),t.getHitDetectionRenderer())}function FA(n,e,t,i,r){const s=e.getGeometriesArray();let o,a;for(o=0,a=s.length;o<a;++o){const l=tg[s[o].getType()];l(n,s[o],t,i,r)}}function DA(n,e,t,i,r){const s=t.getStroke();if(s){const a=n.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawLineString(e,i)}const o=t.getText();if(o&&o.getText()){const a=(r||n).getBuilder(t.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,i)}}function kA(n,e,t,i,r){const s=t.getStroke();if(s){const a=n.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawMultiLineString(e,i)}const o=t.getText();if(o&&o.getText()){const a=(r||n).getBuilder(t.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,i)}}function NA(n,e,t,i,r){const s=t.getFill(),o=t.getStroke();if(o||s){const l=n.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawMultiPolygon(e,i)}const a=t.getText();if(a&&a.getText()){const l=(r||n).getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,i)}}function BA(n,e,t,i,r){const s=t.getImage(),o=t.getText();let a;if(s){if(s.getImageState()!=Mt.LOADED)return;let l=n;if(r){const u=s.getDeclutterMode();if(u!=="none")if(l=r,u==="obstacle"){const d=n.getBuilder(t.getZIndex(),"Image");d.setImageStyle(s,a),d.drawPoint(e,i)}else o&&o.getText()&&(a={})}const c=l.getBuilder(t.getZIndex(),"Image");c.setImageStyle(s,a),c.drawPoint(e,i)}if(o&&o.getText()){let l=n;r&&(l=r);const c=l.getBuilder(t.getZIndex(),"Text");c.setTextStyle(o,a),c.drawText(e,i)}}function GA(n,e,t,i,r){const s=t.getImage(),o=t.getText();let a;if(s){if(s.getImageState()!=Mt.LOADED)return;let l=n;if(r){const u=s.getDeclutterMode();if(u!=="none")if(l=r,u==="obstacle"){const d=n.getBuilder(t.getZIndex(),"Image");d.setImageStyle(s,a),d.drawMultiPoint(e,i)}else o&&o.getText()&&(a={})}const c=l.getBuilder(t.getZIndex(),"Image");c.setImageStyle(s,a),c.drawMultiPoint(e,i)}if(o&&o.getText()){let l=n;r&&(l=r);const c=l.getBuilder(t.getZIndex(),"Text");c.setTextStyle(o,a),c.drawText(e,i)}}function jA(n,e,t,i,r){const s=t.getFill(),o=t.getStroke();if(s||o){const l=n.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawPolygon(e,i)}const a=t.getText();if(a&&a.getText()){const l=(r||n).getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,i)}}class zA extends Zf{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=pi(),this.wrappedRenderedExtent_=pi(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(e,t,i){const r=t.extent,s=t.viewState,o=s.center,a=s.resolution,l=s.projection,c=s.rotation,u=l.getExtent(),d=this.getLayer().getSource(),f=t.pixelRatio,_=t.viewHints,p=!(_[Jt.ANIMATING]||_[Jt.INTERACTING]),m=this.compositionContext_,y=Math.round(t.size[0]*f),v=Math.round(t.size[1]*f),A=d.getWrapX()&&l.canWrapX(),x=A?At(u):null,E=A?Math.ceil((r[2]-u[2])/x)+1:1;let M=A?Math.floor((r[0]-u[0])/x):0;do{const L=this.getRenderTransform(o,a,c,f,y,v,M*x);e.execute(m,1,L,c,p,void 0,i)}while(++M<E)}setupCompositionContext_(){if(this.opacity_!==1){const e=ni(this.context.canvas.width,this.context.canvas.height,zu);this.compositionContext_=e}else this.compositionContext_=this.context}releaseCompositionContext_(){if(this.opacity_!==1){const e=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=e,pa(this.compositionContext_),zu.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(e){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,e,e.declutterTree),this.releaseCompositionContext_())}renderFrame(e,t){const i=e.pixelRatio,r=e.layerStatesArray[e.layerIndex];fy(this.pixelTransform,1/i,1/i),dc(this.inversePixelTransform,this.pixelTransform);const s=$d(this.pixelTransform);this.useContainer(t,s,this.getBackground(e));const o=this.context,a=o.canvas,l=this.replayGroup_,c=this.declutterExecutorGroup;if((!l||l.isEmpty())&&(!c||c.isEmpty()))return null;const u=Math.round(e.size[0]*i),d=Math.round(e.size[1]*i);a.width!=u||a.height!=d?(a.width=u,a.height=d,a.style.transform!==s&&(a.style.transform=s)):this.containerReused||o.clearRect(0,0,u,d),this.preRender(o,e);const f=e.viewState;f.projection,this.opacity_=r.opacity,this.setupCompositionContext_();let _=!1,p=!0;if(r.extent&&this.clipping){const m=An(r.extent);p=ti(m,e.extent),_=p&&!kr(m,e.extent),_&&this.clipUnrotated(this.compositionContext_,e,m)}return p&&this.renderWorlds(l,e),_&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(o,e),this.renderedRotation_!==f.rotation&&(this.renderedRotation_=f.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(e){return new Promise(t=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const i=[this.context.canvas.width,this.context.canvas.height];Nt(this.pixelTransform,i);const r=this.renderedCenter_,s=this.renderedResolution_,o=this.renderedRotation_,a=this.renderedProjection_,l=this.wrappedRenderedExtent_,c=this.getLayer(),u=[],d=i[0]*Bi,f=i[1]*Bi;u.push(this.getRenderTransform(r,s,o,Bi,d,f,0).slice());const _=c.getSource(),p=a.getExtent();if(_.getWrapX()&&a.canWrapX()&&!kr(p,l)){let m=l[0];const y=At(p);let v=0,A;for(;m<p[0];)--v,A=y*v,u.push(this.getRenderTransform(r,s,o,Bi,d,f,A).slice()),m+=y;for(v=0,m=l[2];m>p[2];)++v,A=y*v,u.push(this.getRenderTransform(r,s,o,Bi,d,f,A).slice()),m-=y}this.hitDetectionImageData_=SA(i,u,this.renderedFeatures_,c.getStyleFunction(),l,s,o)}t(RA(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,i,r,s){if(!this.replayGroup_)return;const o=t.viewState.resolution,a=t.viewState.rotation,l=this.getLayer(),c={},u=function(_,p,m){const y=ct(_),v=c[y];if(v){if(v!==!0&&m<v.distanceSq){if(m===0)return c[y]=!0,s.splice(s.lastIndexOf(v),1),r(_,l,p);v.geometry=p,v.distanceSq=m}}else{if(m===0)return c[y]=!0,r(_,l,p);s.push(c[y]={feature:_,layer:l,geometry:p,distanceSq:m,callback:r})}};let d;const f=[this.replayGroup_];return this.declutterExecutorGroup&&f.push(this.declutterExecutorGroup),f.some(_=>d=_.forEachFeatureAtCoordinate(e,o,a,i,u,_===this.declutterExecutorGroup&&t.declutterTree?t.declutterTree.all().map(p=>p.value):null)),d}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),i=t.getSource();if(!i)return!1;const r=e.viewHints[Jt.ANIMATING],s=e.viewHints[Jt.INTERACTING],o=t.getUpdateWhileAnimating(),a=t.getUpdateWhileInteracting();if(this.ready&&!o&&r||!a&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=e.extent,c=e.viewState,u=c.projection,d=c.resolution,f=e.pixelRatio,_=t.getRevision(),p=t.getRenderBuffer();let m=t.getRenderOrder();m===void 0&&(m=LA);const y=c.center.slice(),v=fc(l,p*d),A=v.slice(),x=[v.slice()],E=u.getExtent();if(i.getWrapX()&&u.canWrapX()&&!kr(E,e.extent)){const ee=At(E),F=Math.max(At(v)/2,ee);v[0]=E[0]-F,v[2]=E[2]+F,lf(y,u);const N=nf(x[0],u);N[0]<E[0]&&N[2]<E[2]?x.push([N[0]+ee,N[1],N[2]+ee,N[3]]):N[0]>E[0]&&N[2]>E[2]&&x.push([N[0]-ee,N[1],N[2]-ee,N[3]])}if(this.ready&&this.renderedResolution_==d&&this.renderedRevision_==_&&this.renderedRenderOrder_==m&&kr(this.wrappedRenderedExtent_,v))return Rn(this.renderedExtent_,A)||(this.hitDetectionImageData_=null,this.renderedExtent_=A),this.renderedCenter_=y,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const M=new Hu($l(d,f),v,d,f);let L;this.getLayer().getDeclutter()&&(L=new Hu($l(d,f),v,d,f));let R;for(let ee=0,F=x.length;ee<F;++ee)i.loadFeatures(x[ee],d,u);const S=OA(d,f);let B=!0;const U=ee=>{let F;const N=ee.getStyleFunction()||t.getStyleFunction();if(N&&(F=N(ee,d)),F){const G=this.renderFeature(ee,S,F,M,R,L);B=B&&!G}},z=Ec(v),X=i.getFeaturesInExtent(z);m&&X.sort(m);for(let ee=0,F=X.length;ee<F;++ee)U(X[ee]);this.renderedFeatures_=X,this.ready=B;const V=M.finish(),Ae=new Ku(v,d,f,i.getOverlaps(),V,t.getRenderBuffer());return L&&(this.declutterExecutorGroup=new Ku(v,d,f,i.getOverlaps(),L.finish(),t.getRenderBuffer())),this.renderedResolution_=d,this.renderedRevision_=_,this.renderedRenderOrder_=m,this.renderedExtent_=A,this.wrappedRenderedExtent_=v,this.renderedCenter_=y,this.renderedProjection_=u,this.replayGroup_=Ae,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,i,r,s,o){if(!i)return!1;let a=!1;if(Array.isArray(i))for(let l=0,c=i.length;l<c;++l)a=$u(r,e,i[l],t,this.boundHandleStyleImageChange_,s,o)||a;else a=$u(r,e,i,t,this.boundHandleStyleImageChange_,s,o);return a}}var UA=zA;class WA extends sA{constructor(e){super(e)}createRenderer(){return new UA(this)}}var cn=WA;class YA{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let i=t.dataProjection?St(t.dataProjection):this.readProjection(e);t.extent&&i&&i.getUnits()==="tile-pixels"&&(i=St(i),i.setWorldExtent(t.extent)),t={dataProjection:i,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},e)}getType(){return Ge()}readFeature(e,t){return Ge()}readFeatures(e,t){return Ge()}readGeometry(e,t){return Ge()}readProjection(e){return Ge()}writeFeature(e,t){return Ge()}writeFeatures(e,t){return Ge()}writeGeometry(e,t){return Ge()}}function ng(n,e,t){const i=t?St(t.featureProjection):null,r=t?St(t.dataProjection):null;let s;if(i&&r&&!Hn(i,r)?s=(e?n.clone():n).transform(e?i:r,e?r:i):s=n,e&&t&&t.decimals!==void 0){const o=Math.pow(10,t.decimals),a=function(l){for(let c=0,u=l.length;c<u;++c)l[c]=Math.round(l[c]*o)/o;return l};s===n&&(s=n.clone()),s.applyTransform(a)}return s}class $o extends sr{constructor(e,t,i){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&i)this.setFlatCoordinates(t,e),this.ends_=i;else{let r=this.getLayout();const s=e,o=[],a=[];for(let l=0,c=s.length;l<c;++l){const u=s[l];l===0&&(r=u.getLayout()),zi(o,u.getFlatCoordinates()),a.push(o.length)}this.setFlatCoordinates(r,o),this.ends_=a}}appendLineString(e){this.flatCoordinates?zi(this.flatCoordinates,e.getFlatCoordinates().slice()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new $o(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<nr(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Rc(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Lc(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,i,r))}getCoordinateAtM(e,t,i){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,i=i!==void 0?i:!1,tA(this.flatCoordinates,0,this.ends_,this.stride,e,t,i))}getCoordinates(){return Cs(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new Kl(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,i=this.layout,r=[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=t[o],c=new Kl(e.slice(s,l),i);r.push(c),s=l}return r}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let i=0;const r=this.ends_,s=this.stride;for(let o=0,a=r.length;o<a;++o){const l=r[o],c=qf(t,i,l,s,.5);zi(e,c),i=l}return e}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=gv(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,i),new $o(t,"XY",i)}getType(){return"MultiLineString"}intersectsExtent(e){return Av(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=Oc(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}var XA=$o;class Zc extends sr{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){this.flatCoordinates?zi(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.changed()}clone(){const e=new Zc(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){if(r<nr(this.getExtent(),e,t))return r;const s=this.flatCoordinates,o=this.stride;for(let a=0,l=s.length;a<l;a+=o){const c=Zn(e,t,s[a],s[a+1]);if(c<r){r=c;for(let u=0;u<o;++u)i[u]=s[a+u];i.length=o}}return r}getCoordinates(){return xn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return e<0||t<=e?null:new Yi(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,i=this.stride,r=[];for(let s=0,o=e.length;s<o;s+=i){const a=new Yi(e.slice(s,s+i),t);r.push(a)}return r}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,i=this.stride;for(let r=0,s=t.length;r<s;r+=i){const o=t[r],a=t[r+1];if(gc(e,o,a))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=da(this.flatCoordinates,0,e,this.stride),this.changed()}}var rg=Zc;function HA(n,e,t,i){const r=[];let s=pi();for(let o=0,a=t.length;o<a;++o){const l=t[o];s=qd(n,e,l[0],i),r.push((s[0]+s[2])/2,(s[1]+s[3])/2),e=l[l.length-1]}return r}class Zo extends sr{constructor(e,t,i){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!i&&!Array.isArray(e[0])){let r=this.getLayout();const s=e,o=[],a=[];for(let l=0,c=s.length;l<c;++l){const u=s[l];l===0&&(r=u.getLayout());const d=o.length,f=u.getEnds();for(let _=0,p=f.length;_<p;++_)f[_]+=d;zi(o,u.getFlatCoordinates()),a.push(f)}t=r,e=o,i=a}t!==void 0&&i?(this.setFlatCoordinates(t,e),this.endss_=i):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const i=this.flatCoordinates.length;zi(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let r=0,s=t.length;r<s;++r)t[r]+=i}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let r=0;r<e;++r)t[r]=this.endss_[r].slice();const i=new Zo(this.flatCoordinates.slice(),this.layout,t);return i.applyProperties(this),i}closestPointXY(e,t,i,r){return r<nr(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(hv(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),uv(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,i,r))}containsXY(e,t){return vv(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return _v(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),bu(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,jl(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=HA(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=wv(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new rg(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;bv(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=bu(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=mv(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,i),new Zo(t,"XY",i)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const s=this.endss_[e-1];t=s[s.length-1]}const i=this.endss_[e].slice(),r=i[i.length-1];if(t!==0)for(let s=0,o=i.length;s<o;++s)i[s]-=t;return new Yo(this.flatCoordinates.slice(t,r),this.layout,i)}getPolygons(){const e=this.layout,t=this.flatCoordinates,i=this.endss_,r=[];let s=0;for(let o=0,a=i.length;o<a;++o){const l=i[o].slice(),c=l[l.length-1];if(s!==0)for(let d=0,f=l.length;d<f;++d)l[d]-=s;const u=new Yo(t.slice(s,c),e,l);r.push(u),s=c}return r}getType(){return"MultiPolygon"}intersectsExtent(e){return xv(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const i=fv(this.flatCoordinates,0,e,this.stride,this.endss_);if(i.length===0)this.flatCoordinates.length=0;else{const r=i[i.length-1];this.flatCoordinates.length=r.length===0?0:r[r.length-1]}this.changed()}}var QA=Zo;class qo extends pf{constructor(e){super(),this.geometries_=e||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(xt),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(!!this.geometries_)for(let e=0,t=this.geometries_.length;e<t;++e)this.changeEventsKeys_.push(tt(this.geometries_[e],Ue.CHANGE,this.changed,this))}clone(){const e=new qo(null);return e.setGeometries(this.geometries_),e.applyProperties(this),e}closestPointXY(e,t,i,r){if(r<nr(this.getExtent(),e,t))return r;const s=this.geometries_;for(let o=0,a=s.length;o<a;++o)r=s[o].closestPointXY(e,t,i,r);return r}containsXY(e,t){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)if(i[r].containsXY(e,t))return!0;return!1}computeExtent(e){ks(e);const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)Jd(e,t[i].getExtent());return e}getGeometries(){return Zu(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)t[i].getType()===this.getType()?e=e.concat(t[i].getGeometriesArrayRecursive()):e.push(t[i]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],i=this.geometries_;let r=!1;for(let s=0,o=i.length;s<o;++s){const a=i[s],l=a.getSimplifiedGeometry(e);t.push(l),l!==a&&(r=!0)}if(r){const s=new qo(null);return s.setGeometriesArray(t),s}return this.simplifiedGeometryMaxMinSquaredTolerance=e,this}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)if(t[i].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)i[r].rotate(e,t);this.changed()}scale(e,t,i){i||(i=ir(this.getExtent()));const r=this.geometries_;for(let s=0,o=r.length;s<o;++s)r[s].scale(e,t,i);this.changed()}setGeometries(e){this.setGeometriesArray(Zu(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)t[i].applyTransform(e);this.changed()}translate(e,t){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)i[r].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function Zu(n){const e=[];for(let t=0,i=n.length;t<i;++t)e.push(n[t].clone());return e}var VA=qo;class KA extends YA{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(Lo(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(Lo(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return Ge()}readFeaturesFromObject(e,t){return Ge()}readGeometry(e,t){return this.readGeometryFromObject(Lo(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return Ge()}readProjection(e){return this.readProjectionFromObject(Lo(e))}readProjectionFromObject(e){return Ge()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return Ge()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return Ge()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return Ge()}}function Lo(n){if(typeof n=="string"){const e=JSON.parse(n);return e||null}else if(n!==null)return n;return null}var $A=KA;class ZA extends $A{constructor(e){e=e||{},super(),this.dataProjection=St(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=St(e.featureProjection)),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let i=null;e.type==="Feature"?i=e:i={type:"Feature",geometry:e,properties:null};const r=Zl(i.geometry,t),s=new sn;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in i!==void 0&&s.setGeometryName(i.geometry_name),s.setGeometry(r),"id"in i&&s.setId(i.id),i.properties&&s.setProperties(i.properties,!0),s}readFeaturesFromObject(e,t){const i=e;let r=null;if(i.type==="FeatureCollection"){const s=e;r=[];const o=s.features;for(let a=0,l=o.length;a<l;++a)r.push(this.readFeatureFromObject(o[a],t))}else r=[this.readFeatureFromObject(e,t)];return r}readGeometryFromObject(e,t){return Zl(e,t)}readProjectionFromObject(e){const t=e.crs;let i;return t?t.type=="name"?i=St(t.properties.name):t.type==="EPSG"?i=St("EPSG:"+t.properties.code):Ve(!1,36):i=this.dataProjection,i}writeFeatureObject(e,t){t=this.adaptOptions(t);const i={type:"Feature",geometry:null,properties:null},r=e.getId();if(r!==void 0&&(i.id=r),!e.hasProperties())return i;const s=e.getProperties(),o=e.getGeometry();return o&&(i.geometry=ql(o,t),delete s[e.getGeometryName()]),Wr(s)||(i.properties=s),i}writeFeaturesObject(e,t){t=this.adaptOptions(t);const i=[];for(let r=0,s=e.length;r<s;++r)i.push(this.writeFeatureObject(e[r],t));return{type:"FeatureCollection",features:i}}writeGeometryObject(e,t){return ql(e,this.adaptOptions(t))}}function Zl(n,e){if(!n)return null;let t;switch(n.type){case"Point":{t=JA(n);break}case"LineString":{t=ex(n);break}case"Polygon":{t=rx(n);break}case"MultiPoint":{t=ix(n);break}case"MultiLineString":{t=tx(n);break}case"MultiPolygon":{t=nx(n);break}case"GeometryCollection":{t=qA(n);break}default:throw new Error("Unsupported GeoJSON type: "+n.type)}return ng(t,!1,e)}function qA(n,e){const t=n.geometries.map(function(i){return Zl(i,e)});return new VA(t)}function JA(n){return new Yi(n.coordinates)}function ex(n){return new Kl(n.coordinates)}function tx(n){return new XA(n.coordinates)}function ix(n){return new rg(n.coordinates)}function nx(n){return new QA(n.coordinates)}function rx(n){return new Yo(n.coordinates)}function ql(n,e){n=ng(n,!0,e);const t=n.getType();let i;switch(t){case"Point":{i=hx(n);break}case"LineString":{i=ox(n);break}case"Polygon":{i=ux(n,e);break}case"MultiPoint":{i=lx(n);break}case"MultiLineString":{i=ax(n);break}case"MultiPolygon":{i=cx(n,e);break}case"GeometryCollection":{i=sx(n,e);break}case"Circle":{i={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return i}function sx(n,e){e=Object.assign({},e),delete e.featureProjection;const t=n.getGeometriesArray().map(function(i){return ql(i,e)});return{type:"GeometryCollection",geometries:t}}function ox(n,e){return{type:"LineString",coordinates:n.getCoordinates()}}function ax(n,e){return{type:"MultiLineString",coordinates:n.getCoordinates()}}function lx(n,e){return{type:"MultiPoint",coordinates:n.getCoordinates()}}function cx(n,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:n.getCoordinates(t)}}function hx(n,e){return{type:"Point",coordinates:n.getCoordinates()}}function ux(n,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:n.getCoordinates(t)}}var Vr=ZA;const wl="units",dx=[1,2,5],ds=25.4/.28;class fx extends _a{constructor(e){e=e||{};const t=document.createElement("div");t.style.pointerEvents="none",super({element:t,render:e.render,target:e.target}),this.on,this.once,this.un;const i=e.className!==void 0?e.className:e.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=i+"-inner",this.element.className=i+" "+Bs,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=e.minWidth!==void 0?e.minWidth:64,this.maxWidth_=e.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(wl,this.handleUnitsChanged_),this.setUnits(e.units||"metric"),this.scaleBar_=e.bar||!1,this.scaleBarSteps_=e.steps||4,this.scaleBarText_=e.text||!1,this.dpi_=e.dpi||void 0}getUnits(){return this.get(wl)}handleUnitsChanged_(){this.updateElement_()}setUnits(e){this.set(wl,e)}setDpi(e){this.dpi_=e}updateElement_(){const e=this.viewState_;if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=e.center,i=e.projection,r=this.getUnits(),s=r=="degrees"?"degrees":"m";let o=zo(i,e.resolution,t,s);const a=this.minWidth_*(this.dpi_||ds)/ds,l=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||ds)/ds:void 0;let c=a*o,u="";if(r=="degrees"){const x=Yr.degrees;c*=x,c<x/60?(u="\u2033",o*=3600):c<x?(u="\u2032",o*=60):u="\xB0"}else r=="imperial"?c<.9144?(u="in",o/=.0254):c<1609.344?(u="ft",o/=.3048):(u="mi",o/=1609.344):r=="nautical"?(o/=1852,u="NM"):r=="metric"?c<.001?(u="\u03BCm",o*=1e6):c<1?(u="mm",o*=1e3):c<1e3?u="m":(u="km",o/=1e3):r=="us"?c<.9144?(u="in",o*=39.37):c<1609.344?(u="ft",o/=.30480061):(u="mi",o/=1609.3472):Ve(!1,33);let d=3*Math.floor(Math.log(a*o)/Math.log(10)),f,_,p,m,y,v;for(;;){p=Math.floor(d/3);const x=Math.pow(10,p);if(f=dx[(d%3+3)%3]*x,_=Math.round(f/o),isNaN(_)){this.element.style.display="none",this.renderedVisible_=!1;return}if(l!==void 0&&_>=l){f=m,_=y,p=v;break}else if(_>=a)break;m=f,y=_,v=p,++d}const A=this.scaleBar_?this.createScaleBar(_,f,u):f.toFixed(p<0?-p:0)+" "+u;this.renderedHTML_!=A&&(this.innerElement_.innerHTML=A,this.renderedHTML_=A),this.renderedWidth_!=_&&(this.innerElement_.style.width=_+"px",this.renderedWidth_=_),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(e,t,i){const r=this.getScaleForResolution(),s=r<1?Math.round(1/r).toLocaleString()+" : 1":"1 : "+Math.round(r).toLocaleString(),o=this.scaleBarSteps_,a=e/o,l=[this.createMarker("absolute")];for(let u=0;u<o;++u){const d=u%2===0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";l.push(`<div><div class="ol-scale-singlebar ${d}" style="width: ${a}px;"></div>`+this.createMarker("relative")+(u%2===0||o===2?this.createStepText(u,e,!1,t,i):"")+"</div>")}return l.push(this.createStepText(o,e,!0,t,i)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${e}px;">`+s+"</div>":"")+l.join("")}createMarker(e){return`<div class="ol-scale-step-marker" style="position: ${e}; top: ${e==="absolute"?3:-10}px;"></div>`}createStepText(e,t,i,r,s){const a=(e===0?0:Math.round(r/this.scaleBarSteps_*e*100)/100)+(e===0?"":" "+s),l=e===0?-3:t/this.scaleBarSteps_*-1,c=e===0?0:t/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${l}px;text-align: ${e===0?"left":"center"};min-width: ${c}px;left: ${i?t+"px":"unset"};">`+a+"</div>"}getScaleForResolution(){const e=zo(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m"),t=this.dpi_||ds,i=1e3/25.4;return e*i*t}render(e){const t=e.frameState;t?this.viewState_=t.viewState:this.viewState_=null,this.updateElement_()}}var xa=fx;const bt={ACCURACY:"accuracy",ACCURACY_GEOMETRY:"accuracyGeometry",ALTITUDE:"altitude",ALTITUDE_ACCURACY:"altitudeAccuracy",HEADING:"heading",POSITION:"position",PROJECTION:"projection",SPEED:"speed",TRACKING:"tracking",TRACKING_OPTIONS:"trackingOptions"},gx={ERROR:"error"};class px extends Xi{constructor(e){super(gx.ERROR),this.code=e.code,this.message=e.message}}class mx extends Ii{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.position_=null,this.transform_=wc,this.watchId_=void 0,this.addChangeListener(bt.PROJECTION,this.handleProjectionChanged_),this.addChangeListener(bt.TRACKING,this.handleTrackingChanged_),e.projection!==void 0&&this.setProjection(e.projection),e.trackingOptions!==void 0&&this.setTrackingOptions(e.trackingOptions),this.setTracking(e.tracking!==void 0?e.tracking:!1)}disposeInternal(){this.setTracking(!1),super.disposeInternal()}handleProjectionChanged_(){const e=this.getProjection();e&&(this.transform_=ua(St("EPSG:4326"),e),this.position_&&this.set(bt.POSITION,this.transform_(this.position_)))}handleTrackingChanged_(){if("geolocation"in navigator){const e=this.getTracking();e&&this.watchId_===void 0?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):!e&&this.watchId_!==void 0&&(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}}positionChange_(e){const t=e.coords;this.set(bt.ACCURACY,t.accuracy),this.set(bt.ALTITUDE,t.altitude===null?void 0:t.altitude),this.set(bt.ALTITUDE_ACCURACY,t.altitudeAccuracy===null?void 0:t.altitudeAccuracy),this.set(bt.HEADING,t.heading===null?void 0:qn(t.heading)),this.position_?(this.position_[0]=t.longitude,this.position_[1]=t.latitude):this.position_=[t.longitude,t.latitude];const i=this.transform_(this.position_);this.set(bt.POSITION,i.slice()),this.set(bt.SPEED,t.speed===null?void 0:t.speed);const r=Cv(this.position_,t.accuracy);r.applyTransform(this.transform_),this.set(bt.ACCURACY_GEOMETRY,r),this.changed()}positionError_(e){this.dispatchEvent(new px(e))}getAccuracy(){return this.get(bt.ACCURACY)}getAccuracyGeometry(){return this.get(bt.ACCURACY_GEOMETRY)||null}getAltitude(){return this.get(bt.ALTITUDE)}getAltitudeAccuracy(){return this.get(bt.ALTITUDE_ACCURACY)}getHeading(){return this.get(bt.HEADING)}getPosition(){return this.get(bt.POSITION)}getProjection(){return this.get(bt.PROJECTION)}getSpeed(){return this.get(bt.SPEED)}getTracking(){return this.get(bt.TRACKING)}getTrackingOptions(){return this.get(bt.TRACKING_OPTIONS)}setProjection(e){this.set(bt.PROJECTION,St(e))}setTracking(e){this.set(bt.TRACKING,e)}setTrackingOptions(e){this.set(bt.TRACKING_OPTIONS,e)}}var sg=mx;class Ea extends Ln{constructor(){super({source:new Xw,zIndex:1})}}class _x extends Ln{constructor(){super({source:new Tn({url:"https://{a-c}.tile.opentopomap.org/{z}/{x}/{y}.png"}),zIndex:1})}}class og extends Ln{constructor(){super({source:new Tn({url:"https://mapserver.mapy.cz/turist-m/retina/{z}-{x}-{y}",tilePixelRatio:2}),zIndex:1})}}class ag extends Ln{constructor(){super({source:new Tn({url:"https://{a-c}.tile.thunderforest.com/outdoors/{z}/{x}/{y}.png"}),zIndex:1})}}class lg extends Ln{constructor(){super({source:new Tn({url:"https://mt0.google.com/vt/lyrs=p&hl=en&x={x}&y={y}&z={z}"}),zIndex:1})}}class cg extends Ln{constructor(){super({source:new Tn({url:"https://mt{0-3}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}"}),zIndex:1})}}let yx=12,vx=1,wx=new Rt({image:new Kt({radius:yx,fill:new Gt({color:[51,169,255,.125]}),stroke:new ii({color:"#33A9FF",width:vx,lineDash:[6]})})}),Yn=new Rt({}),Ax=new Rt({image:new Kt({radius:12,fill:new Gt({color:[51,169,255,.1]}),stroke:new ii({color:"#33A9FF",width:1})}),zIndex:5});window.color=[255,102,51,1];let xx=new Rt({image:new Kt({radius:12,fill:new Gt({color:[255,211,0,.25]}),stroke:new ii({color:window.color,width:1})}),zIndex:10});var ws=(n,e)=>!window.rodnikMap.filters.spring&&n.get("type")=="Spring"||!window.rodnikMap.filters.water_well&&n.get("type")=="Water well"||!window.rodnikMap.filters.water_tap&&n.get("type")=="Water tap"||!window.rodnikMap.filters.drinking_water&&n.get("type")=="Drinking water source"||!window.rodnikMap.filters.fountain&&n.get("type")=="Fountain"||!window.rodnikMap.filters.other&&n.get("type")=="Water source"||window.rodnikMap.filters.confirmed&&!n.get("waterConfirmed")?Yn:n.get("hasReports")>0?xx:n.get("intermittent")=="yes"?wx:Ax,hg={exports:{}};(function(n,e){var t=function(){var i={},r=Math.PI/180,s=180/Math.PI,o=6378137,a=20037508342789244e-9;function l(u){return Number(u)===u&&u%1!==0}function c(u){if(u=u||{},this.size=u.size||256,this.expansion=u.antimeridian===!0?2:1,!i[this.size]){var d=this.size,f=i[this.size]={};f.Bc=[],f.Cc=[],f.zc=[],f.Ac=[];for(var _=0;_<30;_++)f.Bc.push(d/360),f.Cc.push(d/(2*Math.PI)),f.zc.push(d/2),f.Ac.push(d),d*=2}this.Bc=i[this.size].Bc,this.Cc=i[this.size].Cc,this.zc=i[this.size].zc,this.Ac=i[this.size].Ac}return c.prototype.px=function(u,d){if(l(d)){var f=this.size*Math.pow(2,d),_=f/2,p=f/360,m=f/(2*Math.PI),y=f,v=Math.min(Math.max(Math.sin(r*u[1]),-.9999),.9999),A=_+u[0]*p,x=_+.5*Math.log((1+v)/(1-v))*-m;return A>y*this.expansion&&(A=y*this.expansion),x>y&&(x=y),[A,x]}else{var _=this.zc[d],v=Math.min(Math.max(Math.sin(r*u[1]),-.9999),.9999),A=Math.round(_+u[0]*this.Bc[d]),x=Math.round(_+.5*Math.log((1+v)/(1-v))*-this.Cc[d]);return A>this.Ac[d]*this.expansion&&(A=this.Ac[d]*this.expansion),x>this.Ac[d]&&(x=this.Ac[d]),[A,x]}},c.prototype.ll=function(u,d){if(l(d)){var f=this.size*Math.pow(2,d),_=f/360,p=f/(2*Math.PI),m=f/2,y=(u[1]-m)/-p,v=(u[0]-m)/_,A=s*(2*Math.atan(Math.exp(y))-.5*Math.PI);return[v,A]}else{var y=(u[1]-this.zc[d])/-this.Cc[d],v=(u[0]-this.zc[d])/this.Bc[d],A=s*(2*Math.atan(Math.exp(y))-.5*Math.PI);return[v,A]}},c.prototype.bbox=function(u,d,f,_,p){_&&(d=Math.pow(2,f)-1-d);var m=[u*this.size,(+d+1)*this.size],y=[(+u+1)*this.size,d*this.size],v=this.ll(m,f).concat(this.ll(y,f));return p==="900913"?this.convert(v,"900913"):v},c.prototype.xyz=function(u,d,f,_){_==="900913"&&(u=this.convert(u,"WGS84"));var p=[u[0],u[1]],m=[u[2],u[3]],y=this.px(p,d),v=this.px(m,d),A=[Math.floor(y[0]/this.size),Math.floor((v[0]-1)/this.size)],x=[Math.floor(v[1]/this.size),Math.floor((y[1]-1)/this.size)],E={minX:Math.min.apply(Math,A)<0?0:Math.min.apply(Math,A),minY:Math.min.apply(Math,x)<0?0:Math.min.apply(Math,x),maxX:Math.max.apply(Math,A),maxY:Math.max.apply(Math,x)};if(f){var M={minY:Math.pow(2,d)-1-E.maxY,maxY:Math.pow(2,d)-1-E.minY};E.minY=M.minY,E.maxY=M.maxY}return E},c.prototype.convert=function(u,d){return d==="900913"?this.forward(u.slice(0,2)).concat(this.forward(u.slice(2,4))):this.inverse(u.slice(0,2)).concat(this.inverse(u.slice(2,4)))},c.prototype.forward=function(u){var d=[o*u[0]*r,o*Math.log(Math.tan(Math.PI*.25+.5*u[1]*r))];return d[0]>a&&(d[0]=a),d[0]<-a&&(d[0]=-a),d[1]>a&&(d[1]=a),d[1]<-a&&(d[1]=-a),d},c.prototype.inverse=function(u){return[u[0]*s/o,(Math.PI*.5-2*Math.atan(Math.exp(-u[1]/o)))*s]},c}();n.exports=t})(hg);var Kr=hg.exports;let Ex=new Kr({antimeridian:!1}),qu=8;class bx extends Hi{constructor(){super({format:new Vr,strategy:$c(Aa({maxZoom:8,minZoom:8})),url:(e,t,i)=>{let r=nn([e[0],e[1]]),s=nn([e[2],e[3]]),o=Ex.xyz([r[0],r[1],s[0],s[1]],qu);return"/tiles/"+qu+"/"+o.minX+"/"+o.minY+".json"}}),this.on("featuresloadend",e=>{window.rodnikMap.featuresLoadEnd()})}}new Kr({antimeridian:!1});class Ju extends cn{constructor(){super({minZoom:9,style:ws,zIndex:500,opacity:.8})}updateStyle(){this.setStyle(ws)}}let Cx=new Rt({image:new Kt({radius:30,fill:new Gt({color:[51,169,255,.33]})})}),Ix=new Rt({image:new Kt({radius:20,fill:new Gt({color:[255,180,0,.5]})})});var ug=(n,e)=>n.get("hasReports")>0?Ix:Cx,Sx=new Kr({antimeridian:!1}),Oo=5;class Rx extends cn{constructor(){super({minZoom:6,maxZoom:9,source:new Hi({format:new Vr,strategy:$c(Aa({maxZoom:Oo,minZoom:Oo})),url:(e,t,i)=>{let r=nn([e[0],e[1]]),s=nn([e[2],e[3]]),o=Sx.xyz([r[0],r[1],s[0],s[1]],Oo);return"/tiles/"+Oo+"/"+o.minX+"/"+o.minY+".json"}}),style:ug,zIndex:300,opacity:.6})}}let Tx=new Rt({image:new Kt({radius:40,fill:new Gt({color:[51,169,255,.33]})})}),Lx=new Rt({image:new Kt({radius:30,fill:new Gt({color:[255,180,0,.5]})})});var dg=(n,e)=>n.get("hasReports")>0?Lx:Tx;new Kr({antimeridian:!1});class Ox extends cn{constructor(){super({minZoom:0,maxZoom:6,source:new Hi({format:new Vr,url:"/tiles/0/0/0.json"}),style:dg,zIndex:100,opacity:.6})}}var Mx=new Kr({antimeridian:!1}),Mo=5;class Px extends cn{constructor(){super({minZoom:6,maxZoom:9,source:new Hi({format:new Vr,strategy:$c(Aa({maxZoom:Mo,minZoom:Mo})),url:(e,t,i)=>{let r=nn([e[0],e[1]]),s=nn([e[2],e[3]]),o=Mx.xyz([r[0],r[1],s[0],s[1]],Mo);return"/watered-tiles/"+Mo+"/"+o.minX+"/"+o.minY+".json"}}),style:ug,zIndex:400,opacity:.6})}}new Kr({antimeridian:!1});class Fx extends cn{constructor(){super({minZoom:0,maxZoom:6,source:new Hi({format:new Vr,url:"/watered-tiles/0/0/0.json"}),style:dg,zIndex:200,opacity:.6})}}class Dx extends Ln{constructor(){super({source:new Tn({maxZoom:12,url:"https://heatmap-external-{a-c}.strava.com/tiles/all/hot/{z}/{x}/{y}.png?px=256"}),zIndex:10})}}class kx extends Ln{constructor(){super({source:new Tn({url:"https://gps-{a-c}.tile.openstreetmap.org/lines/{z}/{x}/{y}.png"}),zIndex:10})}}let fg=12,Nx=1;new Rt({image:new Kt({radius:fg,fill:new Gt({color:[67,191,225,.125]}),stroke:new ii({color:"#67BFFF",width:Nx,lineDash:[6]})})});let Bx=new Rt({image:new Kt({radius:fg,fill:new Gt({color:[255,255,255,0]}),stroke:new ii({color:"#cc0000",width:2})})});function gg(){let n=parseFloat(localStorage.getItem("centerLatitude")),e=parseFloat(localStorage.getItem("centerLongitude"));return isNaN(e)||isNaN(n)?gi([19.748,49.213]):[e,n]}function pg(){let n=parseFloat(localStorage.getItem("zoom"));return isNaN(n)?3:n}function qc(){let n=localStorage.getItem("source");return n||"osm"}function Jl(n){localStorage.setItem("centerLongitude",n[0]),localStorage.setItem("centerLatitude",n[1])}function ec(n){localStorage.setItem("zoom",n)}function mg(n){localStorage.setItem("source",n)}class _g extends cn{constructor(e,t){super({source:new Hi({features:[e,t]}),zIndex:1e3})}}class Gx extends Hi{constructor(){super({format:new Vr}),this.userId=null,this.on("featuresloadend",e=>{window.rodnikMap.featuresLoadEnd(),window.rodnikMap.locateWorld()})}getUser(){return this.userId}setUser(e){this.userId=e;const t="/users/"+parseInt(e)+"/springs.json";this.getUrl()!==t&&(this.setUrl(t),this.refresh())}}class jx{constructor(e){this.finalZoom=9,this.approximatedZoom=6,this.elementId=e,this.filters={all:!0,spring:!0,water_well:!0,water_tap:!0,drinking_water:!0,fountain:!0,other:!0,confirmed:!1},this.overlays={stravaPublic:!1,osmTraces:!1},this.currentOverlays={...this.overlays},this.osmLayer=new Ea,this.mapyLayer=new og,this.outdoorsLayer=new ag,this.openTopoMapLayer=new _x,this.googleTerrainLayer=new lg,this.googleSatelliteLayer=new cg,this.stravaPublicLayer=new Dx,this.osmTracesLayer=new kx,this.currentLayer=this.osmLayer,this.springsFinalLayer=new Ju,this.springsApproximatedLayer=new Rx,this.springsDistantLayer=new Ox,this.wateredSpringsApproximatedLayer=new Px,this.wateredSpringsDistantLayer=new Fx,this.springsFinalSource=new bx,this.springsUserSource=new Gx,this.featureToBeSelected=null,this.selectedFeature=null,this.featureIdToBeSelected=null,this.view=new ci({center:gg(),zoom:pg(),enableRotation:!1}),this.geolocation=new sg({trackingOptions:{enableHighAccuracy:!0},projection:this.view.getProjection()}),this.scaleControl=new xa({units:"metric",bar:!1,steps:4,text:!0,minWidth:100}),this.map=new ya({controls:Gs().extend([this.scaleControl]),target:this.elementId,layers:[this.wateredSpringsDistantLayer,this.wateredSpringsApproximatedLayer,this.springsDistantLayer,this.springsApproximatedLayer,this.springsFinalLayer],view:this.view,moveTolerance:5}),this.source(qc()),this.map.on("moveend",t=>{Jl(this.map.getView().getCenter()),ec(this.map.getView().getZoom())}),this.map.on("click",t=>{let i=this.map.getFeaturesAtPixel(t.pixel,{hitTolerance:2,layerFilter:function(r){return r instanceof Ju}});i.length>0?this.selectFeature(i[0]):this.deselectFeature()})}featuresLoadEnd(){let e=this.featureIdToBeSelected;e&&(this.featureIdToBeSelected=null,this.highlightFeatureById(e))}locateMe(){this.geolocation.getPosition()?this.view.animate({center:this.geolocation.getPosition(),zoom:18,duration:250}):navigator.geolocation.getCurrentPosition(e=>{this.view.animate({center:gi([e.coords.longitude,e.coords.latitude]),zoom:18,duration:250}),this.watchMe()},e=>{console.log(e)})}watchMe(){this.geolocation.setTracking(!0);const e=new sn;this.geolocation.on("change:accuracyGeometry",()=>{e.setGeometry(this.geolocation.getAccuracyGeometry())}),this.geolocation.on("error",function(i){console.log(i)});const t=new sn;t.setStyle(new Rt({image:new Kt({radius:6,fill:new Gt({color:"#000000"}),stroke:new ii({color:"#fff",width:2})})})),e.setStyle(new Rt({fill:new Gt({color:[255,255,255,.5]}),stroke:new ii({color:"#00000",width:2})})),this.geolocation.on("change:position",()=>{const i=this.geolocation.getPosition();t.setGeometry(i?new Yi(i):null)}),this.geolocationLayer=new _g(e,t),this.map.addLayer(this.geolocationLayer)}source(e){switch(e){case"osm":this.map.removeLayer(this.currentLayer),this.currentLayer=this.osmLayer,this.map.addLayer(this.currentLayer);break;case"mapy":this.map.removeLayer(this.currentLayer),this.currentLayer=this.mapyLayer,this.map.addLayer(this.currentLayer);break;case"outdoors":this.map.removeLayer(this.currentLayer),this.currentLayer=this.outdoorsLayer,this.map.addLayer(this.currentLayer);break;case"openTopoMap":this.map.removeLayer(this.currentLayer),this.currentLayer=this.openTopoMapLayer,this.map.addLayer(this.currentLayer);break;case"terrain":this.map.removeLayer(this.currentLayer),this.currentLayer=this.googleTerrainLayer,this.map.addLayer(this.currentLayer);break;case"satellite":this.map.removeLayer(this.currentLayer),this.currentLayer=this.googleSatelliteLayer,this.map.addLayer(this.currentLayer);break}mg(e)}updateOverlays(){this.overlays.stravaPublic?this.currentOverlays.stravaPublic||(this.map.addLayer(this.stravaPublicLayer),this.currentOverlays.stravaPublic=!0):this.currentOverlays.stravaPublic&&(this.map.removeLayer(this.stravaPublicLayer),this.currentOverlays.stravaPublic=!1),this.overlays.osmTraces?this.currentOverlays.osmTraces||(this.map.addLayer(this.osmTracesLayer),this.currentOverlays.osmTraces=!0):this.currentOverlays.osmTraces&&(this.map.removeLayer(this.osmTracesLayer),this.currentOverlays.osmTraces=!1)}highlightFeatureById(e){let t=window.rodnikMap.springsFinalLayer.getSource().getFeatureById(e);t?(this.locateFeature(t),this.highlightFeature(t)):this.featureIdToBeSelected=e}locateFeature(e){this.view.animate({center:e.getGeometry().flatCoordinates,duration:250})}locate(e){this.view.animate({center:gi(e),zoom:14,duration:250})}locateWorld(){this.view.fit(this.springsFinalLayer.getSource().getExtent()),this.view.setZoom(Math.floor(this.view.getZoom()-1))}highlightFeature(e){if(this.previouslyHighlightedFeature){if(e.get("id")==this.previouslyHighlightedFeature.get("id"))return!1;this.previouslyHighlightedFeature.setStyle(ws)}this.dehighlightPreviousFeature(),this.previouslyHighlightedFeature=e,e.setStyle(Bx),this.fullscreen&&(this.setFullscreen(!1),this.locateFeature(e))}selectFeature(e){this.highlightFeature(e);let t=e.get("id");const i=new CustomEvent("spring-selected-on-map",{detail:{id:t,feature:e}});window.dispatchEvent(i)}dehighlightFeature(){this.previouslyHighlightedFeature&&(this.previouslyHighlightedFeature.setStyle(ws),this.previouslyHighlightedFeature=null)}deselectFeature(){if(this.previouslyHighlightedFeature){this.dehighlightFeature();const e=new CustomEvent("spring-deselected-on-map");window.dispatchEvent(e)}}dehighlightPreviousFeature(){this.previouslyHighlightedFeature&&this.previouslyHighlightedFeature.setStyle(ws),this.previouslyHighlightedFeature=null}springsSource(e){e?(this.mode="user",this.springsFinalLayer.setMinZoom(0),this.springsApproximatedLayer.setVisible(!1),this.springsDistantLayer.setVisible(!1),this.wateredSpringsApproximatedLayer.setVisible(!1),this.wateredSpringsDistantLayer.setVisible(!1),this.springsUserSource.getUser()==e?(this.springsFinalLayer.setSource(this.springsUserSource),this.locateWorld()):(this.springsUserSource.setUser(e),this.springsFinalLayer.setSource(this.springsUserSource))):(this.mode="global",this.springsFinalLayer.setMinZoom(9),this.springsApproximatedLayer.setVisible(!0),this.springsDistantLayer.setVisible(!0),this.wateredSpringsApproximatedLayer.setVisible(!0),this.wateredSpringsDistantLayer.setVisible(!0),this.springsFinalLayer.setSource(this.springsFinalSource))}setFullscreen(e){this.fullscreen=e}}class zx{constructor(e,t){this.osmLayer=new Ea,this.springLayer=new cn({source:new Hi({features:[new sn({geometry:new Yi(gi(t))})]}),style:new Rt({image:new Kt({radius:12,fill:new Gt({color:[0,0,0,.1]}),stroke:new ii({color:[0,0,0,1],width:.5})})}),zIndex:500}),this.view=new ci({center:gi(t),zoom:18,enableRotation:!1}),this.scaleControl=new xa({units:"metric",bar:!1,steps:4,text:!0,minWidth:100}),this.map=new ya({controls:Gs().extend([this.scaleControl]),target:e,layers:[this.osmLayer,this.springLayer],view:this.view})}}class Ux{constructor(e,t){this.osmLayer=new Ea,this.mapyLayer=new og,this.outdoorsLayer=new ag,this.googleTerrainLayer=new lg,this.googleSatelliteLayer=new cg;let i=!!t.length,r=i?gi(t):gg();i&&(this.springLayer=new cn({source:new Hi({features:[new sn({geometry:new Yi(gi(t))})]}),style:new Rt({image:new Kt({radius:12,fill:new Gt({color:[0,0,0,0]}),stroke:new ii({color:[0,0,0,.33],width:2})})}),zIndex:500})),this.view=new ci({center:r,zoom:pg(),enableRotation:!1}),this.geolocation=new sg({trackingOptions:{enableHighAccuracy:!0},projection:this.view.getProjection()}),this.scaleControl=new xa({units:"metric",bar:!1,steps:4,text:!0,minWidth:100}),this.map=new ya({controls:Gs().extend([this.scaleControl]),target:e,view:this.view}),this.source(qc()),i&&this.map.addLayer(this.springLayer),this.map.on("moveend",s=>{let o=nn(this.view.getCenter());o[0]=o[0].toFixed(6),o[1]=o[1].toFixed(6),o=o.reverse().join(", "),this.mapMoved(o),Jl(this.map.getView().getCenter()),ec(this.map.getView().getZoom())}),this.map.on("pointerdrag",s=>{let o=nn(this.view.getCenter());o[0]=o[0].toFixed(6),o[1]=o[1].toFixed(6),o=o.reverse().join(", "),this.mapMoved(o)}),this.map.on("click",s=>{let o=this.map.getEventPixel(s.originalEvent),a=nn(this.map.getCoordinateFromPixel(o));this.updateCoordinates(a)})}updateCoordinates(e){let t=this.view.getZoom();Jl(e),ec(t),this.view.animate({center:gi(e),zoom:t,duration:100})}source(e){switch(e){case"osm":this.map.removeLayer(this.currentLayer),this.currentLayer=this.osmLayer,this.map.addLayer(this.currentLayer);break;case"mapy":this.map.removeLayer(this.currentLayer),this.currentLayer=this.mapyLayer,this.map.addLayer(this.currentLayer);break;case"outdoors":this.map.removeLayer(this.currentLayer),this.currentLayer=this.outdoorsLayer,this.map.addLayer(this.currentLayer);break;case"terrain":this.map.removeLayer(this.currentLayer),this.currentLayer=this.googleTerrainLayer,this.map.addLayer(this.currentLayer);break;case"satellite":this.map.removeLayer(this.currentLayer),this.currentLayer=this.googleSatelliteLayer,this.map.addLayer(this.currentLayer);break}mg(e)}mapMoved(e){const t=new CustomEvent("map-moved",{detail:{coordinates:e}});window.dispatchEvent(t)}locateMe(){this.geolocation.getPosition()?this.view.animate({center:this.geolocation.getPosition(),zoom:18,duration:250}):navigator.geolocation.getCurrentPosition(e=>{this.view.animate({center:gi([e.coords.longitude,e.coords.latitude]),zoom:18,duration:250}),this.watchMe()},e=>{console.log(e)})}watchMe(){this.geolocation.setTracking(!0);const e=new sn;this.geolocation.on("change:accuracyGeometry",()=>{e.setGeometry(this.geolocation.getAccuracyGeometry())}),this.geolocation.on("error",function(i){console.log(i)});const t=new sn;t.setStyle(new Rt({image:new Kt({radius:6,fill:new Gt({color:"#000000"}),stroke:new ii({color:"#fff",width:2})})})),e.setStyle(new Rt({fill:new Gt({color:[255,255,255,.5]}),stroke:new ii({color:"#00000",width:2})})),this.geolocation.on("change:position",()=>{const i=this.geolocation.getPosition();t.setGeometry(i?new Yi(i):null)}),this.geolocationLayer=new _g(e,t),this.map.addLayer(this.geolocationLayer)}}class Wx{constructor(e,t,i){this.osmLayer=new Ea,this.springLayer=new cn({source:new Hi({features:[new sn({geometry:new Yi(gi(t)),type:"old"}),new sn({geometry:new Yi(gi(i)),type:"new"})]}),style:r=>{if(r.get("type")=="old")return new Rt({image:new Kt({radius:12,stroke:new ii({color:[0,0,0,.33],width:2})})});if(r.get("type")=="new")return new Rt({image:new Kt({radius:12,stroke:new ii({color:[0,0,0,1],width:2})})})},zIndex:500}),this.view=new ci({center:gi(i),zoom:18,enableRotation:!1}),this.view.fit(this.springLayer.getSource().getExtent()),this.scaleControl=new xa({units:"metric",bar:!1,steps:4,text:!0,minWidth:100}),this.map=new ya({controls:Gs().extend([this.scaleControl]),target:e,layers:[this.osmLayer,this.springLayer],view:this.view})}}/*!
  * PhotoSwipe Lightbox 5.3.2 - https://photoswipe.com
  * (c) 2022 Dmytro Semenov
  */function ps(n,e,t){const i=document.createElement(e||"div");return n&&(i.className=n),t&&t.appendChild(i),i}function Yx(n,e,t){let i="translate3d("+n+"px,"+(e||0)+"px,0)";return t!==void 0&&(i+=" scale3d("+t+","+t+",1)"),i}function tc(n,e,t){n.style.width=typeof e=="number"?e+"px":e,n.style.height=typeof t=="number"?t+"px":t}const fi={IDLE:"idle",LOADING:"loading",LOADED:"loaded",ERROR:"error"};function Xx(n){if(n.which===2||n.ctrlKey||n.metaKey||n.altKey||n.shiftKey)return!0}function Fo(n,e,t=document){let i=[];if(n instanceof Element)i=[n];else if(n instanceof NodeList||Array.isArray(n))i=Array.from(n);else{const r=typeof n=="string"?n:e;r&&(i=Array.from(t.querySelectorAll(r)))}return i}function Hx(n){return typeof n=="function"&&n.prototype&&n.prototype.goTo}function ed(){return!!(navigator.vendor&&navigator.vendor.match(/apple/i))}class Qx{constructor(e,t){this.type=e,t&&Object.assign(this,t)}preventDefault(){this.defaultPrevented=!0}}class Vx{constructor(){this._listeners={},this._filters={},this.pswp=void 0,this.options=void 0}addFilter(e,t,i=100){this._filters[e]||(this._filters[e]=[]),this._filters[e].push({fn:t,priority:i}),this._filters[e].sort((r,s)=>r.priority-s.priority),this.pswp&&this.pswp.addFilter(e,t,i)}removeFilter(e,t){this._filters[e]&&(this._filters[e]=this._filters[e].filter(i=>i.fn!==t)),this.pswp&&this.pswp.removeFilter(e,t)}applyFilters(e,...t){return this._filters[e]&&this._filters[e].forEach(i=>{t[0]=i.fn.apply(this,t)}),t[0]}on(e,t){this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t),this.pswp&&this.pswp.on(e,t)}off(e,t){this._listeners[e]&&(this._listeners[e]=this._listeners[e].filter(i=>t!==i)),this.pswp&&this.pswp.off(e,t)}dispatch(e,t){if(this.pswp)return this.pswp.dispatch(e,t);const i=new Qx(e,t);return this._listeners&&this._listeners[e]&&this._listeners[e].forEach(r=>{r.call(this,i)}),i}}class Kx{constructor(e,t){this.element=ps("pswp__img pswp__img--placeholder",e?"img":"",t),e&&(this.element.decoding="async",this.element.alt="",this.element.src=e,this.element.setAttribute("role","presentation")),this.element.setAttribute("aria-hiden","true")}setDisplayedSize(e,t){!this.element||(this.element.tagName==="IMG"?(tc(this.element,250,"auto"),this.element.style.transformOrigin="0 0",this.element.style.transform=Yx(0,0,e/250)):tc(this.element,e,t))}destroy(){this.element.parentNode&&this.element.remove(),this.element=null}}class $x{constructor(e,t,i){this.instance=t,this.data=e,this.index=i,this.element=void 0,this.displayedImageWidth=0,this.displayedImageHeight=0,this.width=Number(this.data.w)||Number(this.data.width)||0,this.height=Number(this.data.h)||Number(this.data.height)||0,this.isAttached=!1,this.hasSlide=!1,this.state=fi.IDLE,this.data.type?this.type=this.data.type:this.data.src?this.type="image":this.type="html",this.instance.dispatch("contentInit",{content:this})}removePlaceholder(){this.placeholder&&!this.keepPlaceholder()&&setTimeout(()=>{this.placeholder&&(this.placeholder.destroy(),this.placeholder=null)},1e3)}load(e,t){if(this.slide&&this.usePlaceholder())if(this.placeholder){const i=this.placeholder.element;i&&!i.parentElement&&this.slide.container.prepend(i)}else{const i=this.instance.applyFilters("placeholderSrc",this.data.msrc&&this.slide.isFirstSlide?this.data.msrc:!1,this);this.placeholder=new Kx(i,this.slide.container)}this.element&&!t||this.instance.dispatch("contentLoad",{content:this,isLazy:e}).defaultPrevented||(this.isImageContent()?(this.element=ps("pswp__img","img"),this.displayedImageWidth&&this.loadImage(e)):(this.element=ps("pswp__content"),this.element.innerHTML=this.data.html||""),t&&this.slide&&this.slide.updateContentSize(!0))}loadImage(e){const t=this.element;this.instance.dispatch("contentLoadImage",{content:this,isLazy:e}).defaultPrevented||(this.updateSrcsetSizes(),this.data.srcset&&(t.srcset=this.data.srcset),t.src=this.data.src,t.alt=this.data.alt||"",this.state=fi.LOADING,t.complete?this.onLoaded():(t.onload=()=>{this.onLoaded()},t.onerror=()=>{this.onError()}))}setSlide(e){this.slide=e,this.hasSlide=!0,this.instance=e.pswp}onLoaded(){this.state=fi.LOADED,this.slide&&(this.instance.dispatch("loadComplete",{slide:this.slide,content:this}),this.slide.isActive&&this.slide.heavyAppended&&!this.element.parentNode&&(this.append(),this.slide.updateContentSize(!0)),(this.state===fi.LOADED||this.state===fi.ERROR)&&this.removePlaceholder())}onError(){this.state=fi.ERROR,this.slide&&(this.displayError(),this.instance.dispatch("loadComplete",{slide:this.slide,isError:!0,content:this}),this.instance.dispatch("loadError",{slide:this.slide,content:this}))}isLoading(){return this.instance.applyFilters("isContentLoading",this.state===fi.LOADING,this)}isError(){return this.state===fi.ERROR}isImageContent(){return this.type==="image"}setDisplayedSize(e,t){if(!!this.element&&(this.placeholder&&this.placeholder.setDisplayedSize(e,t),!this.instance.dispatch("contentResize",{content:this,width:e,height:t}).defaultPrevented&&(tc(this.element,e,t),this.isImageContent()&&!this.isError()))){const i=!this.displayedImageWidth&&e;this.displayedImageWidth=e,this.displayedImageHeight=t,i?this.loadImage(!1):this.updateSrcsetSizes(),this.slide&&this.instance.dispatch("imageSizeChange",{slide:this.slide,width:e,height:t,content:this})}}isZoomable(){return this.instance.applyFilters("isContentZoomable",this.isImageContent()&&this.state!==fi.ERROR,this)}updateSrcsetSizes(){if(this.data.srcset){const e=this.element,t=this.instance.applyFilters("srcsetSizesWidth",this.displayedImageWidth,this);(!e.dataset.largestUsedSize||t>parseInt(e.dataset.largestUsedSize,10))&&(e.sizes=t+"px",e.dataset.largestUsedSize=String(t))}}usePlaceholder(){return this.instance.applyFilters("useContentPlaceholder",this.isImageContent(),this)}lazyLoad(){this.instance.dispatch("contentLazyLoad",{content:this}).defaultPrevented||this.load(!0)}keepPlaceholder(){return this.instance.applyFilters("isKeepingPlaceholder",this.isLoading(),this)}destroy(){this.hasSlide=!1,this.slide=null,!this.instance.dispatch("contentDestroy",{content:this}).defaultPrevented&&(this.remove(),this.placeholder&&(this.placeholder.destroy(),this.placeholder=null),this.isImageContent()&&this.element&&(this.element.onload=null,this.element.onerror=null,this.element=null))}displayError(){if(this.slide){let e=ps("pswp__error-msg");e.innerText=this.instance.options.errorMsg,e=this.instance.applyFilters("contentErrorElement",e,this),this.element=ps("pswp__content pswp__error-msg-container"),this.element.appendChild(e),this.slide.container.innerText="",this.slide.container.appendChild(this.element),this.slide.updateContentSize(!0),this.removePlaceholder()}}append(){if(this.isAttached)return;if(this.isAttached=!0,this.state===fi.ERROR){this.displayError();return}if(this.instance.dispatch("contentAppend",{content:this}).defaultPrevented)return;const e="decode"in this.element;this.isImageContent()?e&&this.slide&&(!this.slide.isActive||ed())?(this.isDecoding=!0,this.element.decode().finally(()=>{this.isDecoding=!1,this.appendImage()})):this.appendImage():this.element&&!this.element.parentNode&&this.slide.container.appendChild(this.element)}activate(){this.instance.dispatch("contentActivate",{content:this}).defaultPrevented||this.slide&&(this.isImageContent()&&this.isDecoding&&!ed()?this.appendImage():this.isError()&&this.load(!1,!0))}deactivate(){this.instance.dispatch("contentDeactivate",{content:this})}remove(){this.isAttached=!1,!this.instance.dispatch("contentRemove",{content:this}).defaultPrevented&&(this.element&&this.element.parentNode&&this.element.remove(),this.placeholder&&this.placeholder.element&&this.placeholder.element.remove())}appendImage(){!this.isAttached||this.instance.dispatch("contentAppendImage",{content:this}).defaultPrevented||(this.slide&&this.element&&!this.element.parentNode&&this.slide.container.appendChild(this.element),(this.state===fi.LOADED||this.state===fi.ERROR)&&this.removePlaceholder())}}function Zx(n,e){if(n.getViewportSizeFn){const t=n.getViewportSizeFn(n,e);if(t)return t}return{x:document.documentElement.clientWidth,y:window.innerHeight}}function Po(n,e,t,i,r){let s;if(e.paddingFn)s=e.paddingFn(t,i,r)[n];else if(e.padding)s=e.padding[n];else{const o="padding"+n[0].toUpperCase()+n.slice(1);e[o]&&(s=e[o])}return s||0}function qx(n,e,t,i){return{x:e.x-Po("left",n,e,t,i)-Po("right",n,e,t,i),y:e.y-Po("top",n,e,t,i)-Po("bottom",n,e,t,i)}}const td=4e3;class Jx{constructor(e,t,i,r){this.pswp=r,this.options=e,this.itemData=t,this.index=i}update(e,t,i){this.elementSize={x:e,y:t},this.panAreaSize=i;const r=this.panAreaSize.x/this.elementSize.x,s=this.panAreaSize.y/this.elementSize.y;this.fit=Math.min(1,r<s?r:s),this.fill=Math.min(1,r>s?r:s),this.vFill=Math.min(1,s),this.initial=this._getInitial(),this.secondary=this._getSecondary(),this.max=Math.max(this.initial,this.secondary,this._getMax()),this.min=Math.min(this.fit,this.initial,this.secondary),this.pswp&&this.pswp.dispatch("zoomLevelsUpdate",{zoomLevels:this,slideData:this.itemData})}_parseZoomLevelOption(e){const t=e+"ZoomLevel",i=this.options[t];if(!!i)return typeof i=="function"?i(this):i==="fill"?this.fill:i==="fit"?this.fit:Number(i)}_getSecondary(){let e=this._parseZoomLevelOption("secondary");return e||(e=Math.min(1,this.fit*3),e*this.elementSize.x>td&&(e=td/this.elementSize.x),e)}_getInitial(){return this._parseZoomLevelOption("initial")||this.fit}_getMax(){const e=this._parseZoomLevelOption("max");return e||Math.max(1,this.fit*4)}}function yg(n,e,t){const i=e.createContentFromData(n,t);if(!i||!i.lazyLoad)return;const{options:r}=e,s=e.viewportSize||Zx(r,e),o=qx(r,s,n,t),a=new Jx(r,n,-1);return a.update(i.width,i.height,o),i.lazyLoad(),i.setDisplayedSize(Math.ceil(i.width*a.initial),Math.ceil(i.height*a.initial)),i}function eE(n,e){const t=e.getItemData(n);if(!e.dispatch("lazyLoadSlide",{index:n,itemData:t}).defaultPrevented)return yg(t,e,n)}class tE extends Vx{getNumItems(){let e;const{dataSource:t}=this.options;t?"length"in t?e=t.length:"gallery"in t&&(t.items||(t.items=this._getGalleryDOMElements(t.gallery)),t.items&&(e=t.items.length)):e=0;const i=this.dispatch("numItems",{dataSource:t,numItems:e});return this.applyFilters("numItems",i.numItems,t)}createContentFromData(e,t){return new $x(e,this,t)}getItemData(e){const{dataSource:t}=this.options;let i;Array.isArray(t)?i=t[e]:t&&t.gallery&&(t.items||(t.items=this._getGalleryDOMElements(t.gallery)),i=t.items[e]);let r=i;r instanceof Element&&(r=this._domElementToItemData(r));const s=this.dispatch("itemData",{itemData:r||{},index:e});return this.applyFilters("itemData",s.itemData,e)}_getGalleryDOMElements(e){return this.options.children||this.options.childSelector?Fo(this.options.children,this.options.childSelector,e)||[]:[e]}_domElementToItemData(e){const t={element:e},i=e.tagName==="A"?e:e.querySelector("a");if(i){t.src=i.dataset.pswpSrc||i.href,i.dataset.pswpSrcset&&(t.srcset=i.dataset.pswpSrcset),t.width=parseInt(i.dataset.pswpWidth,10),t.height=parseInt(i.dataset.pswpHeight,10),t.w=t.width,t.h=t.height,i.dataset.pswpType&&(t.type=i.dataset.pswpType);const r=e.querySelector("img");r&&(t.msrc=r.currentSrc||r.src,t.alt=r.getAttribute("alt")),(i.dataset.pswpCropped||i.dataset.cropped)&&(t.thumbCropped=!0)}return this.applyFilters("domItemData",t,e,i)}lazyLoadData(e,t){return yg(e,this,t)}}class iE extends tE{constructor(e){super(),this.options=e||{},this._uid=0}init(){this.onThumbnailsClick=this.onThumbnailsClick.bind(this),Fo(this.options.gallery,this.options.gallerySelector).forEach(e=>{e.addEventListener("click",this.onThumbnailsClick,!1)})}onThumbnailsClick(e){if(Xx(e)||window.pswp||window.navigator.onLine===!1)return;let t={x:e.clientX,y:e.clientY};!t.x&&!t.y&&(t=null);let i=this.getClickedIndex(e);i=this.applyFilters("clickedIndex",i,e,this);const r={gallery:e.currentTarget};i>=0&&(e.preventDefault(),this.loadAndOpen(i,r,t))}getClickedIndex(e){if(this.options.getClickedIndexFn)return this.options.getClickedIndexFn.call(this,e);const t=e.target,r=Fo(this.options.children,this.options.childSelector,e.currentTarget).findIndex(s=>s===t||s.contains(t));return r!==-1?r:this.options.children||this.options.childSelector?-1:0}loadAndOpen(e,t,i){return window.pswp?!1:(this.options.index=e,this.options.initialPointerPos=i,this.shouldOpen=!0,this.preload(e,t),!0)}preload(e,t){const{options:i}=this;t&&(i.dataSource=t);const r=[],s=typeof i.pswpModule;if(Hx(i.pswpModule))r.push(Promise.resolve(i.pswpModule));else{if(s==="string")throw new Error("pswpModule as string is no longer supported");if(s==="function")r.push(i.pswpModule());else throw new Error("pswpModule is not valid")}typeof i.openPromise=="function"&&r.push(i.openPromise()),i.preloadFirstSlide!==!1&&e>=0&&(this._preloadedContent=eE(e,this));const o=++this._uid;Promise.all(r).then(a=>{if(this.shouldOpen){const l=a[0];this._openPhotoswipe(l,o)}})}_openPhotoswipe(e,t){if(t!==this._uid&&this.shouldOpen||(this.shouldOpen=!1,window.pswp))return;const i=typeof e=="object"?new e.default(this.options):new e(this.options);this.pswp=i,window.pswp=i,Object.keys(this._listeners).forEach(r=>{this._listeners[r].forEach(s=>{i.on(r,s)})}),Object.keys(this._filters).forEach(r=>{this._filters[r].forEach(s=>{i.addFilter(r,s.fn,s.priority)})}),this._preloadedContent&&(i.contentLoader.addToCache(this._preloadedContent),this._preloadedContent=null),i.on("destroy",()=>{this.pswp=null,window.pswp=null}),i.init()}destroy(){this.pswp&&this.pswp.destroy(),this.shouldOpen=!1,this._listeners=null,Fo(this.options.gallery,this.options.gallerySelector).forEach(e=>{e.removeEventListener("click",this.onThumbnailsClick,!1)})}}var vg;vg=class{isValid(e){var t;t=!0;try{return this.validate(e),t}catch{return t=!1,t}}validate(e){return this.checkContainsNoLetters(e),this.checkValidOrientation(e),this.checkNumbers(e)}checkContainsNoLetters(e){var t;if(t=/(?![neswd])[a-z]/i.test(e),t)throw new Error("Coordinate contains invalid alphanumeric characters.")}checkValidOrientation(e){var t;if(t=/^[^nsew]*[ns]?[^nsew]*[ew]?[^nsew]*$/i.test(e),!t)throw new Error("Invalid cardinal direction.")}checkNumbers(e){var t;return t=e.match(/-?\d+(\.\d+)?/g),this.checkAnyCoordinateNumbers(t),this.checkEvenCoordinateNumbers(t),this.checkMaximumCoordinateNumbers(t)}checkAnyCoordinateNumbers(e){if(e.length===0)throw new Error("Could not find any coordinate number")}checkEvenCoordinateNumbers(e){var t;if(t=e.length%2,t)throw new Error("Uneven count of latitude/longitude numbers")}checkMaximumCoordinateNumbers(e){if(e.length>6)throw new Error("Too many coordinate numbers")}};var nE=vg,wg;wg=class{constructor(e){e=this.normalizeCoordinateNumbers(e),this.sign=this.normalizedSignOf(e[0]),[this.degrees,this.minutes,this.seconds,this.milliseconds]=e.map(Math.abs)}normalizeCoordinateNumbers(e){var t,i,r,s,o;for(o=[0,0,0,0],i=r=0,s=e.length;r<s;i=++r)t=e[i],o[i]=parseFloat(t);return o}normalizedSignOf(e){return e>=0?1:-1}detectSpecialFormats(){if(this.degreesCanBeSpecial()){if(this.degreesCanBeMilliseconds())return this.degreesAsMilliseconds();if(this.degreesCanBeDegreesMinutesAndSeconds())return this.degreesAsDegreesMinutesAndSeconds();if(this.degreesCanBeDegreesAndMinutes())return this.degreesAsDegreesAndMinutes()}}degreesCanBeSpecial(){var e;return e=!1,!this.minutes&&!this.seconds&&(e=!0),e}degreesCanBeMilliseconds(){var e;return this.degrees>909090?e=!0:e=!1,e}degreesAsMilliseconds(){return this.milliseconds=this.degrees,this.degrees=0}degreesCanBeDegreesMinutesAndSeconds(){var e;return this.degrees>9090?e=!0:e=!1,e}degreesAsDegreesMinutesAndSeconds(){var e;return e=Math.floor(this.degrees/1e4),this.minutes=Math.floor((this.degrees-e*1e4)/100),this.seconds=Math.floor(this.degrees-e*1e4-this.minutes*100),this.degrees=e}degreesCanBeDegreesAndMinutes(){var e;return this.degrees>360?e=!0:e=!1,e}degreesAsDegreesAndMinutes(){var e;return e=Math.floor(this.degrees/100),this.minutes=this.degrees-e*100,this.degrees=e}toDecimal(){var e;return e=this.sign*(this.degrees+this.minutes/60+this.seconds/3600+this.milliseconds/36e5),e}};var rE=wg,Ag,xg,Eg;Eg=nE;Ag=rE;xg=class{constructor(e){this.coordinates=e,this.latitudeNumbers=null,this.longitudeNumbers=null,this.validate(),this.parse()}validate(){var e;return e=new Eg,e.validate(this.coordinates)}parse(){return this.groupCoordinateNumbers(),this.latitude=this.extractLatitude(),this.longitude=this.extractLongitude()}groupCoordinateNumbers(){var e,t;return e=this.extractCoordinateNumbers(this.coordinates),t=e.length/2,this.latitudeNumbers=e.slice(0,t),this.longitudeNumbers=e.slice(0-t)}extractCoordinateNumbers(e){return e.match(/-?\d+(\.\d+)?/g)}extractLatitude(){var e;return e=this.coordinateNumbersToDecimal(this.latitudeNumbers),this.latitudeIsNegative()&&(e=e*-1),e}extractLongitude(){var e;return e=this.coordinateNumbersToDecimal(this.longitudeNumbers),this.longitudeIsNegative()&&(e=e*-1),e}coordinateNumbersToDecimal(e){var t,i;return t=new Ag(e),t.detectSpecialFormats(),i=t.toDecimal(),i}latitudeIsNegative(){var e;return e=this.coordinates.match(/s/i),e}longitudeIsNegative(){var e;return e=this.coordinates.match(/w/i),e}getLatitude(){return this.latitude}getLongitude(){return this.longitude}};var sE=xg;Nd.plugin(Ml);window.Alpine=Nd;window.ImageBlobReduce=new j_;window.uuidv1=H_;window.getInitialSourceName=qc;window.rodnikConfig={zoomLevels:{approximated:6,final:9}};window.initOpenLayers=function(n){window.rodnikMap=new jx(n)};window.initOpenHelper=function(n,e){window.rodnikHelper=new zx(n,e)};window.initOpenPicker=function(n,e){window.rodnikPicker=new Ux(n,e)};window.parseCoordinates=function(n){return new sE(n)};window.initOpenDiffer=function(n,e,t){window.rodnikDiffer=new Wx(n,e,t)};window.initPhotoSwipe=function(n){new iE({gallery:n,children:".photoswipeImage",pswpModule:()=>Rp(()=>import("./photoswipe.esm.382b1873.js"),[])}).init()};ac.start();window.ymCode=90143259;
